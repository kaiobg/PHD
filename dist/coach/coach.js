/*! For license information please see coach.js.LICENSE.txt */
(()=>{var t={357:function(t){!function(e,i){t.exports=i(e._Highcharts,e._Highcharts.SeriesRegistry,e._Highcharts.Series,e._Highcharts.Series.types.column,e._Highcharts.Color,e._Highcharts.Templating,e._Highcharts.Point,e._Highcharts.Chart,e._Highcharts.SVGElement,e._Highcharts.StackItem)}("undefined"==typeof window?this:window,((t,e,i,r,s,n,o,a,l,h)=>(()=>{"use strict";var c,d,u,p={960:t=>{t.exports=a},620:t=>{t.exports=s},260:t=>{t.exports=o},28:t=>{t.exports=l},448:t=>{t.exports=r},820:t=>{t.exports=i},512:t=>{t.exports=e},184:t=>{t.exports=h},984:t=>{t.exports=n},944:e=>{e.exports=t}},f={};function g(t){var e=f[t];if(void 0!==e)return e.exports;var i=f[t]={exports:{}};return p[t](i,i.exports,g),i.exports}g.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return g.d(e,{a:e}),e},g.d=(t,e)=>{for(var i in e)g.o(e,i)&&!g.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},g.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var m={};g.d(m,{default:()=>Fs});var y=g(944),v=g.n(y),b=g(512),x=g.n(b),w=g(820),E=g.n(w);let{deg2rad:T}=v(),{fireEvent:S,isNumber:A,pick:k,relativeLength:C}=v();!function(t){t.getCenter=function(){let t,e,i,r=this.options,s=this.chart,n=2*(r.slicedOffset||0),o=s.plotWidth-2*n,a=s.plotHeight-2*n,l=r.center,h=Math.min(o,a),c=r.thickness,d=r.size,u=r.innerSize||0;"string"==typeof d&&(d=parseFloat(d)),"string"==typeof u&&(u=parseFloat(u));let p=[k(l?.[0],"50%"),k(l?.[1],"50%"),k(d&&d<0?void 0:r.size,"100%"),k(u&&u<0?void 0:r.innerSize||0,"0%")];for(!s.angular||this instanceof E()||(p[3]=0),e=0;e<4;++e)i=p[e],t=e<2||2===e&&/%$/.test(i),p[e]=C(i,[o,a,h,p[2]][e])+(t?n:0);return p[3]>p[2]&&(p[3]=p[2]),A(c)&&2*c<p[2]&&c>0&&(p[3]=p[2]-2*c),S(this,"afterGetCenter",{positions:p}),p},t.getStartAndEndRadians=function(t,e){let i=A(t)?t:0,r=A(e)&&e>i&&e-i<360?e:i+360;return{start:T*(i+-90),end:T*(r+-90)}}}(c||(c={}));let I=c,{addEvent:P,correctFloat:M,defined:L,pick:O}=v();function N(t){let e,i=this;return t&&i.pane.forEach((r=>{_(t.chartX-i.plotLeft,t.chartY-i.plotTop,r.center)&&(e=r)})),e}function _(t,e,i,r,s){let n=!0,o=i[0],a=i[1],l=Math.sqrt(Math.pow(t-o,2)+Math.pow(e-a,2));if(L(r)&&L(s)){let i=Math.atan2(M(e-a,8),M(t-o,8));s!==r&&(n=r>s?i>=r&&i<=Math.PI||i<=s&&i>=-Math.PI:i>=r&&i<=M(s,8))}return l<=Math.ceil(i[2]/2)&&n}function D(t){this.polar&&(t.options.inverted&&([t.x,t.y]=[t.y,t.x]),t.isInsidePlot=this.pane.some((e=>_(t.x,t.y,e.center,e.axis&&e.axis.normalizedStartAngleRad,e.axis&&e.axis.normalizedEndAngleRad))))}function R(t){let e=this.chart;t.hoverPoint&&t.hoverPoint.plotX&&t.hoverPoint.plotY&&e.hoverPane&&!_(t.hoverPoint.plotX,t.hoverPoint.plotY,e.hoverPane.center)&&(t.hoverPoint=void 0)}function F(t){let e=this.chart;e.polar?(e.hoverPane=e.getHoverPane(t),t.filter=function(i){return i.visible&&!(!t.shared&&i.directTouch)&&O(i.options.enableMouseTracking,!0)&&(!e.hoverPane||i.xAxis.pane===e.hoverPane)}):e.hoverPane=void 0}let B={pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}},{extend:z,merge:U,splat:H}=v();class V{constructor(t,e){this.coll="pane",this.init(t,e)}init(t,e){this.chart=e,this.background=[],e.pane.push(this),this.setOptions(t)}setOptions(t){this.options=t=U(B.pane,this.chart.angular?{background:{}}:void 0,t)}render(){let t=this.options,e=this.chart.renderer;this.group||(this.group=e.g("pane-group").attr({zIndex:t.zIndex||0}).add()),this.updateCenter();let i=this.options.background;if(i){let t=Math.max((i=H(i)).length,this.background.length||0);for(let e=0;e<t;e++)i[e]&&this.axis?this.renderBackground(U(B.background,i[e]),e):this.background[e]&&(this.background[e]=this.background[e].destroy(),this.background.splice(e,1))}}renderBackground(t,e){let i={class:"highcharts-pane "+(t.className||"")},r="animate";this.chart.styledMode||z(i,{fill:t.backgroundColor,stroke:t.borderColor,"stroke-width":t.borderWidth}),this.background[e]||(this.background[e]=this.chart.renderer.path().add(this.group),r="attr"),this.background[e][r]({d:this.axis.getPlotBandPath(t.from,t.to,t)}).attr(i)}updateCenter(t){this.center=(t||this.axis||{}).center=I.getCenter.call(this)}update(t,e){U(!0,this.options,t),this.setOptions(this.options),this.render(),this.chart.axes.forEach((function(t){t.pane===this&&(t.pane=null,t.update({},e))}),this)}}V.compose=function(t,e){let i=t.prototype;i.getHoverPane||(i.collectionsWithUpdate.push("pane"),i.getHoverPane=N,P(t,"afterIsInsidePlot",D),P(e,"afterGetHoverData",R),P(e,"beforeGetHoverData",F))};let{area:{prototype:{pointClass:j,pointClass:{prototype:G}}}}=x().seriesTypes,{defined:W,isNumber:X}=v(),{noop:q}=v(),{area:Y,area:{prototype:K},column:{prototype:$}}=x().seriesTypes,{addEvent:Q,defined:Z,extend:J,isArray:tt,isNumber:et,pick:it,merge:rt}=v();class st extends Y{toYData(t){return[t.low,t.high]}highToXY(t){let e=this.chart,i=this.xAxis.postTranslate(t.rectPlotX||0,this.yAxis.len-(t.plotHigh||0));t.plotHighX=i.x-e.plotLeft,t.plotHigh=i.y-e.plotTop,t.plotLowX=t.plotX}getGraphPath(t){let e,i,r,s=[],n=[],o=K.getGraphPath,a=this.options,l=this.chart.polar,h=l&&!1!==a.connectEnds,c=a.connectNulls,d=a.step;for(e=(t=t||this.points).length;e--;){i=t[e];let o=l?{plotX:i.rectPlotX,plotY:i.yBottom,doCurve:!1}:{plotX:i.plotX,plotY:i.plotY,doCurve:!1};i.isNull||h||c||t[e+1]&&!t[e+1].isNull||n.push(o),r={polarPlotY:i.polarPlotY,rectPlotX:i.rectPlotX,yBottom:i.yBottom,plotX:it(i.plotHighX,i.plotX),plotY:i.plotHigh,isNull:i.isNull},n.push(r),s.push(r),i.isNull||h||c||t[e-1]&&!t[e-1].isNull||n.push(o)}let u=o.call(this,t);d&&(!0===d&&(d="left"),a.step={left:"right",center:"center",right:"left"}[d]);let p=o.call(this,s),f=o.call(this,n);a.step=d;let g=[].concat(u,p);return!this.chart.polar&&f[0]&&"M"===f[0][0]&&(f[0]=["L",f[0][1],f[0][2]]),this.graphPath=g,this.areaPath=u.concat(f),g.isArea=!0,g.xMap=u.xMap,this.areaPath.xMap=u.xMap,g}drawDataLabels(){let t,e,i,r,s,n=this.points,o=n.length,a=[],l=this.options.dataLabels,h=this.chart.inverted;if(l){if(tt(l)?(r=l[0]||{enabled:!1},s=l[1]||{enabled:!1}):((r=J({},l)).x=l.xHigh,r.y=l.yHigh,(s=J({},l)).x=l.xLow,s.y=l.yLow),r.enabled||this.hasDataLabels?.()){for(t=o;t--;)if(e=n[t]){let{plotHigh:s=0,plotLow:n=0}=e;i=r.inside?s<n:s>n,e.y=e.high,e._plotY=e.plotY,e.plotY=s,a[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=i,h?r.align||(r.align=i?"right":"left"):r.verticalAlign||(r.verticalAlign=i?"top":"bottom")}for(this.options.dataLabels=r,K.drawDataLabels&&K.drawDataLabels.apply(this,arguments),t=o;t--;)(e=n[t])&&(e.dataLabelUpper=e.dataLabel,e.dataLabel=a[t],delete e.dataLabels,e.y=e.low,e.plotY=e._plotY)}if(s.enabled||this.hasDataLabels?.()){for(t=o;t--;)if(e=n[t]){let{plotHigh:t=0,plotLow:r=0}=e;i=s.inside?t<r:t>r,e.below=!i,h?s.align||(s.align=i?"left":"right"):s.verticalAlign||(s.verticalAlign=i?"bottom":"top")}this.options.dataLabels=s,K.drawDataLabels&&K.drawDataLabels.apply(this,arguments)}if(r.enabled)for(t=o;t--;)(e=n[t])&&(e.dataLabels=[e.dataLabelUpper,e.dataLabel].filter((function(t){return!!t})));this.options.dataLabels=l}}alignDataLabel(){$.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let t={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:t,lowMarker:e}}=this;this.options.marker=rt(t,e),e.symbol&&(this.symbol=e.symbol)}return t}restoreMarkerSettings(t){this.options.marker=t.marker,this.symbol=t.symbol}drawPoints(){let t,e,i=this.points.length,r=this.modifyMarkerSettings();for(K.drawPoints.apply(this,arguments),this.restoreMarkerSettings(r),t=0;t<i;)(e=this.points[t]).graphics=e.graphics||[],e.origProps={plotY:e.plotY,plotX:e.plotX,isInside:e.isInside,negative:e.negative,zone:e.zone,y:e.y},(e.graphic||e.graphics[0])&&(e.graphics[0]=e.graphic),e.graphic=e.graphics[1],e.plotY=e.plotHigh,Z(e.plotHighX)&&(e.plotX=e.plotHighX),e.y=it(e.high,e.origProps.y),e.negative=e.y<(this.options.threshold||0),this.zones.length&&(e.zone=e.getZone()),this.chart.polar||(e.isInside=e.isTopInside=void 0!==e.plotY&&e.plotY>=0&&e.plotY<=this.yAxis.len&&e.plotX>=0&&e.plotX<=this.xAxis.len),t++;for(K.drawPoints.apply(this,arguments),t=0;t<i;)(e=this.points[t]).graphics=e.graphics||[],(e.graphic||e.graphics[1])&&(e.graphics[1]=e.graphic),e.graphic=e.graphics[0],e.origProps&&(J(e,e.origProps),delete e.origProps),t++}hasMarkerChanged(t,e){let i=t.lowMarker,r=e.lowMarker||{};return i&&(!1===i.enabled||r.symbol!==i.symbol||r.height!==i.height||r.width!==i.width)||super.hasMarkerChanged(t,e)}}st.defaultOptions=rt(Y.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),Q(st,"afterTranslate",(function(){"low,high"===this.pointArrayMap.join(",")&&this.points.forEach((t=>{let e=t.high,i=t.plotY;t.isNull?t.plotY=void 0:(t.plotLow=i,t.plotHigh=et(e)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(e):e,!1,!0,void 0,!0):void 0,this.dataModify&&(t.yBottom=t.plotHigh))}))}),{order:0}),Q(st,"afterTranslate",(function(){this.points.forEach((t=>{if(this.chart.polar)this.highToXY(t),t.plotLow=t.plotY,t.tooltipPos=[((t.plotHighX||0)+(t.plotLowX||0))/2,((t.plotHigh||0)+(t.plotLow||0))/2];else{let e=t.pos(!1,t.plotLow),i=t.pos(!1,t.plotHigh);e&&i&&(e[0]=(e[0]+i[0])/2,e[1]=(e[1]+i[1])/2),t.tooltipPos=e}}))}),{order:3}),J(st.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:class extends j{setState(){let t=this.state,e=this.series,i=e.chart.polar;W(this.plotHigh)||(this.plotHigh=e.yAxis.toPixels(this.high,!0)),W(this.plotLow)||(this.plotLow=this.plotY=e.yAxis.toPixels(this.low,!0)),e.lowerStateMarkerGraphic=e.stateMarkerGraphic,e.stateMarkerGraphic=e.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,i&&X(this.plotHighX)&&(this.plotX=this.plotHighX),G.setState.apply(this,arguments),this.state=t,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],i&&X(this.plotLowX)&&(this.plotX=this.plotLowX),e.upperStateMarkerGraphic=e.stateMarkerGraphic,e.stateMarkerGraphic=e.lowerStateMarkerGraphic,e.lowerStateMarkerGraphic=void 0;let r=e.modifyMarkerSettings();G.setState.apply(this,arguments),e.restoreMarkerSettings(r)}haloPath(){let t=this.series.chart.polar,e=[];return this.plotY=this.plotLow,t&&X(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(e=G.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,t&&X(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(e=e.concat(G.haloPath.apply(this,arguments))),e}isValid(){return X(this.low)&&X(this.high)}},pointValKey:"low",setStackedPoints:q}),x().registerSeriesType("arearange",st);let nt=st,{spline:{prototype:ot}}=x().seriesTypes,{merge:at,extend:lt}=v();class ht extends nt{}ht.defaultOptions=at(nt.defaultOptions),lt(ht.prototype,{getPointSpline:ot.getPointSpline}),x().registerSeriesType("areasplinerange",ht);var ct=g(448),dt=g.n(ct);let{noop:ut}=v(),{crisp:pt,extend:ft,merge:gt,pick:mt,relativeLength:yt}=v();class vt extends(dt()){pointAttribs(){return{}}getWhiskerPair(t,e,i,r,s){let n=s.whiskers.strokeWidth(),o=(i,r)=>{let s=yt(i,2*t)/2,o=pt(r,n);return[["M",pt(e-s),o],["L",pt(e+s),o]]};return[...o(i,s.highPlot),...o(r,s.lowPlot)]}translate(){let t=this.yAxis,e=this.pointArrayMap;super.translate.apply(this),this.points.forEach((function(i){e.forEach((function(e){null!==i[e]&&(i[e+"Plot"]=t.translate(i[e],0,1,0,1))})),i.plotHigh=i.highPlot}))}drawPoints(){let t,e,i,r,s,n,o,a,l,h=this.points,c=this.options,d=this.chart,u=d.renderer,p=!1!==this.doQuartiles,f=this.options.whiskerLength;for(let g of h){let h=(n=g.graphic)?"animate":"attr",m=g.shapeArgs,y={},v={},b={},x={},w=g.color||this.color,E=g.options.whiskerLength||f;if(void 0!==g.plotY){let T;o=m.width,l=(a=m.x)+o,t=p?g.q1Plot:g.lowPlot,e=p?g.q3Plot:g.lowPlot,i=g.highPlot,r=g.lowPlot,n||(g.graphic=n=u.g("point").add(this.group),g.stem=u.path().addClass("highcharts-boxplot-stem").add(n),f&&(g.whiskers=u.path().addClass("highcharts-boxplot-whisker").add(n)),p&&(g.box=u.path(void 0).addClass("highcharts-boxplot-box").add(n)),g.medianShape=u.path(void 0).addClass("highcharts-boxplot-median").add(n)),d.styledMode||(v.stroke=g.stemColor||c.stemColor||w,v["stroke-width"]=mt(g.stemWidth,c.stemWidth,c.lineWidth),v.dashstyle=g.stemDashStyle||c.stemDashStyle||c.dashStyle,g.stem.attr(v),E&&(b.stroke=g.whiskerColor||c.whiskerColor||w,b["stroke-width"]=mt(g.whiskerWidth,c.whiskerWidth,c.lineWidth),b.dashstyle=g.whiskerDashStyle||c.whiskerDashStyle||c.dashStyle,g.whiskers.attr(b)),p&&(y.fill=g.fillColor||c.fillColor||w,y.stroke=c.lineColor||w,y["stroke-width"]=c.lineWidth||0,y.dashstyle=g.boxDashStyle||c.boxDashStyle||c.dashStyle,g.box.attr(y)),x.stroke=g.medianColor||c.medianColor||w,x["stroke-width"]=mt(g.medianWidth,c.medianWidth,c.lineWidth),x.dashstyle=g.medianDashStyle||c.medianDashStyle||c.dashStyle,g.medianShape.attr(x));let S=pt((g.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,g.stem.strokeWidth());if(T=[["M",S,e],["L",S,i],["M",S,t],["L",S,r]],g.stem[h]({d:T}),p){let i=g.box.strokeWidth();t=pt(t,i),e=pt(e,i),T=[["M",a=pt(a,i),e],["L",a,t],["L",l=pt(l,i),t],["L",l,e],["L",a,e],["Z"]],g.box[h]({d:T})}if(E){let t=o/2,e=this.getWhiskerPair(t,S,g.upperWhiskerLength??c.upperWhiskerLength??E,g.lowerWhiskerLength??c.lowerWhiskerLength??E,g);g.whiskers[h]({d:e})}T=[["M",a,s=pt(g.medianPlot,g.medianShape.strokeWidth())],["L",l,s]],g.medianShape[h]({d:T})}}}toYData(t){return[t.low,t.q1,t.median,t.q3,t.high]}}vt.defaultOptions=gt(dt().defaultOptions,{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}),ft(vt.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:ut,setStackedPoints:ut}),x().registerSeriesType("boxplot",vt);let bt=vt,xt={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0};var wt=g(620),Et=g.n(wt),Tt=g(984),St=g.n(Tt);let{parse:At}=Et(),{noop:kt}=v(),{arrayMax:Ct,arrayMin:It,isNumber:Pt,merge:Mt,pick:Lt,stableSort:Ot}=v(),Nt=class{constructor(t,e){this.setState=kt,this.init(t,e)}init(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e}addToLegend(t){t.splice(this.options.legendIndex,0,this)}drawLegendSymbol(t){let e,i=Lt(t.options.itemDistance,20),r=this.legendItem||{},s=this.options,n=s.ranges,o=s.connectorDistance;if(!n||!n.length||!Pt(n[0].value))return void(t.options.bubbleLegend.autoRanges=!0);Ot(n,(function(t,e){return e.value-t.value})),this.ranges=n,this.setOptions(),this.render();let a=this.getMaxLabelSize(),l=this.ranges[0].radius,h=2*l;e=(e=o-l+a.width)>0?e:0,this.maxLabel=a,this.movementX="left"===s.labels.align?e:0,r.labelWidth=h+e+i,r.labelHeight=h+a.height/2}setOptions(){let t=this.ranges,e=this.options,i=this.chart.series[e.seriesIndex],r=this.legend.baseline,s={zIndex:e.zIndex,"stroke-width":e.borderWidth},n={zIndex:e.zIndex,"stroke-width":e.connectorWidth},o={align:this.legend.options.rtl||"left"===e.labels.align?"right":"left",zIndex:e.zIndex},a=i.options.marker.fillOpacity,l=this.chart.styledMode;t.forEach((function(h,c){l||(s.stroke=Lt(h.borderColor,e.borderColor,i.color),s.fill=Lt(h.color,e.color,1!==a?At(i.color).setOpacity(a).get("rgba"):i.color),n.stroke=Lt(h.connectorColor,e.connectorColor,i.color)),t[c].radius=this.getRangeRadius(h.value),t[c]=Mt(t[c],{center:t[0].radius-t[c].radius+r}),l||Mt(!0,t[c],{bubbleAttribs:Mt(s),connectorAttribs:Mt(n),labelAttribs:o})}),this)}getRangeRadius(t){let e=this.options,i=this.options.seriesIndex,r=this.chart.series[i],s=e.ranges[0].value,n=e.ranges[e.ranges.length-1].value,o=e.minSize,a=e.maxSize;return r.getRadius.call(this,n,s,o,a,t)}render(){let t=this.legendItem||{},e=this.chart.renderer,i=this.options.zThreshold;for(let r of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),t.symbol=e.g("bubble-legend"),t.label=e.g("bubble-legend-item").css(this.legend.itemStyle||{}),t.symbol.translateX=0,t.symbol.translateY=0,t.symbol.add(t.label),t.label.add(t.group),this.ranges))r.value>=i&&this.renderRange(r);this.hideOverlappingLabels()}renderRange(t){let e=this.ranges[0],i=this.legend,r=this.options,s=r.labels,n=this.chart,o=n.series[r.seriesIndex],a=n.renderer,l=this.symbols,h=l.labels,c=t.center,d=Math.abs(t.radius),u=r.connectorDistance||0,p=s.align,f=i.options.rtl,g=r.borderWidth,m=r.connectorWidth,y=e.radius||0,v=c-d-g/2+m/2,b=(v%1?1:.5)-(m%2?0:.5),x=a.styledMode,w=f||"left"===p?-u:u;"center"===p&&(w=0,r.connectorDistance=0,t.labelAttribs.align="center"),l.bubbleItems.push(a.circle(y,c+b,d).attr(x?{}:t.bubbleAttribs).addClass((x?"highcharts-color-"+o.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(r.className||"")).add(this.legendItem.symbol)),l.connectors.push(a.path(a.crispLine([["M",y,v],["L",y+w,v]],r.connectorWidth)).attr(x?{}:t.connectorAttribs).addClass((x?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(r.connectorClassName||"")).add(this.legendItem.symbol));let E=a.text(this.formatLabel(t)).attr(x?{}:t.labelAttribs).css(x?{}:s.style).addClass("highcharts-bubble-legend-labels "+(r.labels.className||"")).add(this.legendItem.symbol),T={x:y+w+r.labels.x,y:v+r.labels.y+.4*E.getBBox().height};E.attr(T),h.push(E),E.placed=!0,E.alignAttr=T}getMaxLabelSize(){let t,e;return this.symbols.labels.forEach((function(i){e=i.getBBox(!0),t=t?e.width>t.width?e:t:e})),t||{}}formatLabel(t){let e=this.options,i=e.labels.formatter,r=e.labels.format,{numberFormatter:s}=this.chart;return r?St().format(r,t,this.chart):i?i.call(t):s(t.value,1)}hideOverlappingLabels(){let t=this.chart,e=this.options.labels.allowOverlap,i=this.symbols;!e&&i&&(t.hideOverlappingLabels(i.labels),i.labels.forEach((function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&i.connectors[e].show():i.connectors[e].hide()})))}getRanges(){let t,e,i=this.legend.bubbleLegend,r=i.chart.series,s=i.options.ranges,n=Number.MAX_VALUE,o=-Number.MAX_VALUE;return r.forEach((function(t){t.isBubble&&!t.ignoreSeries&&(e=t.getColumn("z").filter(Pt)).length&&(n=Lt(t.options.zMin,Math.min(n,Math.max(It(e),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),o=Lt(t.options.zMax,Math.max(o,Ct(e))))})),t=n===o?[{value:o}]:[{value:n},{value:(n+o)/2},{value:o,autoRanges:!0}],s.length&&s[0].radius&&t.reverse(),t.forEach((function(e,i){s&&s[i]&&(t[i]=Mt(s[i],e))})),t}predictBubbleSizes(){let t,e=this.chart,i=e.legend.options,r=i.floating,s="horizontal"===i.layout,n=s?e.legend.lastLineHeight:0,o=e.plotSizeX,a=e.plotSizeY,l=e.series[this.options.seriesIndex],h=l.getPxExtremes(),c=Math.ceil(h.minPxSize),d=Math.ceil(h.maxPxSize),u=Math.min(a,o),p=l.options.maxSize;return r||!/%$/.test(p)?t=d:(t=(u+n)*(p=parseFloat(p))/100/(p/100+1),(s&&a-t>=o||!s&&o-t>=a)&&(t=d)),[c,Math.ceil(t)]}updateRanges(t,e){let i=this.legend.options.bubbleLegend;i.minSize=t,i.maxSize=e,i.ranges=this.getRanges()}correctSizes(){let t=this.legend,e=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(e.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,e.maxPxSize),t.render())}},{setOptions:_t}=v(),{composed:Dt}=v(),{addEvent:Rt,objectEach:Ft,pushUnique:Bt,wrap:zt}=v();function Ut(t,e,i){let r,s,n,o=this.legend,a=Ht(this)>=0;o&&o.options.enabled&&o.bubbleLegend&&o.options.bubbleLegend.autoRanges&&a?(r=o.bubbleLegend.options,s=o.bubbleLegend.predictBubbleSizes(),o.bubbleLegend.updateRanges(s[0],s[1]),r.placed||(o.group.placed=!1,o.allItems.forEach((t=>{(n=t.legendItem||{}).group&&(n.group.translateY=void 0)}))),o.render(),r.placed||(this.getMargins(),this.axes.forEach((t=>{t.setScale(),t.updateNames(),Ft(t.ticks,(function(t){t.isNew=!0,t.isNewLabel=!0}))})),this.getMargins()),r.placed=!0,t.call(this,e,i),o.bubbleLegend.correctSizes(),Wt(o,Vt(o))):(t.call(this,e,i),o&&o.options.enabled&&o.bubbleLegend&&(o.render(),Wt(o,Vt(o))))}function Ht(t){let e=t.series,i=0;for(;i<e.length;){if(e[i]&&e[i].isBubble&&e[i].visible&&e[i].dataTable.rowCount)return i;i++}return-1}function Vt(t){let e,i,r,s=t.allItems,n=[],o=s.length,a=0,l=0;for(a=0;a<o;a++)if(i=s[a].legendItem||{},r=(s[a+1]||{}).legendItem||{},i.labelHeight&&(s[a].itemHeight=i.labelHeight),s[a]===s[o-1]||i.y!==r.y){for(n.push({height:0}),e=n[n.length-1];l<=a;l++)s[l].itemHeight>e.height&&(e.height=s[l].itemHeight);e.step=a}return n}function jt(t){let e=this.bubbleLegend,i=this.options,r=i.bubbleLegend,s=Ht(this.chart);e&&e.ranges&&e.ranges.length&&(r.ranges.length&&(r.autoRanges=!!r.ranges[0].autoRanges),this.destroyItem(e)),s>=0&&i.enabled&&r.enabled&&(r.seriesIndex=s,this.bubbleLegend=new Nt(r,this),this.bubbleLegend.addToLegend(t.allItems))}function Gt(t){let e;if(t.defaultPrevented)return!1;let i=t.legendItem,r=this.chart,s=i.visible;this&&this.bubbleLegend&&(i.visible=!s,i.ignoreSeries=s,e=Ht(r)>=0,this.bubbleLegend.visible!==e&&(this.update({bubbleLegend:{enabled:e}}),this.bubbleLegend.visible=e),i.visible=s)}function Wt(t,e){let i,r,s,n,o=t.allItems,a=t.options.rtl,l=0;o.forEach(((t,o)=>{(n=t.legendItem||{}).group&&(i=n.group.translateX||0,r=n.y||0,((s=t.movementX)||a&&t.ranges)&&(s=a?i-t.options.maxSize/2:i+s,n.group.attr({translateX:s})),o>e[l].step&&l++,n.group.attr({translateY:Math.round(r+e[l].height/2)}),n.y=r+e[l].height/2)}))}var Xt=g(260),qt=g.n(Xt);let{seriesTypes:{scatter:{prototype:{pointClass:Yt}}}}=x(),{extend:Kt}=v();class $t extends Yt{haloPath(t){let e=(t&&this.marker&&this.marker.radius||0)+t;if(this.series.chart.inverted){let t=this.pos()||[0,0],{xAxis:i,yAxis:r,chart:s}=this.series;return s.renderer.symbols.circle(i.len-t[1]-e,r.len-t[0]-e,2*e,2*e)}return qt().prototype.haloPath.call(this,e)}}Kt($t.prototype,{ttBelow:!1});let{parse:Qt}=Et(),{composed:Zt,noop:Jt}=v(),{series:te,seriesTypes:{column:{prototype:ee},scatter:ie}}=x(),{addEvent:re,arrayMax:se,arrayMin:ne,clamp:oe,extend:ae,isNumber:le,merge:he,pick:ce,pushUnique:de}=v();function ue(){let t,e=this.len,{coll:i,isXAxis:r,min:s}=this,n=(this.max||0)-(s||0),o=0,a=e,l=e/n;("xAxis"===i||"yAxis"===i)&&(this.series.forEach((e=>{if(e.bubblePadding&&e.reserveSpace()){this.allowZoomOutside=!0,t=!0;let i=e.getColumn(r?"x":"y");if(r&&((e.onPoint||e).getRadii(0,0,e),e.onPoint&&(e.radii=e.onPoint.radii)),n>0){let t=i.length;for(;t--;)if(le(i[t])&&this.dataMin<=i[t]&&i[t]<=this.max){let r=e.radii&&e.radii[t]||0;o=Math.min((i[t]-s)*l-r,o),a=Math.max((i[t]-s)*l+r,a)}}}})),t&&n>0&&!this.logarithmic&&(a-=e,l*=(e+Math.max(0,o)-Math.min(a,e))/e,[["min","userMin",o],["max","userMax",a]].forEach((t=>{void 0===ce(this.options[t[0]],this[t[1]])&&(this[t[0]]+=t[2]/l)}))))}function pe(){let{ticks:t,tickPositions:e,dataMin:i=0,dataMax:r=0,categories:s}=this,n=this.options.type;if((s?.length||"category"===n)&&this.series.find((t=>t.bubblePadding))){let s=e.length;for(;s--;){let n=t[e[s]],o=n.pos||0;(o>r||o<i)&&n.label?.hide()}}}class fe extends ie{static compose(t,e,i){(function(t,e){Bt(Dt,"Series.BubbleLegend")&&(_t({legend:{bubbleLegend:xt}}),zt(t.prototype,"drawChartBox",Ut),Rt(e,"afterGetAllItems",jt),Rt(e,"itemClick",Gt))})(e,i),de(Zt,"Series.Bubble")&&(re(t,"foundExtremes",ue),re(t,"afterRender",pe))}animate(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach((function(t){let{graphic:e,plotX:i=0,plotY:r=0}=t;e&&e.width&&(this.hasRendered||e.attr({x:i,y:r,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))}),this)}getRadii(){let t,e,i,r=this.getColumn("z"),s=this.getColumn("y"),n=[],o=this.chart.bubbleZExtremes,{minPxSize:a,maxPxSize:l}=this.getPxExtremes();if(!o){let t,e=Number.MAX_VALUE,i=-Number.MAX_VALUE;this.chart.series.forEach((r=>{if(r.bubblePadding&&r.reserveSpace()){let s=(r.onPoint||r).getZExtremes();s&&(e=Math.min(ce(e,s.zMin),s.zMin),i=Math.max(ce(i,s.zMax),s.zMax),t=!0)}})),t?(o={zMin:e,zMax:i},this.chart.bubbleZExtremes=o):o={zMin:0,zMax:0}}for(e=0,t=r.length;e<t;e++)i=r[e],n.push(this.getRadius(o.zMin,o.zMax,a,l,i,s&&s[e]));this.radii=n}getRadius(t,e,i,r,s,n){let o=this.options,a="width"!==o.sizeBy,l=o.zThreshold,h=e-t,c=.5;if(null===n||null===s)return null;if(le(s)){if(o.sizeByAbsoluteValue&&(s=Math.abs(s-l),e=h=Math.max(e-l,Math.abs(t-l)),t=0),s<t)return i/2-1;h>0&&(c=(s-t)/h)}return a&&c>=0&&(c=Math.sqrt(c)),Math.ceil(i+c*(r-i))/2}hasData(){return!!this.dataTable.rowCount}markerAttribs(t,e){let i=super.markerAttribs(t,e),{height:r=0,width:s=0}=i;return this.chart.inverted?ae(i,{x:(t.plotX||0)-s/2,y:(t.plotY||0)-r/2}):i}pointAttribs(t,e){let i=this.options.marker.fillOpacity,r=te.prototype.pointAttribs.call(this,t,e);return 1!==i&&(r.fill=Qt(r.fill).setOpacity(i).get("rgba")),r}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:t,options:e,radii:i}=this,{minPxSize:r}=this.getPxExtremes(),s=t.length;for(;s--;){let n=t[s],o=i?i[s]:0;"z"===this.zoneAxis&&(n.negative=(n.z||0)<(e.zThreshold||0)),le(o)&&o>=r/2?(n.marker=ae(n.marker,{radius:o,width:2*o,height:2*o}),n.dlBox={x:n.plotX-o,y:n.plotY-o,width:2*o,height:2*o}):(n.shapeArgs=n.plotY=n.dlBox=void 0,n.isInside=!1)}}getPxExtremes(){let t=Math.min(this.chart.plotWidth,this.chart.plotHeight),e=e=>{let i;return"string"==typeof e&&(i=/%$/.test(e),e=parseInt(e,10)),i?t*e/100:e},i=e(ce(this.options.minSize,8));return{minPxSize:i,maxPxSize:Math.max(e(ce(this.options.maxSize,"20%")),i)}}getZExtremes(){let t=this.options,e=this.getColumn("z").filter(le);if(e.length){let i=ce(t.zMin,oe(ne(e),!1===t.displayNegative?t.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),r=ce(t.zMax,se(e));if(le(i)&&le(r))return{zMin:i,zMax:r}}}}fe.defaultOptions=he(ie.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:t}=this.series.chart,{z:e}=this.point;return le(e)?t(e,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),ae(fe.prototype,{alignDataLabel:ee.alignDataLabel,applyZones:Jt,bubblePadding:!0,isBubble:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:$t,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),re(fe,"updatedData",(t=>{delete t.target.chart.bubbleZExtremes})),re(fe,"remove",(t=>{delete t.target.chart.bubbleZExtremes})),x().registerSeriesType("bubble",fe);let{seriesTypes:{column:{prototype:{pointClass:{prototype:ge}}},arearange:{prototype:{pointClass:me}}}}=x(),{extend:ye,isNumber:ve}=v();class be extends me{isValid(){return ve(this.low)}}ye(be.prototype,{setState:ge.setState});let{noop:xe}=v(),{seriesTypes:{arearange:we,column:Ee,column:{prototype:Te}}}=x(),{addEvent:Se,clamp:Ae,extend:ke,isNumber:Ce,merge:Ie,pick:Pe}=v();class Me extends we{setOptions(){return Ie(!0,arguments[0],{stacking:void 0}),we.prototype.setOptions.apply(this,arguments)}translate(){return Te.translate.apply(this)}pointAttribs(){return Te.pointAttribs.apply(this,arguments)}translate3dPoints(){return Te.translate3dPoints.apply(this,arguments)}translate3dShapes(){return Te.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let t,e,i,r,s=this.yAxis,n=this.xAxis,o=n.startAngleRad,a=this.chart,l=this.xAxis.isRadial,h=Math.max(a.chartWidth,a.chartHeight)+999;this.points.forEach((c=>{let d=c.shapeArgs||{},u=this.options.minPointLength,p=c.plotY,f=s.translate(c.high,0,1,0,1);if(Ce(f)&&Ce(p))if(c.plotHigh=Ae(f,-h,h),c.plotLow=Ae(p,-h,h),r=c.plotHigh,Math.abs(t=Pe(c.rectPlotY,c.plotY)-c.plotHigh)<u?(e=u-t,t+=e,r-=e/2):t<0&&(t*=-1,r-=t),l&&this.polar)i=c.barX+o,c.shapeType="arc",c.shapeArgs=this.polar.arc(r+t,r,i,i+c.pointWidth);else{d.height=t,d.y=r;let{x:e=0,width:i=0}=d;c.shapeArgs=Ie(c.shapeArgs,this.crispCol(e,r,i,t)),c.tooltipPos=a.inverted?[s.len+s.pos-a.plotLeft-r-t/2,n.len+n.pos-a.plotTop-e-i/2,t]:[n.left-a.plotLeft+e+i/2,s.pos-a.plotTop+r+t/2,t]}}))}}Me.defaultOptions=Ie(Ee.defaultOptions,we.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),Se(Me,"afterColumnTranslate",(function(){Me.prototype.afterColumnTranslate.apply(this)}),{order:5}),ke(Me.prototype,{directTouch:!0,pointClass:be,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:Te.adjustForMissingColumns,animate:Te.animate,crispCol:Te.crispCol,drawGraph:xe,drawPoints:Te.drawPoints,getSymbol:xe,drawTracker:Te.drawTracker,getColumnMetrics:Te.getColumnMetrics}),x().registerSeriesType("columnrange",Me);let{column:Le}=x().seriesTypes,{clamp:Oe,merge:Ne,pick:_e}=v();class De extends Le{translate(){let t=this.chart,e=this.options,i=this.dense=this.closestPointRange*this.xAxis.transA<2,r=this.borderWidth=_e(e.borderWidth,i?0:1),s=this.yAxis,n=e.threshold,o=_e(e.minPointLength,5),a=this.getColumnMetrics(),l=a.width,h=this.pointXOffset=a.offset,c=this.translatedThreshold=s.getThreshold(n),d=this.barW=Math.max(l,1+2*r);for(let i of(t.inverted&&(c-=.5),e.pointPadding&&(d=Math.ceil(d)),super.translate(),this.points)){let r,u,p,f,g,m,y,v,b,x,w,E=_e(i.yBottom,c),T=999+Math.abs(E),S=Oe(i.plotY,-T,s.len+T),A=d/2,k=Math.min(S,E),C=Math.max(S,E)-k,I=i.plotX+h;e.centerInCategory&&(I=this.adjustForMissingColumns(I,l,i,a)),i.barX=I,i.pointWidth=l,i.tooltipPos=t.inverted?[s.len+s.pos-t.plotLeft-S,this.xAxis.len-I-A,C]:[I+A,S+s.pos-t.plotTop,C],r=n+(i.total||i.y),"percent"===e.stacking&&(r=n+(i.y<0)?-100:100);let P=s.toPixels(r,!0);p=(u=t.plotHeight-P-(t.plotHeight-c))?A*(k-P)/u:0,f=u?A*(k+C-P)/u:0,m=I-p+A,y=I+p+A,v=I+f+A,b=I-f+A,x=k-o,w=k+C,i.y<0&&(x=k,w=k+C+o),t.inverted&&(g=s.width-k,u=P-(s.width-c),p=A*(P-g)/u,f=A*(P-(g-C))/u,y=(m=I+A+p)-2*p,v=I-f+A,b=I+f+A,x=k,w=k+C-o,i.y<0&&(w=k+C+o)),i.shapeType="path",i.shapeArgs={x:m,y:x,width:y-m,height:C,d:[["M",m,x],["L",y,x],["L",v,w],["L",b,w],["Z"]]}}}}De.defaultOptions=Ne(Le.defaultOptions,{}),x().registerSeriesType("columnpyramid",De);let{arearange:Re}=x().seriesTypes,{addEvent:Fe,merge:Be,extend:ze}=v();class Ue extends bt{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||dt().prototype.getColumnMetrics.call(this)}drawDataLabels(){let t=this.pointValKey;if(Re)for(let e of(Re.prototype.drawDataLabels.call(this),this.points))e.y=e[t]}toYData(t){return[t.low,t.high]}}Ue.defaultOptions=Be(bt.defaultOptions,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),Fe(Ue,"afterTranslate",(function(){for(let t of this.points)t.plotLow=t.plotY}),{order:0}),ze(Ue.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),x().registerSeriesType("errorbar",Ue);let{series:{prototype:{pointClass:He}}}=x(),{noop:Ve}=v(),{series:je,seriesTypes:{column:Ge}}=x(),{clamp:We,isNumber:Xe,extend:qe,merge:Ye,pick:Ke,pInt:$e,defined:Qe}=v();class Ze extends je{translate(){let t=this.yAxis,e=this.options,i=t.center;this.generatePoints(),this.points.forEach((r=>{let s=Ye(e.dial,r.dial),n=$e(s.radius)*i[2]/200,o=$e(s.baseLength)*n/100,a=$e(s.rearLength)*n/100,l=s.baseWidth,h=s.topWidth,c=e.overshoot,d=t.startAngleRad+t.translate(r.y,void 0,void 0,void 0,!0);(Xe(c)||!1===e.wrap)&&(c=Xe(c)?c/180*Math.PI:0,d=We(d,t.startAngleRad-c,t.endAngleRad+c)),d=180*d/Math.PI,r.shapeType="path";let u=s.path||[["M",-a,-l/2],["L",o,-l/2],["L",n,-h/2],["L",n,h/2],["L",o,l/2],["L",-a,l/2],["Z"]];r.shapeArgs={d:u,translateX:i[0],translateY:i[1],rotation:d},r.plotX=i[0],r.plotY=i[1],Qe(r.y)&&t.max-t.min&&(r.percentage=(r.y-t.min)/(t.max-t.min)*100)}))}drawPoints(){let t=this,e=t.chart,i=t.yAxis.center,r=t.pivot,s=t.options,n=s.pivot,o=e.renderer;t.points.forEach((i=>{let r=i.graphic,n=i.shapeArgs,a=n.d,l=Ye(s.dial,i.dial);r?(r.animate(n),n.d=a):i.graphic=o[i.shapeType](n).addClass("highcharts-dial").add(t.group),e.styledMode||i.graphic[r?"animate":"attr"]({stroke:l.borderColor,"stroke-width":l.borderWidth,fill:l.backgroundColor})})),r?r.animate({translateX:i[0],translateY:i[1]}):n&&(t.pivot=o.circle(0,0,n.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(i[0],i[1]).add(t.group),e.styledMode||t.pivot.attr({fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth}))}animate(t){let e=this;t||e.points.forEach((t=>{let i=t.graphic;i&&(i.attr({rotation:180*e.yAxis.startAngleRad/Math.PI}),i.animate({rotation:t.shapeArgs.rotation},e.options.animation))}))}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),je.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(t,e){je.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),Ke(e,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}Ze.defaultOptions=Ye(je.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),qe(Ze.prototype,{angular:!0,directTouch:!0,drawGraph:Ve,drawTracker:Ge.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:class extends He{setState(t){this.state=t}},trackerGroups:["group","dataLabelsGroup"]}),x().registerSeriesType("gauge",Ze);let{composed:Je}=v(),{addEvent:ti,pushUnique:ei}=v();function ii(){let t,e,i,r=this;r.container&&(t=ti(r.container,"mousedown",(t=>{let s=r.hoverPoint;s&&s.series&&s.series.hasDraggableNodes&&s.series.options.draggable&&(s.series.onMouseDown(s,t),e=ti(r.container,"mousemove",(t=>s&&s.series&&s.series.onMouseMove(s,t))),i=ti(r.container.ownerDocument,"mouseup",(t=>(e(),i(),s&&s.series&&s.series.onMouseUp(s,t)))))}))),ti(r,"destroy",(function(){t()}))}let ri={compose:function(t){ei(Je,"DragNodes")&&ti(t,"load",ii)},onMouseDown:function(t,e){let i=this.chart.pointer?.normalize(e)||e;t.fixedPosition={chartX:i.chartX,chartY:i.chartY,plotX:t.plotX,plotY:t.plotY},t.inDragMode=!0},onMouseMove:function(t,e){if(t.fixedPosition&&t.inDragMode){let i,r,s=this.chart,n=s.pointer?.normalize(e)||e,o=t.fixedPosition.chartX-n.chartX,a=t.fixedPosition.chartY-n.chartY,l=s.graphLayoutsLookup;(Math.abs(o)>5||Math.abs(a)>5)&&(i=t.fixedPosition.plotX-o,r=t.fixedPosition.plotY-a,s.isInsidePlot(i,r)&&(t.plotX=i,t.plotY=r,t.hasDragged=!0,this.redrawHalo(t),l.forEach((t=>{t.restartSimulation()}))))}},onMouseUp:function(t){t.fixedPosition&&(t.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),t.inDragMode=t.hasDragged=!1,this.options.fixedDraggable||delete t.fixedPosition)},redrawHalo:function(t){t&&this.halo&&this.halo.attr({d:t.haloPath(this.options.states.hover.halo.size)})}},{setAnimation:si}=v(),{composed:ni}=v(),{addEvent:oi,pushUnique:ai}=v();function li(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach((t=>{t.updateSimulation()})),this.redraw())}function hi(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach((t=>{t.updateSimulation(!1)})),this.redraw())}function ci(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach((t=>{t.stop()}))}function di(){let t,e=!1,i=i=>{i.maxIterations--&&isFinite(i.temperature)&&!i.isStable()&&!i.enableSimulation&&(i.beforeStep&&i.beforeStep(),i.step(),t=!1,e=!0)};if(this.graphLayoutsLookup){for(si(!1,this),this.graphLayoutsLookup.forEach((t=>t.start()));!t;)t=!0,this.graphLayoutsLookup.forEach(i);e&&this.series.forEach((t=>{t&&t.layout&&t.render()}))}}let ui={compose:function(t){ai(ni,"GraphLayout")&&(oi(t,"afterPrint",li),oi(t,"beforePrint",hi),oi(t,"predraw",ci),oi(t,"render",di))},integrations:{},layouts:{}};var pi=g(960),fi=g.n(pi);let{seriesTypes:{bubble:{prototype:{pointClass:gi}}}}=x(),{isNumber:mi}=v(),yi={attractive:function(t,e,i){let r=t.getMass(),s=-i.x*e*this.diffTemperature,n=-i.y*e*this.diffTemperature;t.fromNode.fixedPosition||(t.fromNode.plotX-=s*r.fromNode/t.fromNode.degree,t.fromNode.plotY-=n*r.fromNode/t.fromNode.degree),t.toNode.fixedPosition||(t.toNode.plotX+=s*r.toNode/t.toNode.degree,t.toNode.plotY+=n*r.toNode/t.toNode.degree)},attractiveForceFunction:function(t,e){return(e-t)/t},barycenter:function(){let t=this.options.gravitationalConstant||0,e=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*t,i=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*t;this.nodes.forEach((function(t){t.fixedPosition||(t.plotX-=e/t.mass/t.degree,t.plotY-=i/t.mass/t.degree)}))},getK:function(t){return Math.pow(t.box.width*t.box.height/t.nodes.length,.5)},integrate:function(t,e){let i=-t.options.friction,r=t.options.maxSpeed,s=e.prevX,n=e.prevY,o=(e.plotX+e.dispX-s)*i,a=(e.plotY+e.dispY-n)*i,l=Math.abs,h=l(o)/(o||1),c=l(a)/(a||1),d=h*Math.min(r,Math.abs(o)),u=c*Math.min(r,Math.abs(a));e.prevX=e.plotX+e.dispX,e.prevY=e.plotY+e.dispY,e.plotX+=d,e.plotY+=u,e.temperature=t.vectorLength({x:d,y:u})},repulsive:function(t,e,i){let r=e*this.diffTemperature/t.mass/t.degree;t.fixedPosition||(t.plotX+=i.x*r,t.plotY+=i.y*r)},repulsiveForceFunction:function(t,e){return(e-t)/t*(e>t?1:0)}},{noop:vi}=v(),bi={barycenter:function(){let t,e,i=this.options.gravitationalConstant,r=this.box,s=this.nodes;for(let n of s)this.options.splitSeries&&!n.isParentNode?(t=n.series.parentNode.plotX,e=n.series.parentNode.plotY):(t=r.width/2,e=r.height/2),n.fixedPosition||(n.plotX-=(n.plotX-t)*i/(n.mass*Math.sqrt(s.length)),n.plotY-=(n.plotY-e)*i/(n.mass*Math.sqrt(s.length)))},getK:vi,integrate:yi.integrate,repulsive:function(t,e,i,r){let s=e*this.diffTemperature/t.mass/t.degree,n=i.x*s,o=i.y*s;t.fixedPosition||(t.plotX+=n,t.plotY+=o),r.fixedPosition||(r.plotX-=n,r.plotY-=o)},repulsiveForceFunction:function(t,e,i,r){return Math.min(t,(i.marker.radius+r.marker.radius)/2)}},xi={attractive:function(t,e,i,r){let s=t.getMass(),n=i.x/r*e,o=i.y/r*e;t.fromNode.fixedPosition||(t.fromNode.dispX-=n*s.fromNode/t.fromNode.degree,t.fromNode.dispY-=o*s.fromNode/t.fromNode.degree),t.toNode.fixedPosition||(t.toNode.dispX+=n*s.toNode/t.toNode.degree,t.toNode.dispY+=o*s.toNode/t.toNode.degree)},attractiveForceFunction:function(t,e){return t*t/e},barycenter:function(){let t=this.options.gravitationalConstant,e=this.barycenter.xFactor,i=this.barycenter.yFactor;this.nodes.forEach((function(r){if(!r.fixedPosition){let s=r.getDegree(),n=s*(1+s/2);r.dispX+=(e-r.plotX)*t*n/r.degree,r.dispY+=(i-r.plotY)*t*n/r.degree}}))},getK:function(t){return Math.pow(t.box.width*t.box.height/t.nodes.length,.3)},integrate:function(t,e){e.dispX+=e.dispX*t.options.friction,e.dispY+=e.dispY*t.options.friction;let i=e.temperature=t.vectorLength({x:e.dispX,y:e.dispY});0!==i&&(e.plotX+=e.dispX/i*Math.min(Math.abs(e.dispX),t.temperature),e.plotY+=e.dispY/i*Math.min(Math.abs(e.dispY),t.temperature))},repulsive:function(t,e,i,r){t.dispX+=i.x/r*e/t.degree,t.dispY+=i.y/r*e/t.degree},repulsiveForceFunction:function(t,e){return e*e/t}};class wi{constructor(t){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=t,this.boxSize=Math.min(t.width,t.height)}divideBox(){let t=this.box.width/2,e=this.box.height/2;this.nodes[0]=new wi({left:this.box.left,top:this.box.top,width:t,height:e}),this.nodes[1]=new wi({left:this.box.left+t,top:this.box.top,width:t,height:e}),this.nodes[2]=new wi({left:this.box.left+t,top:this.box.top+e,width:t,height:e}),this.nodes[3]=new wi({left:this.box.left,top:this.box.top+e,width:t,height:e})}getBoxPosition(t){let e=t.plotX<this.box.left+this.box.width/2,i=t.plotY<this.box.top+this.box.height/2;return e?i?0:3:i?1:2}insert(t,e){let i;this.isInternal?this.nodes[this.getBoxPosition(t)].insert(t,e-1):(this.isEmpty=!1,this.body?e?(this.isInternal=!0,this.divideBox(),!0!==this.body&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,e-1),this.body=!0),this.nodes[this.getBoxPosition(t)].insert(t,e-1)):((i=new wi({top:t.plotX||NaN,left:t.plotY||NaN,width:.1,height:.1})).body=t,i.isInternal=!1,this.nodes.push(i)):(this.isInternal=!1,this.body=t))}updateMassAndCenter(){let t=0,e=0,i=0;if(this.isInternal){for(let r of this.nodes)r.isEmpty||(t+=r.mass,e+=r.plotX*r.mass,i+=r.plotY*r.mass);e/=t,i/=t}else this.body&&(t=this.body.mass,e=this.body.plotX,i=this.body.plotY);this.mass=t,this.plotX=e,this.plotY=i}}let Ei=class{constructor(t,e,i,r){this.box={left:t,top:e,width:i,height:r},this.maxDepth=25,this.root=new wi(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,(function(t){t.updateMassAndCenter()}))}insertNodes(t){for(let e of t)this.root.insert(e,this.maxDepth)}visitNodeRecursive(t,e,i){let r;if(t||(t=this.root),t===this.root&&e&&(r=e(t)),!1!==r){for(let s of t.nodes){if(s.isInternal){if(e&&(r=e(s)),!1===r)continue;this.visitNodeRecursive(s,e,i)}else s.body&&e&&e(s.body);i&&i(s)}t===this.root&&i&&i(t)}}},{win:Ti}=v(),{clamp:Si,defined:Ai,isFunction:ki,fireEvent:Ci,pick:Ii}=v();class Pi{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(t){ui.compose(t),ui.integrations.euler=xi,ui.integrations.verlet=yi,ui.layouts["reingold-fruchterman"]=Pi}init(t){this.options=t,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=ui.integrations[t.integration],this.enableSimulation=t.enableSimulation,this.attractiveForce=Ii(t.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=Ii(t.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=t.approximation}updateSimulation(t){this.enableSimulation=Ii(t,this.options.enableSimulation)}start(){let t=this.series,e=this.options;this.currentStep=0,this.forces=t[0]&&t[0].forces||[],this.chart=t[0]&&t[0].chart,this.initialRendering&&(this.initPositions(),t.forEach((function(t){t.finishedAnimating=!0,t.render()}))),this.setK(),this.resetSimulation(e),this.enableSimulation&&this.step()}step(){let t=this.series;for(let t of(this.currentStep++,"barnes-hut"===this.approximation&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[t+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let e of t)e.chart&&e.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&Ti.cancelAnimationFrame(this.simulation),this.simulation=Ti.requestAnimationFrame((()=>this.step()))):(this.simulation=!1,this.series.forEach((t=>{Ci(t,"afterSimulation")})))}}stop(){this.simulation&&Ti.cancelAnimationFrame(this.simulation)}setArea(t,e,i,r){this.box={left:t,top:e,width:i,height:r}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(t,e){for(let i of t)-1===e.indexOf(i)&&e.push(i)}removeElementFromCollection(t,e){let i=e.indexOf(t);-1!==i&&e.splice(i,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(t){this.maxIterations=Ii(t,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(t){this.initialRendering=t}createQuadTree(){this.quadTree=new Ei(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let t=this.options.initialPositions;if(ki(t))for(let e of(t.call(this),this.nodes))Ai(e.prevX)||(e.prevX=e.plotX),Ai(e.prevY)||(e.prevY=e.plotY),e.dispX=0,e.dispY=0;else"circle"===t?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let t,e=this.box,i=this.nodes,r=2*Math.PI/(i.length+1),s=i.filter((function(t){return 0===t.linksTo.length})),n={},o=this.options.initialPositionRadius,a=t=>{for(let e of t.linksFrom||[])n[e.toNode.id]||(n[e.toNode.id]=!0,l.push(e.toNode),a(e.toNode))},l=[];for(let t of s)l.push(t),a(t);if(l.length)for(let t of i)-1===l.indexOf(t)&&l.push(t);else l=i;for(let i=0,s=l.length;i<s;++i)(t=l[i]).plotX=t.prevX=Ii(t.plotX,e.width/2+o*Math.cos(i*r)),t.plotY=t.prevY=Ii(t.plotY,e.height/2+o*Math.sin(i*r)),t.dispX=0,t.dispY=0}setRandomPositions(){let t,e=this.box,i=this.nodes,r=i.length+1,s=t=>{let e=t*t/Math.PI;return e-Math.floor(e)};for(let n=0,o=i.length;n<o;++n)(t=i[n]).plotX=t.prevX=Ii(t.plotX,e.width*s(n)),t.plotY=t.prevY=Ii(t.plotY,e.height*s(r+n)),t.dispX=0,t.dispY=0}force(t,...e){this.integration[t].apply(this,e)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let t=0,e=0,i=0;for(let r of this.nodes)e+=r.plotX*r.mass,i+=r.plotY*r.mass,t+=r.mass;return this.barycenter={x:e,y:i,xFactor:e/t,yFactor:i/t},this.barycenter}barnesHutApproximation(t,e){let i,r,s=this.getDistXY(t,e),n=this.vectorLength(s);return t!==e&&0!==n&&(e.isInternal?e.boxSize/n<this.options.theta&&0!==n?(r=this.repulsiveForce(n,this.k),this.force("repulsive",t,r*e.mass,s,n),i=!1):i=!0:(r=this.repulsiveForce(n,this.k),this.force("repulsive",t,r*e.mass,s,n))),i}repulsiveForces(){if("barnes-hut"===this.approximation)for(let t of this.nodes)this.quadTree.visitNodeRecursive(null,(e=>this.barnesHutApproximation(t,e)));else{let t,e,i;for(let r of this.nodes)for(let s of this.nodes)r===s||r.fixedPosition||(i=this.getDistXY(r,s),0!==(e=this.vectorLength(i))&&(t=this.repulsiveForce(e,this.k),this.force("repulsive",r,t*s.mass,i,e)))}}attractiveForces(){let t,e,i;for(let r of this.links)r.fromNode&&r.toNode&&(t=this.getDistXY(r.fromNode,r.toNode),0!==(e=this.vectorLength(t))&&(i=this.attractiveForce(e,this.k),this.force("attractive",r,i,t,e)))}applyLimits(){for(let t of this.nodes)t.fixedPosition||(this.integration.integrate(this,t),this.applyLimitBox(t,this.box),t.dispX=0,t.dispY=0)}applyLimitBox(t,e){let i=t.radius;t.plotX=Si(t.plotX,e.left+i,e.width-i),t.plotY=Si(t.plotY,e.top+i,e.height-i)}coolDown(t,e,i){return t-e*i}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let t=0;for(let e of this.nodes)t+=e.temperature;return t}vectorLength(t){return Math.sqrt(t.x*t.x+t.y*t.y)}getDistR(t,e){let i=this.getDistXY(t,e);return this.vectorLength(i)}getDistXY(t,e){let i=t.plotX-e.plotX,r=t.plotY-e.plotY;return{x:i,y:r,absX:Math.abs(i),absY:Math.abs(r)}}}let Mi=Pi,{addEvent:Li,pick:Oi}=v();function Ni(){let t=this.series,e=[];return t.forEach((t=>{t.parentNode&&t.parentNode.selected&&e.push(t.parentNode)})),e}function _i(){this.allDataPoints&&delete this.allDataPoints}class Di extends Mi{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(t){Mi.compose(t),ui.integrations.packedbubble=bi,ui.layouts.packedbubble=Di;let e=t.prototype;e.getSelectedParentNodes||(Li(t,"beforeRedraw",_i),e.getSelectedParentNodes=Ni)}beforeStep(){this.options.marker&&this.series.forEach((t=>{t&&t.calculateParentRadius()}))}isStable(){let t=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&t<1e-5||this.temperature<=0}setCircularPositions(){let t,e,i=this.box,r=this.nodes,s=2*Math.PI/(r.length+1),n=this.options.initialPositionRadius,o=0;for(let a of r)this.options.splitSeries&&!a.isParentNode?(t=a.series.parentNode.plotX,e=a.series.parentNode.plotY):(t=i.width/2,e=i.height/2),a.plotX=a.prevX=Oi(a.plotX,t+n*Math.cos(a.index||o*s)),a.plotY=a.prevY=Oi(a.plotY,e+n*Math.sin(a.index||o*s)),a.dispX=0,a.dispY=0,o++}repulsiveForces(){let t,e,i,r=this,s=r.options.bubblePadding,n=r.nodes;n.forEach((o=>{o.degree=o.mass,o.neighbours=0,n.forEach((n=>{t=0,o!==n&&!o.fixedPosition&&(r.options.seriesInteraction||o.series===n.series)&&(i=r.getDistXY(o,n),(e=r.vectorLength(i)-(o.marker.radius+n.marker.radius+s))<0&&(o.degree+=.01,o.neighbours++,t=r.repulsiveForce(-e/Math.sqrt(o.neighbours),r.k,o,n)),r.force("repulsive",o,t*n.mass,i,n,e))}))}))}applyLimitBox(t,e){let i,r;this.options.splitSeries&&!t.isParentNode&&this.options.parentNodeLimit&&(i=this.getDistXY(t,t.series.parentNode),(r=t.series.parentNodeRadius-t.marker.radius-this.vectorLength(i))<0&&r>-2*t.marker.radius&&(t.plotX-=.01*i.x,t.plotY-=.01*i.y)),super.applyLimitBox(t,e)}}ui.layouts.packedbubble=Di;let{merge:Ri,syncTimeout:Fi}=v(),{animObject:Bi}=v();var zi=g(28),Ui=g.n(zi);let{deg2rad:Hi}=v(),{addEvent:Vi,merge:ji,uniqueKey:Gi,defined:Wi,extend:Xi}=v();function qi(t,e){e=ji(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},e);let i=this.renderer.url,r=this.text||this,s=r.textPath,{attributes:n,enabled:o}=e;if(t=t||s&&s.path,s&&s.undo(),t&&o){let e=Vi(r,"afterModifyTree",(e=>{if(t&&o){let s=t.attr("id");s||t.attr("id",s=Gi());let o={x:0,y:0};Wi(n.dx)&&(o.dx=n.dx,delete n.dx),Wi(n.dy)&&(o.dy=n.dy,delete n.dy),r.attr(o),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let a=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:Xi(n,{"text-anchor":n.textAnchor,href:`${i}#${s}`}),children:a}}}));r.textPath={path:t,undo:e}}else r.attr({dx:0,dy:0}),delete r.textPath;return this.added&&(r.textCache="",this.renderer.buildText(r)),this}function Yi(t){let e=t.bBox,i=this.element?.querySelector("textPath");if(i){let r=[],{b:s,h:n}=this.renderer.fontMetrics(this.element),o=n-s,a=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),l=i.innerHTML.replace(a,"").split(/<tspan class="highcharts-br"[^>]*>/),h=l.length,c=(t,e)=>{let{x:r,y:n}=e,a=(i.getRotationOfChar(t)-90)*Hi,l=Math.cos(a),h=Math.sin(a);return[[r-o*l,n-o*h],[r+s*l,n+s*h]]};for(let e=0,s=0;s<h;s++){let n=l[s].length;for(let o=0;o<n;o+=5)try{let t=e+o+s,[n,a]=c(t,i.getStartPositionOfChar(t));0===o?(r.push(a),r.push(n)):(0===s&&r.unshift(a),s===h-1&&r.push(n))}catch(t){break}e+=n-1;try{let t=e+s,n=i.getEndPositionOfChar(t),[o,a]=c(t,n);r.unshift(a),r.unshift(o)}catch(t){break}}r.length&&r.push(r[0].slice()),e.polygon=r}return e}function Ki(t){let e=t.labelOptions,i=t.point,r=e[i.formatPrefix+"TextPath"]||e.textPath;r&&!e.useHTML&&(this.setTextPath(i.getDataLabelPath?.(this)||i.graphic,r),i.dataLabelPath&&!r.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy()))}let{parse:$i}=Et(),{noop:Qi}=v(),{series:{prototype:Zi},seriesTypes:{bubble:Ji}}=x(),{initDataLabels:tr,initDataLabelsDefer:er}={initDataLabels:function(){let t=this.options.dataLabels;if(!this.dataLabelsGroup){let e=this.initDataLabelsGroup();return!this.chart.styledMode&&t?.style&&e.css(t.style),e.attr({opacity:0}),this.visible&&e.show(),e}return this.dataLabelsGroup.attr(Ri({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){let t=this.options.dataLabels;t?.defer&&this.options.layoutAlgorithm?.enableSimulation?Fi((()=>{this.deferDataLabels=!1}),t?Bi(t.animation).defer:0):this.deferDataLabels=!1}},{addEvent:ir,clamp:rr,defined:sr,extend:nr,fireEvent:or,isArray:ar,isNumber:lr,merge:hr,pick:cr}=v();!function(t){Vi(t,"afterGetBBox",Yi),Vi(t,"beforeAddingDataLabel",Ki);let e=t.prototype;e.setTextPath||(e.setTextPath=qi)}(Ui());class dr extends Ji{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(t,e,i){Ji.compose(t,e,i),ri.compose(e),Di.compose(e)}accumulateAllPoints(){let t=this.chart,e=[];for(let i of t.series)if(i.is("packedbubble")&&i.reserveSpace()){let t=i.getColumn("value");for(let r=0;r<t.length;r++)e.push([null,null,t[r],i.index,r,{id:r,marker:{radius:0}}])}return e}addLayout(){let t,e=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},i=e.type||"packedbubble",r=this.chart.options.chart,s=this.chart.graphLayoutsStorage,n=this.chart.graphLayoutsLookup;s||(this.chart.graphLayoutsStorage=s={},this.chart.graphLayoutsLookup=n=[]),(t=s[i])||(e.enableSimulation=sr(r.forExport)?!r.forExport:e.enableSimulation,s[i]=t=new ui.layouts[i],t.init(e),n.splice(t.index,0,t)),this.layout=t,this.points.forEach((t=>{t.mass=2,t.degree=1,t.collisionNmb=1})),t.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),t.addElementsToCollection([this],t.series),t.addElementsToCollection(this.points,t.nodes)}addSeriesLayout(){let t=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},e=t.type||"packedbubble",i=this.chart.graphLayoutsStorage,r=this.chart.graphLayoutsLookup,s=hr(t,t.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),n=i[e+"-series"];n||(i[e+"-series"]=n=new ui.layouts[e],n.init(s),r.splice(n.index,0,n)),this.parentNodeLayout=n,this.createParentNodes()}calculateParentRadius(){let t=this.seriesBox();this.parentNodeRadius=rr(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,t?Math.max(Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let t=this.chart.series,e=this.options.zMin,i=this.options.zMax,r=1/0,s=-1/0;return e&&i?[e,i]:(t.forEach((t=>{t.getColumn("value").forEach((t=>{sr(t)&&(t>s&&(s=t),t<r&&(r=t))}))})),[e=cr(e,r),i=cr(i,s)])}checkOverlap(t,e){let i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)-Math.abs(t[2]+e[2])<-.001}createParentNodes(){let t,e=this.pointClass,i=this.chart,r=this.parentNodeLayout,s=this.layout.options,n=this.parentNode,o={radius:this.parentNodeRadius,lineColor:this.color,fillColor:$i(this.color).brighten(.4).get()};s.parentNodeOptions&&(o=hr(s.parentNodeOptions.marker||{},o)),this.parentNodeMass=0,this.points.forEach((t=>{this.parentNodeMass+=Math.PI*Math.pow(t.marker.radius,2)})),this.calculateParentRadius(),r.nodes.forEach((e=>{e.seriesIndex===this.index&&(t=!0)})),r.setArea(0,0,i.plotWidth,i.plotHeight),t||(n||(n=new e(this,{mass:this.parentNodeRadius/2,marker:o,dataLabels:{inside:!1},states:{normal:{marker:o},hover:{marker:o}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(n.plotX=this.parentNode.plotX,n.plotY=this.parentNode.plotY),this.parentNode=n,r.addElementsToCollection([this],r.series),r.addElementsToCollection([n],r.nodes))}deferLayout(){let t=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),t.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach((t=>{t.removeElementFromCollection(this,t.series)}),this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),Zi.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(Zi.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",Zi.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){if(!this.layout||!this.layout.options.splitSeries)return;let t=this.chart,e=this.layout.options.parentNodeOptions.marker,i={fill:e.fillColor||$i(this.color).brighten(.4).get(),opacity:e.fillOpacity,stroke:e.lineColor||this.color,"stroke-width":cr(e.lineWidth,this.options.lineWidth)},r={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,t.seriesGroup),this.group?.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&sr(this.parentNode.plotX)&&sr(this.parentNode.plotY)&&sr(this.parentNodeRadius)&&(r=hr({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},i),this.parentNode.graphic||(this.graph=this.parentNode.graphic=t.renderer.symbol(i.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(r))}drawTracker(){let t,e=this.parentNode;super.drawTracker(),e&&(t=ar(e.dataLabels)?e.dataLabels:e.dataLabel?[e.dataLabel]:[],e.graphic&&(e.graphic.element.point=e),t.forEach((t=>{(t.div||t.element).point=e})))}getPointRadius(){let t,e,i,r,s=this.chart,n=s.plotWidth,o=s.plotHeight,a=this.options,l=a.useSimulation,h=Math.min(n,o),c={},d=[],u=s.allDataPoints||[],p=u.length;["minSize","maxSize"].forEach((t=>{let e=parseInt(a[t],10),i=/%$/.test(a[t]);c[t]=i?h*e/100:e*Math.sqrt(p)})),s.minRadius=t=c.minSize/Math.sqrt(p),s.maxRadius=e=c.maxSize/Math.sqrt(p);let f=l?this.calculateZExtremes():[t,e];u.forEach(((s,n)=>{i=l?rr(s[2],f[0],f[1]):s[2],0===(r=this.getRadius(f[0],f[1],t,e,i))&&(r=null),u[n][2]=r,d.push(r)})),this.radii=d}init(){return Zi.init.apply(this,arguments),er.call(this),this.eventsToUnbind.push(ir(this,"updatedData",(function(){this.chart.series.forEach((t=>{t.type===this.type&&(t.isDirty=!0)}),this)}))),this}onMouseUp(t){if(t.fixedPosition&&!t.removed){let e,i=this.layout,r=this.parentNodeLayout;r&&i.options.dragBetweenSeries&&r.nodes.forEach((r=>{t&&t.marker&&r!==t.series.parentNode&&(e=i.getDistXY(t,r),i.vectorLength(e)-r.marker.radius-t.marker.radius<0&&(r.series.addPoint(hr(t.options,{plotX:t.plotX,plotY:t.plotY}),!1),i.removeElementFromCollection(t,i.nodes),t.remove()))})),ri.onMouseUp.apply(this,arguments)}}placeBubbles(t){let e,i,r=this.checkOverlap,s=this.positionBubble,n=[],o=1,a=0,l=0,h=[],c=t.sort(((t,e)=>e[2]-t[2]));if(c.length){if(n.push([[0,0,c[0][2],c[0][3],c[0][4]]]),c.length>1)for(n.push([[0,0-c[1][2]-c[0][2],c[1][2],c[1][3],c[1][4]]]),i=2;i<c.length;i++)c[i][2]=c[i][2]||1,r(e=s(n[o][a],n[o-1][l],c[i]),n[o][0])?(n.push([]),l=0,n[o+1].push(s(n[o][a],n[o][0],c[i])),o++,a=0):o>1&&n[o-1][l+1]&&r(e,n[o-1][l+1])?(l++,n[o].push(s(n[o][a],n[o-1][l],c[i])),a++):(a++,n[o].push(e));this.chart.stages=n,this.chart.rawPositions=[].concat.apply([],n),this.resizeRadius(),h=this.chart.rawPositions}return h}pointAttribs(t,e){let i=this.options,r=t&&t.isParentNode,s=i.marker;r&&i.layoutAlgorithm&&i.layoutAlgorithm.parentNodeOptions&&(s=i.layoutAlgorithm.parentNodeOptions.marker);let n=s.fillOpacity,o=Zi.pointAttribs.call(this,t,e);return 1!==n&&(o["fill-opacity"]=n),o}positionBubble(t,e,i){let r=Math.asin,s=Math.acos,n=Math.pow,o=Math.abs,a=(0,Math.sqrt)(n(t[0]-e[0],2)+n(t[1]-e[1],2)),l=s((n(a,2)+n(i[2]+e[2],2)-n(i[2]+t[2],2))/(2*(i[2]+e[2])*a)),h=r(o(t[0]-e[0])/a),c=(t[1]-e[1]<0?0:Math.PI)+l+h*((t[0]-e[0])*(t[1]-e[1])<0?1:-1),d=Math.cos(c),u=Math.sin(c);return[e[0]+(e[2]+i[2])*u,e[1]-(e[2]+i[2])*d,i[2],i[3],i[4]]}render(){let t=[];Zi.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach((e=>{ar(e.dataLabels)&&e.dataLabels.forEach((e=>{t.push(e)}))})),this.options.useSimulation&&this.chart.hideOverlappingLabels(t))}resizeRadius(){let t,e,i,r,s,n=this.chart,o=n.rawPositions,a=Math.min,l=Math.max,h=n.plotLeft,c=n.plotTop,d=n.plotHeight,u=n.plotWidth;for(let n of(t=i=Number.POSITIVE_INFINITY,e=r=Number.NEGATIVE_INFINITY,o))s=n[2],t=a(t,n[0]-s),e=l(e,n[0]+s),i=a(i,n[1]-s),r=l(r,n[1]+s);let p=[e-t,r-i],f=[(u-h)/p[0],(d-c)/p[1]],g=a.apply([],f);if(Math.abs(g-1)>1e-10){for(let t of o)t[2]*=g;this.placeBubbles(o)}else n.diffY=d/2+c-i-(r-i)/2,n.diffX=u/2+h-t-(e-t)/2}seriesBox(){let t,e=this.chart,i=this.data,r=Math.max,s=Math.min,n=[e.plotLeft,e.plotLeft+e.plotWidth,e.plotTop,e.plotTop+e.plotHeight];return i.forEach((e=>{sr(e.plotX)&&sr(e.plotY)&&e.marker.radius&&(t=e.marker.radius,n[0]=s(n[0],e.plotX-t),n[1]=r(n[1],e.plotX+t),n[2]=s(n[2],e.plotY-t),n[3]=r(n[3],e.plotY+t))})),lr(n.width/n.height)?n:null}setVisible(){let t=this;Zi.setVisible.apply(t,arguments),t.parentNodeLayout&&t.graph?t.visible?(t.graph.show(),t.parentNode.dataLabel&&t.parentNode.dataLabel.show()):(t.graph.hide(),t.parentNodeLayout.removeElementFromCollection(t.parentNode,t.parentNodeLayout.nodes),t.parentNode.dataLabel&&t.parentNode.dataLabel.hide()):t.layout&&(t.visible?t.layout.addElementsToCollection(t.points,t.layout.nodes):t.points.forEach((e=>{t.layout.removeElementFromCollection(e,t.layout.nodes)})))}translate(){let t,e,i,r=this.chart,s=this.data,n=this.index,o=this.options.useSimulation;for(let a of(this.generatePoints(),sr(r.allDataPoints)||(r.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),o?i=r.allDataPoints:(i=this.placeBubbles(r.allDataPoints),this.options.draggable=!1),i))a[3]===n&&(t=s[a[4]],e=cr(a[2],void 0),o||(t.plotX=a[0]-r.plotLeft+r.diffX,t.plotY=a[1]-r.plotTop+r.diffY),lr(e)&&(t.marker=nr(t.marker,{radius:e,width:2*e,height:2*e}),t.radius=e));o&&this.deferLayout(),or(this,"afterTranslate")}}dr.defaultOptions=hr(Ji.defaultOptions,{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:t}=this.series.chart,{value:e}=this.point;return mi(e)?t(e,-1):""},parentNodeFormatter:function(){return this.name||""},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}),nr(dr.prototype,{pointClass:class extends gi{destroy(){return this.series?.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),qt().prototype.destroy.apply(this,arguments)}firePointEvent(){let t=this.series.options;if(this.isParentNode&&t.parentNode){let e=t.allowPointSelect;t.allowPointSelect=t.parentNode.allowPointSelect,qt().prototype.firePointEvent.apply(this,arguments),t.allowPointSelect=e}else qt().prototype.firePointEvent.apply(this,arguments)}select(){let t=this.series.chart;this.isParentNode?(t.getSelectedPoints=t.getSelectedParentNodes,qt().prototype.select.apply(this,arguments),t.getSelectedPoints=fi().prototype.getSelectedPoints):qt().prototype.select.apply(this,arguments)}},axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:tr,alignDataLabel:Zi.alignDataLabel,indexateNodes:Qi,onMouseDown:ri.onMouseDown,onMouseMove:ri.onMouseMove,redrawHalo:ri.redrawHalo,searchPoint:Qi}),x().registerSeriesType("packedbubble",dr);let{noop:ur}=v(),{area:pr,line:fr,scatter:gr}=x().seriesTypes,{extend:mr,merge:yr}=v();class vr extends gr{getGraphPath(){let t=fr.prototype.getGraphPath.call(this),e=t.length+1;for(;e--;)(e===t.length||"M"===t[e][0])&&e>0&&t.splice(e,0,["Z"]);return this.areaPath=t,t}drawGraph(){this.options.fillColor=this.color,pr.prototype.drawGraph.call(this)}}vr.defaultOptions=yr(gr.defaultOptions,{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}),mr(vr.prototype,{type:"polygon",drawTracker:fr.prototype.drawTracker,setStackedPoints:ur}),x().registerSeriesType("polygon",vr);let br={circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}},{defaultOptions:xr}=v(),{composed:wr,noop:Er}=v(),{addEvent:Tr,correctFloat:Sr,defined:Ar,extend:kr,fireEvent:Cr,isObject:Ir,merge:Pr,pick:Mr,pushUnique:Lr,relativeLength:Or,wrap:Nr}=v();!function(t){function e(){this.autoConnect=this.isCircular&&void 0===Mr(this.userMax,this.options.max)&&Sr(this.endAngleRad-this.startAngleRad)===Sr(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=(this.categories?1:this.pointRange)||this.closestPointRange||0)}function i(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&!0!==this.options.labels.allowOverlap)return this.tickPositions.map((t=>this.ticks[t]&&this.ticks[t].label)).filter((t=>!!t))}}function r(){return Er}function s(t,e,i){let r,s,n,o=this.pane.center,a=t.value;return this.isCircular?(Ar(a)?t.point&&(t.point.shapeArgs||{}).start&&(a=this.chart.inverted?this.translate(t.point.rectPlotY,!0):t.point.x):(s=t.chartX||0,n=t.chartY||0,a=this.translate(Math.atan2(n-i,s-e)-this.startAngleRad,!0)),s=(r=this.getPosition(a)).x,n=r.y):(Ar(a)||(s=t.chartX,n=t.chartY),Ar(s)&&Ar(n)&&(i=o[1]+this.chart.plotTop,a=this.translate(Math.min(Math.sqrt(Math.pow(s-e,2)+Math.pow(n-i,2)),o[2]/2)-o[3]/2,!0))),[a,s||0,n||0]}function n(t,e,i){let r,s,n=this.pane.center,o=this.chart,a=this.left||0,l=this.top||0,h=Mr(e,n[2]/2-this.offset);return void 0===i&&(i=this.horiz?0:this.center&&-this.center[3]/2),i&&(h+=i),this.isCircular||void 0!==e?((s=this.chart.renderer.symbols.arc(a+n[0],l+n[1],h,h,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[a+n[0]],s.yBounds=[l+n[1]-h]):(r=this.postTranslate(this.angleRad,h),s=[["M",this.center[0]+o.plotLeft,this.center[1]+o.plotTop],["L",r.x,r.y]]),s}function o(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function a(t,e,i){let r,s,n,o,a,l,h=this.chart,c=t=>{if("string"==typeof t){let e=parseInt(t,10);return y.test(t)&&(e=e*p/100),e}return t},d=this.center,u=this.startAngleRad,p=d[2]/2,f=Math.min(this.offset,0),g=this.left||0,m=this.top||0,y=/%$/,v=this.isCircular,b=Mr(c(i.outerRadius),p),x=c(i.innerRadius),w=Mr(c(i.thickness),10);if("polygon"===this.options.gridLineInterpolation)l=this.getPlotLinePath({value:t}).concat(this.getPlotLinePath({value:e,reverse:!0}));else{t=Math.max(t,this.min),e=Math.min(e,this.max);let c=this.translate(t),p=this.translate(e);v||(b=c||0,x=p||0),"circle"!==i.shape&&v?(r=u+(c||0),s=u+(p||0)):(r=-Math.PI/2,s=1.5*Math.PI,a=!0),b-=f,w-=f,l=h.renderer.symbols.arc(g+d[0],m+d[1],b,b,{start:Math.min(r,s),end:Math.max(r,s),innerR:Mr(x,b-w),open:a,borderRadius:i.borderRadius}),v&&(n=(s+r)/2,o=g+d[0]+d[2]/2*Math.cos(n),l.xBounds=n>-Math.PI/2&&n<Math.PI/2?[o,h.plotWidth]:[0,o],l.yBounds=[m+d[1]+d[2]/2*Math.sin(n)],l.yBounds[0]+=n>-Math.PI&&n<0||n>Math.PI?-10:10)}return l}function l(t){let e,i,r,s,n,o,a,l,h,c=this.pane.center,d=this.chart,u=d.inverted,p=t.reverse,f=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},g=f.innerRadius||"0%",m=f.outerRadius||"100%",y=c[0]+d.plotLeft,v=c[1]+d.plotTop,b=this.height,x=t.isCrosshair,w=c[3]/2,E=t.value,T=this.getPosition(E),S=T.x,A=T.y;if(x&&(E=(l=this.getCrosshairPosition(t,y,v))[0],S=l[1],A=l[2]),this.isCircular)i=Math.sqrt(Math.pow(S-y,2)+Math.pow(A-v,2)),r="string"==typeof g?Or(g,1):g/i,s="string"==typeof m?Or(m,1):m/i,c&&w&&(r<(e=w/i)&&(r=e),s<e&&(s=e)),h=[["M",y+r*(S-y),v-r*(v-A)],["L",S-(1-s)*(S-y),A+(1-s)*(v-A)]];else if((E=this.translate(E))&&(E<0||E>b)&&(E=0),"circle"===this.options.gridLineInterpolation)h=this.getLinePath(0,E,w);else if(h=[],d[u?"yAxis":"xAxis"].forEach((t=>{t.pane===this.pane&&(n=t)})),n){a=n.tickPositions,n.autoConnect&&(a=a.concat([a[0]])),p&&(a=a.slice().reverse()),E&&(E+=w);for(let t=0;t<a.length;t++)o=n.getPosition(a[t],E),h.push(t?["L",o.x,o.y]:["M",o.x,o.y])}return h}function h(t,e){let i=this.translate(t);return this.postTranslate(this.isCircular?i:this.angleRad,Mr(this.isCircular?e:i<0?0:i,this.center[2]/2)-this.offset)}function c(){let t=this.center,e=this.chart,i=this.options.title;return{x:e.plotLeft+t[0]+(i.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[i.align]*t[2]+(i.y||0)}}function d(t){t.beforeSetTickPositions=e,t.createLabelCollector=i,t.getCrosshairPosition=s,t.getLinePath=n,t.getOffset=o,t.getPlotBandPath=a,t.getPlotLinePath=l,t.getPosition=h,t.getTitlePosition=c,t.postTranslate=w,t.setAxisSize=T,t.setAxisTranslation=S,t.setOptions=A}function u(){let t=this.chart,e=this.options,i=t.angular&&this.isXAxis,r=this.pane,s=r&&r.options;if(!i&&r&&(t.angular||t.polar)){let t=2*Math.PI,i=(Mr(s.startAngle,0)-90)*Math.PI/180,r=(Mr(s.endAngle,Mr(s.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(e.angle||0)*Math.PI/180,this.startAngleRad=i,this.endAngleRad=r,this.offset=e.offset||0;let n=(i%t+t)%t,o=(r%t+t)%t;n>Math.PI&&(n-=t),o>Math.PI&&(o-=t),this.normalizedStartAngleRad=n,this.normalizedEndAngleRad=o}}function p(t){this.isRadial&&(t.align=void 0,t.preventDefault())}function f(){if(this.chart&&this.chart.labelCollectors){let t=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;t>=0&&this.chart.labelCollectors.splice(t,1)}}function g(t){let e,i=this.chart,s=i.angular,n=i.polar,o=this.isXAxis,a=this.coll,l=t.userOptions.pane||0,h=this.pane=i.pane&&i.pane[l];"colorAxis"!==a?(s?(s&&o?(this.isHidden=!0,this.createLabelCollector=r,this.getOffset=Er,this.redraw=E,this.render=E,this.setScale=Er,this.setCategories=Er,this.setTitle=Er):d(this),e=!o):n&&(d(this),e=this.horiz),s||n?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&i.labelCollectors.push(this.labelCollector)):this.isRadial=!1,h&&e&&(h.axis=this),this.isCircular=e):this.isRadial=!1}function m(){this.isRadial&&this.beforeSetTickPositions()}function y(t){let e=this.label;if(!e)return;let i,r=this.axis,s=e.getBBox(),n=r.options.labels,o=(r.translate(this.pos)+r.startAngleRad+Math.PI/2)/Math.PI*180%360,a=Math.round(o),l=Ar(n.y)?0:-.3*s.height,h=n.y,c=20,d=n.align,u="end",p=a<0?a+360:a,f=p,g=0,m=0;r.isRadial&&(i=r.getPosition(this.pos,r.center[2]/2+Or(Mr(n.distance,-25),r.center[2]/2,-r.center[2]/2)),"auto"===n.rotation?e.attr({rotation:o}):Ar(h)||(h=r.chart.renderer.fontMetrics(e).b-s.height/2),Ar(d)||(r.isCircular?(s.width>r.len*r.tickInterval/(r.max-r.min)&&(c=0),d=o>c&&o<180-c?"left":o>180+c&&o<360-c?"right":"center"):d="center",e.attr({align:d})),"auto"===d&&2===r.tickPositions.length&&r.isCircular&&(p>90&&p<180?p=180-p:p>270&&p<=360&&(p=540-p),f>180&&f<=360&&(f=360-f),(r.pane.options.startAngle===a||r.pane.options.startAngle===a+360||r.pane.options.startAngle===a-360)&&(u="start"),d=a>=-90&&a<=90||a>=-360&&a<=-270||a>=270&&a<=360?"start"===u?"right":"left":"start"===u?"left":"right",f>70&&f<110&&(d="center"),p<15||p>=180&&p<195?g=.3*s.height:p>=15&&p<=35?g="start"===u?0:.75*s.height:p>=195&&p<=215?g="start"===u?.75*s.height:0:p>35&&p<=90?g="start"===u?-.25*s.height:s.height:p>215&&p<=270&&(g="start"===u?s.height:-.25*s.height),f<15?m="start"===u?-.15*s.height:.15*s.height:f>165&&f<=180&&(m="start"===u?.15*s.height:-.15*s.height),e.attr({align:d}),e.translate(m,g+l)),t.pos.x=i.x+(n.x||0),t.pos.y=i.y+(h||0))}function b(t){this.axis.getPosition&&kr(t.pos,this.axis.getPosition(this.pos))}function x({options:e}){e.xAxis&&Pr(!0,t.radialDefaultOptions.circular,e.xAxis),e.yAxis&&Pr(!0,t.radialDefaultOptions.radialGauge,e.yAxis)}function w(t,e){let i=this.chart,r=this.center;return t=this.startAngleRad+t,{x:i.plotLeft+r[0]+Math.cos(t)*e,y:i.plotTop+r[1]+Math.sin(t)*e}}function E(){this.isDirty=!1}function T(){let t,e;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),t=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(e=this.postTranslate(this.angleRad,t[3]/2),t[0]=e.x-this.chart.plotLeft,t[1]=e.y-this.chart.plotTop),this.len=this.width=this.height=(t[2]-t[3])*Mr(this.sector,1)/2)}function S(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function A(e){let{coll:i}=this,{angular:r,inverted:s,polar:n}=this.chart,o={};r?this.isXAxis||(o=Pr(xr.yAxis,t.radialDefaultOptions.radialGauge)):n&&(o=this.horiz?Pr(xr.xAxis,t.radialDefaultOptions.circular):Pr("xAxis"===i?xr.xAxis:xr.yAxis,t.radialDefaultOptions.radial)),s&&"yAxis"===i&&(o.stackLabels=Ir(xr.yAxis,!0)?xr.yAxis.stackLabels:{},o.reversedStacks=!0);let a=this.options=Pr(o,e);a.plotBands||(a.plotBands=[]),Cr(this,"afterSetOptions")}function k(t,e,i,r,s,n,o){let a,l=this.axis;return l.isRadial?["M",e,i,"L",(a=l.getPosition(this.pos,l.center[2]/2+r)).x,a.y]:t.call(this,e,i,r,s,n,o)}t.radialDefaultOptions=Pr(br),t.compose=function(t,e){return Lr(wr,"Axis.Radial")&&(Tr(t,"afterInit",u),Tr(t,"autoLabelAlign",p),Tr(t,"destroy",f),Tr(t,"init",g),Tr(t,"initialAxisTranslation",m),Tr(e,"afterGetLabelPosition",y),Tr(e,"afterGetPosition",b),Tr(v(),"setOptions",x),Nr(e.prototype,"getMarkPath",k)),t}}(d||(d={}));let _r=d,{animObject:Dr}=v(),{composed:Rr}=v(),{addEvent:Fr,defined:Br,find:zr,isNumber:Ur,merge:Hr,pick:Vr,pushUnique:jr,relativeLength:Gr,splat:Wr,uniqueKey:Xr,wrap:qr}=v();function Yr(){(this.pane||[]).forEach((t=>{t.render()}))}function Kr(t){let e=t.args[0].xAxis,i=t.args[0].yAxis,r=t.args[0].chart;e&&i&&("polygon"===i.gridLineInterpolation?(e.startOnTick=!0,e.endOnTick=!0):"polygon"===e.gridLineInterpolation&&r.inverted&&(i.startOnTick=!0,i.endOnTick=!0))}function $r(){this.pane||(this.pane=[]),this.options.pane=Wr(this.options.pane||{}),this.options.pane.forEach((t=>{new V(t,this)}),this)}function Qr(t){let e=t.args.marker,i=this.chart.xAxis[0],r=this.chart.yAxis[0],s=this.chart.inverted,n=s?r:i,o=s?i:r;if(this.chart.polar){t.preventDefault();let i=(e.attr?e.attr("start"):e.start)-n.startAngleRad,r=e.attr?e.attr("r"):e.r,s=(e.attr?e.attr("end"):e.end)-n.startAngleRad,a=e.attr?e.attr("innerR"):e.innerR;t.result.x=i+n.pos,t.result.width=s-i,t.result.y=o.len+o.pos-r,t.result.height=r-a}}function Zr(t){let e=this.chart;if(e.polar&&e.hoverPane&&e.hoverPane.axis){t.preventDefault();let i=e.hoverPane.center,r=e.mouseDownX||0,s=e.mouseDownY||0,n=t.args.chartY,o=t.args.chartX,a=2*Math.PI,l=e.hoverPane.axis.startAngleRad,h=e.hoverPane.axis.endAngleRad,c=e.inverted?e.xAxis[0]:e.yAxis[0],d={},u="arc";if(d.x=i[0]+e.plotLeft,d.y=i[1]+e.plotTop,this.zoomHor){let t=l>0?h-l:Math.abs(l)+Math.abs(h),p=Math.atan2(s-e.plotTop-i[1],r-e.plotLeft-i[0])-l,f=Math.atan2(n-e.plotTop-i[1],o-e.plotLeft-i[0])-l;d.r=i[2]/2,d.innerR=i[3]/2,p<=0&&(p+=a),f<=0&&(f+=a),f<p&&(f=[p,p=f][0]),t<a&&l+f>h+(a-t)/2&&(f=p,p=l<=0?l:0);let g=d.start=Math.max(p+l,l),m=d.end=Math.min(f+l,h);if("polygon"===c.options.gridLineInterpolation){let t=e.hoverPane.axis,r=g-t.startAngleRad+t.pos,s=c.getPlotLinePath({value:c.max}),n=t.toValue(r),o=t.toValue(r+(m-g));if(n<t.getExtremes().min){let{min:e,max:i}=t.getExtremes();n=i-(e-n)}if(o<t.getExtremes().min){let{min:e,max:i}=t.getExtremes();o=i-(e-o)}o<n&&(o=[n,n=o][0]),(s=is(s,n,o,t)).push(["L",i[0]+e.plotLeft,e.plotTop+i[1]]),d.d=s,u="path"}}if(this.zoomVert){let t=e.inverted?e.xAxis[0]:e.yAxis[0],a=Math.sqrt(Math.pow(r-e.plotLeft-i[0],2)+Math.pow(s-e.plotTop-i[1],2)),c=Math.sqrt(Math.pow(o-e.plotLeft-i[0],2)+Math.pow(n-e.plotTop-i[1],2));if(c<a&&(a=[c,c=a][0]),c>i[2]/2&&(c=i[2]/2),a<i[3]/2&&(a=i[3]/2),this.zoomHor||(d.start=l,d.end=h),d.r=c,d.innerR=a,"polygon"===t.options.gridLineInterpolation){let e=t.toValue(t.len+t.pos-a),i=t.toValue(t.len+t.pos-c),r=t.getPlotLinePath({value:i}).concat(t.getPlotLinePath({value:e,reverse:!0}));d.d=r,u="path"}}if(this.zoomHor&&this.zoomVert&&"polygon"===c.options.gridLineInterpolation){let t=e.hoverPane.axis,i=d.start||0,r=d.end||0,s=i-t.startAngleRad+t.pos,n=t.toValue(s),o=t.toValue(s+(r-i));if(d.d instanceof Array){let t=d.d.slice(0,d.d.length/2),i=d.d.slice(d.d.length/2,d.d.length);i=[...i].reverse();let r=e.hoverPane.axis;t=is(t,n,o,r),(i=is(i,n,o,r))&&(i[0][0]="L"),i=[...i].reverse(),d.d=t.concat(i),u="path"}}t.attrs=d,t.shapeType=u}}function Jr(){let t=this.chart;t.polar&&(this.polar=new us(this),t.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function ts(){if(this.chart.polar&&this.xAxis){let{xAxis:t,yAxis:e}=this,i=this.chart;this.kdByAngle=i.tooltip&&i.tooltip.shared,this.kdByAngle||i.inverted?this.searchPoint=es:this.options.findNearestPointBy="xy";let r=this.points,s=r.length;for(;s--;)this.is("column")||this.is("columnrange")||this.polar.toXY(r[s]),i.hasParallelCoordinates||this.yAxis.reversed||(Vr(r[s].y,Number.MIN_VALUE)<e.min||r[s].x<t.min||r[s].x>t.max?(r[s].isNull=!0,r[s].plotY=NaN):r[s].isNull=r[s].isValid&&!r[s].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(Fr(this,"afterRender",(function(){let t;i.polar&&!1!==this.options.clip&&(t=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2}):this.clipCircle=function(t,e,i,r,s){let n=Xr(),o=t.createElement("clipPath").attr({id:n}).add(t.defs),a=s?t.arc(e,i,r,s,0,2*Math.PI).add(o):t.circle(e,i,r).add(o);return a.id=n,a.clipPath=o,a}(i.renderer,t[0],t[1],t[2]/2,t[3]/2),this.group.clip(this.clipCircle),this.setClip=v().noop)}))))}}function es(t){let e=this.chart,i=this.xAxis,r=this.yAxis,s=i.pane&&i.pane.center,n=t.chartX-(s&&s[0]||0)-e.plotLeft,o=t.chartY-(s&&s[1]||0)-e.plotTop,a=e.inverted?{clientX:t.chartX-r.pos,plotY:t.chartY-i.pos}:{clientX:180+-180/Math.PI*Math.atan2(n,o)};return this.searchKDTree(a)}function is(t,e,i,r){let s=r.tickInterval,n=r.tickPositions,o=zr(n,(t=>t>=i)),a=zr([...n].reverse(),(t=>t<=e));return Br(o)||(o=n[n.length-1]),Br(a)||(a=n[0],o+=s,t[0][0]="L",t.unshift(t[t.length-3])),(t=t.slice(n.indexOf(a),n.indexOf(o)+1))[0][0]="M",t}function rs(t,e){return zr(this.pane||[],(t=>t.options.id===e))||t.call(this,e)}function ss(t,e,i,r,s,n){let o,a,l,h=this.chart,c=Vr(r.inside,!!this.options.stacking);if(h.polar){if(o=e.rectPlotX/Math.PI*180,h.inverted)this.forceDL=h.isInsidePlot(e.plotX,e.plotY),c&&e.shapeArgs?(a=e.shapeArgs,s=Hr(s,{x:(l=this.yAxis.postTranslate(((a.start||0)+(a.end||0))/2-this.xAxis.startAngleRad,e.barX+e.pointWidth/2)).x-h.plotLeft,y:l.y-h.plotTop})):e.tooltipPos&&(s=Hr(s,{x:e.tooltipPos[0],y:e.tooltipPos[1]})),r.align=Vr(r.align,"center"),r.verticalAlign=Vr(r.verticalAlign,"middle");else{var d;let t,e;null===(d=r).align&&(t=o>20&&o<160?"left":o>200&&o<340?"right":"center",d.align=t),null===d.verticalAlign&&(e=o<45||o>315?"bottom":o>135&&o<225?"top":"middle",d.verticalAlign=e),r=d}E().prototype.alignDataLabel.call(this,e,i,r,s,n),this.isRadialBar&&e.shapeArgs&&e.shapeArgs.start===e.shapeArgs.end?i.hide():i.show()}else t.call(this,e,i,r,s,n)}function ns(){let t,e,i,r,s,n,o,a,l,h,c,d,u,p=this.options,f=p.stacking,g=this.chart,m=this.xAxis,y=this.yAxis,b=y.reversed,x=y.center,w=m.startAngleRad,E=m.endAngleRad-w,T=p.threshold,S=0,A=0,k=0;if(m.isRadial)for(i=(t=this.points).length,r=y.translate(y.min),s=y.translate(y.max),T=p.threshold||0,g.inverted&&Ur(T)&&Br(S=y.translate(T))&&(S<0?S=0:S>E&&(S=E),this.translatedThreshold=S+w);i--;){if(c=(e=t[i]).barX,o=e.x,a=e.y,e.shapeType="arc",g.inverted){e.plotY=y.translate(a),f&&y.stacking?(h=y.stacking.stacks[(a<0?"-":"")+this.stackKey],this.visible&&h&&h[o]&&!e.isNull&&(l=h[o].points[this.getStackIndicator(void 0,o,this.index).key],A=y.translate(l[0]),k=y.translate(l[1]),Br(A)&&(A=v().clamp(A,0,E)))):(A=S,k=e.plotY),A>k&&(k=[A,A=k][0]),b?k>r?k=r:A<s?A=s:(A>r||k<s)&&(A=k=E):A<r?A=r:k>s?k=s:(k<r||A>s)&&(A=k=0),y.min>y.max&&(A=k=b?E:0),A+=w,k+=w,x&&(e.barX=c+=x[3]/2),d=Math.max(c,0),u=Math.max(c+e.pointWidth,0);let t=p.borderRadius,i=Gr(("object"==typeof t?t.radius:t)||0,u-d);e.shapeArgs={x:x[0],y:x[1],r:u,innerR:d,start:A,end:k,borderRadius:i},e.opacity=A===k?0:void 0,e.plotY=(Br(this.translatedThreshold)&&(A<this.translatedThreshold?A:k))-w}else A=c+w,e.shapeArgs=this.polar.arc(e.yBottom,e.plotY,A,A+e.pointWidth),e.shapeArgs.borderRadius=0;this.polar.toXY(e),g.inverted?(n=y.postTranslate(e.rectPlotY,c+e.pointWidth/2),e.tooltipPos=[n.x-g.plotLeft,n.y-g.plotTop]):e.tooltipPos=[e.plotX,e.plotY],x&&(e.ttBelow=e.plotY>x[1])}}function os(t,e){let i,r,s=this;if(this.chart.polar){e=e||this.points;for(let t=0;t<e.length;t++)if(!e[t].isNull){i=t;break}!1!==this.options.connectEnds&&void 0!==i&&(this.connectEnds=!0,e.splice(e.length,0,e[i]),r=!0),e.forEach((t=>{void 0===t.polarPlotY&&s.polar.toXY(t)}))}let n=t.apply(this,[].slice.call(arguments,1));return r&&e.pop(),n}function as(t,e){let i=this.chart,r={xAxis:[],yAxis:[]};return i.polar?i.axes.forEach((t=>{if("colorAxis"===t.coll)return;let s=t.isXAxis,n=t.center,o=e.chartX-n[0]-i.plotLeft,a=e.chartY-n[1]-i.plotTop;r[s?"xAxis":"yAxis"].push({axis:t,value:t.translate(s?Math.PI-Math.atan2(o,a):Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),!0)})})):r=t.call(this,e),r}function ls(t,e){this.chart.polar||t.call(this,e)}function hs(t,e){let i,r,s,n,o,a,l=this,h=this.chart,c=this.group,d=this.markerGroup,u=this.xAxis&&this.xAxis.center,p=h.plotLeft,f=h.plotTop,g=this.options.animation;h.polar?l.isRadialBar?e||(l.startAngleRad=Vr(l.translatedThreshold,l.xAxis.startAngleRad),v().seriesTypes.pie.prototype.animate.call(l,e)):(g=Dr(g),l.is("column")?e||(r=u[3]/2,l.points.forEach((t=>{s=t.graphic,o=(n=t.shapeArgs)&&n.r,a=n&&n.innerR,s&&n&&(s.attr({r,innerR:r}),s.animate({r:o,innerR:a},l.options.animation))}))):e?(i={translateX:u[0]+p,translateY:u[1]+f,scaleX:.001,scaleY:.001},c.attr(i),d&&d.attr(i)):(i={translateX:p,translateY:f,scaleX:1,scaleY:1},c.animate(i,g),d&&d.animate(i,g))):t.call(this,e)}function cs(t,e,i,r){let s,n;if(this.chart.polar)if(r){let t=(n=function t(e,i,r,s){let n,o,a,l,h,c,d=s?1:0,u=(n=i>=0&&i<=e.length-1?i:i<0?e.length-1+i:0)-1<0?e.length-(1+d):n-1,p=n+1>e.length-1?d:n+1,f=e[u],g=e[p],m=f.plotX,y=f.plotY,v=g.plotX,b=g.plotY,x=e[n].plotX,w=e[n].plotY;o=(1.5*x+m)/2.5,a=(1.5*w+y)/2.5,l=(1.5*x+v)/2.5,h=(1.5*w+b)/2.5;let E=Math.sqrt(Math.pow(o-x,2)+Math.pow(a-w,2)),T=Math.sqrt(Math.pow(l-x,2)+Math.pow(h-w,2)),S=Math.atan2(a-w,o-x);c=Math.PI/2+(S+Math.atan2(h-w,l-x))/2,Math.abs(S-c)>Math.PI/2&&(c-=Math.PI),o=x+Math.cos(c)*E,a=w+Math.sin(c)*E;let A={rightContX:l=x+Math.cos(Math.PI+c)*T,rightContY:h=w+Math.sin(Math.PI+c)*T,leftContX:o,leftContY:a,plotX:x,plotY:w};return r&&(A.prevPointCont=t(e,u,!1,s)),A}(e,r,!0,this.connectEnds)).prevPointCont&&n.prevPointCont.rightContX,i=n.prevPointCont&&n.prevPointCont.rightContY;s=["C",Ur(t)?t:n.plotX,Ur(i)?i:n.plotY,Ur(n.leftContX)?n.leftContX:n.plotX,Ur(n.leftContY)?n.leftContY:n.plotY,n.plotX,n.plotY]}else s=["M",i.plotX,i.plotY];else s=t.call(this,e,i,r);return s}function ds(t,e,i=this.plotY){if(!this.destroyed){let{plotX:r,series:s}=this,{chart:n}=s;return n.polar&&Ur(r)&&Ur(i)?[r+(e?n.plotLeft:0),i+(e?n.plotTop:0)]:t.call(this,e,i)}}class us{static compose(t,e,i,r,s,n,o,a,l,h){if(V.compose(e,i),_r.compose(t,s),jr(Rr,"Polar")){let t=e.prototype,s=n.prototype,c=i.prototype,d=r.prototype;if(Fr(e,"afterDrawChartBox",Yr),Fr(e,"createAxes",$r),Fr(e,"init",Kr),qr(t,"get",rs),qr(c,"getCoordinates",as),qr(c,"pinch",ls),Fr(i,"getSelectionMarkerAttrs",Zr),Fr(i,"getSelectionBox",Qr),Fr(r,"afterInit",Jr),Fr(r,"afterTranslate",ts,{order:2}),Fr(r,"afterColumnTranslate",ns,{order:4}),qr(d,"animate",hs),qr(s,"pos",ds),a){let t=a.prototype;qr(t,"alignDataLabel",ss),qr(t,"animate",hs)}if(l&&qr(l.prototype,"getGraphPath",os),h){let t=h.prototype;qr(t,"getPointSpline",cs),o&&(o.prototype.getPointSpline=t.getPointSpline)}}}constructor(t){this.series=t}arc(t,e,i,r){let s=this.series,n=s.xAxis.center,o=s.yAxis.len,a=n[3]/2,l=o-e+a,h=o-Vr(t,o)+a;return s.yAxis.reversed&&(l<0&&(l=a),h<0&&(h=a)),{x:n[0],y:n[1],r:l,innerR:h,start:i,end:r}}toXY(t){let e,i=this.series,r=i.chart,s=i.xAxis,n=i.yAxis,o=t.plotX,a=r.inverted,l=t.y,h=t.plotY,c=a?o:n.len-h;if(a&&i&&!i.isRadialBar&&(t.plotY=h=Ur(l)?n.translate(l):0),t.rectPlotX=o,t.rectPlotY=h,n.center&&(c+=n.center[3]/2),Ur(h)){let e=a?n.postTranslate(h,c):s.postTranslate(o,c);t.plotX=t.polarPlotX=e.x-r.plotLeft,t.plotY=t.polarPlotY=e.y-r.plotTop}i.kdByAngle?((e=(o/Math.PI*180+s.pane.options.startAngle)%360)<0&&(e+=360),t.clientX=e):t.clientX=t.plotX}}var ps=g(184),fs=g.n(ps);let{composed:gs}=v(),{addEvent:ms,objectEach:ys,pushUnique:vs}=v();!function(t){function e(){let t=this.waterfall.stacks;t&&(t.changed=!1,delete t.alreadyChanged)}function i(){let t=this.options.stackLabels;t&&t.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function r(){this.waterfall||(this.waterfall=new n(this))}function s(){let t=this.axes;for(let e of this.series)if(e.options.stacking){for(let e of t)e.isXAxis||(e.waterfall.stacks.changed=!0);break}}t.compose=function(t,n){vs(gs,"Axis.Waterfall")&&(ms(t,"init",r),ms(t,"afterBuildStacks",e),ms(t,"afterRender",i),ms(n,"beforeRedraw",s))};class n{constructor(t){this.axis=t,this.stacks={changed:!1}}renderStackTotals(){let t=this.axis,e=t.waterfall.stacks,i=t.stacking&&t.stacking.stackTotalGroup,r=new(fs())(t,t.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=r,i&&ys(e,(t=>{ys(t,((t,e)=>{r.total=t.stackTotal,r.x=+e,t.label&&(r.label=t.label),fs().prototype.render.call(r,i),t.label=r.label,delete r.label}))})),r.total=null}}t.Composition=n}(u||(u={}));let bs=u,{isNumber:xs}=v();class ws extends dt().prototype.pointClass{getClassName(){let t=qt().prototype.getClassName.call(this);return this.isSum?t+=" highcharts-sum":this.isIntermediateSum&&(t+=" highcharts-intermediate-sum"),t}isValid(){return xs(this.y)||this.isSum||!!this.isIntermediateSum}}let{column:Es,line:Ts}=x().seriesTypes,{addEvent:Ss,arrayMax:As,arrayMin:ks,correctFloat:Cs,crisp:Is,extend:Ps,isNumber:Ms,merge:Ls,objectEach:Os,pick:Ns}=v();function _s(t,e){return Object.hasOwnProperty.call(t,e)}class Ds extends Es{generatePoints(){Es.prototype.generatePoints.apply(this);let t=this.getColumn("y",!0);for(let e=0,i=this.points.length;e<i;e++){let i=this.points[e],r=t[e];Ms(r)&&(i.isIntermediateSum||i.isSum)&&(i.y=Cs(r))}}processData(t){let e,i,r,s,n,o,a=this.options,l=this.getColumn("y"),h=a.data,c=l.length,d=a.threshold||0;r=i=s=n=0;for(let t=0;t<c;t++)o=l[t],e=h?.[t]||{},"sum"===o||e.isSum?l[t]=Cs(r):"intermediateSum"===o||e.isIntermediateSum?(l[t]=Cs(i),i=0):(r+=o,i+=o),s=Math.min(r,s),n=Math.max(r,n);super.processData.call(this,t),a.stacking||(this.dataMin=s+d,this.dataMax=n)}toYData(t){return t.isSum?"sum":t.isIntermediateSum?"intermediateSum":t.y}pointAttribs(t,e){let i=this.options.upColor;i&&!t.options.color&&Ms(t.y)&&(t.color=t.y>0?i:void 0);let r=Es.prototype.pointAttribs.call(this,t,e);return delete r.dashstyle,r}getGraphPath(){return[["M",0,0]]}getCrispPath(){let t=this.data.filter((t=>Ms(t.y))),e=this.yAxis,i=t.length,r=this.graph?.strokeWidth()||0,s=this.xAxis.reversed,n=this.yAxis.reversed,o=this.options.stacking,a=[];for(let l=1;l<i;l++){if(!this.options.connectNulls&&!Ms(this.data[t[l].index-1].y))continue;let i=t[l].box,h=t[l-1],c=h.y||0,d=t[l-1].box;if(!i||!d)continue;let u=e.waterfall.stacks[this.stackKey],p=c>0?-d.height:0;if(u&&d&&i){let t,c=u[l-1];if(o){let i=c.connectorThreshold;t=Is(e.translate(i,!1,!0,!1,!0)+(n?p:0),r)}else t=Is(d.y+(h.minPointLengthOffset||0),r);a.push(["M",(d.x||0)+(s?0:d.width||0),t],["L",(i.x||0)+(s&&i.width||0),t])}if(d&&a.length&&(!o&&c<0&&!n||c>0&&n)){let t=a[a.length-2];t&&"number"==typeof t[2]&&(t[2]+=d.height||0);let e=a[a.length-1];e&&"number"==typeof e[2]&&(e[2]+=d.height||0)}}return a}drawGraph(){Ts.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(t){let e,i,r,s,n,o,a,l,h,c=this.options,d=t.waterfall?.stacks,u=c.threshold||0,p=this.stackKey,f=this.getColumn("x"),g=this.getColumn("y"),m=f.length,y=u,v=y,b=0,x=0,w=0,E=(t,r,s,n)=>{if(e){if(i)for(;s<i;s++)e.stackState[s]+=n;else e.stackState[0]=t,i=e.stackState.length;e.stackState.push(e.stackState[i-1]+r)}};if(t.stacking&&d&&this.reserveSpace()){h=d.changed,(l=d.alreadyChanged)&&0>l.indexOf(p)&&(h=!0),d[p]||(d[p]={});let t=d[p];if(t)for(let l=0;l<m;l++)(!t[a=f[l]]||h)&&(t[a]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:h&&t[a]?t[a].label:void 0}),e=t[a],(o=g[l])>=0?e.posTotal+=o:e.negTotal+=o,n=c.data[l],r=e.absolutePos=e.posTotal,s=e.absoluteNeg=e.negTotal,e.stackTotal=r+s,i=e.stackState.length,n&&n.isIntermediateSum?(E(w,x,0,w),w=x,x=u,y^=v,v^=y,y^=v):n&&n.isSum?(E(u,b,i,0),y=u):(E(y,o,0,b),n&&(b+=o,x+=o)),e.stateIndex++,e.threshold=y,y+=e.stackTotal;d.changed=!1,d.alreadyChanged||(d.alreadyChanged=[]),d.alreadyChanged.push(p)}}getExtremes(){let t,e,i,r=this.options.stacking;return r?(t=this.yAxis.waterfall.stacks,e=this.stackedYNeg=[],i=this.stackedYPos=[],Os(t[this.stackKey],"overlap"===r?function(t){e.push(ks(t.stackState)),i.push(As(t.stackState))}:function(t){e.push(t.negTotal+t.threshold),i.push(t.posTotal+t.threshold)}),{dataMin:ks(e),dataMax:As(i)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}Ds.defaultOptions=Ls(Es.defaultOptions,{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}),Ds.compose=bs.compose,Ps(Ds.prototype,{pointValKey:"y",showLine:!0,pointClass:ws}),Ss(Ds,"afterColumnTranslate",(function(){let t,e,i,r,{options:s,points:n,yAxis:o}=this,a=Ns(s.minPointLength,5),l=a/2,h=s.threshold||0,c=s.stacking,d=o.waterfall.stacks[this.stackKey],u=this.getColumn("y",!0),p=h,f=h;for(let s=0;s<n.length;s++){let g=n[s],m=u[s],y=Ps({x:0,y:0,width:0,height:0},g.shapeArgs||{});g.box=y;let v=[0,m],b=g.y||0;if(c){if(d){let n=d[s];"overlap"===c?(e=n.stackState[n.stateIndex--],t=b>=0?e:e-b,_s(n,"absolutePos")&&delete n.absolutePos,_s(n,"absoluteNeg")&&delete n.absoluteNeg):(b>=0?(e=n.threshold+n.posTotal,n.posTotal-=b,t=e):(e=n.threshold+n.negTotal,n.negTotal-=b,t=e-b),!n.posTotal&&Ms(n.absolutePos)&&_s(n,"absolutePos")&&(n.posTotal=n.absolutePos,delete n.absolutePos),!n.negTotal&&Ms(n.absoluteNeg)&&_s(n,"absoluteNeg")&&(n.negTotal=n.absoluteNeg,delete n.absoluteNeg)),g.isSum||(n.connectorThreshold=n.threshold+n.stackTotal),o.reversed?(i=b>=0?t-b:t+b,r=t):(i=t,r=t-b),g.below=i<=h,y.y=o.translate(i,!1,!0,!1,!0),y.height=Math.abs(y.y-o.translate(r,!1,!0,!1,!0));let a=o.waterfall.dummyStackItem;a&&(a.x=s,a.label=d[s].label,a.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[s],this.stackedYPos[s],void 0,this.xAxis))}}else t=Math.max(f,f+b)+v[0],y.y=o.translate(t,!1,!0,!1,!0),g.isSum?(y.y=o.translate(v[1],!1,!0,!1,!0),y.height=Math.min(o.translate(v[0],!1,!0,!1,!0),o.len)-y.y,g.below=v[1]<=h):g.isIntermediateSum?(b>=0?(i=v[1]+p,r=p):(i=p,r=v[1]+p),o.reversed&&(i^=r,r^=i,i^=r),y.y=o.translate(i,!1,!0,!1,!0),y.height=Math.abs(y.y-Math.min(o.translate(r,!1,!0,!1,!0),o.len)),p+=v[1],g.below=i<=h):(y.height=m>0?o.translate(f,!1,!0,!1,!0)-y.y:o.translate(f,!1,!0,!1,!0)-o.translate(f-m,!1,!0,!1,!0),f+=m,g.below=f<h),y.height<0&&(y.y+=y.height,y.height*=-1);g.plotY=y.y,g.yBottom=y.y+y.height,y.height<=a&&!g.isNull?(y.height=a,y.y-=l,g.yBottom=y.y+y.height,g.plotY=y.y,g.minPointLengthOffset=b<0?-l:l):(g.isNull&&(y.width=0),g.minPointLengthOffset=0);let x=g.plotY+(g.negative?y.height:0);g.below&&(g.plotY+=y.height),g.tooltipPos&&(this.chart.inverted?g.tooltipPos[0]=o.len-x:g.tooltipPos[1]=x),g.isInside=this.isPointInside(g);let w=Is(g.yBottom,this.borderWidth);y.y=Is(y.y,this.borderWidth),y.height=w-y.y,Ls(!0,g.shapeArgs,y)}}),{order:2}),x().registerSeriesType("waterfall",Ds);let Rs=v();Rs.RadialAxis=_r,fe.compose(Rs.Axis,Rs.Chart,Rs.Legend),dr.compose(Rs.Axis,Rs.Chart,Rs.Legend),V.compose(Rs.Chart,Rs.Pointer),us.compose(Rs.Axis,Rs.Chart,Rs.Pointer,Rs.Series,Rs.Tick,Rs.Point,x().seriesTypes.areasplinerange,x().seriesTypes.column,x().seriesTypes.line,x().seriesTypes.spline),Ds.compose(Rs.Axis,Rs.Chart);let Fs=Rs;return m.default})()))},783:function(t){!function(e,i){e._Highcharts=i(),t.exports=e._Highcharts}("undefined"==typeof window?this:window,(()=>(()=>{"use strict";let t,e;var i,r,s,n,o,a,l,h,c,d,u,p,f,g,m,y,v,b={d:(t,e)=>{for(var i in e)b.o(e,i)&&!b.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},x={};b.d(x,{default:()=>Qc}),function(t){t.SVG_NS="http://www.w3.org/2000/svg",t.product="Highcharts",t.version="12.0.2",t.win="undefined"!=typeof window?window:{},t.doc=t.win.document,t.svg=t.doc&&t.doc.createElementNS&&!!t.doc.createElementNS(t.SVG_NS,"svg").createSVGRect,t.userAgent=t.win.navigator&&t.win.navigator.userAgent||"",t.isChrome=t.win.chrome,t.isFirefox=-1!==t.userAgent.indexOf("Firefox"),t.isMS=/(edge|msie|trident)/i.test(t.userAgent)&&!t.win.opera,t.isSafari=!t.isChrome&&-1!==t.userAgent.indexOf("Safari"),t.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(t.userAgent),t.isWebKit=-1!==t.userAgent.indexOf("AppleWebKit"),t.deg2rad=2*Math.PI/360,t.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],t.noop=function(){},t.supportsPassiveEvents=function(){let e=!1;if(!t.isMS){let i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.win.addEventListener&&t.win.removeEventListener&&(t.win.addEventListener("testPassive",t.noop,i),t.win.removeEventListener("testPassive",t.noop,i))}return e}(),t.charts=[],t.composed=[],t.dateFormats={},t.seriesTypes={},t.symbolSizes={},t.chartCount=0}(i||(i={}));let w=i,{charts:E,doc:T,win:S}=w;function A(t,e,i,r){let s=e?"Highcharts error":"Highcharts warning";32===t&&(t=`${s}: Deprecated member`);let n=O(t),o=n?`${s} #${t}: www.highcharts.com/errors/${t}/`:t.toString();if(void 0!==r){let t="";n&&(o+="?"),V(r,(function(e,i){t+=`\n - ${i}: ${e}`,n&&(o+=encodeURI(i)+"="+encodeURI(e))})),o+=t}G(w,"displayError",{chart:i,code:t,message:o,params:r},(function(){if(e)throw Error(o);S.console&&-1===A.messages.indexOf(o)&&console.warn(o)})),A.messages.push(o)}function k(t,e){return parseInt(t,e||10)}function C(t){return"string"==typeof t}function I(t){let e=Object.prototype.toString.call(t);return"[object Array]"===e||"[object Array Iterator]"===e}function P(t,e){return!(!t||"object"!=typeof t||e&&I(t))}function M(t){return P(t)&&"number"==typeof t.nodeType}function L(t){let e=t&&t.constructor;return!(!P(t,!0)||M(t)||!e||!e.name||"Object"===e.name)}function O(t){return"number"==typeof t&&!isNaN(t)&&t<1/0&&t>-1/0}function N(t){return null!=t}function _(t,e,i){let r,s=C(e)&&!N(i),n=(e,i)=>{N(e)?t.setAttribute(i,e):s?(r=t.getAttribute(i))||"class"!==i||(r=t.getAttribute(i+"Name")):t.removeAttribute(i)};return C(e)?n(i,e):V(e,n),r}function D(t){return I(t)?t:[t]}function R(t,e){let i;for(i in t||(t={}),e)t[i]=e[i];return t}function F(){let t=arguments,e=t.length;for(let i=0;i<e;i++){let e=t[i];if(null!=e)return e}}function B(t,e){R(t.style,e)}function z(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function U(t,e){return t>1e14?t:parseFloat(t.toPrecision(e||14))}(A||(A={})).messages=[],Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)};let H=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){let i,r=t.length;for(i=0;i<r;i++)if(e(t[i],i))return t[i]};function V(t,e,i){for(let r in t)Object.hasOwnProperty.call(t,r)&&e.call(i||t[r],t[r],r,t)}function j(t,e,i){function r(e,i){let r=t.removeEventListener;r&&r.call(t,e,i,!1)}function s(i){let s,n;t.nodeName&&(e?(s={})[e]=!0:s=i,V(s,(function(t,e){if(i[e])for(n=i[e].length;n--;)r(e,i[e][n].fn)})))}let n="function"==typeof t&&t.prototype||t;if(Object.hasOwnProperty.call(n,"hcEvents")){let t=n.hcEvents;if(e){let n=t[e]||[];i?(t[e]=n.filter((function(t){return i!==t.fn})),r(e,i)):(s(t),t[e]=[])}else s(t),delete n.hcEvents}}function G(t,e,i,r){if(i=i||{},T.createEvent&&(t.dispatchEvent||t.fireEvent&&t!==w)){let r=T.createEvent("Events");r.initEvent(e,!0,!0),i=R(r,i),t.dispatchEvent?t.dispatchEvent(i):t.fireEvent(e,i)}else if(t.hcEvents){i.target||R(i,{preventDefault:function(){i.defaultPrevented=!0},target:t,type:e});let r=[],s=t,n=!1;for(;s.hcEvents;)Object.hasOwnProperty.call(s,"hcEvents")&&s.hcEvents[e]&&(r.length&&(n=!0),r.unshift.apply(r,s.hcEvents[e])),s=Object.getPrototypeOf(s);n&&r.sort(((t,e)=>t.order-e.order)),r.forEach((e=>{!1===e.fn.call(t,i)&&i.preventDefault()}))}r&&!i.defaultPrevented&&r.call(t,i)}let W=function(){let e=Math.random().toString(36).substring(2,9)+"-",i=0;return function(){return"highcharts-"+(t?"":e)+i++}}();S.jQuery&&(S.jQuery.fn.highcharts=function(){let t=[].slice.call(arguments);if(this[0])return t[0]?(new(w[C(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):E[_(this[0],"data-highcharts-chart")]});let X={addEvent:function(t,e,i,r={}){let s="function"==typeof t&&t.prototype||t;Object.hasOwnProperty.call(s,"hcEvents")||(s.hcEvents={});let n=s.hcEvents;w.Point&&t instanceof w.Point&&t.series&&t.series.chart&&(t.series.chart.runTrackerClick=!0);let o=t.addEventListener;o&&o.call(t,e,i,!!w.supportsPassiveEvents&&{passive:void 0===r.passive?-1!==e.indexOf("touch"):r.passive,capture:!1}),n[e]||(n[e]=[]);let a={fn:i,order:"number"==typeof r.order?r.order:1/0};return n[e].push(a),n[e].sort(((t,e)=>t.order-e.order)),function(){j(t,e,i)}},arrayMax:function(t){let e=t.length,i=t[0];for(;e--;)t[e]>i&&(i=t[e]);return i},arrayMin:function(t){let e=t.length,i=t[0];for(;e--;)t[e]<i&&(i=t[e]);return i},attr:_,clamp:function(t,e,i){return t>e?t<i?t:i:e},clearTimeout:function(t){N(t)&&clearTimeout(t)},correctFloat:U,createElement:function(t,e,i,r,s){let n=T.createElement(t);return e&&R(n,e),s&&B(n,{padding:"0",border:"none",margin:"0"}),i&&B(n,i),r&&r.appendChild(n),n},crisp:function(t,e=0,i){let r=e%2/2,s=i?-1:1;return(Math.round(t*s-r)+r)*s},css:B,defined:N,destroyObjectProperties:function(t,e,i){V(t,(function(r,s){r!==e&&r?.destroy&&r.destroy(),(r?.destroy||!i)&&delete t[s]}))},diffObjects:function(t,e,i,r){let s={};return function t(e,s,n,o){let a=i?s:e;V(e,(function(i,l){if(!o&&r&&r.indexOf(l)>-1&&s[l]){i=D(i),n[l]=[];for(let e=0;e<Math.max(i.length,s[l].length);e++)s[l][e]&&(void 0===i[e]?n[l][e]=s[l][e]:(n[l][e]={},t(i[e],s[l][e],n[l][e],o+1)))}else P(i,!0)&&!i.nodeType?(n[l]=I(i)?[]:{},t(i,s[l]||{},n[l],o+1),0!==Object.keys(n[l]).length||"colorAxis"===l&&0===o||delete n[l]):(e[l]!==s[l]||l in e&&!(l in s))&&"__proto__"!==l&&"constructor"!==l&&(n[l]=a[l])}))}(t,e,s,0),s},discardElement:function(t){t&&t.parentElement&&t.parentElement.removeChild(t)},erase:function(t,e){let i=t.length;for(;i--;)if(t[i]===e){t.splice(i,1);break}},error:A,extend:R,extendClass:function(t,e){let i=function(){};return R(i.prototype=new t,e),i},find:H,fireEvent:G,getAlignFactor:(t="")=>({center:.5,right:1,middle:.5,bottom:1}[t]||0),getClosestDistance:function(t,e){let i,r,s,n,o=!e;return t.forEach((t=>{if(t.length>1)for(n=r=t.length-1;n>0;n--)(s=t[n]-t[n-1])<0&&!o?(e?.(),e=void 0):s&&(void 0===i||s<i)&&(i=s)})),i},getMagnitude:z,getNestedProperty:function(t,e){let i=t.split(".");for(;i.length&&N(e);){let t=i.shift();if(void 0===t||"__proto__"===t)return;if("this"===t){let t;return P(e)&&(t=e["@this"]),t??e}let r=e[t];if(!N(r)||"function"==typeof r||"number"==typeof r.nodeType||r===S)return;e=r}return e},getStyle:function t(e,i,r){let s;if("width"===i){let i=Math.min(e.offsetWidth,e.scrollWidth),r=e.getBoundingClientRect&&e.getBoundingClientRect().width;return r<i&&r>=i-1&&(i=Math.floor(r)),Math.max(0,i-(t(e,"padding-left",!0)||0)-(t(e,"padding-right",!0)||0))}if("height"===i)return Math.max(0,Math.min(e.offsetHeight,e.scrollHeight)-(t(e,"padding-top",!0)||0)-(t(e,"padding-bottom",!0)||0));let n=S.getComputedStyle(e,void 0);return n&&(s=n.getPropertyValue(i),F(r,"opacity"!==i)&&(s=k(s))),s},insertItem:function(t,e){let i,r=t.options.index,s=e.length;for(i=t.options.isInternal?s:0;i<s+1;i++)if(!e[i]||O(r)&&r<F(e[i].options.index,e[i]._i)||e[i].options.isInternal){e.splice(i,0,t);break}return i},isArray:I,isClass:L,isDOMElement:M,isFunction:function(t){return"function"==typeof t},isNumber:O,isObject:P,isString:C,merge:function(t,...e){let i,r=[t,...e],s={},n=function(t,e){return"object"!=typeof t&&(t={}),V(e,(function(i,r){"__proto__"!==r&&"constructor"!==r&&(!P(i,!0)||L(i)||M(i)?t[r]=e[r]:t[r]=n(t[r]||{},i))})),t};!0===t&&(s=r[1],r=Array.prototype.slice.call(r,2));let o=r.length;for(i=0;i<o;i++)s=n(s,r[i]);return s},normalizeTickInterval:function(t,e,i,r,s){let n,o=t,a=t/(i=F(i,z(t)));for(!e&&(e=s?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===r&&(1===i?e=e.filter((function(t){return t%1==0})):i<=.1&&(e=[1/i]))),n=0;n<e.length&&(o=e[n],(!s||!(o*i>=t))&&(s||!(a<=(e[n]+(e[n+1]||e[n]))/2)));n++);return U(o*i,-Math.round(Math.log(.001)/Math.LN10))},objectEach:V,offset:function(t){let e=T.documentElement,i=t.parentElement||t.parentNode?t.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:i.top+(S.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(S.pageXOffset||e.scrollLeft)-(e.clientLeft||0),width:i.width,height:i.height}},pad:function(t,e,i){return Array((e||2)+1-String(t).replace("-","").length).join(i||"0")+t},pick:F,pInt:k,pushUnique:function(t,e){return 0>t.indexOf(e)&&!!t.push(e)},relativeLength:function(t,e,i){return/%$/.test(t)?e*parseFloat(t)/100+(i||0):parseFloat(t)},removeEvent:j,replaceNested:function(t,...e){let i,r;do{for(r of(i=t,e))t=t.replace(r[0],r[1])}while(t!==i);return t},splat:D,stableSort:function(t,e){let i,r,s=t.length;for(r=0;r<s;r++)t[r].safeI=r;for(t.sort((function(t,r){return 0===(i=e(t,r))?t.safeI-r.safeI:i})),r=0;r<s;r++)delete t[r].safeI},syncTimeout:function(t,e,i){return e>0?setTimeout(t,e,i):(t.call(0,i),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(t){return C(t)?t.substring(0,1).toUpperCase()+t.substring(1):String(t)},uniqueKey:W,useSerialIds:function(e){return t=F(e,t)},wrap:function(t,e,i){let r=t[e];t[e]=function(){let t=arguments,e=this;return i.apply(this,[function(){return r.apply(e,arguments.length?arguments:t)}].concat([].slice.call(arguments)))}}},{win:q}=w,{defined:Y,error:K,extend:$,isNumber:Q,isObject:Z,isString:J,merge:tt,objectEach:et,pad:it,splat:rt,timeUnits:st,ucfirst:nt}=X,ot=w.isSafari&&q.Intl&&!q.Intl.DateTimeFormat.prototype.formatRange,at=t=>["D","L","M","X","J","V","S"].indexOf(t),lt=class{constructor(t){this.options={},this.variableTimezone=!1,this.Date=q.Date,this.update(t)}update(t={}){let e=t.timezone??"UTC";this.dTLCache={},this.options=t=tt(!0,this.options,t);let{timezoneOffset:i,useUTC:r}=t;this.Date=t.Date||q.Date||Date,Y(r)&&(e=r?"UTC":void 0),i&&i%60==0&&(e="Etc/GMT"+(i>0?"+":"")+i/60),this.variableTimezone="UTC"!==e&&0!==e?.indexOf("Etc/GMT"),this.timezone=e,["months","shortMonths","weekdays","shortWeekdays"].forEach((t=>{let e=/months/i.test(t),i=/short/.test(t),r={timeZone:"UTC"};r[e?"month":"weekday"]=i?"short":"long",this[t]=(e?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map((t=>this.dateFormat(r,24*(e?31:1)*36e5*t)))}))}toParts(t){let[e,i,r,s,n,o,a]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},t,"es").split(/(?:, |\/|:)/g);return[s,+r-1,i,n,o,a,Math.floor(Number(t)||0)%1e3,at(e)].map(Number)}dateTimeFormat(t,e,i=this.options.locale){let r=JSON.stringify(t)+i;J(t)&&(t=this.str2dtf(t));let s=this.dTLCache[r];if(!s){t.timeZone??(t.timeZone=this.timezone);try{s=new Intl.DateTimeFormat(i,t)}catch(e){/Invalid time zone/i.test(e.message)?(K(34),t.timeZone="UTC",s=new Intl.DateTimeFormat(i,t)):K(e.message,!1)}}return this.dTLCache[r]=s,s?.format(e)||""}str2dtf(t,e={}){let i={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(i).forEach((r=>{-1!==t.indexOf(r)&&$(e,i[r])})),e}makeTime(t,e,i=1,r=0,s,n,o){let a=this.Date.UTC(t,e,i,r,s||0,n||0,o||0);if("UTC"!==this.timezone){let t=this.getTimezoneOffset(a);if(a+=t,-1!==[2,3,8,9,10,11].indexOf(e)&&(r<5||r>20)){let e=this.getTimezoneOffset(a);t!==e?a+=e-t:t-36e5!==this.getTimezoneOffset(a-36e5)||ot||(a-=36e5)}}return a}parse(t){if(!J(t))return t??void 0;let e=(t=t.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(t),i=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(t);e||i||(t+="Z");let r=Date.parse(t);return Q(r)?r+(!e||i?this.getTimezoneOffset(r):0):void 0}getTimezoneOffset(t){if("UTC"!==this.timezone){let[e,i,r,s,n=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},t,"en").split(/(GMT|:)/).map(Number),o=-36e5*(r+n/60);if(Q(o))return o}return 0}dateFormat(t,e,i){let r=w.defaultOptions?.lang;if(!Y(e)||isNaN(e))return r?.invalidDate||"";if(J(t=t??"%Y-%m-%d %H:%M:%S")){let i,r=/%\[([a-zA-Z]+)\]/g;for(;i=r.exec(t);)t=t.replace(i[0],this.dateTimeFormat(i[1],e))}if(J(t)&&-1!==t.indexOf("%")){let i=this,[s,n,o,a,l,h,c,d]=this.toParts(e),u=r?.weekdays||this.weekdays,p=r?.shortWeekdays||this.shortWeekdays,f=r?.months||this.months,g=r?.shortMonths||this.shortMonths;et($({a:p?p[d]:u[d].substr(0,3),A:u[d],d:it(o),e:it(o,2," "),w:d,b:g[n],B:f[n],m:it(n+1),o:n+1,y:s.toString().substr(2,2),Y:s,H:it(a),k:a,I:it(a%12||12),l:a%12||12,M:it(l),p:a<12?"AM":"PM",P:a<12?"am":"pm",S:it(h),L:it(c,3)},w.dateFormats),(function(r,s){if(J(t))for(;-1!==t.indexOf("%"+s);)t=t.replace("%"+s,"function"==typeof r?r.call(i,e):r)}))}else if(Z(t)){let i=(this.getTimezoneOffset(e)||0)/36e5,r=this.options.timezone||"Etc/GMT"+(i>=0?"+":"")+i,{prefix:s="",suffix:n=""}=t;t=s+this.dateTimeFormat($({timeZone:r},t),e)+n}return i?nt(t):t}resolveDTLFormat(t){return Z(t,!0)?Z(t,!0)&&(t=>void 0===t.main)(t)?{main:t}:t:{main:(t=rt(t))[0],from:t[1],to:t[2]}}getTimeTicks(t,e,i,r){let s,n=this,o=[],a={},{count:l=1,unitRange:h}=t,[c,d,u,p,f,g]=n.toParts(e),m=(e||0)%1e3;if(r??(r=1),Y(e)){if(m=h>=st.second?0:l*Math.floor(m/l),h>=st.second&&(g=h>=st.minute?0:l*Math.floor(g/l)),h>=st.minute&&(f=h>=st.hour?0:l*Math.floor(f/l)),h>=st.hour&&(p=h>=st.day?0:l*Math.floor(p/l)),h>=st.day&&(u=h>=st.month?1:Math.max(1,l*Math.floor(u/l))),h>=st.month&&(d=h>=st.year?0:l*Math.floor(d/l)),h>=st.year&&(c-=c%l),h===st.week){l&&(e=n.makeTime(c,d,u,p,f,g,m));let t=at(this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},e,"es"));u+=-t+r+(t<r?-7:0)}e=n.makeTime(c,d,u,p,f,g,m),n.variableTimezone&&Y(i)&&(s=i-e>4*st.month||n.getTimezoneOffset(e)!==n.getTimezoneOffset(i));let t=e,y=1;for(;t<i;)o.push(t),h===st.year?t=n.makeTime(c+y*l,0):h===st.month?t=n.makeTime(c,d+y*l):!s||h!==st.day&&h!==st.week?s&&h===st.hour&&l>1?t=n.makeTime(c,d,u,p+y*l):t+=h*l:t=n.makeTime(c,d,u+y*l*(h===st.day?1:7)),y++;o.push(t),h<=st.hour&&o.length<1e4&&o.forEach((t=>{t%18e5==0&&"000000000"===n.dateFormat("%H%M%S%L",t)&&(a[t]="day")}))}return o.info=$(t,{higherRanks:a,totalRange:h*l}),o}getDateFormat(t,e,i,r){let s=this.dateFormat("%m-%d %H:%M:%S.%L",e),n="01-01 00:00:00.000",o={millisecond:15,second:12,minute:9,hour:6,day:3},a="millisecond",l=a;for(a in st){if(t===st.week&&+this.dateFormat("%w",e)===i&&s.substr(6)===n.substr(6)){a="week";break}if(st[a]>t){a=l;break}if(o[a]&&s.substr(o[a])!==n.substr(o[a]))break;"week"!==a&&(l=a)}return this.resolveDTLFormat(r[a]).main}},{isTouchDevice:ht}=w,{fireEvent:ct,merge:dt}=X,ut={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{locale:void 0,loading:"Loading...",months:void 0,shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:t=>Math.sqrt(1-Math.pow(t-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"Week from %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:ht?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};ut.chart.styledMode=!0,ut.chart.styledMode=!1;let pt=new lt(ut.time),ft={defaultOptions:ut,defaultTime:pt,getOptions:function(){return ut},setOptions:function(t){return ct(w,"setOptions",{options:t}),dt(!0,ut,t),t.time&&pt.update(ut.time),t.lang&&"locale"in t.lang&&pt.update({locale:t.lang.locale}),ut}},{isNumber:gt,merge:mt,pInt:yt,defined:vt}=X;class bt{static parse(t){return t?new bt(t):bt.None}constructor(t){let e,i,r,s;this.rgba=[NaN,NaN,NaN,NaN],this.input=t;let n=w.Color;if(n&&n!==bt)return new n(t);if("object"==typeof t&&void 0!==t.stops)this.stops=t.stops.map((t=>new bt(t[1])));else if("string"==typeof t)for(this.input=t=bt.names[t.toLowerCase()]||t,r=bt.parsers.length;r--&&!i;)(e=(s=bt.parsers[r]).regex.exec(t))&&(i=s.parse(e));i&&(this.rgba=i)}get(t){let e=this.input,i=this.rgba;if("object"==typeof e&&void 0!==this.stops){let i=mt(e);return i.stops=[].slice.call(i.stops),this.stops.forEach(((e,r)=>{i.stops[r]=[i.stops[r][0],e.get(t)]})),i}return i&&gt(i[0])?"rgb"===t||!t&&1===i[3]?"rgb("+i[0]+","+i[1]+","+i[2]+")":"a"===t?`${i[3]}`:"rgba("+i.join(",")+")":e}brighten(t){let e=this.rgba;if(this.stops)this.stops.forEach((function(e){e.brighten(t)}));else if(gt(t)&&0!==t)for(let i=0;i<3;i++)e[i]+=yt(255*t),e[i]<0&&(e[i]=0),e[i]>255&&(e[i]=255);return this}setOpacity(t){return this.rgba[3]=t,this}tweenTo(t,e){let i=this.rgba,r=t.rgba;if(!gt(i[0])||!gt(r[0]))return t.input||"none";let s=1!==r[3]||1!==i[3];return(s?"rgba(":"rgb(")+Math.round(r[0]+(i[0]-r[0])*(1-e))+","+Math.round(r[1]+(i[1]-r[1])*(1-e))+","+Math.round(r[2]+(i[2]-r[2])*(1-e))+(s?","+(r[3]+(i[3]-r[3])*(1-e)):"")+")"}}bt.names={white:"#ffffff",black:"#000000"},bt.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(t){return[yt(t[1]),yt(t[2]),yt(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(t){return[yt(t[1]),yt(t[2]),yt(t[3]),1]}},{regex:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,parse:function(t){return[yt(t[1]+t[1],16),yt(t[2]+t[2],16),yt(t[3]+t[3],16),vt(t[4])?yt(t[4]+t[4],16)/255:1]}},{regex:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,parse:function(t){return[yt(t[1],16),yt(t[2],16),yt(t[3],16),vt(t[4])?yt(t[4],16)/255:1]}}],bt.None=new bt("");let{parse:xt}=bt,{win:wt}=w,{isNumber:Et,objectEach:Tt}=X;class St{constructor(t,e,i){this.pos=NaN,this.options=e,this.elem=t,this.prop=i}dSetter(){let t=this.paths,e=t&&t[0],i=t&&t[1],r=this.now||0,s=[];if(1!==r&&e&&i)if(e.length===i.length&&r<1)for(let t=0;t<i.length;t++){let n=e[t],o=i[t],a=[];for(let t=0;t<o.length;t++){let e=n[t],i=o[t];Et(e)&&Et(i)&&("A"!==o[0]||4!==t&&5!==t)?a[t]=e+r*(i-e):a[t]=i}s.push(a)}else s=i;else s=this.toD||[];this.elem.attr("d",s,void 0,!0)}update(){let t=this.elem,e=this.prop,i=this.now,r=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,i,null,!0):t.style[e]=i+this.unit,r&&r.call(t,i,this)}run(t,e,i){let r=this,s=r.options,n=function(t){return!n.stopped&&r.step(t)},o=wt.requestAnimationFrame||function(t){setTimeout(t,13)},a=function(){for(let t=0;t<St.timers.length;t++)St.timers[t]()||St.timers.splice(t--,1);St.timers.length&&o(a)};t!==e||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=t,this.end=e,this.unit=i,this.now=this.start,this.pos=0,n.elem=this.elem,n.prop=this.prop,n()&&1===St.timers.push(n)&&o(a)):(delete s.curAnim[this.prop],s.complete&&0===Object.keys(s.curAnim).length&&s.complete.call(this.elem))}step(t){let e,i,r=+new Date,s=this.options,n=this.elem,o=s.complete,a=s.duration,l=s.curAnim;return n.attr&&!n.element?e=!1:t||r>=a+this.startTime?(this.now=this.end,this.pos=1,this.update(),l[this.prop]=!0,i=!0,Tt(l,(function(t){!0!==t&&(i=!1)})),i&&o&&o.call(n),e=!1):(this.pos=s.easing((r-this.startTime)/a),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0),e}initPath(t,e,i){let r,s,n,o,a=t.startX,l=t.endX,h=i.slice(),c=t.isArea,d=c?2:1,u=e&&i.length>e.length&&i.hasStackedCliffs,p=e&&e.slice();if(!p||u)return[h,h];function f(t,e){for(;t.length<s;){let i=t[0],r=e[s-t.length];if(r&&"M"===i[0]&&("C"===r[0]?t[0]=["C",i[1],i[2],i[1],i[2],i[1],i[2]]:t[0]=["L",i[1],i[2]]),t.unshift(i),c){let e=t.pop();t.push(t[t.length-1],e)}}}function g(t){for(;t.length<s;){let e=t[Math.floor(t.length/d)-1].slice();if("C"===e[0]&&(e[1]=e[5],e[2]=e[6]),c){let i=t[Math.floor(t.length/d)].slice();t.splice(t.length/2,0,e,i)}else t.push(e)}}if(a&&l&&l.length){for(n=0;n<a.length;n++){if(a[n]===l[0]){r=n;break}if(a[0]===l[l.length-a.length+n]){r=n,o=!0;break}if(a[a.length-1]===l[l.length-a.length+n]){r=a.length-n;break}}void 0===r&&(p=[])}return p.length&&Et(r)&&(s=h.length+r*d,o?(f(p,h),g(h)):(f(h,p),g(p))),[p,h]}fillSetter(){St.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,xt(this.start).tweenTo(xt(this.end),this.pos),void 0,!0)}}St.timers=[];let{defined:At,getStyle:kt,isArray:Ct,isNumber:It,isObject:Pt,merge:Mt,objectEach:Lt,pick:Ot}=X;function Nt(t){return Pt(t)?Mt({duration:500,defer:0},t):{duration:t?500:0,defer:0}}function _t(t,e){let i=St.timers.length;for(;i--;)St.timers[i].elem!==t||e&&e!==St.timers[i].prop||(St.timers[i].stopped=!0)}let Dt={animate:function(t,e,i){let r,s,n,o,a="";Pt(i)||(o=arguments,i={duration:o[2],easing:o[3],complete:o[4]}),It(i.duration)||(i.duration=400),i.easing="function"==typeof i.easing?i.easing:Math[i.easing]||Math.easeInOutSine,i.curAnim=Mt(e),Lt(e,(function(o,l){_t(t,l),n=new St(t,i,l),s=void 0,"d"===l&&Ct(e.d)?(n.paths=n.initPath(t,t.pathArray,e.d),n.toD=e.d,r=0,s=1):t.attr?r=t.attr(l):(r=parseFloat(kt(t,l))||0,"opacity"!==l&&(a="px")),s||(s=o),"string"==typeof s&&s.match("px")&&(s=s.replace(/px/g,"")),n.run(r,s,a)}))},animObject:Nt,getDeferredAnimation:function(t,e,i){let r=Nt(e),s=i?[i]:t.series,n=0,o=0;return s.forEach((t=>{let i=Nt(t.options.animation);n=Pt(e)&&At(e.defer)?r.defer:Math.max(n,i.duration+i.defer),o=Math.min(r.duration,i.duration)})),t.renderer.forExport&&(n=0),{defer:Math.max(0,n-o),duration:Math.min(n,o)}},setAnimation:function(t,e){e.renderer.globalAnimation=Ot(t,e.options.chart.animation,!0)},stop:_t},{SVG_NS:Rt,win:Ft}=w,{attr:Bt,createElement:zt,css:Ut,error:Ht,isFunction:Vt,isString:jt,objectEach:Gt,splat:Wt}=X,{trustedTypes:Xt}=Ft,qt=Xt&&Vt(Xt.createPolicy)&&Xt.createPolicy("highcharts",{createHTML:t=>t}),Yt=qt?qt.createHTML(""):"";class Kt{static filterUserAttributes(t){return Gt(t,((e,i)=>{let r=!0;-1===Kt.allowedAttributes.indexOf(i)&&(r=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(i)&&(r=jt(e)&&Kt.allowedReferences.some((t=>0===e.indexOf(t)))),r||(Ht(33,!1,void 0,{"Invalid attribute in config":`${i}`}),delete t[i]),jt(e)&&t[i]&&(t[i]=e.replace(/</g,"&lt;"))})),t}static parseStyle(t){return t.split(";").reduce(((t,e)=>{let i=e.split(":").map((t=>t.trim())),r=i.shift();return r&&i.length&&(t[r.replace(/-([a-z])/g,(t=>t[1].toUpperCase()))]=i.join(":")),t}),{})}static setElementHTML(t,e){t.innerHTML=Kt.emptyHTML,e&&new Kt(e).addToDOM(t)}constructor(t){this.nodes="string"==typeof t?this.parseMarkup(t):t}addToDOM(t){return function t(e,i){let r;return Wt(e).forEach((function(e){let s,n=e.tagName,o=e.textContent?w.doc.createTextNode(e.textContent):void 0,a=Kt.bypassHTMLFiltering;if(n)if("#text"===n)s=o;else if(-1!==Kt.allowedTags.indexOf(n)||a){let r="svg"===n?Rt:i.namespaceURI||Rt,l=w.doc.createElementNS(r,n),h=e.attributes||{};Gt(e,(function(t,e){"tagName"!==e&&"attributes"!==e&&"children"!==e&&"style"!==e&&"textContent"!==e&&(h[e]=t)})),Bt(l,a?h:Kt.filterUserAttributes(h)),e.style&&Ut(l,e.style),o&&l.appendChild(o),t(e.children||[],l),s=l}else Ht(33,!1,void 0,{"Invalid tagName in config":n});s&&i.appendChild(s),r=s})),r}(this.nodes,t)}parseMarkup(t){let e,i=[];t=t.trim().replace(/ style=(["'])/g," data-style=$1");try{e=(new DOMParser).parseFromString(qt?qt.createHTML(t):t,"text/html")}catch(t){}if(!e){let i=zt("div");i.innerHTML=t,e={body:i}}let r=(t,e)=>{let i=t.nodeName.toLowerCase(),s={tagName:i};"#text"===i&&(s.textContent=t.textContent||"");let n=t.attributes;if(n){let t={};[].forEach.call(n,(e=>{"data-style"===e.name?s.style=Kt.parseStyle(e.value):t[e.name]=e.value})),s.attributes=t}if(t.childNodes.length){let e=[];[].forEach.call(t.childNodes,(t=>{r(t,e)})),e.length&&(s.children=e)}e.push(s)};return[].forEach.call(e.body.childNodes,(t=>r(t,i))),i}}Kt.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],Kt.allowedReferences=["https://","http://","mailto:","/","../","./","#"],Kt.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],Kt.emptyHTML=Yt,Kt.bypassHTMLFiltering=!1;let{defaultOptions:$t,defaultTime:Qt}=ft,{doc:Zt}=w,{extend:Jt,getNestedProperty:te,isArray:ee,isNumber:ie,isObject:re,pick:se,ucfirst:ne}=X,oe={add:(t,e)=>t+e,divide:(t,e)=>0!==e?t/e:"",eq:(t,e)=>t==e,each:function(t){let e=arguments[arguments.length-1];return!!ee(t)&&t.map(((i,r)=>le(e.body,Jt(re(i)?i:{"@this":i},{"@index":r,"@first":0===r,"@last":r===t.length-1})))).join("")},ge:(t,e)=>t>=e,gt:(t,e)=>t>e,if:t=>!!t,le:(t,e)=>t<=e,lt:(t,e)=>t<e,multiply:(t,e)=>t*e,ne:(t,e)=>t!=e,subtract:(t,e)=>t-e,ucfirst:ne,unless:t=>!t},ae={};function le(t="",e,i){let r,s,n,o=/\{([\p{L}\d:\.,;\-\/<>\[\]%_@"'’= #\(\)]+)\}/gu,a=/\(([\p{L}\d:\.,;\-\/<>\[\]%_@"'= ]+)\)/gu,l=[],h=/f$/,c=/\.(\d)/,d=i?.options.lang||$t.lang,u=i&&i.time||Qt,p=i&&i.numberFormatter||he,f=(t="")=>{let i;return"true"===t||"false"!==t&&((i=Number(t)).toString()===t?i:/^["'].+["']$/.test(t)?t.slice(1,-1):te(t,e))},g=0;for(;null!==(r=o.exec(t));){let i=r,o=a.exec(r[1]);o&&(r=o,n=!0),s&&s.isBlock||(s={ctx:e,expression:r[1],find:r[0],isBlock:"#"===r[1].charAt(0),start:r.index,startInner:r.index+r[0].length,length:r[0].length});let h=(s.isBlock?i:r)[1].split(" ")[0].replace("#","");oe[h]&&(s.isBlock&&h===s.fn&&g++,s.fn||(s.fn=h));let c="else"===r[1];if(s.isBlock&&s.fn&&(r[1]===`/${s.fn}`||c))if(g)!c&&g--;else{let e=s.startInner,i=t.substr(e,r.index-e);void 0===s.body?(s.body=i,s.startInner=r.index+r[0].length):s.elseBody=i,s.find+=i+r[0],c||(l.push(s),s=void 0)}else s.isBlock||l.push(s);if(o&&!s?.isBlock)break}return l.forEach((r=>{let s,o,{body:a,elseBody:l,expression:g,fn:m}=r;if(m){let t,n=[r],h=[],c=g.length,d=0;for(o=0;o<=c;o++){let e=g.charAt(o);t||'"'!==e&&"'"!==e?t===e&&(t=""):t=e,t||" "!==e&&o!==c||(h.push(g.substr(d,o-d)),d=o+1)}for(o=oe[m].length;o--;)n.unshift(f(h[o+1]));s=oe[m].apply(e,n),r.isBlock&&"boolean"==typeof s&&(s=le(s?a:l,e,i))}else{let t=g.split(":");if(s=f(t.shift()||""),t.length&&"number"==typeof s){let e=t.join(":");if(h.test(e)){let t=parseInt((e.match(c)||["","-1"])[1],10);null!==s&&(s=p(s,t,d.decimalPoint,e.indexOf(",")>-1?d.thousandsSep:""))}else s=u.dateFormat(e,s),n&&(s=`"${s}"`)}}t=t.replace(r.find,se(s,""))})),n?le(t,e,i):t}function he(t,e,i,r){e=+e;let s,n,[o,a]=(t=+t||0).toString().split("e").map(Number),l=this?.options?.lang||$t.lang,h=(t.toString().split(".")[1]||"").split("e")[0].length,c=e,d={};i??(i=l.decimalPoint),r??(r=l.thousandsSep),-1===e?e=Math.min(h,20):ie(e)?e&&a<0&&((n=e+a)>=0?(o=+o.toExponential(n).split("e")[0],e=n):(o=Math.floor(o),t=e<20?+(o*Math.pow(10,a)).toFixed(e):0,a=0)):e=2,a&&(e??(e=2),t=o),ie(e)&&e>=0&&(d.minimumFractionDigits=e,d.maximumFractionDigits=e),""===r&&(d.useGrouping=!1);let u=r||i,p=u?"en":this?.locale||l.locale||Zt.body.closest("[lang]")?.lang,f=JSON.stringify(d)+p;return s=(ae[f]??(ae[f]=new Intl.NumberFormat(p,d))).format(t),u&&(s=s.replace(/\,/g,r??",").replace(".",i??".")),(e||0!=+s)&&(!(a<0)||c)||(s="0"),a&&0!=+s&&(s+="e"+(a<0?"":"+")+a),s}let ce={dateFormat:function(t,e,i){return Qt.dateFormat(t,e,i)},format:le,helpers:oe,numberFormat:he};!function(t){let e;t.rendererTypes={},t.getRendererType=function(i=e){return t.rendererTypes[i]||t.rendererTypes[e]},t.registerRendererType=function(i,r,s){t.rendererTypes[i]=r,(!e||s)&&(e=i,w.Renderer=r)}}(r||(r={}));let de=r,{clamp:ue,pick:pe,pushUnique:fe,stableSort:ge}=X;(s||(s={})).distribute=function t(e,i,r){let s,n,o,a,l,h,c=e,d=c.reducedLen||i,u=(t,e)=>t.target-e.target,p=[],f=e.length,g=[],m=p.push,y=!0,v=0;for(s=f;s--;)v+=e[s].size;if(v>d){for(ge(e,((t,e)=>(e.rank||0)-(t.rank||0))),o=(h=e[0].rank===e[e.length-1].rank)?f/2:-1,n=h?o:f-1;o&&v>d;)a=e[s=Math.floor(n)],fe(g,s)&&(v-=a.size),n+=o,h&&n>=e.length&&(o/=2,n=o);g.sort(((t,e)=>e-t)).forEach((t=>m.apply(p,e.splice(t,1))))}for(ge(e,u),e=e.map((t=>({size:t.size,targets:[t.target],align:pe(t.align,.5)})));y;){for(s=e.length;s--;)a=e[s],l=(Math.min.apply(0,a.targets)+Math.max.apply(0,a.targets))/2,a.pos=ue(l-a.size*a.align,0,i-a.size);for(s=e.length,y=!1;s--;)s>0&&e[s-1].pos+e[s-1].size>e[s].pos&&(e[s-1].size+=e[s].size,e[s-1].targets=e[s-1].targets.concat(e[s].targets),e[s-1].align=.5,e[s-1].pos+e[s-1].size>i&&(e[s-1].pos=i-e[s-1].size),e.splice(s,1),y=!0)}return m.apply(c,p),s=0,e.some((e=>{let n=0;return(e.targets||[]).some((()=>(c[s].pos=e.pos+n,void 0!==r&&Math.abs(c[s].pos-c[s].target)>r?(c.slice(0,s+1).forEach((t=>delete t.pos)),c.reducedLen=(c.reducedLen||i)-.1*i,c.reducedLen>.1*i&&t(c,i,r),!0):(n+=c[s].size,s++,!1))))})),ge(c,u),c};let me=s,{animate:ye,animObject:ve,stop:be}=Dt,{deg2rad:xe,doc:we,svg:Ee,SVG_NS:Te,win:Se,isFirefox:Ae}=w,{addEvent:ke,attr:Ce,createElement:Ie,crisp:Pe,css:Me,defined:Le,erase:Oe,extend:Ne,fireEvent:_e,getAlignFactor:De,isArray:Re,isFunction:Fe,isNumber:Be,isObject:ze,isString:Ue,merge:He,objectEach:Ve,pick:je,pInt:Ge,pushUnique:We,replaceNested:Xe,syncTimeout:qe,uniqueKey:Ye}=X;class Ke{_defaultGetter(t){let e=je(this[t+"Value"],this[t],this.element?this.element.getAttribute(t):null,0);return/^-?[\d\.]+$/.test(e)&&(e=parseFloat(e)),e}_defaultSetter(t,e,i){i.setAttribute(e,t)}add(t){let e,i=this.renderer,r=this.element;return t&&(this.parentGroup=t),void 0!==this.textStr&&"text"===this.element.nodeName&&i.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:i.box).appendChild(r),this.onAdd&&this.onAdd(),this}addClass(t,e){let i=e?"":this.attr("class")||"";return(t=(t||"").split(/ /g).reduce((function(t,e){return-1===i.indexOf(e)&&t.push(e),t}),i?[i]:[]).join(" "))!==i&&this.attr("class",t),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(t,e,i,r=!0){let s={},n=this.renderer,o=n.alignedObjects,a=!!t;t?(this.alignOptions=t,this.alignByTranslate=e,this.alignTo=i):(t=this.alignOptions||{},e=this.alignByTranslate,i=this.alignTo);let l=!i||Ue(i)?i||"renderer":void 0;l&&(a&&We(o,this),i=void 0);let h=je(i,n[l],n),c=(h.x||0)+(t.x||0)+((h.width||0)-(t.width||0))*De(t.align),d=(h.y||0)+(t.y||0)+((h.height||0)-(t.height||0))*De(t.verticalAlign);return s[e?"translateX":"x"]=Math.round(c),s[e?"translateY":"y"]=Math.round(d),r&&(this[this.placed?"animate":"attr"](s),this.placed=!0),this.alignAttr=s,this}alignSetter(t){let e={left:"start",center:"middle",right:"end"};e[t]&&(this.alignValue=t,this.element.setAttribute("text-anchor",e[t]))}animate(t,e,i){let r=ve(je(e,this.renderer.globalAnimation,!0)),s=r.defer;return we.hidden&&(r.duration=0),0!==r.duration?(i&&(r.complete=i),qe((()=>{this.element&&ye(this,t,r)}),s)):(this.attr(t,void 0,i||r.complete),Ve(t,(function(t,e){r.step&&r.step.call(this,t,{prop:e,pos:1,elem:this})}),this)),this}applyTextOutline(t){let e=this.element;-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(e.style.fill)));let i=t.split(" "),r=i[i.length-1],s=i[0];if(s&&"none"!==s&&w.svg){this.fakeTS=!0,s=s.replace(/(^[\d\.]+)(.*?)$/g,(function(t,e,i){return 2*Number(e)+i})),this.removeTextOutline();let t=we.createElementNS(Te,"tspan");Ce(t,{class:"highcharts-text-outline",fill:r,stroke:r,"stroke-width":s,"stroke-linejoin":"round"});let i=e.querySelector("textPath")||e;[].forEach.call(i.childNodes,(e=>{let i=e.cloneNode(!0);i.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((t=>i.removeAttribute(t))),t.appendChild(i)}));let n=0;[].forEach.call(i.querySelectorAll("text tspan"),(t=>{n+=Number(t.getAttribute("dy"))}));let o=we.createElementNS(Te,"tspan");o.textContent="​",Ce(o,{x:Number(e.getAttribute("x")),dy:-n}),t.appendChild(o),i.insertBefore(t,i.firstChild)}}attr(t,e,i,r){let s,n,o,{element:a}=this,l=Ke.symbolCustomAttribs,h=this;return"string"==typeof t&&void 0!==e&&(s=t,(t={})[s]=e),"string"==typeof t?h=(this[t+"Getter"]||this._defaultGetter).call(this,t,a):(Ve(t,(function(e,i){o=!1,r||be(this,i),this.symbolName&&-1!==l.indexOf(i)&&(n||(this.symbolAttr(t),n=!0),o=!0),this.rotation&&("x"===i||"y"===i)&&(this.doTransform=!0),o||(this[i+"Setter"]||this._defaultSetter).call(this,e,i,a)}),this),this.afterSetters()),i&&i.call(this),h}clip(t){if(t&&!t.clipPath){let e=Ye()+"-",i=this.renderer.createElement("clipPath").attr({id:e}).add(this.renderer.defs);Ne(t,{clipPath:i,id:e,count:0}),t.add(i)}return this.attr("clip-path",t?`url(${this.renderer.url}#${t.id})`:"none")}crisp(t,e){e=Math.round(e||t.strokeWidth||0);let i=t.x||this.x||0,r=t.y||this.y||0,s=(t.width||this.width||0)+i,n=(t.height||this.height||0)+r,o=Pe(i,e),a=Pe(r,e);return Ne(t,{x:o,y:a,width:Pe(s,e)-o,height:Pe(n,e)-a}),Le(t.strokeWidth)&&(t.strokeWidth=e),t}complexColor(t,e,i){let r,s,n,o,a,l,h,c,d,u,p,f=this.renderer,g=[];_e(this.renderer,"complexColor",{args:arguments},(function(){if(t.radialGradient?s="radialGradient":t.linearGradient&&(s="linearGradient"),s){if(n=t[s],a=f.gradients,l=t.stops,d=i.radialReference,Re(n)&&(t[s]=n={x1:n[0],y1:n[1],x2:n[2],y2:n[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&d&&!Le(n.gradientUnits)&&(o=n,n=He(n,f.getRadialAttr(d,o),{gradientUnits:"userSpaceOnUse"})),Ve(n,(function(t,e){"id"!==e&&g.push(e,t)})),Ve(l,(function(t){g.push(t)})),a[g=g.join(",")])u=a[g].attr("id");else{n.id=u=Ye();let t=a[g]=f.createElement(s).attr(n).add(f.defs);t.radAttr=o,t.stops=[],l.forEach((function(e){0===e[1].indexOf("rgba")?(h=(r=bt.parse(e[1])).get("rgb"),c=r.get("a")):(h=e[1],c=1);let i=f.createElement("stop").attr({offset:e[0],"stop-color":h,"stop-opacity":c}).add(t);t.stops.push(i)}))}p="url("+f.url+"#"+u+")",i.setAttribute(e,p),i.gradient=g,t.toString=function(){return p}}}))}css(t){let e,i=this.styles,r={},s=this.element,n=!i;if(i&&Ve(t,(function(t,e){i&&i[e]!==t&&(r[e]=t,n=!0)})),n){i&&(t=Ne(i,r)),null===t.width||"auto"===t.width?delete this.textWidth:"text"===s.nodeName.toLowerCase()&&t.width&&(e=this.textWidth=Ge(t.width)),Ne(this.styles,t),e&&!Ee&&this.renderer.forExport&&delete t.width;let n=Ae&&t.fontSize||null;n&&(Be(n)||/^\d+$/.test(n))&&(t.fontSize+="px");let o=He(t);s.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","whiteSpace","width"].forEach((t=>o&&delete o[t])),o.color&&(o.fill=o.color)),Me(s,o)}return this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),t.textOutline&&this.applyTextOutline(t.textOutline)),this}dashstyleSetter(t){let e,i=this["stroke-width"];if("inherit"===i&&(i=1),t=t&&t.toLowerCase()){let r=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(e=r.length;e--;)r[e]=""+Ge(r[e])*je(i,NaN);t=r.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}}destroy(){let t,e,i=this,r=i.element||{},s=i.renderer,n=r.ownerSVGElement,o="SPAN"===r.nodeName&&i.parentGroup||void 0;if(r.onclick=r.onmouseout=r.onmouseover=r.onmousemove=r.point=null,be(i),i.clipPath&&n){let t=i.clipPath;[].forEach.call(n.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(e){e.getAttribute("clip-path").indexOf(t.element.id)>-1&&e.removeAttribute("clip-path")})),i.clipPath=t.destroy()}if(i.connector=i.connector?.destroy(),i.stops){for(e=0;e<i.stops.length;e++)i.stops[e].destroy();i.stops.length=0,i.stops=void 0}for(i.safeRemoveChild(r);o&&o.div&&0===o.div.childNodes.length;)t=o.parentGroup,i.safeRemoveChild(o.div),delete o.div,o=t;i.alignOptions&&Oe(s.alignedObjects,i),Ve(i,(function(t,e){i[e]&&i[e].parentGroup===i&&i[e].destroy&&i[e].destroy(),delete i[e]}))}dSetter(t,e,i){Re(t)&&("string"==typeof t[0]&&(t=this.renderer.pathToSegments(t)),this.pathArray=t,t=t.reduce(((t,e,i)=>e&&e.join?(i?t+" ":"")+e.join(" "):(e||"").toString()),"")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),this[e]!==t&&(i.setAttribute(e,t),this[e]=t)}fillSetter(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.complexColor(t,e,i)}hrefSetter(t,e,i){i.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}getBBox(t,e){let i,r,s,n,{alignValue:o,element:a,renderer:l,styles:h,textStr:c}=this,{cache:d,cacheKeys:u}=l,p=a.namespaceURI===this.SVG_NS,f=je(e,this.rotation,0),g=l.styledMode?a&&Ke.prototype.getStyle.call(a,"font-size"):h.fontSize;if(Le(c)&&(-1===(n=c.toString()).indexOf("<")&&(n=n.replace(/\d/g,"0")),n+=["",l.rootFontSize,g,f,this.textWidth,o,h.lineClamp,h.textOverflow,h.fontWeight].join(",")),n&&!t&&(i=d[n]),!i||i.polygon){if(p||l.forExport){try{s=this.fakeTS&&function(t){let e=a.querySelector(".highcharts-text-outline");e&&Me(e,{display:t})},Fe(s)&&s("none"),i=a.getBBox?Ne({},a.getBBox()):{width:a.offsetWidth,height:a.offsetHeight,x:0,y:0},Fe(s)&&s("")}catch(t){}(!i||i.width<0)&&(i={x:0,y:0,width:0,height:0})}else i=this.htmlGetBBox();r=i.height,p&&(i.height=r={"11px,17":14,"13px,20":16}[`${g||""},${Math.round(r)}`]||r),f&&(i=this.getRotatedBox(i,f));let e={bBox:i};_e(this,"afterGetBBox",e),i=e.bBox}if(n&&(""===c||i.height>0)){for(;u.length>250;)delete d[u.shift()];d[n]||u.push(n),d[n]=i}return i}getRotatedBox(t,e){let{x:i,y:r,width:s,height:n}=t,{alignValue:o,translateY:a,rotationOriginX:l=0,rotationOriginY:h=0}=this,c=De(o),d=Number(this.element.getAttribute("y")||0)-(a?0:r),u=e*xe,p=(e-90)*xe,f=Math.cos(u),g=Math.sin(u),m=s*f,y=s*g,v=Math.cos(p),b=Math.sin(p),[[x,w],[E,T]]=[l,h].map((t=>[t-t*f,t*g])),S=i+c*(s-m)+x+T+d*v,A=S+m,k=A-n*v,C=k-m,I=r+d-c*y-w+E+d*b,P=I+y,M=P-n*b,L=M-y,O=Math.min(S,A,k,C),N=Math.min(I,P,M,L);return{x:O,y:N,width:Math.max(S,A,k,C)-O,height:Math.max(I,P,M,L)-N,polygon:[[S,I],[A,P],[k,M],[C,L]]}}getStyle(t){return Se.getComputedStyle(this.element||this,"").getPropertyValue(t)}hasClass(t){return-1!==(""+this.attr("class")).split(" ").indexOf(t)}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(t,e){this.onEvents={},this.opacity=1,this.SVG_NS=Te,this.element="span"===e||"body"===e?Ie(e):we.createElementNS(this.SVG_NS,e),this.renderer=t,this.styles={},_e(this,"afterInit")}on(t,e){let{onEvents:i}=this;return i[t]&&i[t](),i[t]=ke(this.element,t,e),this}opacitySetter(t,e,i){let r=Number(Number(t).toFixed(3));this.opacity=r,i.setAttribute(e,r)}reAlign(){this.alignOptions?.width&&"left"!==this.alignOptions.align&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(t){return this.attr("class",(""+this.attr("class")).replace(Ue(t)?RegExp(`(^| )${t}( |$)`):t," ").replace(/ +/g," ").trim())}removeTextOutline(){let t=this.element.querySelector("tspan.highcharts-text-outline");t&&this.safeRemoveChild(t)}safeRemoveChild(t){let e=t.parentNode;e&&e.removeChild(t)}setRadialReference(t){let e=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this}shadow(t){let{renderer:e}=this,i=He(90===this.parentGroup?.rotation?{offsetX:-1,offsetY:-1}:{},ze(t)?t:{}),r=e.shadowDefinition(i);return this.attr({filter:t?`url(${e.url}#${r})`:"none"})}show(t=!0){return this.attr({visibility:t?"inherit":"visible"})}"stroke-widthSetter"(t,e,i){this[e]=t,i.setAttribute(e,t)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let t,e=this.getStyle("stroke-width"),i=0;return/px$/.test(e)?i=Ge(e):""!==e&&(Ce(t=we.createElementNS(Te,"rect"),{width:e,"stroke-width":0}),this.element.parentNode.appendChild(t),i=t.getBBox().width,t.parentNode.removeChild(t)),i}symbolAttr(t){let e=this;Ke.symbolCustomAttribs.forEach((function(i){e[i]=je(t[i],e[i])})),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})}textSetter(t){t!==this.textStr&&(delete this.textPxLength,this.textStr=t,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(t){let e=this.element,i=e.getElementsByTagName("title")[0]||we.createElementNS(this.SVG_NS,"title");e.insertBefore?e.insertBefore(i,e.firstChild):e.appendChild(i),i.textContent=Xe(je(t,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let t=this.element;return t.parentNode.appendChild(t),this}translate(t,e){return this.attr({translateX:t,translateY:e})}updateTransform(t="transform"){let{element:e,matrix:i,rotation:r=0,rotationOriginX:s,rotationOriginY:n,scaleX:o,scaleY:a,translateX:l=0,translateY:h=0}=this,c=["translate("+l+","+h+")"];Le(i)&&c.push("matrix("+i.join(",")+")"),r&&(c.push("rotate("+r+" "+je(s,e.getAttribute("x"),0)+" "+je(n,e.getAttribute("y")||0)+")"),"SPAN"===this.text?.element.tagName&&this.text.attr({rotation:r,rotationOriginX:(s||0)-this.padding,rotationOriginY:(n||0)-this.padding})),(Le(o)||Le(a))&&c.push("scale("+je(o,1)+" "+je(a,1)+")"),c.length&&!(this.text||this).textPath&&e.setAttribute(t,c.join(" "))}visibilitySetter(t,e,i){"inherit"===t?i.removeAttribute(e):this[e]!==t&&i.setAttribute(e,t),this[e]=t}xGetter(t){return"circle"===this.element.nodeName&&("x"===t?t="cx":"y"===t&&(t="cy")),this._defaultGetter(t)}zIndexSetter(t,e){let i,r,s,n,o,a=this.renderer,l=this.parentGroup,h=(l||a).element||a.box,c=this.element,d=h===a.box,u=!1,p=this.added;if(Le(t)?(c.setAttribute("data-z-index",t),t=+t,this[e]===t&&(p=!1)):Le(this[e])&&c.removeAttribute("data-z-index"),this[e]=t,p){for((t=this.zIndex)&&l&&(l.handleZ=!0),o=(i=h.childNodes).length-1;o>=0&&!u;o--)n=!Le(s=(r=i[o]).getAttribute("data-z-index")),r!==c&&(t<0&&n&&!d&&!o?(h.insertBefore(c,i[o]),u=!0):(Ge(s)<=t||n&&(!Le(t)||t>=0))&&(h.insertBefore(c,i[o+1]),u=!0));u||(h.insertBefore(c,i[d?3:0]),u=!0)}return u}}Ke.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],Ke.prototype.strokeSetter=Ke.prototype.fillSetter,Ke.prototype.yGetter=Ke.prototype.xGetter,Ke.prototype.matrixSetter=Ke.prototype.rotationOriginXSetter=Ke.prototype.rotationOriginYSetter=Ke.prototype.rotationSetter=Ke.prototype.scaleXSetter=Ke.prototype.scaleYSetter=Ke.prototype.translateXSetter=Ke.prototype.translateYSetter=Ke.prototype.verticalAlignSetter=function(t,e){this[e]=t,this.doTransform=!0};let $e=Ke,{defined:Qe,extend:Ze,getAlignFactor:Je,isNumber:ti,merge:ei,pick:ii,removeEvent:ri}=X;class si extends $e{constructor(t,e,i,r,s,n,o,a,l,h){let c;super(t,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=e,this.x=i,this.y=r,this.anchorX=n,this.anchorY=o,this.baseline=l,this.className=h,this.addClass("button"===h?"highcharts-no-tooltip":"highcharts-label"),h&&this.addClass("highcharts-"+h),this.text=t.text(void 0,0,0,a).attr({zIndex:1}),"string"==typeof s&&((c=/^url\((.*?)\)$/.test(s))||this.renderer.symbols[s])&&(this.symbolKey=s),this.bBox=si.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=t.styledMode||c,this.deferredAttr={},this.alignFactor=0}alignSetter(t){let e=Je(t);e!==this.alignFactor&&(this.alignFactor=e,this.bBox&&ti(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(t,e){this.anchorX=t,this.boxAttr(e,Math.round(t)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(t,e){this.anchorY=t,this.boxAttr(e,t-this.ySetting)}boxAttr(t,e){this.box?this.box.attr(t,e):this.deferredAttr[t]=e}css(t){if(t){let e={};t=ei(t),si.textProps.forEach((i=>{void 0!==t[i]&&(e[i]=t[i],delete t[i])})),this.text.css(e),"fontSize"in e||"fontWeight"in e?this.updateTextPadding():("width"in e||"textOverflow"in e)&&this.updateBoxSize()}return $e.prototype.css.call(this,t)}destroy(){ri(this.element,"mouseenter"),ri(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),$e.prototype.destroy.call(this)}fillSetter(t,e){t&&(this.needsBox=!0),this.fill=t,this.boxAttr(e,t)}getBBox(t,e){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();let{padding:i,height:r=0,translateX:s=0,translateY:n=0,width:o=0}=this,a=ii(this.paddingLeft,i),l=e??(this.rotation||0),h={width:o,height:r,x:s+this.bBox.x-a,y:n+this.bBox.y-i+this.baselineOffset};return l&&(h=this.getRotatedBox(h,l)),h}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(t){this.heightSetting=t,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:ii(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&Qe(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(t,e){ti(t)?t!==this[e]&&(this[e]=t,this.updateTextPadding()):this[e]=void 0}rSetter(t,e){this.boxAttr(e,t)}strokeSetter(t,e){this.stroke=t,this.boxAttr(e,t)}"stroke-widthSetter"(t,e){t&&(this.needsBox=!0),this["stroke-width"]=t,this.boxAttr(e,t)}"text-alignSetter"(t){this.textAlign=t}textSetter(t){void 0!==t&&this.text.attr({text:t}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let t,e=this.text,i={},r=this.padding,s=this.bBox=ti(this.widthSetting)&&ti(this.heightSetting)&&!this.textAlign||!Qe(e.textStr)?si.emptyBBox:e.getBBox(void 0,0);this.width=this.getPaddedWidth(),this.height=(this.heightSetting||s.height||0)+2*r;let n=this.renderer.fontMetrics(e);if(this.baselineOffset=r+Math.min((this.text.firstLineMetrics||n).b,s.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-n.h)/2),this.needsBox&&!e.textPath){if(!this.box){let t=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();t.addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),t.add(this)}t=this.getCrispAdjust(),i.x=t,i.y=(this.baseline?-this.baselineOffset:0)+t,i.width=Math.round(this.width),i.height=Math.round(this.height),this.box.attr(Ze(i,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let t=this.text;if(!t.textPath){this.updateBoxSize();let e=this.baseline?0:this.baselineOffset,i=(this.paddingLeft??this.padding)+(Qe(this.widthSetting)&&this.bBox?Je(this.textAlign)*(this.widthSetting-this.bBox.width):0);(i!==t.x||e!==t.y)&&(t.attr("x",i),t.hasBoxWidthChanged&&(this.bBox=t.getBBox(!0)),void 0!==e&&t.attr("y",e)),t.x=i,t.y=e}}widthSetter(t){this.widthSetting=ti(t)?t:void 0,this.doUpdate=!0}getPaddedWidth(){let t=this.padding,e=ii(this.paddingLeft,t),i=ii(this.paddingRight,t);return(this.widthSetting||this.bBox.width||0)+e+i}xSetter(t){this.x=t,this.alignFactor&&(t-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(t),this.attr("translateX",this.xSetting)}ySetter(t){this.ySetting=this.y=Math.round(t),this.attr("translateY",this.ySetting)}}si.emptyBBox={width:0,height:0,x:0,y:0},si.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineClamp","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"];let{defined:ni,isNumber:oi,pick:ai}=X;function li(t,e,i,r,s){let n=[];if(s){let o=s.start||0,a=ai(s.r,i),l=ai(s.r,r||i),h=2e-4/(s.borderRadius?1:Math.max(a,1)),c=Math.abs((s.end||0)-o-2*Math.PI)<h,d=(s.end||0)-(c?h:0),u=s.innerR,p=ai(s.open,c),f=Math.cos(o),g=Math.sin(o),m=Math.cos(d),y=Math.sin(d),v=ai(s.longArc,d-o-Math.PI<h?0:1),b=["A",a,l,0,v,ai(s.clockwise,1),t+a*m,e+l*y];b.params={start:o,end:d,cx:t,cy:e},n.push(["M",t+a*f,e+l*g],b),ni(u)&&((b=["A",u,u,0,v,ni(s.clockwise)?1-s.clockwise:0,t+u*f,e+u*g]).params={start:d,end:o,cx:t,cy:e},n.push(p?["M",t+u*m,e+u*y]:["L",t+u*m,e+u*y],b)),p||n.push(["Z"])}return n}function hi(t,e,i,r,s){return s&&s.r?ci(t,e,i,r,s):[["M",t,e],["L",t+i,e],["L",t+i,e+r],["L",t,e+r],["Z"]]}function ci(t,e,i,r,s){let n=s?.r||0;return[["M",t+n,e],["L",t+i-n,e],["A",n,n,0,0,1,t+i,e+n],["L",t+i,e+r-n],["A",n,n,0,0,1,t+i-n,e+r],["L",t+n,e+r],["A",n,n,0,0,1,t,e+r-n],["L",t,e+n],["A",n,n,0,0,1,t+n,e],["Z"]]}let di={arc:li,callout:function(t,e,i,r,s){let n=Math.min(s&&s.r||0,i,r),o=n+6,a=s&&s.anchorX,l=s&&s.anchorY||0,h=ci(t,e,i,r,{r:n});if(!oi(a)||a<i&&a>0&&l<r&&l>0)return h;if(t+a>i-o)if(l>e+o&&l<e+r-o)h.splice(3,1,["L",t+i,l-6],["L",t+i+6,l],["L",t+i,l+6],["L",t+i,e+r-n]);else if(a<i){let s=l<e+o,c=s?e:e+r;h.splice(s?2:5,0,["L",a,l],["L",t+i-n,c])}else h.splice(3,1,["L",t+i,r/2],["L",a,l],["L",t+i,r/2],["L",t+i,e+r-n]);else if(t+a<o)if(l>e+o&&l<e+r-o)h.splice(7,1,["L",t,l+6],["L",t-6,l],["L",t,l-6],["L",t,e+n]);else if(a>0){let i=l<e+o,s=i?e:e+r;h.splice(i?1:6,0,["L",a,l],["L",t+n,s])}else h.splice(7,1,["L",t,r/2],["L",a,l],["L",t,r/2],["L",t,e+n]);else l>r&&a<i-o?h.splice(5,1,["L",a+6,e+r],["L",a,e+r+6],["L",a-6,e+r],["L",t+n,e+r]):l<0&&a>o&&h.splice(1,1,["L",a-6,e],["L",a,e-6],["L",a+6,e],["L",i-n,e]);return h},circle:function(t,e,i,r){return li(t+i/2,e+r/2,i/2,r/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(t,e,i,r){return[["M",t+i/2,e],["L",t+i,e+r/2],["L",t+i/2,e+r],["L",t,e+r/2],["Z"]]},rect:hi,roundedRect:ci,square:hi,triangle:function(t,e,i,r){return[["M",t+i/2,e],["L",t+i,e+r],["L",t,e+r],["Z"]]},"triangle-down":function(t,e,i,r){return[["M",t,e],["L",t+i,e],["L",t+i/2,e+r],["Z"]]}},{doc:ui,SVG_NS:pi,win:fi}=w,{attr:gi,extend:mi,fireEvent:yi,isString:vi,objectEach:bi,pick:xi}=X,wi=(t,e)=>t.substring(0,e)+"…",Ei=class{constructor(t){let e=t.styles;this.renderer=t.renderer,this.svgElement=t,this.width=t.textWidth,this.textLineHeight=e&&e.lineHeight,this.textOutline=e&&e.textOutline,this.ellipsis=!(!e||"ellipsis"!==e.textOverflow),this.lineClamp=e?.lineClamp,this.noWrap=!(!e||"nowrap"!==e.whiteSpace)}buildSVG(){let t=this.svgElement,e=t.element,i=t.renderer,r=xi(t.textStr,"").toString(),s=-1!==r.indexOf("<"),n=e.childNodes,o=!t.added&&i.box,a=[r,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,t.getStyle("font-size"),t.styles.lineClamp,this.width].join(",");if(a!==t.textCache){t.textCache=a,delete t.actualWidth;for(let t=n.length;t--;)e.removeChild(n[t]);if(s||this.ellipsis||this.width||t.textPath||-1!==r.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(r))){if(""!==r){o&&o.appendChild(e);let i=new Kt(r);this.modifyTree(i.nodes),i.addToDOM(e),this.modifyDOM(),this.ellipsis&&-1!==(e.textContent||"").indexOf("…")&&t.attr("title",this.unescapeEntities(t.textStr||"",["&lt;","&gt;"])),o&&o.removeChild(e)}}else e.appendChild(ui.createTextNode(this.unescapeEntities(r)));vi(this.textOutline)&&t.applyTextOutline&&t.applyTextOutline(this.textOutline)}}modifyDOM(){let t,e=this.svgElement,i=gi(e.element,"x");for(e.firstLineMetrics=void 0;(t=e.element.firstChild)&&/^[\s\u200B]*$/.test(t.textContent||" ");)e.element.removeChild(t);[].forEach.call(e.element.querySelectorAll("tspan.highcharts-br"),((t,r)=>{t.nextSibling&&t.previousSibling&&(0===r&&1===t.previousSibling.nodeType&&(e.firstLineMetrics=e.renderer.fontMetrics(t.previousSibling)),gi(t,{dy:this.getLineHeight(t.nextSibling),x:i}))}));let r=this.width||0;if(!r)return;let s=(t,s)=>{let n=t.textContent||"",o=n.replace(/([^\^])-/g,"$1- ").split(" "),a=!this.noWrap&&(o.length>1||e.element.childNodes.length>1),l=this.getLineHeight(s),h=Math.max(0,r-.8*l),c=0,d=e.actualWidth;if(a){let n=[],a=[];for(;s.firstChild&&s.firstChild!==t;)a.push(s.firstChild),s.removeChild(s.firstChild);for(;o.length;)if(o.length&&!this.noWrap&&c>0&&(n.push(t.textContent||""),t.textContent=o.join(" ").replace(/- /g,"-")),this.truncate(t,void 0,o,0===c&&d||0,r,h,((t,e)=>o.slice(0,e).join(" ").replace(/- /g,"-"))),d=e.actualWidth,c++,this.lineClamp&&c>=this.lineClamp){o.length&&(this.truncate(t,t.textContent||"",void 0,0,r,h,wi),t.textContent=t.textContent?.replace("…","")+"…");break}a.forEach((e=>{s.insertBefore(e,t)})),n.forEach((e=>{s.insertBefore(ui.createTextNode(e),t);let r=ui.createElementNS(pi,"tspan");r.textContent="​",gi(r,{dy:l,x:i}),s.insertBefore(r,t)}))}else this.ellipsis&&n&&this.truncate(t,n,void 0,0,r,h,wi)},n=t=>{[].slice.call(t.childNodes).forEach((i=>{i.nodeType===fi.Node.TEXT_NODE?s(i,t):(-1!==i.className.baseVal.indexOf("highcharts-br")&&(e.actualWidth=0),n(i))}))};n(e.element)}getLineHeight(t){let e=t.nodeType===fi.Node.TEXT_NODE?t.parentElement:t;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(e||this.svgElement.element).h}modifyTree(t){let e=(i,r)=>{let{attributes:s={},children:n,style:o={},tagName:a}=i,l=this.renderer.styledMode;if("b"===a||"strong"===a?l?s.class="highcharts-strong":o.fontWeight="bold":("i"===a||"em"===a)&&(l?s.class="highcharts-emphasized":o.fontStyle="italic"),o&&o.color&&(o.fill=o.color),"br"===a){s.class="highcharts-br",i.textContent="​";let e=t[r+1];e&&e.textContent&&(e.textContent=e.textContent.replace(/^ +/gm,""))}else"a"===a&&n&&n.some((t=>"#text"===t.tagName))&&(i.children=[{children:n,tagName:"tspan"}]);"#text"!==a&&"a"!==a&&(i.tagName="tspan"),mi(i,{attributes:s,style:o}),n&&n.filter((t=>"#text"!==t.tagName)).forEach(e)};t.forEach(e),yi(this.svgElement,"afterModifyTree",{nodes:t})}truncate(t,e,i,r,s,n,o){let a,l,h=this.svgElement,{rotation:c}=h,d=[],u=i&&!r?1:0,p=(e||i||"").length,f=p;i||(s=n);let g=function(e,s){let n=s||e,o=t.parentNode;if(o&&void 0===d[n]&&o.getSubStringLength)try{d[n]=r+o.getSubStringLength(0,i?n+1:n)}catch(t){}return d[n]};if(h.rotation=0,r+(l=g(t.textContent.length))>s){for(;u<=p;)f=Math.ceil((u+p)/2),i&&(a=o(i,f)),l=g(f,a&&a.length-1),u===p?u=p+1:l>s?p=f-1:u=f;0===p?t.textContent="":e&&p===e.length-1||(t.textContent=a||o(e||i,f)),this.ellipsis&&l>s&&this.truncate(t,t.textContent||"",void 0,0,s,n,wi)}i&&i.splice(0,f),h.actualWidth=l,h.rotation=c}unescapeEntities(t,e){return bi(this.renderer.escapes,(function(i,r){e&&-1!==e.indexOf(i)||(t=t.toString().replace(RegExp(i,"g"),r))})),t}},{defaultOptions:Ti}=ft,{charts:Si,deg2rad:Ai,doc:ki,isFirefox:Ci,isMS:Ii,isWebKit:Pi,noop:Mi,SVG_NS:Li,symbolSizes:Oi,win:Ni}=w,{addEvent:_i,attr:Di,createElement:Ri,crisp:Fi,css:Bi,defined:zi,destroyObjectProperties:Ui,extend:Hi,isArray:Vi,isNumber:ji,isObject:Gi,isString:Wi,merge:Xi,pick:qi,pInt:Yi,replaceNested:Ki,uniqueKey:$i}=X;class Qi{constructor(t,e,i,r,s,n,o){let a,l,h=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),c=h.element;o||h.css(this.getStyle(r||{})),t.appendChild(c),Di(t,"dir","ltr"),-1===t.innerHTML.indexOf("xmlns")&&Di(c,"xmlns",this.SVG_NS),this.box=c,this.boxWrapper=h,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(ki.createTextNode("Created with Highcharts 12.0.2")),this.defs=this.createElement("defs").add(),this.allowHTML=n,this.forExport=s,this.styledMode=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=h.getStyle("font-size"),this.setSize(e,i,!1),Ci&&t.getBoundingClientRect&&((a=function(){Bi(t,{left:0,top:0}),l=t.getBoundingClientRect(),Bi(t,{left:Math.ceil(l.left)-l.left+"px",top:Math.ceil(l.top)-l.top+"px"})})(),this.unSubPixelFix=_i(Ni,"resize",a))}definition(t){return new Kt([t]).addToDOM(this.defs.element)}getReferenceURL(){if((Ci||Pi)&&ki.getElementsByTagName("base").length){if(!zi(e)){let t=$i(),i=new Kt([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:t},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${t})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(ki.body);Bi(i,{position:"fixed",top:0,left:0,zIndex:9e5});let r=ki.elementFromPoint(6,6);e="hitme"===(r&&r.id),ki.body.removeChild(i)}if(e)return Ki(Ni.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(t){return this.style=Hi({fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fontSize:"1rem"},t),this.style}setStyle(t){this.boxWrapper.css(this.getStyle(t))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),Ui(this.gradients||{}),this.gradients=null,this.defs=t.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(t){return new this.Element(this,t)}getRadialAttr(t,e){return{cx:t[0]-t[2]/2+(e.cx||0)*t[2],cy:t[1]-t[2]/2+(e.cy||0)*t[2],r:(e.r||0)*t[2]}}shadowDefinition(t){let e=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(t).map((e=>`${e}-${t[e]}`))].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),i=Xi({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},t);return this.defs.element.querySelector(`#${e}`)||this.definition({tagName:"filter",attributes:{id:e,filterUnits:i.filterUnits},children:this.getShadowFilterContent(i)}),e}getShadowFilterContent(t){return[{tagName:"feDropShadow",attributes:{dx:t.offsetX,dy:t.offsetY,"flood-color":t.color,"flood-opacity":Math.min(5*t.opacity,1),stdDeviation:t.width/2}}]}buildText(t){new Ei(t).buildSVG()}getContrast(t){let e=bt.parse(t).rgba.map((t=>{let e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),i=.2126*e[0]+.7152*e[1]+.0722*e[2];return 1.05/(i+.05)>(i+.05)/.05?"#FFFFFF":"#000000"}button(t,e,i,r,s={},n,o,a,l,h){let c=this.label(t,e,i,l,void 0,void 0,h,void 0,"button"),d=this.styledMode,u=arguments,p=0;s=Xi(Ti.global.buttonTheme,s),d&&(delete s.fill,delete s.stroke,delete s["stroke-width"]);let f=s.states||{},g=s.style||{};delete s.states,delete s.style;let m=[Kt.filterUserAttributes(s)],y=[g];return d||["hover","select","disabled"].forEach(((t,e)=>{m.push(Xi(m[0],Kt.filterUserAttributes(u[e+5]||f[t]||{}))),y.push(m[e+1].style),delete m[e+1].style})),_i(c.element,Ii?"mouseover":"mouseenter",(function(){3!==p&&c.setState(1)})),_i(c.element,Ii?"mouseout":"mouseleave",(function(){3!==p&&c.setState(p)})),c.setState=(t=0)=>{if(1!==t&&(c.state=p=t),c.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][t]),!d){c.attr(m[t]);let e=y[t];Gi(e)&&c.css(e)}},c.attr(m[0]),!d&&(c.css(Hi({cursor:"default"},g)),h&&c.text.css({pointerEvents:"none"})),c.on("touchstart",(t=>t.stopPropagation())).on("click",(function(t){3!==p&&r.call(c,t)}))}crispLine(t,e){let[i,r]=t;return zi(i[1])&&i[1]===r[1]&&(i[1]=r[1]=Fi(i[1],e)),zi(i[2])&&i[2]===r[2]&&(i[2]=r[2]=Fi(i[2],e)),t}path(t){let e=this.styledMode?{}:{fill:"none"};return Vi(t)?e.d=t:Gi(t)&&Hi(e,t),this.createElement("path").attr(e)}circle(t,e,i){let r=Gi(t)?t:void 0===t?{}:{x:t,y:e,r:i},s=this.createElement("circle");return s.xSetter=s.ySetter=function(t,e,i){i.setAttribute("c"+e,t)},s.attr(r)}arc(t,e,i,r,s,n){let o;Gi(t)?(e=(o=t).y,i=o.r,r=o.innerR,s=o.start,n=o.end,t=o.x):o={innerR:r,start:s,end:n};let a=this.symbol("arc",t,e,i,i,o);return a.r=i,a}rect(t,e,i,r,s,n){let o=Gi(t)?t:void 0===t?{}:{x:t,y:e,r:s,width:Math.max(i||0,0),height:Math.max(r||0,0)},a=this.createElement("rect");return this.styledMode||(void 0!==n&&(o["stroke-width"]=n,Hi(o,a.crisp(o))),o.fill="none"),a.rSetter=function(t,e,i){a.r=t,Di(i,{rx:t,ry:t})},a.rGetter=function(){return a.r||0},a.attr(o)}roundedRect(t){return this.symbol("roundedRect").attr(t)}setSize(t,e,i){this.width=t,this.height=e,this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:qi(i,!0)?void 0:0}),this.alignElements()}g(t){let e=this.createElement("g");return t?e.attr({class:"highcharts-"+t}):e}image(t,e,i,r,s,n){let o={preserveAspectRatio:"none"};ji(e)&&(o.x=e),ji(i)&&(o.y=i),ji(r)&&(o.width=r),ji(s)&&(o.height=s);let a=this.createElement("image").attr(o),l=function(e){a.attr({href:t}),n.call(a,e)};if(n){a.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let e=new Ni.Image;_i(e,"load",l),e.src=t,e.complete&&l({})}else a.attr({href:t});return a}symbol(t,e,i,r,s,n){let o,a,l,h,c=this,d=/^url\((.*?)\)$/,u=d.test(t),p=!u&&(this.symbols[t]?t:"circle"),f=p&&this.symbols[p];if(f)"number"==typeof e&&(a=f.call(this.symbols,e||0,i||0,r||0,s||0,n)),o=this.path(a),c.styledMode||o.attr("fill","none"),Hi(o,{symbolName:p||void 0,x:e,y:i,width:r,height:s}),n&&Hi(o,n);else if(u){l=t.match(d)[1];let r=o=this.image(l);r.imgwidth=qi(n&&n.width,Oi[l]&&Oi[l].width),r.imgheight=qi(n&&n.height,Oi[l]&&Oi[l].height),h=t=>t.attr({width:t.width,height:t.height}),["width","height"].forEach((t=>{r[`${t}Setter`]=function(t,e){this[e]=t;let{alignByTranslate:i,element:r,width:s,height:o,imgwidth:a,imgheight:l}=this,h="width"===e?a:l,c=1;n&&"within"===n.backgroundSize&&s&&o&&a&&l?(c=Math.min(s/a,o/l),Di(r,{width:Math.round(a*c),height:Math.round(l*c)})):r&&h&&r.setAttribute(e,h),!i&&a&&l&&this.translate(((s||0)-a*c)/2,((o||0)-l*c)/2)}})),zi(e)&&r.attr({x:e,y:i}),r.isImg=!0,r.symbolUrl=t,zi(r.imgwidth)&&zi(r.imgheight)?h(r):(r.attr({width:0,height:0}),Ri("img",{onload:function(){let t=Si[c.chartIndex];0===this.width&&(Bi(this,{position:"absolute",top:"-999em"}),ki.body.appendChild(this)),Oi[l]={width:this.width,height:this.height},r.imgwidth=this.width,r.imgheight=this.height,r.element&&h(r),this.parentNode&&this.parentNode.removeChild(this),c.imgCount--,c.imgCount||!t||t.hasLoaded||t.onload()},src:l}),this.imgCount++)}return o}clipRect(t,e,i,r){return this.rect(t,e,i,r,0)}text(t,e,i,r){let s={};if(r&&(this.allowHTML||!this.forExport))return this.html(t,e,i);s.x=Math.round(e||0),i&&(s.y=Math.round(i)),zi(t)&&(s.text=t);let n=this.createElement("text").attr(s);return r&&(!this.forExport||this.allowHTML)||(n.xSetter=function(t,e,i){let r=i.getElementsByTagName("tspan"),s=i.getAttribute(e);for(let i,n=0;n<r.length;n++)(i=r[n]).getAttribute(e)===s&&i.setAttribute(e,t);i.setAttribute(e,t)}),n}fontMetrics(t){let e=Yi($e.prototype.getStyle.call(t,"font-size")||0),i=e<24?e+3:Math.round(1.2*e);return{h:i,b:Math.round(.8*i),f:e}}rotCorr(t,e,i){let r=t;return e&&i&&(r=Math.max(r*Math.cos(e*Ai),4)),{x:-t/3*Math.sin(e*Ai),y:r}}pathToSegments(t){let e=[],i=[],r={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let s=0;s<t.length;s++)Wi(i[0])&&ji(t[s])&&i.length===r[i[0].toUpperCase()]&&t.splice(s,0,i[0].replace("M","L").replace("m","l")),"string"==typeof t[s]&&(i.length&&e.push(i.slice(0)),i.length=0),i.push(t[s]);return e.push(i.slice(0)),e}label(t,e,i,r,s,n,o,a,l){return new si(this,t,e,i,r,s,n,o,a,l)}alignElements(){this.alignedObjects.forEach((t=>t.align()))}}Hi(Qi.prototype,{Element:$e,SVG_NS:Li,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:di,draw:Mi}),de.registerRendererType("svg",Qi,!0);let{composed:Zi}=w,{attr:Ji,css:tr,createElement:er,defined:ir,extend:rr,getAlignFactor:sr,isNumber:nr,pInt:or,pushUnique:ar}=X;function lr(t,e,i){let r=this.div?.style||i.style;$e.prototype[`${e}Setter`].call(this,t,e,i),r&&(r[e]=t)}let hr=(t,e)=>{if(!t.div){let i=Ji(t.element,"class"),r=t.css,s=er("div",i?{className:i}:void 0,{position:"absolute",left:`${t.translateX||0}px`,top:`${t.translateY||0}px`,...t.styles,display:t.display,opacity:t.opacity,visibility:t.visibility},t.parentGroup?.div||e);t.classSetter=(t,e,i)=>{i.setAttribute("class",t),s.className=t},t.translateXSetter=t.translateYSetter=(e,i)=>{t[i]=e,s.style["translateX"===i?"left":"top"]=`${e}px`,t.doTransform=!0},t.opacitySetter=t.visibilitySetter=lr,t.css=e=>(r.call(t,e),e.cursor&&(s.style.cursor=e.cursor),e.pointerEvents&&(s.style.pointerEvents=e.pointerEvents),t),t.on=function(){return $e.prototype.on.apply({element:s,onEvents:t.onEvents},arguments),t},t.div=s}return t.div};class cr extends $e{static compose(t){ar(Zi,this.compose)&&(t.prototype.html=function(t,e,i){return new cr(this,"span").attr({text:t,x:Math.round(e),y:Math.round(i)})})}constructor(t,e){super(t,e),this.css({position:"absolute",...t.styledMode?{}:{fontFamily:t.style.fontFamily,fontSize:t.style.fontSize}})}getSpanCorrection(t,e,i){this.xCorr=-t*i,this.yCorr=-e}css(t){let e,{element:i}=this,r="SPAN"===i.tagName&&t&&"width"in t,s=r&&t.width;return r&&(delete t.width,this.textWidth=or(s)||void 0,e=!0),"ellipsis"===t?.textOverflow&&(t.overflow="hidden"),t?.lineClamp&&(t.display="-webkit-box",t.WebkitLineClamp=t.lineClamp,t.WebkitBoxOrient="vertical",t.overflow="hidden"),nr(Number(t?.fontSize))&&(t.fontSize=t.fontSize+"px"),rr(this.styles,t),tr(i,t),e&&this.updateTransform(),this}htmlGetBBox(){let{element:t}=this;return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}}updateTransform(){if(!this.added)return void(this.alignOnAdd=!0);let{element:t,renderer:e,rotation:i,rotationOriginX:r,rotationOriginY:s,scaleX:n,scaleY:o,styles:a,textAlign:l="left",textWidth:h,translateX:c=0,translateY:d=0,x:u=0,y:p=0}=this,{display:f="block",whiteSpace:g}=a;if(tr(t,{marginLeft:`${c}px`,marginTop:`${d}px`}),"SPAN"===t.tagName){let a,c=[i,l,t.innerHTML,h,this.textAlign].join(","),d=-1*this.parentGroup?.padding||0,m=!1;if(h!==this.oldTextWidth){let e=this.textPxLength?this.textPxLength:(tr(t,{width:"",whiteSpace:g||"nowrap"}),t.offsetWidth),r=h||0;(r>this.oldTextWidth||e>r)&&(/[ \-]/.test(t.textContent||t.innerText)||"ellipsis"===t.style.textOverflow)&&(tr(t,{width:e>r||i||n?h+"px":"auto",display:f,whiteSpace:g||"normal"}),this.oldTextWidth=h,m=!0)}this.hasBoxWidthChanged=m,c!==this.cTT&&(a=e.fontMetrics(t).b,ir(i)&&(i!==(this.oldRotation||0)||l!==this.oldAlign)&&this.setSpanRotation(i,d,d),this.getSpanCorrection(!ir(i)&&!this.textWidth&&this.textPxLength||t.offsetWidth,a,sr(l)));let{xCorr:y=0,yCorr:v=0}=this,b={left:`${u+y}px`,top:`${p+v}px`,textAlign:l,transformOrigin:`${(r??u)-y-u-d}px ${(s??p)-v-p-d}px`};(n||o)&&(b.transform=`scale(${n??1},${o??1})`),tr(t,b),this.cTT=c,this.oldRotation=i,this.oldAlign=l}}setSpanRotation(t,e,i){tr(this.element,{transform:`rotate(${t}deg)`,transformOrigin:`${e}% ${i}px`})}add(t){let e,i=this.renderer.box.parentNode,r=[];if(this.parentGroup=t,t&&!(e=t.div)){let s=t;for(;s;)r.push(s),s=s.parentGroup;for(let t of r.reverse())e=hr(t,i)}return(e||i).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(t){t!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,Kt.setElementHTML(this.element,t??""),this.textStr=t,this.doTransform=!0)}alignSetter(t){this.alignValue=this.textAlign=t,this.doTransform=!0}xSetter(t,e){this[e]=t,this.doTransform=!0}}let dr=cr.prototype;dr.visibilitySetter=dr.opacitySetter=lr,dr.ySetter=dr.rotationSetter=dr.rotationOriginXSetter=dr.rotationOriginYSetter=dr.xSetter,function(t){t.xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%[HMSL]",range:!1},second:{main:"%[HMS]",range:!1},minute:{main:"%[HM]",range:!1},hour:{main:"%[HM]",range:!1},day:{main:"%[eb]"},week:{main:"%[eb]"},month:{main:"%[bY]"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em",textOverflow:"ellipsis"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},t.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:t}=this.axis.chart;return t(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0}}(n||(n={}));let ur=n,{addEvent:pr,isFunction:fr,objectEach:gr,removeEvent:mr}=X;(o||(o={})).registerEventOptions=function(t,e){t.eventOptions=t.eventOptions||{},gr(e.events,(function(e,i){t.eventOptions[i]!==e&&(t.eventOptions[i]&&(mr(t,i,t.eventOptions[i]),delete t.eventOptions[i]),fr(e)&&(t.eventOptions[i]=e,pr(t,i,e,{order:0})))}))};let yr=o,{deg2rad:vr}=w,{clamp:br,correctFloat:xr,defined:wr,destroyObjectProperties:Er,extend:Tr,fireEvent:Sr,getAlignFactor:Ar,isNumber:kr,merge:Cr,objectEach:Ir,pick:Pr}=X,Mr=class{constructor(t,e,i,r,s){this.isNew=!0,this.isNewLabel=!0,this.axis=t,this.pos=e,this.type=i||"",this.parameters=s||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,Sr(this,"init"),i||r||this.addLabel()}addLabel(){let t,e,i,r=this,s=r.axis,n=s.options,o=s.chart,a=s.categories,l=s.logarithmic,h=s.names,c=r.pos,d=Pr(r.options&&r.options.labels,n.labels),u=s.tickPositions,p=c===u[0],f=c===u[u.length-1],g=(!d.step||1===d.step)&&1===s.tickInterval,m=u.info,y=r.label,v=this.parameters.category||(a?Pr(a[c],h[c],c):c);l&&kr(v)&&(v=xr(l.lin2log(v))),s.dateTime&&(m?t=(e=o.time.resolveDTLFormat(n.dateTimeLabelFormats[!n.grid&&m.higherRanks[c]||m.unitName])).main:kr(v)&&(t=s.dateTime.getXDateFormat(v,n.dateTimeLabelFormats||{}))),r.isFirst=p,r.isLast=f;let b={axis:s,chart:o,dateTimeLabelFormat:t,isFirst:p,isLast:f,pos:c,tick:r,tickPositionInfo:m,value:v};Sr(this,"labelFormat",b);let x=t=>d.formatter?d.formatter.call(t,t):d.format?(t.text=s.defaultLabelFormatter.call(t),ce.format(d.format,t,o)):s.defaultLabelFormatter.call(t),w=x.call(b,b),E=e&&e.list;r.shortenLabel=E?function(){for(i=0;i<E.length;i++)if(Tr(b,{dateTimeLabelFormat:E[i]}),y.attr({text:x.call(b,b)}),y.getBBox().width<s.getSlotWidth(r)-2*(d.padding||0))return;y.attr({text:""})}:void 0,g&&s._addedPlotLB&&r.moveLabel(w,d),wr(y)||r.movedLabel?y&&y.textStr!==w&&!g&&(!y.textWidth||d.style.width||y.styles.width||y.css({width:null}),y.attr({text:w}),y.textPxLength=y.getBBox().width):(r.label=y=r.createLabel(w,d),r.rotation=0)}createLabel(t,e,i){let r=this.axis,{renderer:s,styledMode:n}=r.chart,o=wr(t)&&e.enabled?s.text(t,i?.x,i?.y,e.useHTML).add(r.labelGroup):void 0;if(o){let t=e.style.whiteSpace||"normal";n||o.css(Cr(e.style,{whiteSpace:"nowrap"})),o.textPxLength=o.getBBox().width,n||o.css({whiteSpace:t})}return o}destroy(){Er(this,this.axis)}getPosition(t,e,i,r){let s=this.axis,n=s.chart,o=r&&n.oldChartHeight||n.chartHeight,a={x:t?xr(s.translate(e+i,void 0,void 0,r)+s.transB):s.left+s.offset+(s.opposite?(r&&n.oldChartWidth||n.chartWidth)-s.right-s.left:0),y:t?o-s.bottom+s.offset-(s.opposite?s.height:0):xr(o-s.translate(e+i,void 0,void 0,r)-s.transB)};return a.y=br(a.y,-1e9,1e9),Sr(this,"afterGetPosition",{pos:a}),a}getLabelPosition(t,e,i,r,s,n,o,a){let l,h,c=this.axis,d=c.transA,u=c.isLinked&&c.linkedParent?c.linkedParent.reversed:c.reversed,p=c.staggerLines,f=c.tickRotCorr||{x:0,y:0},g=r||c.reserveSpaceDefault?0:-c.labelOffset*("center"===c.labelAlign?.5:1),m=s.distance,y={};return l=0===c.side?i.rotation?-m:-i.getBBox().height:2===c.side?f.y+m:Math.cos(i.rotation*vr)*(f.y-i.getBBox(!1,0).height/2),wr(s.y)&&(l=0===c.side&&c.horiz?s.y+l:s.y),t=t+Pr(s.x,[0,1,0,-1][c.side]*m)+g+f.x-(n&&r?n*d*(u?-1:1):0),e=e+l-(n&&!r?n*d*(u?1:-1):0),p&&(h=o/(a||1)%p,c.opposite&&(h=p-h-1),e+=h*(c.labelOffset/p)),y.x=t,y.y=Math.round(e),Sr(this,"afterGetLabelPosition",{pos:y,tickmarkOffset:n,index:o}),y}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(t,e,i,r,s=!1,n){return n.crispLine([["M",t,e],["L",t+(s?0:-i),e+(s?i:0)]],r)}handleOverflow(t){let e,i,r,s=this.axis,n=s.options.labels,o=t.x,a=s.chart.chartWidth,l=s.chart.spacing,h=Pr(s.labelLeft,Math.min(s.pos,l[3])),c=Pr(s.labelRight,Math.max(s.isRadial?0:s.pos+s.len,a-l[1])),d=this.label,u=this.rotation,p=Ar(s.labelAlign||d.attr("align")),f=d.getBBox().width,g=s.getSlotWidth(this),m=g,y=1;u||"justify"!==n.overflow?u<0&&o-p*f<h?r=Math.round(o/Math.cos(u*vr)-h):u>0&&o+p*f>c&&(r=Math.round((a-o)/Math.cos(u*vr))):(e=o-p*f,i=o+(1-p)*f,e<h?m=t.x+m*(1-p)-h:i>c&&(m=c-t.x+m*p,y=-1),(m=Math.min(g,m))<g&&"center"===s.labelAlign&&(t.x+=y*(g-m-p*(g-Math.min(f,m)))),(f>m||s.autoRotation&&(d.styles||{}).width)&&(r=m)),r&&d&&(this.shortenLabel?this.shortenLabel():d.css(Tr({},{width:Math.floor(r)+"px",lineClamp:s.isRadial?0:1})))}moveLabel(t,e){let i,r=this,s=r.label,n=r.axis,o=!1;s&&s.textStr===t?(r.movedLabel=s,o=!0,delete r.label):Ir(n.ticks,(function(e){o||e.isNew||e===r||!e.label||e.label.textStr!==t||(r.movedLabel=e.label,o=!0,e.labelPos=r.movedLabel.xy,delete e.label)})),!o&&(r.labelPos||s)&&(i=r.labelPos||s.xy,r.movedLabel=r.createLabel(t,e,i),r.movedLabel&&r.movedLabel.attr({opacity:0}))}render(t,e,i){let r=this.axis,s=r.horiz,n=this.pos,o=Pr(this.tickmarkOffset,r.tickmarkOffset),a=this.getPosition(s,n,o,e),l=a.x,h=a.y,c=r.pos,d=c+r.len,u=s?l:h;!r.chart.polar&&this.isNew&&(xr(u)<c||u>d)&&(i=0);let p=Pr(i,this.label&&this.label.newOpacity,1);i=Pr(i,1),this.isActive=!0,this.renderGridLine(e,i),this.renderMark(a,i),this.renderLabel(a,e,p,t),this.isNew=!1,Sr(this,"afterRender")}renderGridLine(t,e){let i,r=this.axis,s=r.options,n={},o=this.pos,a=this.type,l=Pr(this.tickmarkOffset,r.tickmarkOffset),h=r.chart.renderer,c=this.gridLine,d=s.gridLineWidth,u=s.gridLineColor,p=s.gridLineDashStyle;"minor"===this.type&&(d=s.minorGridLineWidth,u=s.minorGridLineColor,p=s.minorGridLineDashStyle),c||(r.chart.styledMode||(n.stroke=u,n["stroke-width"]=d||0,n.dashstyle=p),a||(n.zIndex=1),t&&(e=0),this.gridLine=c=h.path().attr(n).addClass("highcharts-"+(a?a+"-":"")+"grid-line").add(r.gridGroup)),c&&(i=r.getPlotLinePath({value:o+l,lineWidth:c.strokeWidth(),force:"pass",old:t,acrossPanes:!1}))&&c[t||this.isNew?"attr":"animate"]({d:i,opacity:e})}renderMark(t,e){let i=this.axis,r=i.options,s=i.chart.renderer,n=this.type,o=i.tickSize(n?n+"Tick":"tick"),a=t.x,l=t.y,h=Pr(r["minor"!==n?"tickWidth":"minorTickWidth"],!n&&i.isXAxis?1:0),c=r["minor"!==n?"tickColor":"minorTickColor"],d=this.mark,u=!d;o&&(i.opposite&&(o[0]=-o[0]),d||(this.mark=d=s.path().addClass("highcharts-"+(n?n+"-":"")+"tick").add(i.axisGroup),i.chart.styledMode||d.attr({stroke:c,"stroke-width":h})),d[u?"attr":"animate"]({d:this.getMarkPath(a,l,o[0],d.strokeWidth(),i.horiz,s),opacity:e}))}renderLabel(t,e,i,r){let s=this.axis,n=s.horiz,o=s.options,a=this.label,l=o.labels,h=l.step,c=Pr(this.tickmarkOffset,s.tickmarkOffset),d=t.x,u=t.y,p=!0;a&&kr(d)&&(a.xy=t=this.getLabelPosition(d,u,a,n,l,c,r,h),this.isFirst&&!this.isLast&&!o.showFirstLabel||this.isLast&&!this.isFirst&&!o.showLastLabel?p=!1:!n||l.step||l.rotation||e||0===i||this.handleOverflow(t),h&&r%h&&(p=!1),p&&kr(t.y)?(t.opacity=i,a[this.isNewLabel?"attr":"animate"](t).show(!0),this.isNewLabel=!1):(a.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let t=this.label,e=this.axis;t&&!this.isNew&&(t.animate({opacity:0},void 0,t.destroy),delete this.label),e.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}},{animObject:Lr}=Dt,{xAxis:Or,yAxis:Nr}=ur,{defaultOptions:_r}=ft,{registerEventOptions:Dr}=yr,{deg2rad:Rr}=w,{arrayMax:Fr,arrayMin:Br,clamp:zr,correctFloat:Ur,defined:Hr,destroyObjectProperties:Vr,erase:jr,error:Gr,extend:Wr,fireEvent:Xr,getClosestDistance:qr,insertItem:Yr,isArray:Kr,isNumber:$r,isString:Qr,merge:Zr,normalizeTickInterval:Jr,objectEach:ts,pick:es,relativeLength:is,removeEvent:rs,splat:ss,syncTimeout:ns}=X,os=(t,e)=>Jr(e,void 0,void 0,es(t.options.allowDecimals,e<.5||void 0!==t.tickAmount),!!t.tickAmount);Wr(_r,{xAxis:Or,yAxis:Zr(Or,Nr)});class as{constructor(t,e,i){this.init(t,e,i)}init(t,e,i=this.coll){let r="xAxis"===i,s=this.isZAxis||(t.inverted?!r:r);this.chart=t,this.horiz=s,this.isXAxis=r,this.coll=i,Xr(this,"init",{userOptions:e}),this.opposite=es(e.opposite,this.opposite),this.side=es(e.side,this.side,s?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);let n=this.options,o=n.labels;this.type??(this.type=n.type||"linear"),this.uniqueNames??(this.uniqueNames=n.uniqueNames??!0),Xr(this,"afterSetType"),this.userOptions=e,this.minPixelPadding=0,this.reversed=es(n.reversed,this.reversed),this.visible=n.visible,this.zoomEnabled=n.zoomEnabled,this.hasNames="category"===this.type||!0===n.categories,this.categories=Kr(n.categories)&&n.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=Hr(n.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=n.minRange||n.maxZoom,this.range=n.range,this.offset=n.offset||0,this.max=void 0,this.min=void 0;let a=es(n.crosshair,ss(t.options.tooltip.crosshairs)[r?0:1]);this.crosshair=!0===a?{}:a,-1===t.axes.indexOf(this)&&(r?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),Yr(this,t[this.coll])),t.orderItems(this.coll),this.series=this.series||[],t.inverted&&!this.isZAxis&&r&&!Hr(this.reversed)&&(this.reversed=!0),this.labelRotation=$r(o.rotation)?o.rotation:void 0,Dr(this,n),Xr(this,"afterInit")}setOptions(t){let e=this.horiz?{labels:{autoRotation:[-45],padding:3},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=Zr(e,_r[this.coll],t),Xr(this,"afterSetOptions",{userOptions:t})}defaultLabelFormatter(){let t,e,i=this.axis,{numberFormatter:r}=this.chart,s=$r(this.value)?this.value:NaN,n=i.chart.time,o=i.categories,a=this.dateTimeLabelFormat,l=_r.lang,h=l.numericSymbols,c=l.numericSymbolMagnitude||1e3,d=i.logarithmic?Math.abs(s):i.tickInterval,u=h&&h.length;if(o)e=`${this.value}`;else if(a)e=n.dateFormat(a,s,!0);else if(u&&h&&d>=1e3)for(;u--&&void 0===e;)d>=(t=Math.pow(c,u+1))&&10*s%t==0&&null!==h[u]&&0!==s&&(e=r(s/t,-1)+h[u]);return void 0===e&&(e=Math.abs(s)>=1e4?r(s,-1):r(s,-1,void 0,"")),e}getSeriesExtremes(){let t,e=this;Xr(this,"getSeriesExtremes",null,(function(){e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.threshold=void 0,e.softThreshold=!e.isXAxis,e.series.forEach((i=>{if(i.reserveSpace()){let r,s,n,o=i.options,a=o.threshold;if(e.hasVisibleSeries=!0,e.positiveValuesOnly&&0>=(a||0)&&(a=void 0),e.isXAxis)(r=i.getColumn("x")).length&&(r=e.logarithmic?r.filter((t=>t>0)):r,s=(t=i.getXExtremes(r)).min,n=t.max,$r(s)||s instanceof Date||(r=r.filter($r),s=(t=i.getXExtremes(r)).min,n=t.max),r.length&&(e.dataMin=Math.min(es(e.dataMin,s),s),e.dataMax=Math.max(es(e.dataMax,n),n)));else{let t=i.applyExtremes();$r(t.dataMin)&&(s=t.dataMin,e.dataMin=Math.min(es(e.dataMin,s),s)),$r(t.dataMax)&&(n=t.dataMax,e.dataMax=Math.max(es(e.dataMax,n),n)),Hr(a)&&(e.threshold=a),(!o.softThreshold||e.positiveValuesOnly)&&(e.softThreshold=!1)}}}))})),Xr(this,"afterGetSeriesExtremes")}translate(t,e,i,r,s,n){let o=this.linkedParent||this,a=r&&o.old?o.old.min:o.min;if(!$r(a))return NaN;let l=o.minPixelPadding,h=(o.isOrdinal||o.brokenAxis?.hasBreaks||o.logarithmic&&s)&&o.lin2val,c=1,d=0,u=r&&o.old?o.old.transA:o.transA,p=0;return u||(u=o.transA),i&&(c*=-1,d=o.len),o.reversed&&(c*=-1,d-=c*(o.sector||o.len)),e?(p=(t=t*c+d-l)/u+a,h&&(p=o.lin2val(p))):(h&&(t=o.val2lin(t)),p=c*(t-a)*u+d+c*l+($r(n)?u*n:0),o.isRadial||(p=Ur(p))),p}toPixels(t,e){return this.translate(this.chart?.time.parse(t)??NaN,!1,!this.horiz,void 0,!0)+(e?0:this.pos)}toValue(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(t){let e,i,r,s,n,o=this,a=o.chart,l=o.left,h=o.top,c=t.old,d=t.value,u=t.lineWidth,p=c&&a.oldChartHeight||a.chartHeight,f=c&&a.oldChartWidth||a.chartWidth,g=o.transB,m=t.translatedValue,y=t.force;function v(t,e,i){return"pass"!==y&&(t<e||t>i)&&(y?t=zr(t,e,i):n=!0),t}let b={value:d,lineWidth:u,old:c,force:y,acrossPanes:t.acrossPanes,translatedValue:m};return Xr(this,"getPlotLinePath",b,(function(t){e=r=(m=zr(m=es(m,o.translate(d,void 0,void 0,c)),-1e9,1e9))+g,i=s=p-m-g,$r(m)?o.horiz?(i=h,s=p-o.bottom+(o.options.isInternal?0:a.scrollablePixelsY||0),e=r=v(e,l,l+o.width)):(e=l,r=f-o.right+(a.scrollablePixelsX||0),i=s=v(i,h,h+o.height)):(n=!0,y=!1),t.path=n&&!y?void 0:a.renderer.crispLine([["M",e,i],["L",r,s]],u||1)})),b.path}getLinearTickPositions(t,e,i){let r,s,n,o=Ur(Math.floor(e/t)*t),a=Ur(Math.ceil(i/t)*t),l=[];if(Ur(o+t)===o&&(n=20),this.single)return[e];for(r=o;r<=a&&(l.push(r),(r=Ur(r+t,n))!==s);)s=r;return l}getMinorTickInterval(){let{minorTicks:t,minorTickInterval:e}=this.options;return!0===t?es(e,"auto"):!1!==t?e:void 0}getMinorTickPositions(){let t,e=this.options,i=this.tickPositions,r=this.minorTickInterval,s=this.pointRangePadding||0,n=(this.min||0)-s,o=(this.max||0)+s,a=this.brokenAxis?.hasBreaks?this.brokenAxis.unitLength:o-n,l=[];if(a&&a/r<this.len/3){let s=this.logarithmic;if(s)this.paddedTicks.forEach((function(t,e,i){e&&l.push.apply(l,s.getLogTickPositions(r,i[e-1],i[e],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())l=l.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(r),n,o,e.startOfWeek));else for(t=n+(i[0]-n)%r;t<=o&&t!==l[0];t+=r)l.push(t)}return 0!==l.length&&this.trimTicks(l),l}adjustForMinRange(){let t,e,i,r,s=this.options,n=this.logarithmic,o=this.chart.time,{max:a,min:l,minRange:h}=this;this.isXAxis&&void 0===h&&!n&&(h=Hr(s.min)||Hr(s.max)||Hr(s.floor)||Hr(s.ceiling)?null:Math.min(5*(qr(this.series.map((t=>{let e=t.getColumn("x");return t.xIncrement?e.slice(0,2):e})))||0),this.dataMax-this.dataMin)),$r(a)&&$r(l)&&$r(h)&&a-l<h&&(e=this.dataMax-this.dataMin>=h,t=(h-a+l)/2,i=[l-t,o.parse(s.min)??l-t],e&&(i[2]=n?n.log2lin(this.dataMin):this.dataMin),r=[(l=Fr(i))+h,o.parse(s.max)??l+h],e&&(r[2]=n?n.log2lin(this.dataMax):this.dataMax),(a=Br(r))-l<h&&(i[0]=a-h,i[1]=o.parse(s.min)??a-h,l=Fr(i))),this.minRange=h,this.min=l,this.max=a}getClosest(){let t,e;if(this.categories)e=1;else{let i=[];this.series.forEach((function(t){let r=t.closestPointRange,s=t.getColumn("x");1===s.length?i.push(s[0]):t.sorted&&Hr(r)&&t.reserveSpace()&&(e=Hr(e)?Math.min(e,r):r)})),i.length&&(i.sort(((t,e)=>t-e)),t=qr([i]))}return t&&e?Math.min(t,e):t||e}nameToX(t){let e,i=Kr(this.options.categories),r=i?this.categories:this.names,s=t.options.x;return t.series.requireSorting=!1,Hr(s)||(s=this.uniqueNames&&r?i?r.indexOf(t.name):es(r.keys[t.name],-1):t.series.autoIncrement()),-1===s?!i&&r&&(e=r.length):$r(s)&&(e=s),void 0!==e?(this.names[e]=t.name,this.names.keys[t.name]=e):t.x&&(e=t.x),e}updateNames(){let t=this,e=this.names;e.length>0&&(Object.keys(e.keys).forEach((function(t){delete e.keys[t]})),e.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((e=>{e.xIncrement=null,(!e.points||e.isDirtyData)&&(t.max=Math.max(t.max||0,e.dataTable.rowCount-1),e.processData(),e.generatePoints());let i=e.getColumn("x").slice();e.data.forEach(((e,r)=>{let s=i[r];e?.options&&void 0!==e.name&&void 0!==(s=t.nameToX(e))&&s!==e.x&&(i[r]=e.x=s)})),e.dataTable.setColumn("x",i)})))}setAxisTranslation(){let t,e,i=this,r=i.max-i.min,s=i.linkedParent,n=!!i.categories,o=i.isXAxis,a=i.axisPointRange||0,l=0,h=0,c=i.transA;(o||n||a)&&(t=i.getClosest(),s?(l=s.minPointOffset,h=s.pointRangePadding):i.series.forEach((function(e){let r=n?1:o?es(e.options.pointRange,t,0):i.axisPointRange||0,s=e.options.pointPlacement;if(a=Math.max(a,r),!i.single||n){let t=e.is("xrange")?!o:o;l=Math.max(l,t&&Qr(s)?0:r/2),h=Math.max(h,t&&"on"===s?0:r)}})),e=i.ordinal&&i.ordinal.slope&&t?i.ordinal.slope/t:1,i.minPointOffset=l*=e,i.pointRangePadding=h*=e,i.pointRange=Math.min(a,i.single&&n?1:r),o&&t&&(i.closestPointRange=t)),i.translationSlope=i.transA=c=i.staticScale||i.len/(r+h||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=c*l,Xr(this,"afterSetAxisTranslation")}minFromRange(){let{max:t,min:e}=this;return $r(t)&&$r(e)&&t-e||void 0}setTickInterval(t){let e,i,r,s,n,{categories:o,chart:a,dataMax:l,dataMin:h,dateTime:c,isXAxis:d,logarithmic:u,options:p,softThreshold:f}=this,g=a.time,m=$r(this.threshold)?this.threshold:void 0,y=this.minRange||0,{ceiling:v,floor:b,linkedTo:x,softMax:w,softMin:E}=p,T=$r(x)&&a[this.coll]?.[x],S=p.tickPixelInterval,A=p.maxPadding,k=p.minPadding,C=0,I=$r(p.tickInterval)&&p.tickInterval>=0?p.tickInterval:void 0;if(c||o||T||this.getTickAmount(),s=es(this.userMin,g.parse(p.min)),n=es(this.userMax,g.parse(p.max)),T?(this.linkedParent=T,e=T.getExtremes(),this.min=es(e.min,e.dataMin),this.max=es(e.max,e.dataMax),this.type!==T.type&&Gr(11,!0,a)):(f&&Hr(m)&&$r(l)&&$r(h)&&(h>=m?(i=m,k=0):l<=m&&(r=m,A=0)),this.min=es(s,i,h),this.max=es(n,r,l)),$r(this.max)&&$r(this.min)&&(u&&(this.positiveValuesOnly&&!t&&0>=Math.min(this.min,es(h,this.min))&&Gr(10,!0,a),this.min=Ur(u.log2lin(this.min),16),this.max=Ur(u.log2lin(this.max),16)),this.range&&$r(h)&&(this.userMin=this.min=s=Math.max(h,this.minFromRange()||0),this.userMax=n=this.max,this.range=void 0)),Xr(this,"foundExtremes"),this.adjustForMinRange(),$r(this.min)&&$r(this.max)){if(!$r(this.userMin)&&$r(E)&&E<this.min&&(this.min=s=E),!$r(this.userMax)&&$r(w)&&w>this.max&&(this.max=n=w),o||this.axisPointRange||this.stacking?.usePercentage||T||!(C=this.max-this.min)||(!Hr(s)&&k&&(this.min-=C*k),Hr(n)||!A||(this.max+=C*A)),!$r(this.userMin)&&$r(b)&&(this.min=Math.max(this.min,b)),!$r(this.userMax)&&$r(v)&&(this.max=Math.min(this.max,v)),f&&$r(h)&&$r(l)){let t=m||0;!Hr(s)&&this.min<t&&h>=t?this.min=p.minRange?Math.min(t,this.max-y):t:!Hr(n)&&this.max>t&&l<=t&&(this.max=p.minRange?Math.max(t,this.min+y):t)}!a.polar&&this.min>this.max&&(Hr(p.min)?this.max=this.min:Hr(p.max)&&(this.min=this.max)),C=this.max-this.min}if(this.min!==this.max&&$r(this.min)&&$r(this.max)?T&&!I&&S===T.options.tickPixelInterval?this.tickInterval=I=T.tickInterval:this.tickInterval=es(I,this.tickAmount?C/Math.max(this.tickAmount-1,1):void 0,o?1:C*S/Math.max(this.len,S)):this.tickInterval=1,d&&!t){let t=this.min!==this.old?.min||this.max!==this.old?.max;this.series.forEach((function(e){e.forceCrop=e.forceCropping?.(),e.processData(t)})),Xr(this,"postProcessData",{hasExtremesChanged:t})}this.setAxisTranslation(),Xr(this,"initialAxisTranslation"),this.pointRange&&!I&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let P=es(p.minTickInterval,c&&!this.series.some((t=>!t.sorted))?this.closestPointRange:0);!I&&this.tickInterval<P&&(this.tickInterval=P),c||u||I||(this.tickInterval=os(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let t,e=this.options,i=e.tickPositions,r=e.tickPositioner,s=this.getMinorTickInterval(),n=!this.isPanning,o=n&&e.startOnTick,a=n&&e.endOnTick,l=[];if(this.tickmarkOffset=this.categories&&"between"===e.tickmarkPlacement&&1===this.tickInterval?.5:0,this.single=this.min===this.max&&Hr(this.min)&&!this.tickAmount&&(this.min%1==0||!1!==e.allowDecimals),i)l=i.slice();else if($r(this.min)&&$r(this.max)){if(!this.ordinal?.positions&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))l=[this.min,this.max],Gr(19,!1,this.chart);else if(this.dateTime)l=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinal?.positions,this.closestPointRange,!0);else if(this.logarithmic)l=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let t=this.tickInterval,e=t;for(;e<=2*t&&(l=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&l.length>this.tickAmount);)this.tickInterval=os(this,e*=1.1)}l.length>this.len&&(l=[l[0],l[l.length-1]])[0]===l[1]&&(l.length=1),r&&(this.tickPositions=l,(t=r.apply(this,[this.min,this.max]))&&(l=t))}this.tickPositions=l,this.minorTickInterval="auto"===s&&this.tickInterval?this.tickInterval/e.minorTicksPerMajor:s,this.paddedTicks=l.slice(0),this.trimTicks(l,o,a),!this.isLinked&&$r(this.min)&&$r(this.max)&&(this.single&&l.length<2&&!this.categories&&!this.series.some((t=>t.is("heatmap")&&"between"===t.options.pointPlacement))&&(this.min-=.5,this.max+=.5),i||t||this.adjustTickAmount()),Xr(this,"afterSetTickPositions")}trimTicks(t,e,i){let r=t[0],s=t[t.length-1],n=!this.isOrdinal&&this.minPointOffset||0;if(Xr(this,"trimTicks"),!this.isLinked){if(e&&r!==-1/0)this.min=r;else for(;this.min-n>t[0];)t.shift();if(i)this.max=s;else for(;this.max+n<t[t.length-1];)t.pop();0===t.length&&Hr(r)&&!this.options.tickPositions&&t.push((s+r)/2)}}alignToOthers(){let t,e=this,i=e.chart,r=[this],s=e.options,n=i.options.chart,o="yAxis"===this.coll&&n.alignThresholds,a=[];if(e.thresholdAlignment=void 0,(!1!==n.alignTicks&&s.alignTicks||o)&&!1!==s.startOnTick&&!1!==s.endOnTick&&!e.logarithmic){let s=t=>{let{horiz:e,options:i}=t;return[e?i.left:i.top,i.width,i.height,i.pane].join(",")},n=s(this);i[this.coll].forEach((function(i){let{series:o}=i;o.length&&o.some((t=>t.visible))&&i!==e&&s(i)===n&&(t=!0,r.push(i))}))}if(t&&o){r.forEach((t=>{let i=t.getThresholdAlignment(e);$r(i)&&a.push(i)}));let t=a.length>1?a.reduce(((t,e)=>t+e),0)/a.length:void 0;r.forEach((e=>{e.thresholdAlignment=t}))}return t}getThresholdAlignment(t){if((!$r(this.dataMin)||this!==t&&this.series.some((t=>t.isDirty||t.isDirtyData)))&&this.getSeriesExtremes(),$r(this.threshold)){let t=zr((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(t=1-t),t}}getTickAmount(){let t=this.options,e=t.tickPixelInterval,i=t.tickAmount;Hr(t.tickInterval)||i||!(this.len<e)||this.isRadial||this.logarithmic||!t.startOnTick||!t.endOnTick||(i=2),!i&&this.alignToOthers()&&(i=Math.ceil(this.len/e)+1),i<4&&(this.finalTickAmt=i,i=5),this.tickAmount=i}adjustTickAmount(){let t,e,i,r=this,{finalTickAmt:s,max:n,min:o,options:a,tickPositions:l,tickAmount:h,thresholdAlignment:c}=r,d=l?.length,u=es(r.threshold,r.softThreshold?0:null),p=r.tickInterval,f=()=>l.push(Ur(l[l.length-1]+p)),g=()=>l.unshift(Ur(l[0]-p));if($r(c)&&(i=c<.5?Math.ceil(c*(h-1)):Math.floor(c*(h-1)),a.reversed&&(i=h-1-i)),r.hasData()&&$r(o)&&$r(n)){let c=()=>{r.transA*=(d-1)/(h-1),r.min=a.startOnTick?l[0]:Math.min(o,l[0]),r.max=a.endOnTick?l[l.length-1]:Math.max(n,l[l.length-1])};if($r(i)&&$r(r.threshold)){for(;l[i]!==u||l.length!==h||l[0]>o||l[l.length-1]<n;){for(l.length=0,l.push(r.threshold);l.length<h;)void 0===l[i]||l[i]>r.threshold?g():f();if(p>8*r.tickInterval)break;p*=2}c()}else if(d<h){for(;l.length<h;)l.length%2||o===u?f():g();c()}if(Hr(s)){for(e=t=l.length;e--;)(3===s&&e%2==1||s<=2&&e>0&&e<t-1)&&l.splice(e,1);r.finalTickAmt=void 0}}}setScale(){let{coll:t,stacking:e}=this,i=!1,r=!1;this.series.forEach((t=>{i=i||t.isDirtyData||t.isDirty,r=r||t.xAxis&&t.xAxis.isDirty||!1})),this.setAxisSize();let s=this.len!==(this.old&&this.old.len);s||i||r||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(e&&"yAxis"===t&&e.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),e&&"xAxis"===t&&e.buildStacks(),this.isDirty||(this.isDirty=s||this.min!==this.old?.min||this.max!==this.old?.max)):e&&e.cleanStacks(),i&&delete this.allExtremes,Xr(this,"afterSetScale")}setExtremes(t,e,i=!0,r,s){let n=this.chart;this.series.forEach((t=>{delete t.kdTree})),t=n.time.parse(t),e=n.time.parse(e),Xr(this,"setExtremes",s=Wr(s,{min:t,max:e}),(t=>{this.userMin=t.min,this.userMax=t.max,this.eventArgs=t,i&&n.redraw(r)}))}setAxisSize(){let t=this.chart,e=this.options,i=e.offsets||[0,0,0,0],r=this.horiz,s=this.width=Math.round(is(es(e.width,t.plotWidth-i[3]+i[1]),t.plotWidth)),n=this.height=Math.round(is(es(e.height,t.plotHeight-i[0]+i[2]),t.plotHeight)),o=this.top=Math.round(is(es(e.top,t.plotTop+i[0]),t.plotHeight,t.plotTop)),a=this.left=Math.round(is(es(e.left,t.plotLeft+i[3]),t.plotWidth,t.plotLeft));this.bottom=t.chartHeight-n-o,this.right=t.chartWidth-s-a,this.len=Math.max(r?s:n,0),this.pos=r?a:o}getExtremes(){let t=this.logarithmic;return{min:t?Ur(t.lin2log(this.min)):this.min,max:t?Ur(t.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(t){let e=this.logarithmic,i=e?e.lin2log(this.min):this.min,r=e?e.lin2log(this.max):this.max;return null===t||t===-1/0?t=i:t===1/0?t=r:i>t?t=i:r<t&&(t=r),this.translate(t,0,1,0,1)}autoLabelAlign(t){let e=(es(t,0)-90*this.side+720)%360,i={align:"center"};return Xr(this,"autoLabelAlign",i,(function(t){e>15&&e<165?t.align="right":e>195&&e<345&&(t.align="left")})),i.align}tickSize(t){let e,i=this.options,r=es(i["tick"===t?"tickWidth":"minorTickWidth"],"tick"===t&&this.isXAxis&&!this.categories?1:0),s=i["tick"===t?"tickLength":"minorTickLength"];r&&s&&("inside"===i[t+"Position"]&&(s=-s),e=[s,r]);let n={tickSize:e};return Xr(this,"afterTickSize",n),n.tickSize}labelMetrics(){let t=this.chart.renderer,e=this.ticks,i=e[Object.keys(e)[0]]||{};return this.chart.renderer.fontMetrics(i.label||i.movedLabel||t.box)}unsquish(){let t,e,i=this.options.labels,r=i.padding||0,s=this.horiz,n=this.tickInterval,o=this.len/(((this.categories?1:0)+this.max-this.min)/n),a=i.rotation,l=Ur(.8*this.labelMetrics().h),h=Math.max(this.max-this.min,0),c=function(t){let e=(t+2*r)/(o||1);return(e=e>1?Math.ceil(e):1)*n>h&&t!==1/0&&o!==1/0&&h&&(e=Math.ceil(h/n)),Ur(e*n)},d=n,u=Number.MAX_VALUE;if(s){if(!i.staggerLines&&($r(a)?e=[a]:o<i.autoRotationLimit&&(e=i.autoRotation)),e){let i,r;for(let s of e)(s===a||s&&s>=-90&&s<=90)&&(r=(i=c(Math.abs(l/Math.sin(Rr*s))))+Math.abs(s/360))<u&&(u=r,t=s,d=i)}}else d=c(.75*l);return this.autoRotation=e,this.labelRotation=es(t,$r(a)?a:0),i.step?n:d}getSlotWidth(t){let e=this.chart,i=this.horiz,r=this.options.labels,s=Math.max(this.tickPositions.length-(this.categories?0:1),1),n=e.margin[3];if(t&&$r(t.slotWidth))return t.slotWidth;if(i&&r.step<2&&!this.isRadial)return r.rotation?0:(this.staggerLines||1)*this.len/s;if(!i){let t=r.style.width;if(void 0!==t)return parseInt(String(t),10);if(n)return n-e.spacing[3]}return.33*e.chartWidth}renderUnsquish(){let t,e=this.chart,i=e.renderer,r=this.tickPositions,s=this.ticks,n=this.options.labels,o=n.style,a=this.horiz,l=this.getSlotWidth(),h=Math.max(1,Math.round(l-(a?2*(n.padding||0):n.distance||0))),c={},d=this.labelMetrics(),u=o.lineClamp,p=u??(Math.floor(this.len/(r.length*d.h))||1),f=0;Qr(n.rotation)||(c.rotation=n.rotation||0),r.forEach((function(t){let e=s[t];e.movedLabel&&e.replaceMovedLabel();let i=e.label?.textPxLength||0;i>f&&(f=i)})),this.maxLabelLength=f,this.autoRotation?f>h&&f>d.h?c.rotation=this.labelRotation:this.labelRotation=0:l&&(t=h),c.rotation&&(t=f>.5*e.chartHeight?.33*e.chartHeight:f,u||(p=1)),this.labelAlign=n.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(c.align=this.labelAlign),r.forEach((function(e){let i=s[e],r=i&&i.label,n=o.width,a={};r&&(r.attr(c),i.shortenLabel?i.shortenLabel():t&&!n&&"nowrap"!==o.whiteSpace&&(t<(r.textPxLength||0)||"SPAN"===r.element.tagName)?r.css(Wr(a,{width:`${t}px`,lineClamp:p})):!r.styles.width||a.width||n||r.css({width:"auto"}),i.rotation=c.rotation)}),this),this.tickRotCorr=i.rotCorr(d.b,this.labelRotation||0,0!==this.side)}hasData(){return this.series.some((function(t){return t.hasData()}))||this.options.showEmpty&&Hr(this.min)&&Hr(this.max)}addTitle(t){let e,i=this.chart.renderer,r=this.horiz,s=this.opposite,n=this.options.title,o=this.chart.styledMode;this.axisTitle||((e=n.textAlign)||(e=(r?{low:"left",middle:"center",high:"right"}:{low:s?"right":"left",middle:"center",high:s?"left":"right"})[n.align]),this.axisTitle=i.text(n.text||"",0,0,n.useHTML).attr({zIndex:7,rotation:n.rotation||0,align:e}).addClass("highcharts-axis-title"),o||this.axisTitle.css(Zr(n.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),o||n.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[t?"show":"hide"](t)}generateTick(t){let e=this.ticks;e[t]?e[t].addLabel():e[t]=new Mr(this,t)}createGroups(){let{axisParent:t,chart:e,coll:i,options:r}=this,s=e.renderer,n=(e,n,o)=>s.g(e).attr({zIndex:o}).addClass(`highcharts-${i.toLowerCase()}${n} `+(this.isRadial?`highcharts-radial-axis${n} `:"")+(r.className||"")).add(t);this.axisGroup||(this.gridGroup=n("grid","-grid",r.gridZIndex),this.axisGroup=n("axis","",r.zIndex),this.labelGroup=n("axis-labels","-labels",r.labels.zIndex))}getOffset(){let t,e,i,r,s=this,{chart:n,horiz:o,options:a,side:l,ticks:h,tickPositions:c,coll:d}=s,u=n.inverted&&!s.isZAxis?[1,0,3,2][l]:l,p=s.hasData(),f=a.title,g=a.labels,m=$r(a.crossing),y=n.axisOffset,v=n.clipOffset,b=[-1,1,1,-1][l],x=0,w=0,E=0;if(s.showAxis=t=p||a.showEmpty,s.staggerLines=s.horiz&&g.staggerLines||void 0,s.createGroups(),p||s.isLinked?(c.forEach((function(t){s.generateTick(t)})),s.renderUnsquish(),s.reserveSpaceDefault=0===l||2===l||{1:"left",3:"right"}[l]===s.labelAlign,es(g.reserveSpace,!m&&null,"center"===s.labelAlign||null,s.reserveSpaceDefault)&&c.forEach((function(t){E=Math.max(h[t].getLabelSize(),E)})),s.staggerLines&&(E*=s.staggerLines),s.labelOffset=E*(s.opposite?-1:1)):ts(h,(function(t,e){t.destroy(),delete h[e]})),f?.text&&!1!==f.enabled&&(s.addTitle(t),t&&!m&&!1!==f.reserveSpace&&(s.titleOffset=x=s.axisTitle.getBBox()[o?"height":"width"],w=Hr(e=f.offset)?0:es(f.margin,o?5:10))),s.renderLine(),s.offset=b*es(a.offset,y[l]?y[l]+(a.margin||0):0),s.tickRotCorr=s.tickRotCorr||{x:0,y:0},r=0===l?-s.labelMetrics().h:2===l?s.tickRotCorr.y:0,i=Math.abs(E)+w,E&&(i-=r,i+=b*(o?es(g.y,s.tickRotCorr.y+b*g.distance):es(g.x,b*g.distance))),s.axisTitleMargin=es(e,i),s.getMaxLabelDimensions&&(s.maxLabelDimensions=s.getMaxLabelDimensions(h,c)),"colorAxis"!==d&&v){let t=this.tickSize("tick");y[l]=Math.max(y[l],(s.axisTitleMargin||0)+x+b*s.offset,i,c&&c.length&&t?t[0]+b*s.offset:0);let e=!s.axisLine||a.offset?0:s.axisLine.strokeWidth()/2;v[u]=Math.max(v[u],e)}Xr(this,"afterGetOffset")}getLinePath(t){let e=this.chart,i=this.opposite,r=this.offset,s=this.horiz,n=this.left+(i?this.width:0)+r,o=e.chartHeight-this.bottom-(i?this.height:0)+r;return i&&(t*=-1),e.renderer.crispLine([["M",s?this.left:n,s?o:this.top],["L",s?e.chartWidth-this.right:n,s?o:e.chartHeight-this.bottom]],t)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(t){let e=this.horiz,i=this.left,r=this.top,s=this.len,n=this.options.title,o=e?i:r,a=this.opposite,l=this.offset,h=n.x,c=n.y,d=this.chart.renderer.fontMetrics(t),u=t?Math.max(t.getBBox(!1,0).height-d.h-1,0):0,p={low:o+(e?0:s),middle:o+s/2,high:o+(e?s:0)}[n.align],f=(e?r+this.height:i)+(e?1:-1)*(a?-1:1)*(this.axisTitleMargin||0)+[-u,u,d.f,-u][this.side],g={x:e?p+h:f+(a?this.width:0)+l+h,y:e?f+c-(a?this.height:0)+l:p+c};return Xr(this,"afterGetTitlePosition",{titlePosition:g}),g}renderMinorTick(t,e){let i=this.minorTicks;i[t]||(i[t]=new Mr(this,t,"minor")),e&&i[t].isNew&&i[t].render(null,!0),i[t].render(null,!1,1)}renderTick(t,e,i){let r=this.isLinked,s=this.ticks;(!r||t>=this.min&&t<=this.max||this.grid&&this.grid.isColumn)&&(s[t]||(s[t]=new Mr(this,t)),i&&s[t].isNew&&s[t].render(e,!0,-1),s[t].render(e))}render(){let t,e,i=this,r=i.chart,s=i.logarithmic,n=r.renderer,o=i.options,a=i.isLinked,l=i.tickPositions,h=i.axisTitle,c=i.ticks,d=i.minorTicks,u=i.alternateBands,p=o.stackLabels,f=o.alternateGridColor,g=o.crossing,m=i.tickmarkOffset,y=i.axisLine,v=i.showAxis,b=Lr(n.globalAnimation);if(i.labelEdge.length=0,i.overlap=!1,[c,d,u].forEach((function(t){ts(t,(function(t){t.isActive=!1}))})),$r(g)){let t=this.isXAxis?r.yAxis[0]:r.xAxis[0],e=[1,-1,-1,1][this.side];if(t){let r=t.toPixels(g,!0);i.horiz&&(r=t.len-r),i.offset=e*r}}if(i.hasData()||a){let n=i.chart.hasRendered&&i.old&&$r(i.old.min);i.minorTickInterval&&!i.categories&&i.getMinorTickPositions().forEach((function(t){i.renderMinorTick(t,n)})),l.length&&(l.forEach((function(t,e){i.renderTick(t,e,n)})),m&&(0===i.min||i.single)&&(c[-1]||(c[-1]=new Mr(i,-1,null,!0)),c[-1].render(-1))),f&&l.forEach((function(n,o){e=void 0!==l[o+1]?l[o+1]+m:i.max-m,o%2==0&&n<i.max&&e<=i.max+(r.polar?-m:m)&&(u[n]||(u[n]=new w.PlotLineOrBand(i,{})),t=n+m,u[n].options={from:s?s.lin2log(t):t,to:s?s.lin2log(e):e,color:f,className:"highcharts-alternate-grid"},u[n].render(),u[n].isActive=!0)})),i._addedPlotLB||(i._addedPlotLB=!0,(o.plotLines||[]).concat(o.plotBands||[]).forEach((function(t){i.addPlotBandOrLine(t)})))}[c,d,u].forEach((function(t){let e=[],i=b.duration;ts(t,(function(t,i){t.isActive||(t.render(i,!1,0),t.isActive=!1,e.push(i))})),ns((function(){let i=e.length;for(;i--;)t[e[i]]&&!t[e[i]].isActive&&(t[e[i]].destroy(),delete t[e[i]])}),t!==u&&r.hasRendered&&i?i:0)})),y&&(y[y.isPlaced?"animate":"attr"]({d:this.getLinePath(y.strokeWidth())}),y.isPlaced=!0,y[v?"show":"hide"](v)),h&&v&&(h[h.isNew?"attr":"animate"](i.getTitlePosition(h)),h.isNew=!1),p&&p.enabled&&i.stacking&&i.stacking.renderStackTotals(),i.old={len:i.len,max:i.max,min:i.min,transA:i.transA,userMax:i.userMax,userMin:i.userMin},i.isDirty=!1,Xr(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(t){t.render()}))),this.series.forEach((function(t){t.isDirty=!0}))}getKeepProps(){return this.keepProps||as.keepProps}destroy(t){let e=this,i=e.plotLinesAndBands,r=this.eventOptions;if(Xr(this,"destroy",{keepEvents:t}),t||rs(e),[e.ticks,e.minorTicks,e.alternateBands].forEach((function(t){Vr(t)})),i){let t=i.length;for(;t--;)i[t].destroy()}for(let t in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach((function(t){e[t]&&(e[t]=e[t].destroy())})),e.plotLinesAndBandsGroups)e.plotLinesAndBandsGroups[t]=e.plotLinesAndBandsGroups[t].destroy();ts(e,(function(t,i){-1===e.getKeepProps().indexOf(i)&&delete e[i]})),this.eventOptions=r}drawCrosshair(t,e){let i,r,s,n,o=this.crosshair,a=es(o&&o.snap,!0),l=this.chart,h=this.cross;if(Xr(this,"drawCrosshair",{e:t,point:e}),t||(t=this.cross&&this.cross.e),o&&!1!==(Hr(e)||!a)){if(a?Hr(e)&&(r=es("colorAxis"!==this.coll?e.crosshairPos:null,this.isXAxis?e.plotX:this.len-e.plotY)):r=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),Hr(r)&&(n={value:e&&(this.isXAxis?e.x:es(e.stackY,e.y)),translatedValue:r},l.polar&&Wr(n,{isCrosshair:!0,chartX:t&&t.chartX,chartY:t&&t.chartY,point:e}),i=this.getPlotLinePath(n)||null),!Hr(i))return void this.hideCrosshair();s=this.categories&&!this.isRadial,h||(this.cross=h=l.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(s?"category ":"thin ")+(o.className||"")).attr({zIndex:es(o.zIndex,2)}).add(),!l.styledMode&&(h.attr({stroke:o.color||(s?bt.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":es(o.width,1)}).css({"pointer-events":"none"}),o.dashStyle&&h.attr({dashstyle:o.dashStyle}))),h.show().attr({d:i}),s&&!o.width&&h.attr({"stroke-width":this.transA}),this.cross.e=t}else this.hideCrosshair();Xr(this,"afterDrawCrosshair",{e:t,point:e})}hideCrosshair(){this.cross&&this.cross.hide(),Xr(this,"afterHideCrosshair")}update(t,e){let i=this.chart;t=Zr(this.userOptions,t),this.destroy(!0),this.init(i,t),i.isDirtyBox=!0,es(e,!0)&&i.redraw()}remove(t){let e=this.chart,i=this.coll,r=this.series,s=r.length;for(;s--;)r[s]&&r[s].remove(!1);jr(e.axes,this),jr(e[i]||[],this),e.orderItems(i),this.destroy(),e.isDirtyBox=!0,es(t,!0)&&e.redraw()}setTitle(t,e){this.update({title:t},e)}setCategories(t,e){this.update({categories:t},e)}}as.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"];let{addEvent:ls,getMagnitude:hs,normalizeTickInterval:cs,timeUnits:ds}=X;!function(t){function e(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function i(){"datetime"===this.type?this.dateTime||(this.dateTime=new r(this)):this.dateTime=void 0}t.compose=function(t){return t.keepProps.includes("dateTime")||(t.keepProps.push("dateTime"),t.prototype.getTimeTicks=e,ls(t,"afterSetType",i)),t};class r{constructor(t){this.axis=t}normalizeTimeTickInterval(t,e){let i,r=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],s=r[r.length-1],n=ds[s[0]],o=s[1];for(i=0;i<r.length&&(n=ds[(s=r[i])[0]],o=s[1],!(r[i+1]&&t<=(n*o[o.length-1]+ds[r[i+1][0]])/2));i++);return n===ds.year&&t<5*n&&(o=[1,2,5]),{unitRange:n,count:cs(t/n,o,"year"===s[0]?Math.max(hs(t/n),1):1),unitName:s[0]}}getXDateFormat(t,e){let{axis:i}=this,r=i.chart.time;return i.closestPointRange?r.getDateFormat(i.closestPointRange,t,i.options.startOfWeek,e)||r.resolveDTLFormat(e.year).main:r.resolveDTLFormat(e.day).main}}t.Additions=r}(a||(a={}));let us=a,{addEvent:ps,normalizeTickInterval:fs,pick:gs}=X;!function(t){function e(){"logarithmic"!==this.type?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new r(this))}function i(){let t=this.logarithmic;t&&(this.lin2val=function(e){return t.lin2log(e)},this.val2lin=function(e){return t.log2lin(e)})}t.compose=function(t){return t.keepProps.includes("logarithmic")||(t.keepProps.push("logarithmic"),ps(t,"afterSetType",e),ps(t,"afterInit",i)),t};class r{constructor(t){this.axis=t}getLogTickPositions(t,e,i,r){let s=this.axis,n=s.len,o=s.options,a=[];if(r||(this.minorAutoInterval=void 0),t>=.5)t=Math.round(t),a=s.getLinearTickPositions(t,e,i);else if(t>=.08){let s,n,o,l,h,c,d;for(s=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],n=Math.floor(e);n<i+1&&!d;n++)for(o=0,l=s.length;o<l&&!d;o++)(h=this.log2lin(this.lin2log(n)*s[o]))>e&&(!r||c<=i)&&void 0!==c&&a.push(c),c>i&&(d=!0),c=h}else{let l=this.lin2log(e),h=this.lin2log(i),c=r?s.getMinorTickInterval():o.tickInterval,d=o.tickPixelInterval/(r?5:1),u=r?n/s.tickPositions.length:n;t=fs(t=gs("auto"===c?null:c,this.minorAutoInterval,(h-l)*d/(u||1))),a=s.getLinearTickPositions(t,l,h).map(this.log2lin),r||(this.minorAutoInterval=t/5)}return r||(s.tickInterval=t),a}lin2log(t){return Math.pow(10,t)}log2lin(t){return Math.log(t)/Math.LN10}}t.Additions=r}(l||(l={}));let ms=l,{erase:ys,extend:vs,isNumber:bs}=X;!function(t){let e;function i(t){return this.addPlotBandOrLine(t,"plotBands")}function r(t,i){let r=this.userOptions,s=new e(this,t);if(this.visible&&(s=s.render()),s){if(this._addedPlotLB||(this._addedPlotLB=!0,(r.plotLines||[]).concat(r.plotBands||[]).forEach((t=>{this.addPlotBandOrLine(t)}))),i){let e=r[i]||[];e.push(t),r[i]=e}this.plotLinesAndBands.push(s)}return s}function s(t){return this.addPlotBandOrLine(t,"plotLines")}function n(t,e,i){i=i||this.options;let r,s,n=this.getPlotLinePath({value:e,force:!0,acrossPanes:i.acrossPanes}),o=[],a=this.horiz,l=!bs(this.min)||!bs(this.max)||t<this.min&&e<this.min||t>this.max&&e>this.max,h=this.getPlotLinePath({value:t,force:!0,acrossPanes:i.acrossPanes}),c=1;if(h&&n)for(l&&(s=h.toString()===n.toString(),c=0),r=0;r<h.length;r+=2){let t=h[r],e=h[r+1],i=n[r],l=n[r+1];("M"===t[0]||"L"===t[0])&&("M"===e[0]||"L"===e[0])&&("M"===i[0]||"L"===i[0])&&("M"===l[0]||"L"===l[0])&&(a&&i[1]===t[1]?(i[1]+=c,l[1]+=c):a||i[2]!==t[2]||(i[2]+=c,l[2]+=c),o.push(["M",t[1],t[2]],["L",e[1],e[2]],["L",l[1],l[2]],["L",i[1],i[2]],["Z"])),o.isFlat=s}return o}function o(t){this.removePlotBandOrLine(t)}function a(t){let e=this.plotLinesAndBands,i=this.options,r=this.userOptions;if(e){let s=e.length;for(;s--;)e[s].id===t&&e[s].destroy();[i.plotLines||[],r.plotLines||[],i.plotBands||[],r.plotBands||[]].forEach((function(e){for(s=e.length;s--;)(e[s]||{}).id===t&&ys(e,e[s])}))}}function l(t){this.removePlotBandOrLine(t)}t.compose=function(t,h){let c=h.prototype;return c.addPlotBand||(e=t,vs(c,{addPlotBand:i,addPlotLine:s,addPlotBandOrLine:r,getPlotBandPath:n,removePlotBand:o,removePlotLine:l,removePlotBandOrLine:a})),h}}(h||(h={}));let xs=h,{addEvent:ws,arrayMax:Es,arrayMin:Ts,defined:Ss,destroyObjectProperties:As,erase:ks,fireEvent:Cs,merge:Is,objectEach:Ps,pick:Ms}=X;class Ls{static compose(t,e){return ws(t,"afterInit",(function(){this.labelCollectors.push((()=>{let t=[];for(let e of this.axes)for(let{label:i,options:r}of e.plotLinesAndBands)i&&!r?.label?.allowOverlap&&t.push(i);return t}))})),xs.compose(Ls,e)}constructor(t,e){this.axis=t,this.options=e,this.id=e.id}render(){Cs(this,"render");let t,{axis:e,options:i}=this,{horiz:r,logarithmic:s}=e,{color:n,events:o,zIndex:a=0}=i,{renderer:l,time:h}=e.chart,c={},d=h.parse(i.to),u=h.parse(i.from),p=h.parse(i.value),f=i.borderWidth,g=i.label,{label:m,svgElem:y}=this,v=[],b=Ss(u)&&Ss(d),x=Ss(p),w=!y,E={class:"highcharts-plot-"+(b?"band ":"line ")+(i.className||"")},T=b?"bands":"lines";if(!e.chart.styledMode&&(x?(E.stroke=n||"#999999",E["stroke-width"]=Ms(i.width,1),i.dashStyle&&(E.dashstyle=i.dashStyle)):b&&(E.fill=n||"#e6e9ff",f&&(E.stroke=i.borderColor,E["stroke-width"]=f))),c.zIndex=a,T+="-"+a,(t=e.plotLinesAndBandsGroups[T])||(e.plotLinesAndBandsGroups[T]=t=l.g("plot-"+T).attr(c).add()),y||(this.svgElem=y=l.path().attr(E).add(t)),Ss(p))v=e.getPlotLinePath({value:s?.log2lin(p)??p,lineWidth:y.strokeWidth(),acrossPanes:i.acrossPanes});else{if(!Ss(u)||!Ss(d))return;v=e.getPlotBandPath(s?.log2lin(u)??u,s?.log2lin(d)??d,i)}return!this.eventsAdded&&o&&(Ps(o,((t,e)=>{y?.on(e,(t=>{o[e].apply(this,[t])}))})),this.eventsAdded=!0),!w&&y.d||!v?.length?y&&(v?(y.show(),y.animate({d:v})):y.d&&(y.hide(),m&&(this.label=m=m.destroy()))):y.attr({d:v}),g&&(Ss(g.text)||Ss(g.formatter))&&v?.length&&e.width>0&&e.height>0&&!v.isFlat?(g=Is({align:r&&b?"center":void 0,x:r?!b&&4:10,verticalAlign:!r&&b?"middle":void 0,y:r?b?16:10:b?6:-4,rotation:r&&!b?90:0,...b?{inside:!0}:{}},g),this.renderLabel(g,v,b,a)):m&&m.hide(),this}renderLabel(t,e,i,r){let s=this.axis,n=s.chart.renderer,o=t.inside,a=this.label;a||(this.label=a=n.text(this.getLabelText(t),0,0,t.useHTML).attr({align:t.textAlign||t.align,rotation:t.rotation,class:"highcharts-plot-"+(i?"band":"line")+"-label "+(t.className||""),zIndex:r}),s.chart.styledMode||a.css(Is({fontSize:"0.8em",textOverflow:i&&!o?"":"ellipsis"},t.style)),a.add());let l=e.xBounds||[e[0][1],e[1][1],i?e[2][1]:e[0][1]],h=e.yBounds||[e[0][2],e[1][2],i?e[2][2]:e[0][2]],c=Ts(l),d=Ts(h),u=Es(l)-c;a.align(t,!1,{x:c,y:d,width:u,height:Es(h)-d}),(!a.alignValue||"left"===a.alignValue||Ss(o))&&a.css({width:(t.style?.width||(i&&o?u:90===a.rotation?s.height-(a.alignAttr.y-s.top):(t.clip?s.width:s.chart.chartWidth)-(a.alignAttr.x-s.left)))+"px"}),a.show(!0)}getLabelText(t){return Ss(t.formatter)?t.formatter.call(this):t.text}destroy(){ks(this.axis.plotLinesAndBands,this),delete this.axis,As(this)}}let{animObject:Os}=Dt,{format:Ns}=ce,{composed:_s,dateFormats:Ds,doc:Rs,isSafari:Fs}=w,{distribute:Bs}=me,{addEvent:zs,clamp:Us,css:Hs,discardElement:Vs,extend:js,fireEvent:Gs,isArray:Ws,isNumber:Xs,isObject:qs,isString:Ys,merge:Ks,pick:$s,pushUnique:Qs,splat:Zs,syncTimeout:Js}=X;class tn{constructor(t,e,i){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=t,this.init(t,e),this.pointer=i}bodyFormatter(t){return t.map((t=>{let e=t.series.tooltipOptions,i=t.formatPrefix||"point";return(e[i+"Formatter"]||t.tooltipFormatter).call(t,e[i+"Format"]||"")}))}cleanSplit(t){this.chart.series.forEach((function(e){let i=e&&e.tt;i&&(!i.isActive||t?e.tt=i.destroy():i.isActive=!1)}))}defaultFormatter(t){let e,i=this.points||Zs(this);return(e=(e=[t.headerFooterFormatter(i[0])]).concat(t.bodyFormatter(i))).push(t.headerFooterFormatter(i[0],!0)),e}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),Vs(this.container)),X.clearTimeout(this.hideTimer)}getAnchor(t,e){let i,{chart:r,pointer:s}=this,n=r.inverted,o=r.plotTop,a=r.plotLeft;if((t=Zs(t))[0].series&&t[0].series.yAxis&&!t[0].series.yAxis.options.reversedStacks&&(t=t.slice().reverse()),this.followPointer&&e)void 0===e.chartX&&(e=s.normalize(e)),i=[e.chartX-a,e.chartY-o];else if(t[0].tooltipPos)i=t[0].tooltipPos;else{let r=0,s=0;t.forEach((function(t){let e=t.pos(!0);e&&(r+=e[0],s+=e[1])})),r/=t.length,s/=t.length,this.shared&&t.length>1&&e&&(n?r=e.chartX:s=e.chartY),i=[r-a,s-o]}return i.map(Math.round)}getClassName(t,e,i){let r=this.options,s=t.series,n=s.options;return[r.className,"highcharts-label",i&&"highcharts-tooltip-header",e?"highcharts-tooltip-box":"highcharts-tooltip",!i&&"highcharts-color-"+$s(t.colorIndex,s.colorIndex),n&&n.className].filter(Ys).join(" ")}getLabel({anchorX:t,anchorY:e}={anchorX:0,anchorY:0}){let i=this,r=this.chart.styledMode,s=this.options,n=this.split&&this.allowShared,o=this.container,a=this.chart.renderer;if(this.label){let t=!this.label.hasClass("highcharts-label");(!n&&t||n&&!t)&&this.destroy()}if(!this.label){if(this.outside){let t=this.chart,e=t.options.chart.style,i=de.getRendererType();this.container=o=w.doc.createElement("div"),o.className="highcharts-tooltip-container "+(t.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||""),Hs(o,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(e&&e.zIndex||0)+3)}),this.renderer=a=new i(o,0,0,e,void 0,void 0,a.styledMode)}if(n?this.label=a.g("tooltip"):(this.label=a.label("",t,e,s.shape,void 0,void 0,s.useHTML,void 0,"tooltip").attr({padding:s.padding,r:s.borderRadius}),r||this.label.attr({fill:s.backgroundColor,"stroke-width":s.borderWidth||0}).css(s.style).css({pointerEvents:s.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),i.outside){let t=this.label;[t.xSetter,t.ySetter].forEach(((e,r)=>{t[r?"ySetter":"xSetter"]=s=>{e.call(t,i.distance),t[r?"y":"x"]=s,o&&(o.style[r?"top":"left"]=`${s}px`)}}))}this.label.attr({zIndex:8}).shadow(s.shadow).add()}return o&&!o.parentElement&&w.doc.body.appendChild(o),this.label}getPlayingField(){let{body:t,documentElement:e}=Rs,{chart:i,distance:r,outside:s}=this;return{width:s?Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,e.clientWidth)-2*r-2:i.chartWidth,height:s?Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,e.clientHeight):i.chartHeight}}getPosition(t,e,i){let r,{distance:s,chart:n,outside:o,pointer:a}=this,{inverted:l,plotLeft:h,plotTop:c,polar:d}=n,{plotX:u=0,plotY:p=0}=i,f={},g=l&&i.h||0,{height:m,width:y}=this.getPlayingField(),v=a.getChartPosition(),b=t=>t*v.scaleX,x=t=>t*v.scaleY,w=i=>{let r="x"===i;return[i,r?y:m,r?t:e].concat(o?[r?b(t):x(e),r?v.left-s+b(u+h):v.top-s+x(p+c),0,r?y:m]:[r?t:e,r?u+h:p+c,r?h:c,r?h+n.plotWidth:c+n.plotHeight])},E=w("y"),T=w("x"),S=!!i.negative;!d&&n.hoverSeries?.yAxis?.reversed&&(S=!S);let A=!this.followPointer&&$s(i.ttBelow,!d&&!l===S),k=function(t,e,i,r,n,a,l){let h=o?"y"===t?x(s):b(s):s,c=(i-r)/2,d=r<n-s,u=n+s+r<e,p=n-h-i+c,m=n+h-c;if(A&&u)f[t]=m;else if(!A&&d)f[t]=p;else if(d)f[t]=Math.min(l-r,p-g<0?p:p-g);else{if(!u)return!1;f[t]=Math.max(a,m+g+i>e?m:m+g)}},C=function(t,e,i,r,n){if(n<s||n>e-s)return!1;f[t]=n<i/2?1:n>e-r/2?e-r-2:n-i/2},I=function(t){[E,T]=[T,E],r=t},P=()=>{!1!==k.apply(0,E)?!1!==C.apply(0,T)||r||(I(!0),P()):r?f.x=f.y=0:(I(!0),P())};return(l&&!d||this.len>1)&&I(),P(),f}hide(t){let e=this;X.clearTimeout(this.hideTimer),t=$s(t,this.options.hideDelay),this.isHidden||(this.hideTimer=Js((function(){let i=e.getLabel();e.getLabel().animate({opacity:0},{duration:t?150:t,complete:()=>{i.hide(),e.container&&e.container.remove()}}),e.isHidden=!0}),t))}init(t,e){this.chart=t,this.options=e,this.crosshairs=[],this.isHidden=!0,this.split=e.split&&!t.inverted&&!t.polar,this.shared=e.shared||this.split,this.outside=$s(e.outside,!(!t.scrollablePixelsX&&!t.scrollablePixelsY))}shouldStickOnContact(t){return!(this.followPointer||!this.options.stickOnContact||t&&!this.pointer.inClass(t.target,"highcharts-tooltip"))}move(t,e,i,r){let s=this,n=Os(!s.isHidden&&s.options.animation),o={x:t,y:e};s.followPointer||(s.len||0)>1||(o.anchorX=i,o.anchorY=r),n.step=()=>s.drawTracker(),s.getLabel().animate(o,n)}refresh(t,e){let{chart:i,options:r,pointer:s,shared:n}=this,o=Zs(t),a=o[0],l=r.format,h=r.formatter||this.defaultFormatter,c=i.styledMode,d=this.allowShared;if(!r.enabled||!a.series)return;X.clearTimeout(this.hideTimer),this.allowShared=!(!Ws(t)&&t.series&&t.series.noSharedTooltip),d=d&&!this.allowShared,this.followPointer=!this.split&&a.series.tooltipOptions.followPointer;let u=this.getAnchor(t,e),p=u[0],f=u[1];n&&this.allowShared&&(s.applyInactiveState(o),o.forEach((t=>t.setState("hover"))),a.points=o),this.len=o.length;let g=Ys(l)?Ns(l,a,i):h.call(a,this);a.points=void 0;let m=a.series;if(this.distance=$s(m.tooltipOptions.distance,16),!1===g)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(g,o);else{let t=p,n=f;if(e&&s.isDirectTouch&&(t=e.chartX-i.plotLeft,n=e.chartY-i.plotTop),!i.polar&&!1!==m.options.clip&&!o.some((e=>s.isDirectTouch||e.series.shouldShowTooltip(t,n))))return void this.hide();{let t=this.getLabel(d&&this.tt||{});(!r.style.width||c)&&t.css({width:(this.outside?this.getPlayingField():i.spacingBox).width+"px"}),t.attr({class:this.getClassName(a),text:g&&g.join?g.join(""):g}),this.outside&&t.attr({x:Us(t.x||0,0,this.getPlayingField().width-(t.width||0)-1)}),c||t.attr({stroke:r.borderColor||a.color||m.color||"#666666"}),this.updatePosition({plotX:p,plotY:f,negative:a.negative,ttBelow:a.ttBelow,h:u[2]||0})}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}Gs(this,"refresh")}renderSplit(t,e){let i=this,{chart:r,chart:{chartWidth:s,chartHeight:n,plotHeight:o,plotLeft:a,plotTop:l,scrollablePixelsY:h=0,scrollablePixelsX:c,styledMode:d},distance:u,options:p,options:{positioner:f},pointer:g}=i,{scrollLeft:m=0,scrollTop:y=0}=r.scrollablePlotArea?.scrollingContainer||{},v=i.outside&&"number"!=typeof c?Rs.documentElement.getBoundingClientRect():{left:m,right:m+s,top:y,bottom:y+n},b=i.getLabel(),x=this.renderer||r.renderer,w=!(!r.xAxis[0]||!r.xAxis[0].opposite),{left:E,top:T}=g.getChartPosition(),S=l+y,A=0,k=o-h;function C(t,e,r,s,n=!0){let o,a;return r?(o=w?0:k,a=Us(t-s/2,v.left,v.right-s-(i.outside?E:0))):(o=e-S,a=Us(a=n?t-s-u:t+u,n?a:v.left,v.right)),{x:a,y:o}}Ys(t)&&(t=[!1,t]);let I=t.slice(0,e.length+1).reduce((function(t,r,s){if(!1!==r&&""!==r){let n=e[s-1]||{isHeader:!0,plotX:e[0].plotX,plotY:o,series:{}},h=n.isHeader,c=h?i:n.series,g=c.tt=function(t,e,r){let s=t,{isHeader:n,series:o}=e;if(!s){let t={padding:p.padding,r:p.borderRadius};d||(t.fill=p.backgroundColor,t["stroke-width"]=p.borderWidth??1),s=x.label("",0,0,p[n?"headerShape":"shape"],void 0,void 0,p.useHTML).addClass(i.getClassName(e,!0,n)).attr(t).add(b)}return s.isActive=!0,s.attr({text:r}),d||s.css(p.style).attr({stroke:p.borderColor||e.color||o.color||"#333333"}),s}(c.tt,n,r.toString()),m=g.getBBox(),y=m.width+g.strokeWidth();h&&(A=m.height,k+=A,w&&(S-=A));let{anchorX:E,anchorY:T}=function(t){let e,i,{isHeader:r,plotX:s=0,plotY:n=0,series:h}=t;if(r)e=Math.max(a+s,a),i=l+o/2;else{let{xAxis:t,yAxis:r}=h;e=t.pos+Us(s,-u,t.len+u),h.shouldShowTooltip(0,r.pos-l+n,{ignoreX:!0})&&(i=r.pos+n)}return{anchorX:e=Us(e,v.left-u,v.right+u),anchorY:i}}(n);if("number"==typeof T){let e=m.height+1,r=f?f.call(i,y,e,n):C(E,T,h,y);t.push({align:f?0:void 0,anchorX:E,anchorY:T,boxWidth:y,point:n,rank:$s(r.rank,h?1:0),size:e,target:r.y,tt:g,x:r.x})}else g.isActive=!1}return t}),[]);!f&&I.some((t=>{let{outside:e}=i,r=(e?E:0)+t.anchorX;return r<v.left&&r+t.boxWidth<v.right||r<E-v.left+t.boxWidth&&v.right-r>r}))&&(I=I.map((t=>{let{x:e,y:i}=C(t.anchorX,t.anchorY,t.point.isHeader,t.boxWidth,!1);return js(t,{target:i,x:e})}))),i.cleanSplit(),Bs(I,k);let P={left:E,right:E};I.forEach((function(t){let{x:e,boxWidth:r,isHeader:s}=t;!s&&(i.outside&&E+e<P.left&&(P.left=E+e),!s&&i.outside&&P.left+r>P.right&&(P.right=E+e))})),I.forEach((function(t){let{x:e,anchorX:r,anchorY:s,pos:n,point:{isHeader:o}}=t,a={visibility:void 0===n?"hidden":"inherit",x:e,y:(n||0)+S,anchorX:r,anchorY:s};if(i.outside&&e<r){let t=E-P.left;t>0&&(o||(a.x=e+t,a.anchorX=r+t),o&&(a.x=(P.right-P.left)/2,a.anchorX=r+t))}t.tt.attr(a)}));let{container:M,outside:L,renderer:O}=i;if(L&&M&&O){let{width:t,height:e,x:i,y:r}=b.getBBox();O.setSize(t+i,e+r,!1),M.style.left=P.left+"px",M.style.top=T+"px"}Fs&&b.attr({opacity:1===b.opacity?.999:1})}drawTracker(){if(!this.shouldStickOnContact())return void(this.tracker&&(this.tracker=this.tracker.destroy()));let t=this.chart,e=this.label,i=this.shared?t.hoverPoints:t.hoverPoint;if(!e||!i)return;let r={x:0,y:0,width:0,height:0},s=this.getAnchor(i),n=e.getBBox();s[0]+=t.plotLeft-(e.translateX||0),s[1]+=t.plotTop-(e.translateY||0),r.x=Math.min(0,s[0]),r.y=Math.min(0,s[1]),r.width=s[0]<0?Math.max(Math.abs(s[0]),n.width-s[0]):Math.max(Math.abs(s[0]),n.width),r.height=s[1]<0?Math.max(Math.abs(s[1]),n.height-Math.abs(s[1])):Math.max(Math.abs(s[1]),n.height),this.tracker?this.tracker.attr(r):(this.tracker=e.renderer.rect(r).addClass("highcharts-tracker").add(e),t.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(t){return t.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}headerFooterFormatter(t,e){let i=t.series,r=i.tooltipOptions,s=i.xAxis,n=s&&s.dateTime,o={isFooter:e,point:t},a=r.xDateFormat||"",l=r[e?"footerFormat":"headerFormat"];return Gs(this,"headerFormatter",o,(function(e){if(n&&!a&&Xs(t.key)&&(a=n.getXDateFormat(t.key,r.dateTimeLabelFormats)),n&&a){if(qs(a)){let t=a;Ds[0]=e=>i.chart.time.dateFormat(t,e),a="%0"}(t.tooltipDateKeys||["key"]).forEach((t=>{l=l.replace(RegExp("point\\."+t+"([ \\)}])",""),`(point.${t}:${a})$1`)}))}i.chart.styledMode&&(l=this.styledModeFormat(l)),e.text=Ns(l,t,this.chart)})),o.text||""}update(t){this.destroy(),this.init(this.chart,Ks(!0,this.options,t))}updatePosition(t){let e,{chart:i,container:r,distance:s,options:n,pointer:o,renderer:a}=this,{height:l=0,width:h=0}=this.getLabel(),{left:c,top:d,scaleX:u,scaleY:p}=o.getChartPosition(),f=(n.positioner||this.getPosition).call(this,h,l,t),g=w.doc,m=(t.plotX||0)+i.plotLeft,y=(t.plotY||0)+i.plotTop;a&&r&&(n.positioner&&(f.x+=c-s,f.y+=d-s),e=(n.borderWidth||0)+2*s+2,a.setSize(Us(h+e,0,g.documentElement.clientWidth)-1,l+e,!1),(1!==u||1!==p)&&(Hs(r,{transform:`scale(${u}, ${p})`}),m*=u,y*=p),m+=c-f.x,y+=d-f.y),this.move(Math.round(f.x),Math.round(f.y||0),m,y)}}!function(t){t.compose=function(e){Qs(_s,"Core.Tooltip")&&zs(e,"afterInit",(function(){let e=this.chart;e.options.tooltip&&(e.tooltip=new t(e,e.options.tooltip,this))}))}}(tn||(tn={}));let en=tn,{animObject:rn}=Dt,{defaultOptions:sn}=ft,{format:nn}=ce,{addEvent:on,crisp:an,erase:ln,extend:hn,fireEvent:cn,getNestedProperty:dn,isArray:un,isFunction:pn,isNumber:fn,isObject:gn,merge:mn,pick:yn,syncTimeout:vn,removeEvent:bn,uniqueKey:xn}=X;class wn{animateBeforeDestroy(){let t=this,e={x:t.startXPos,opacity:0},i=t.getGraphicalProps();i.singular.forEach((function(i){t[i]=t[i].animate("dataLabel"===i?{x:t[i].startXPos,y:t[i].startYPos,opacity:0}:e)})),i.plural.forEach((function(e){t[e].forEach((function(e){e.element&&e.animate(hn({x:t.startXPos},e.startYPos?{x:e.startXPos,y:e.startYPos}:{}))}))}))}applyOptions(t,e){let i=this.series,r=i.options.pointValKey||i.pointValKey;return hn(this,t=wn.prototype.optionsToObject.call(this,t)),this.options=this.options?hn(this.options,t):t,t.group&&delete this.group,t.dataLabels&&delete this.dataLabels,r&&(this.y=wn.prototype.getNestedProperty.call(this,r)),this.selected&&(this.state="select"),"name"in this&&void 0===e&&i.xAxis&&i.xAxis.hasNames&&(this.x=i.xAxis.nameToX(this)),void 0===this.x&&i?this.x=e??i.autoIncrement():fn(t.x)&&i.options.relativeXValue?this.x=i.autoIncrement(t.x):"string"==typeof this.x&&(e??(e=i.chart.time.parse(this.x)),fn(e)&&(this.x=e)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let t=this,e=t.series,i=e.chart,r=e.options.dataSorting,s=i.hoverPoints,n=rn(t.series.chart.renderer.globalAnimation),o=()=>{for(let e in(t.graphic||t.graphics||t.dataLabel||t.dataLabels)&&(bn(t),t.destroyElements()),t)delete t[e]};t.legendItem&&i.legend.destroyItem(t),s&&(t.setState(),ln(s,t),s.length||(i.hoverPoints=null)),t===i.hoverPoint&&t.onMouseOut(),r&&r.enabled?(this.animateBeforeDestroy(),vn(o,n.duration)):o(),i.pointCount--}this.destroyed=!0}destroyElements(t){let e=this,i=e.getGraphicalProps(t);i.singular.forEach((function(t){e[t]=e[t].destroy()})),i.plural.forEach((function(t){e[t].forEach((function(t){t&&t.element&&t.destroy()})),delete e[t]}))}firePointEvent(t,e,i){let r=this,s=this.series.options;r.manageEvent(t),"click"===t&&s.allowPointSelect&&(i=function(t){!r.destroyed&&r.select&&r.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),cn(r,t,e,i)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(t){let e,i,r=this,s=[],n={singular:[],plural:[]};for((t=t||{graphic:1,dataLabel:1}).graphic&&s.push("graphic","connector"),t.dataLabel&&s.push("dataLabel","dataLabelPath","dataLabelUpper"),i=s.length;i--;)r[e=s[i]]&&n.singular.push(e);return["graphic","dataLabel"].forEach((function(e){let i=e+"s";t[e]&&r[i]&&n.plural.push(i)})),n}getNestedProperty(t){return t?0===t.indexOf("custom.")?dn(t,this.options):this[t]:void 0}getZone(){let t,e=this.series,i=e.zones,r=e.zoneAxis||"y",s=0;for(t=i[0];this[r]>=t.value;)t=i[++s];return this.nonZonedColor||(this.nonZonedColor=this.color),t&&t.color&&!this.options.color?this.color=t.color:this.color=this.nonZonedColor,t}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(t,e,i){this.formatPrefix="point",this.visible=!0,this.point=this,this.series=t,this.applyOptions(e,i),this.id??(this.id=xn()),this.resolveColor(),t.chart.pointCount++,cn(this,"afterInit")}isValid(){return(fn(this.x)||this.x instanceof Date)&&fn(this.y)}optionsToObject(t){let e,i=this.series,r=i.options.keys,s=r||i.pointArrayMap||["y"],n=s.length,o={},a=0,l=0;if(fn(t)||null===t)o[s[0]]=t;else if(un(t))for(!r&&t.length>n&&("string"==(e=typeof t[0])?i.xAxis?.dateTime?o.x=i.chart.time.parse(t[0]):o.name=t[0]:"number"===e&&(o.x=t[0]),a++);l<n;)r&&void 0===t[a]||(s[l].indexOf(".")>0?wn.prototype.setNestedProperty(o,t[a],s[l]):o[s[l]]=t[a]),a++,l++;else"object"==typeof t&&(o=t,t.dataLabels&&(i.hasDataLabels=()=>!0),t.marker&&(i._hasPointMarkers=!0));return o}pos(t,e=this.plotY){if(!this.destroyed){let{plotX:i,series:r}=this,{chart:s,xAxis:n,yAxis:o}=r,a=0,l=0;if(fn(i)&&fn(e))return t&&(a=n?n.pos:s.plotLeft,l=o?o.pos:s.plotTop),s.inverted&&n&&o?[o.len-e+l,n.len-i+a]:[i+a,e+l]}}resolveColor(){let t,e,i,r=this.series,s=r.chart.options.chart,n=r.chart.styledMode,o=s.colorCount;delete this.nonZonedColor,r.options.colorByPoint?(n||(t=(e=r.options.colors||r.chart.options.colors)[r.colorCounter],o=e.length),i=r.colorCounter,r.colorCounter++,r.colorCounter===o&&(r.colorCounter=0)):(n||(t=r.color),i=r.colorIndex),this.colorIndex=yn(this.options.colorIndex,i),this.color=yn(this.options.color,t)}setNestedProperty(t,e,i){return i.split(".").reduce((function(t,i,r,s){let n=s.length-1===r;return t[i]=n?e:gn(t[i],!0)?t[i]:{},t[i]}),t),t}shouldDraw(){return!this.isNull}tooltipFormatter(t){let{chart:e,pointArrayMap:i=["y"],tooltipOptions:r}=this.series,{valueDecimals:s="",valuePrefix:n="",valueSuffix:o=""}=r;return e.styledMode&&(t=e.tooltip?.styledModeFormat(t)||t),i.forEach((e=>{e="{point."+e,(n||o)&&(t=t.replace(RegExp(e+"}","g"),n+e+"}"+o)),t=t.replace(RegExp(e+"}","g"),e+":,."+s+"f}")})),nn(t,this,e)}update(t,e,i,r){let s,n=this,o=n.series,a=n.graphic,l=o.chart,h=o.options;function c(){n.applyOptions(t);let r=a&&n.hasMockGraphic,c=null===n.y?!r:r;a&&c&&(n.graphic=a.destroy(),delete n.hasMockGraphic),gn(t,!0)&&(a&&a.element&&t&&t.marker&&void 0!==t.marker.symbol&&(n.graphic=a.destroy()),t?.dataLabels&&n.dataLabel&&(n.dataLabel=n.dataLabel.destroy())),s=n.index;let d={};for(let t of o.dataColumnKeys())d[t]=n[t];o.dataTable.setRow(d,s),h.data[s]=gn(h.data[s],!0)||gn(t,!0)?n.options:yn(t,h.data[s]),o.isDirty=o.isDirtyData=!0,!o.fixedBox&&o.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===h.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(i)}e=yn(e,!0),!1===r?c():n.firePointEvent("update",{options:t},c)}remove(t,e){this.series.removePoint(this.series.data.indexOf(this),t,e)}select(t,e){let i=this,r=i.series,s=r.chart;t=yn(t,!i.selected),this.selectedStaging=t,i.firePointEvent(t?"select":"unselect",{accumulate:e},(function(){i.selected=i.options.selected=t,r.options.data[r.data.indexOf(i)]=i.options,i.setState(t&&"select"),e||s.getSelectedPoints().forEach((function(t){let e=t.series;t.selected&&t!==i&&(t.selected=t.options.selected=!1,e.options.data[e.data.indexOf(t)]=t.options,t.setState(s.hoverPoints&&e.options.inactiveOtherPoints?"inactive":""),t.firePointEvent("unselect"))}))})),delete this.selectedStaging}onMouseOver(t){let{inverted:e,pointer:i}=this.series.chart;i&&(t=t?i.normalize(t):i.getChartCoordinatesFromPoint(this,e),i.runPointActions(t,this))}onMouseOut(){let t=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(t.hoverPoints||[]).forEach((function(t){t.setState()})),t.hoverPoints=t.hoverPoint=null}manageEvent(t){let e=mn(this.series.options.point,this.options),i=e.events?.[t];!pn(i)||this.hcEvents?.[t]&&-1!==this.hcEvents?.[t]?.map((t=>t.fn)).indexOf(i)?this.importedUserEvent&&!i&&this.hcEvents?.[t]&&this.hcEvents?.[t].userEvent&&(bn(this,t),delete this.hcEvents[t],Object.keys(this.hcEvents)||delete this.importedUserEvent):(this.importedUserEvent?.(),this.importedUserEvent=on(this,t,i),this.hcEvents&&(this.hcEvents[t].userEvent=!0))}setState(t,e){let i,r,s,n,o=this.series,a=this.state,l=o.options.states[t||"normal"]||{},h=sn.plotOptions[o.type].marker&&o.options.marker,c=h&&!1===h.enabled,d=h&&h.states&&h.states[t||"normal"]||{},u=!1===d.enabled,p=this.marker||{},f=o.chart,g=h&&o.markerAttribs,m=o.halo,y=o.stateMarkerGraphic;if((t=t||"")===this.state&&!e||this.selected&&"select"!==t||!1===l.enabled||t&&(u||c&&!1===d.enabled)||t&&p.states&&p.states[t]&&!1===p.states[t].enabled)return;if(this.state=t,g&&(i=o.markerAttribs(this,t)),this.graphic&&!this.hasMockGraphic){if(a&&this.graphic.removeClass("highcharts-point-"+a),t&&this.graphic.addClass("highcharts-point-"+t),!f.styledMode){r=o.pointAttribs(this,t),s=yn(f.options.chart.animation,l.animation);let e=r.opacity;o.options.inactiveOtherPoints&&fn(e)&&(this.dataLabels||[]).forEach((function(t){t&&!t.hasClass("highcharts-data-label-hidden")&&(t.animate({opacity:e},s),t.connector&&t.connector.animate({opacity:e},s))})),this.graphic.animate(r,s)}i&&this.graphic.animate(i,yn(f.options.chart.animation,d.animation,h.animation)),y&&y.hide()}else t&&d&&(n=p.symbol||o.symbol,y&&y.currentSymbol!==n&&(y=y.destroy()),i&&(y?y[e?"animate":"attr"]({x:i.x,y:i.y}):n&&(o.stateMarkerGraphic=y=f.renderer.symbol(n,i.x,i.y,i.width,i.height,mn(h,d)).add(o.markerGroup),y.currentSymbol=n)),!f.styledMode&&y&&"inactive"!==this.state&&y.attr(o.pointAttribs(this,t))),y&&(y[t&&this.isInside?"show":"hide"](),y.element.point=this,y.addClass(this.getClassName(),!0));let v=l.halo,b=this.graphic||y,x=b&&b.visibility||"inherit";v&&v.size&&b&&"hidden"!==x&&!this.isCluster?(m||(o.halo=m=f.renderer.path().add(b.parentGroup)),m.show()[e?"animate":"attr"]({d:this.haloPath(v.size)}),m.attr({class:"highcharts-halo highcharts-color-"+yn(this.colorIndex,o.colorIndex)+(this.className?" "+this.className:""),visibility:x,zIndex:-1}),m.point=this,f.styledMode||m.attr(hn({fill:this.color||o.color,"fill-opacity":v.opacity},Kt.filterUserAttributes(v.attributes||{})))):m?.point?.haloPath&&!m.point.destroyed&&m.animate({d:m.point.haloPath(0)},null,m.hide),cn(this,"afterSetState",{state:t})}haloPath(t){let e=this.pos();return e?this.series.chart.renderer.symbols.circle(an(e[0],1)-t,e[1]-t,2*t,2*t):[]}}let En=wn,{parse:Tn}=bt,{charts:Sn,composed:An,isTouchDevice:kn}=w,{addEvent:Cn,attr:In,css:Pn,extend:Mn,find:Ln,fireEvent:On,isNumber:Nn,isObject:_n,objectEach:Dn,offset:Rn,pick:Fn,pushUnique:Bn,splat:zn}=X;class Un{applyInactiveState(t){let e,i=[];(t||[]).forEach((function(t){e=t.series,i.push(e),e.linkedParent&&i.push(e.linkedParent),e.linkedSeries&&(i=i.concat(e.linkedSeries)),e.navigatorSeries&&i.push(e.navigatorSeries)})),this.chart.series.forEach((function(t){-1===i.indexOf(t)?t.setState("inactive",!0):t.options.inactiveOtherPoints&&t.setAllPointsToState("inactive")}))}destroy(){let t=this;this.eventsToUnbind.forEach((t=>t())),this.eventsToUnbind=[],!w.chartCount&&(Un.unbindDocumentMouseUp.forEach((t=>t.unbind())),Un.unbindDocumentMouseUp.length=0,Un.unbindDocumentTouchEnd&&(Un.unbindDocumentTouchEnd=Un.unbindDocumentTouchEnd())),clearInterval(t.tooltipTimeout),Dn(t,(function(e,i){t[i]=void 0}))}getSelectionMarkerAttrs(t,e){let i={args:{chartX:t,chartY:e},attrs:{},shapeType:"rect"};return On(this,"getSelectionMarkerAttrs",i,(i=>{let r,{chart:s,zoomHor:n,zoomVert:o}=this,{mouseDownX:a=0,mouseDownY:l=0}=s,h=i.attrs;h.x=s.plotLeft,h.y=s.plotTop,h.width=n?1:s.plotWidth,h.height=o?1:s.plotHeight,n&&(r=t-a,h.width=Math.max(1,Math.abs(r)),h.x=(r>0?0:r)+a),o&&(r=e-l,h.height=Math.max(1,Math.abs(r)),h.y=(r>0?0:r)+l)})),i}drag(t){let e,{chart:i}=this,{mouseDownX:r=0,mouseDownY:s=0}=i,{panning:n,panKey:o,selectionMarkerFill:a}=i.options.chart,l=i.plotLeft,h=i.plotTop,c=i.plotWidth,d=i.plotHeight,u=_n(n)?n.enabled:n,p=o&&t[`${o}Key`],f=t.chartX,g=t.chartY,m=this.selectionMarker;if((!m||!m.touch)&&(f<l?f=l:f>l+c&&(f=l+c),g<h?g=h:g>h+d&&(g=h+d),this.hasDragged=Math.sqrt(Math.pow(r-f,2)+Math.pow(s-g,2)),this.hasDragged>10)){e=i.isInsidePlot(r-l,s-h,{visiblePlotOnly:!0});let{shapeType:o,attrs:c}=this.getSelectionMarkerAttrs(f,g);(i.hasCartesianSeries||i.mapView)&&this.hasZoom&&e&&!p&&!m&&(this.selectionMarker=m=i.renderer[o](),m.attr({class:"highcharts-selection-marker",zIndex:7}).add(),i.styledMode||m.attr({fill:a||Tn("#334eff").setOpacity(.25).get()})),m&&m.attr(c),e&&!m&&u&&i.pan(t,n)}}dragStart(t){let e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=t.chartX,e.mouseDownY=t.chartY}getSelectionBox(t){let e={args:{marker:t},result:t.getBBox()};return On(this,"getSelectionBox",e),e.result}drop(t){let e,{chart:i,selectionMarker:r}=this;for(let t of i.axes)t.isPanning&&(t.isPanning=!1,(t.options.startOnTick||t.options.endOnTick||t.series.some((t=>t.boosted)))&&(t.forceRedraw=!0,t.setExtremes(t.userMin,t.userMax,!1),e=!0));if(e&&i.redraw(),r&&t){if(this.hasDragged){let e=this.getSelectionBox(r);i.transform({axes:i.axes.filter((t=>t.zoomEnabled&&("xAxis"===t.coll&&this.zoomX||"yAxis"===t.coll&&this.zoomY))),selection:{originalEvent:t,xAxis:[],yAxis:[],...e},from:e})}Nn(i.index)&&(this.selectionMarker=r.destroy())}i&&Nn(i.index)&&(Pn(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(t,e,i){let r;return t.forEach((function(t){let s=!(t.noSharedTooltip&&e)&&0>t.options.findNearestPointBy.indexOf("y"),n=t.searchPoint(i,s);_n(n,!0)&&n.series&&(!_n(r,!0)||function(t,i){let r=t.distX-i.distX,s=t.dist-i.dist,n=i.series.group?.zIndex-t.series.group?.zIndex;return 0!==r&&e?r:0!==s?s:0!==n?n:t.series.index>i.series.index?-1:1}(r,n)>0)&&(r=n)})),r}getChartCoordinatesFromPoint(t,e){let{xAxis:i,yAxis:r}=t.series,s=t.shapeArgs;if(i&&r){let n=t.clientX??t.plotX??0,o=t.plotY||0;return t.isNode&&s&&Nn(s.x)&&Nn(s.y)&&(n=s.x,o=s.y),e?{chartX:r.len+r.pos-o,chartY:i.len+i.pos-n}:{chartX:n+i.pos,chartY:o+r.pos}}if(s&&s.x&&s.y)return{chartX:s.x,chartY:s.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:t}=this.chart,e=Rn(t);this.chartPosition={left:e.left,top:e.top,scaleX:1,scaleY:1};let{offsetHeight:i,offsetWidth:r}=t;return r>2&&i>2&&(this.chartPosition.scaleX=e.width/r,this.chartPosition.scaleY=e.height/i),this.chartPosition}getCoordinates(t){let e={xAxis:[],yAxis:[]};for(let i of this.chart.axes)e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])});return e}getHoverData(t,e,i,r,s,n){let o,a=[],l=function(t){return t.visible&&!(!s&&t.directTouch)&&Fn(t.options.enableMouseTracking,!0)},h=e,c={chartX:n?n.chartX:void 0,chartY:n?n.chartY:void 0,shared:s};On(this,"beforeGetHoverData",c),o=h&&!h.stickyTracking?[h]:i.filter((t=>t.stickyTracking&&(c.filter||l)(t)));let d=r&&t||!n?t:this.findNearestKDPoint(o,s,n);return h=d&&d.series,d&&(s&&!h.noSharedTooltip?(o=i.filter((function(t){return c.filter?c.filter(t):l(t)&&!t.noSharedTooltip}))).forEach((function(t){let e=Ln(t.points,(function(t){return t.x===d.x&&!t.isNull}));_n(e)&&(t.boosted&&t.boost&&(e=t.boost.getPoint(e)),a.push(e))})):a.push(d)),On(this,"afterGetHoverData",c={hoverPoint:d}),{hoverPoint:c.hoverPoint,hoverSeries:h,hoverPoints:a}}getPointFromEvent(t){let e,i=t.target;for(;i&&!e;)e=i.point,i=i.parentNode;return e}onTrackerMouseOut(t){let e=this.chart,i=t.relatedTarget,r=e.hoverSeries;this.isDirectTouch=!1,!r||!i||r.stickyTracking||this.inClass(i,"highcharts-tooltip")||this.inClass(i,"highcharts-series-"+r.index)&&this.inClass(i,"highcharts-tracker")||r.onMouseOut()}inClass(t,e){let i,r=t;for(;r;){if(i=In(r,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}r=r.parentElement}}constructor(t,e){this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=e,this.chart=t,this.runChartClick=!!e.chart.events?.click,this.pinchDown=[],this.setDOMEvents(),On(this,"afterInit")}normalize(t,e){let i=t.touches,r=i?i.length?i.item(0):Fn(i.changedTouches,t.changedTouches)[0]:t;e||(e=this.getChartPosition());let s=r.pageX-e.left,n=r.pageY-e.top;return Mn(t,{chartX:Math.round(s/=e.scaleX),chartY:Math.round(n/=e.scaleY)})}onContainerClick(t){let e=this.chart,i=e.hoverPoint,r=this.normalize(t),s=e.plotLeft,n=e.plotTop;!e.cancelClick&&(i&&this.inClass(r.target,"highcharts-tracker")?(On(i.series,"click",Mn(r,{point:i})),e.hoverPoint&&i.firePointEvent("click",r)):(Mn(r,this.getCoordinates(r)),e.isInsidePlot(r.chartX-s,r.chartY-n,{visiblePlotOnly:!0})&&On(e,"click",r)))}onContainerMouseDown(t){let e=!(1&~(t.buttons||t.button));t=this.normalize(t),w.isFirefox&&0!==t.button&&this.onContainerMouseMove(t),(void 0===t.button||e)&&(this.zoomOption(t),e&&t.preventDefault?.(),this.dragStart(t))}onContainerMouseLeave(t){let{pointer:e}=Sn[Fn(Un.hoverChartIndex,-1)]||{};t=this.normalize(t),this.onContainerMouseMove(t),e&&!this.inClass(t.relatedTarget,"highcharts-tooltip")&&(e.reset(),e.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(t){let e=this.chart,i=e.tooltip,r=this.normalize(t);this.setHoverChartIndex(t),("mousedown"===e.mouseIsDown||this.touchSelect(r))&&this.drag(r),!e.openMenu&&(this.inClass(r.target,"highcharts-tracker")||e.isInsidePlot(r.chartX-e.plotLeft,r.chartY-e.plotTop,{visiblePlotOnly:!0}))&&(!i||!i.shouldStickOnContact(r))&&(this.inClass(r.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(r))}onDocumentTouchEnd(t){this.onDocumentMouseUp(t)}onContainerTouchMove(t){this.touchSelect(t)?this.onContainerMouseMove(t):this.touch(t)}onContainerTouchStart(t){this.touchSelect(t)?this.onContainerMouseDown(t):(this.zoomOption(t),this.touch(t,!0))}onDocumentMouseMove(t){let e=this.chart,i=e.tooltip,r=this.chartPosition,s=this.normalize(t,r);!r||e.isInsidePlot(s.chartX-e.plotLeft,s.chartY-e.plotTop,{visiblePlotOnly:!0})||i&&i.shouldStickOnContact(s)||s.target!==e.container.ownerDocument&&this.inClass(s.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(t){Sn[Fn(Un.hoverChartIndex,-1)]?.pointer?.drop(t)}pinch(t){let e=this,{chart:i,hasZoom:r,lastTouches:s}=e,n=[].map.call(t.touches||[],(t=>e.normalize(t))),o=n.length,a=1===o&&(e.inClass(t.target,"highcharts-tracker")&&i.runTrackerClick||e.runChartClick),l=i.tooltip,h=1===o&&Fn(l?.options.followTouchMove,!0);o>1?e.initiated=!0:h&&(e.initiated=!1),r&&e.initiated&&!a&&!1!==t.cancelable&&t.preventDefault(),"touchstart"===t.type?(e.pinchDown=n,e.res=!0,i.mouseDownX=t.chartX):h?this.runPointActions(e.normalize(t)):s&&(On(i,"touchpan",{originalEvent:t,touches:n},(()=>{let e=t=>{let e=t[0],i=t[1]||e;return{x:e.chartX,y:e.chartY,width:i.chartX-e.chartX,height:i.chartY-e.chartY}};i.transform({axes:i.axes.filter((t=>t.zoomEnabled&&(this.zoomHor&&t.horiz||this.zoomVert&&!t.horiz))),to:e(n),from:e(s),trigger:t.type})})),e.res&&(e.res=!1,this.reset(!1,0))),e.lastTouches=n}reset(t,e){let i=this.chart,r=i.hoverSeries,s=i.hoverPoint,n=i.hoverPoints,o=i.tooltip,a=o&&o.shared?n:s;t&&a&&zn(a).forEach((function(e){e.series.isCartesian&&void 0===e.plotX&&(t=!1)})),t?o&&a&&zn(a).length&&(o.refresh(a),o.shared&&n?n.forEach((function(t){t.setState(t.state,!0),t.series.isCartesian&&(t.series.xAxis.crosshair&&t.series.xAxis.drawCrosshair(null,t),t.series.yAxis.crosshair&&t.series.yAxis.drawCrosshair(null,t))})):s&&(s.setState(s.state,!0),i.axes.forEach((function(t){t.crosshair&&s.series[t.coll]===t&&t.drawCrosshair(null,s)})))):(s&&s.onMouseOut(),n&&n.forEach((function(t){t.setState()})),r&&r.onMouseOut(),o&&o.hide(e),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),i.axes.forEach((function(t){t.hideCrosshair()})),i.hoverPoints=i.hoverPoint=void 0)}runPointActions(t,e,i){let r=this.chart,s=r.series,n=r.tooltip&&r.tooltip.options.enabled?r.tooltip:void 0,o=!!n&&n.shared,a=e||r.hoverPoint,l=a&&a.series||r.hoverSeries,h=(!t||"touchmove"!==t.type)&&(!!e||l&&l.directTouch&&this.isDirectTouch),c=this.getHoverData(a,l,s,h,o,t);a=c.hoverPoint,l=c.hoverSeries;let d=c.hoverPoints,u=l&&l.tooltipOptions.followPointer&&!l.tooltipOptions.split,p=o&&l&&!l.noSharedTooltip;if(a&&(i||a!==r.hoverPoint||n&&n.isHidden)){if((r.hoverPoints||[]).forEach((function(t){-1===d.indexOf(t)&&t.setState()})),r.hoverSeries!==l&&l.onMouseOver(),this.applyInactiveState(d),(d||[]).forEach((function(t){t.setState("hover")})),r.hoverPoint&&r.hoverPoint.firePointEvent("mouseOut"),!a.series)return;r.hoverPoints=d,r.hoverPoint=a,a.firePointEvent("mouseOver",void 0,(()=>{n&&a&&n.refresh(p?d:a,t)}))}else if(u&&n&&!n.isHidden){let e=n.getAnchor([{}],t);r.isInsidePlot(e[0],e[1],{visiblePlotOnly:!0})&&n.updatePosition({plotX:e[0],plotY:e[1]})}this.unDocMouseMove||(this.unDocMouseMove=Cn(r.container.ownerDocument,"mousemove",(t=>Sn[Un.hoverChartIndex??-1]?.pointer?.onDocumentMouseMove(t))),this.eventsToUnbind.push(this.unDocMouseMove)),r.axes.forEach((function(e){let i,s=Fn((e.crosshair||{}).snap,!0);!s||(i=r.hoverPoint)&&i.series[e.coll]===e||(i=Ln(d,(t=>t.series&&t.series[e.coll]===e))),i||!s?e.drawCrosshair(t,i):e.hideCrosshair()}))}setDOMEvents(){let t=this.chart.container,e=t.ownerDocument;t.onmousedown=this.onContainerMouseDown.bind(this),t.onmousemove=this.onContainerMouseMove.bind(this),t.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(Cn(t,"mouseenter",this.onContainerMouseEnter.bind(this)),Cn(t,"mouseleave",this.onContainerMouseLeave.bind(this))),Un.unbindDocumentMouseUp.some((t=>t.doc===e))||Un.unbindDocumentMouseUp.push({doc:e,unbind:Cn(e,"mouseup",this.onDocumentMouseUp.bind(this))});let i=this.chart.renderTo.parentElement;for(;i&&"BODY"!==i.tagName;)this.eventsToUnbind.push(Cn(i,"scroll",(()=>{delete this.chartPosition}))),i=i.parentElement;this.eventsToUnbind.push(Cn(t,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),Cn(t,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Un.unbindDocumentTouchEnd||(Un.unbindDocumentTouchEnd=Cn(e,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),Cn(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){if(!kn)return;let t=this.pointerCaptureEventsToUnbind,e=this.chart,i=e.container,r=Fn(e.options.tooltip?.followTouchMove,!0)&&e.series.some((t=>t.options.findNearestPointBy.indexOf("y")>-1));!this.hasPointerCapture&&r?(t.push(Cn(i,"pointerdown",(t=>{t.target?.hasPointerCapture(t.pointerId)&&t.target?.releasePointerCapture(t.pointerId)})),Cn(i,"pointermove",(t=>{e.pointer?.getPointFromEvent(t)?.onMouseOver(t)}))),e.styledMode||Pn(i,{"touch-action":"none"}),i.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!r&&(t.forEach((t=>t())),t.length=0,e.styledMode||Pn(i,{"touch-action":Fn(e.options.chart.style?.["touch-action"],"manipulation")}),i.className=i.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(t){let e=this.chart,i=w.charts[Fn(Un.hoverChartIndex,-1)];if(i&&i!==e){let r={relatedTarget:e.container};t&&!t?.relatedTarget&&(t={...r,...t}),i.pointer?.onContainerMouseLeave(t||r)}i&&i.mouseIsDown||(Un.hoverChartIndex=e.index)}touch(t,e){let i,{chart:r,pinchDown:s=[]}=this;this.setHoverChartIndex(),1===(t=this.normalize(t)).touches.length?r.isInsidePlot(t.chartX-r.plotLeft,t.chartY-r.plotTop,{visiblePlotOnly:!0})&&!r.openMenu?(e&&this.runPointActions(t),"touchmove"===t.type&&(i=!!s[0]&&Math.pow(s[0].chartX-t.chartX,2)+Math.pow(s[0].chartY-t.chartY,2)>=16),Fn(i,!0)&&this.pinch(t)):e&&this.reset():2===t.touches.length&&this.pinch(t)}touchSelect(t){return!(!this.chart.zooming.singleTouch||!t.touches||1!==t.touches.length)}zoomOption(t){let e,i,r=this.chart,s=r.inverted,n=r.zooming.type||"";/touch/.test(t.type)&&(n=Fn(r.zooming.pinchType,n)),this.zoomX=e=/x/.test(n),this.zoomY=i=/y/.test(n),this.zoomHor=e&&!s||i&&s,this.zoomVert=i&&!s||e&&s,this.hasZoom=e||i}}Un.unbindDocumentMouseUp=[],function(t){t.compose=function(e){Bn(An,"Core.Pointer")&&Cn(e,"beforeRender",(function(){this.pointer=new t(this,this.options)}))}}(Un||(Un={}));let Hn=Un,{fireEvent:Vn,isArray:jn,objectEach:Gn,uniqueKey:Wn}=X,Xn=class{constructor(t={}){this.autoId=!t.id,this.columns={},this.id=t.id||Wn(),this.modified=this,this.rowCount=0,this.versionTag=Wn();let e=0;Gn(t.columns||{},((t,i)=>{this.columns[i]=t.slice(),e=Math.max(e,t.length)})),this.applyRowCount(e)}applyRowCount(t){this.rowCount=t,Gn(this.columns,(e=>{jn(e)&&(e.length=t)}))}getColumn(t,e){return this.columns[t]}getColumns(t,e){return(t||Object.keys(this.columns)).reduce(((t,e)=>(t[e]=this.columns[e],t)),{})}getRow(t,e){return(e||Object.keys(this.columns)).map((e=>this.columns[e]?.[t]))}setColumn(t,e=[],i=0,r){this.setColumns({[t]:e},i,r)}setColumns(t,e,i){let r=this.rowCount;Gn(t,((t,e)=>{this.columns[e]=t.slice(),r=t.length})),this.applyRowCount(r),i?.silent||(Vn(this,"afterSetColumns"),this.versionTag=Wn())}setRow(t,e=this.rowCount,i,r){let{columns:s}=this,n=i?this.rowCount+1:e+1;Gn(t,((t,o)=>{let a=s[o]||!1!==r?.addColumns&&Array(n);a&&(i?a.splice(e,0,t):a[e]=t,s[o]=a)})),n>this.rowCount&&this.applyRowCount(n),r?.silent||(Vn(this,"afterSetRows"),this.versionTag=Wn())}},{extend:qn,merge:Yn,pick:Kn}=X;!function(t){function e(t,e,i){let r,s=this.legendItem=this.legendItem||{},{chart:n,options:o}=this,{baseline:a=0,symbolWidth:l,symbolHeight:h}=t,c=this.symbol||"circle",d=h/2,u=n.renderer,p=s.group,f=a-Math.round((t.fontMetrics?.b||h)*(i?.4:.3)),g={},m=o.marker,y=0;if(n.styledMode||(g["stroke-width"]=Math.min(o.lineWidth||0,24),o.dashStyle?g.dashstyle=o.dashStyle:"square"===o.linecap||(g["stroke-linecap"]="round")),s.line=u.path().addClass("highcharts-graph").attr(g).add(p),i&&(s.area=u.path().addClass("highcharts-area").add(p)),g["stroke-linecap"]&&(y=Math.min(s.line.strokeWidth(),l)/2),l){let t=[["M",y,f],["L",l-y,f]];s.line.attr({d:t}),s.area?.attr({d:[...t,["L",l-y,a],["L",y,a]]})}if(m&&!1!==m.enabled&&l){let t=Math.min(Kn(m.radius,d),d);0===c.indexOf("url")&&(m=Yn(m,{width:h,height:h}),t=0),s.symbol=r=u.symbol(c,l/2-t,f-t,2*t,2*t,qn({context:"legend"},m)).addClass("highcharts-point").add(p),r.isMarker=!0}}t.areaMarker=function(t,i){e.call(this,t,i,!0)},t.lineMarker=e,t.rectangle=function(t,e){let i=e.legendItem||{},r=t.options,s=t.symbolHeight,n=r.squareSymbol,o=n?s:t.symbolWidth;i.symbol=this.chart.renderer.rect(n?(t.symbolWidth-s)/2:0,t.baseline-s+1,o,s,Kn(t.options.symbolRadius,s/2)).addClass("highcharts-point").attr({zIndex:3}).add(i.group)}}(c||(c={}));let $n=c,{defaultOptions:Qn}=ft,{extend:Zn,extendClass:Jn,merge:to}=X;!function(t){function e(e,i){let r=Qn.plotOptions||{},s=i.defaultOptions,n=i.prototype;return n.type=e,n.pointClass||(n.pointClass=En),!t.seriesTypes[e]&&(s&&(r[e]=s),t.seriesTypes[e]=i,!0)}t.seriesTypes=w.seriesTypes,t.registerSeriesType=e,t.seriesType=function(i,r,s,n,o){let a=Qn.plotOptions||{};if(r=r||"",a[i]=to(a[r],s),delete t.seriesTypes[i],e(i,Jn(t.seriesTypes[r]||function(){},n)),t.seriesTypes[i].prototype.type=i,o){class e extends En{}Zn(e.prototype,o),t.seriesTypes[i].prototype.pointClass=e}return t.seriesTypes[i]}}(d||(d={}));let eo=d,{animObject:io,setAnimation:ro}=Dt,{defaultOptions:so}=ft,{registerEventOptions:no}=yr,{svg:oo,win:ao}=w,{seriesTypes:lo}=eo,{arrayMax:ho,arrayMin:co,clamp:uo,correctFloat:po,crisp:fo,defined:go,destroyObjectProperties:mo,diffObjects:yo,erase:vo,error:bo,extend:xo,find:wo,fireEvent:Eo,getClosestDistance:To,getNestedProperty:So,insertItem:Ao,isArray:ko,isNumber:Co,isString:Io,merge:Po,objectEach:Mo,pick:Lo,removeEvent:Oo,syncTimeout:No}=X;class _o{constructor(){this.zoneAxis="y"}init(t,e){let i;Eo(this,"init",{options:e}),this.dataTable??(this.dataTable=new Xn);let r=t.series;this.eventsToUnbind=[],this.chart=t,this.options=this.setOptions(e);let s=this.options,n=!1!==s.visible;this.linkedSeries=[],this.bindAxes(),xo(this,{name:s.name,state:"",visible:n,selected:!0===s.selected}),no(this,s);let o=s.events;(o&&o.click||s.point&&s.point.events&&s.point.events.click||s.allowPointSelect)&&(t.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.isCartesian&&(t.hasCartesianSeries=!0),r.length&&(i=r[r.length-1]),this._i=Lo(i&&i._i,-1)+1,this.opacity=this.options.opacity,t.orderItems("series",Ao(this,r)),s.dataSorting&&s.dataSorting.enabled?this.setDataSortingOptions():this.points||this.data||this.setData(s.data,!1),Eo(this,"afterInit")}is(t){return lo[t]&&this instanceof lo[t]}bindAxes(){let t,e=this,i=e.options,r=e.chart;Eo(this,"bindAxes",null,(function(){(e.axisTypes||[]).forEach((function(s){(r[s]||[]).forEach((function(r){t=r.options,(Lo(i[s],0)===r.index||void 0!==i[s]&&i[s]===t.id)&&(Ao(e,r.series),e[s]=r,r.isDirty=!0)})),e[s]||e.optionalAxis===s||bo(18,!0,r)}))})),Eo(this,"afterBindAxes")}hasData(){return this.visible&&void 0!==this.dataMax&&void 0!==this.dataMin||this.visible&&this.dataTable.rowCount>0}hasMarkerChanged(t,e){let i=t.marker,r=e.marker||{};return i&&(r.enabled&&!i.enabled||r.symbol!==i.symbol||r.height!==i.height||r.width!==i.width)}autoIncrement(t){let e,i=this.options,{pointIntervalUnit:r,relativeXValue:s}=this.options,n=this.chart.time,o=this.xIncrement??n.parse(i.pointStart)??0;if(this.pointInterval=e=Lo(this.pointInterval,i.pointInterval,1),s&&Co(t)&&(e*=t),r){let t=n.toParts(o);"day"===r?t[2]+=e:"month"===r?t[1]+=e:"year"===r&&(t[0]+=e),e=n.makeTime.apply(n,t)-o}return s&&Co(t)?o+e:(this.xIncrement=o+e,o)}setDataSortingOptions(){let t=this.options;xo(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),go(t.pointRange)||(t.pointRange=1)}setOptions(t){let e,i=this.chart,r=i.options.plotOptions,s=i.userOptions||{},n=Po(t),o=i.styledMode,a={plotOptions:r,userOptions:n};Eo(this,"setOptions",a);let l=a.plotOptions[this.type],h=s.plotOptions||{},c=h.series||{},d=so.plotOptions[this.type]||{},u=h[this.type]||{};this.userOptions=a.userOptions;let p=Po(l,r.series,u,n);this.tooltipOptions=Po(so.tooltip,so.plotOptions.series?.tooltip,d?.tooltip,i.userOptions.tooltip,h.series?.tooltip,u.tooltip,n.tooltip),this.stickyTracking=Lo(n.stickyTracking,u.stickyTracking,c.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||p.stickyTracking),null===l.marker&&delete p.marker,this.zoneAxis=p.zoneAxis||"y";let f=this.zones=(p.zones||[]).map((t=>({...t})));return(p.negativeColor||p.negativeFillColor)&&!p.zones&&(e={value:p[this.zoneAxis+"Threshold"]||p.threshold||0,className:"highcharts-negative"},o||(e.color=p.negativeColor,e.fillColor=p.negativeFillColor),f.push(e)),f.length&&go(f[f.length-1].value)&&f.push(o?{}:{color:this.color,fillColor:this.fillColor}),Eo(this,"afterSetOptions",{options:p}),p}getName(){return Lo(this.options.name,"Series "+(this.index+1))}getCyclic(t,e,i){let r,s,n=this.chart,o=`${t}Index`,a=`${t}Counter`,l=i?.length||n.options.chart.colorCount;!e&&(go(s=Lo("color"===t?this.options.colorIndex:void 0,this[o]))?r=s:(n.series.length||(n[a]=0),r=n[a]%l,n[a]+=1),i&&(e=i[r])),void 0!==r&&(this[o]=r),this[t]=e}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||so.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols)}getColumn(t,e){return(e?this.dataTable.modified:this.dataTable).getColumn(t,!0)||[]}findPointIndex(t,e){let i,r,s,n=t.id,o=t.x,a=this.points,l=this.options.dataSorting;if(n){let t=this.chart.get(n);t instanceof En&&(i=t)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let e=e=>!e.touched&&e.index===t.index;if(l&&l.matchByName?e=e=>!e.touched&&e.name===t.name:this.options.relativeXValue&&(e=e=>!e.touched&&e.options.x===t.x),!(i=wo(a,e)))return}return i&&void 0!==(s=i&&i.index)&&(r=!0),void 0===s&&Co(o)&&(s=this.getColumn("x").indexOf(o,e)),-1!==s&&void 0!==s&&this.cropped&&(s=s>=this.cropStart?s-this.cropStart:s),!r&&Co(s)&&a[s]&&a[s].touched&&(s=void 0),s}updateData(t,e){let i,r,s,n,o=this.options,a=o.dataSorting,l=this.points,h=[],c=this.requireSorting,d=t.length===l.length,u=!0;if(this.xIncrement=null,t.forEach((function(t,e){let r,s=go(t)&&this.pointClass.prototype.optionsToObject.call({series:this},t)||{},u=s.x;s.id||Co(u)?(-1===(r=this.findPointIndex(s,n))||void 0===r?h.push(t):l[r]&&t!==o.data[r]?(l[r].update(t,!1,null,!1),l[r].touched=!0,c&&(n=r+1)):l[r]&&(l[r].touched=!0),(!d||e!==r||a&&a.enabled||this.hasDerivedData)&&(i=!0)):h.push(t)}),this),i)for(r=l.length;r--;)(s=l[r])&&!s.touched&&s.remove&&s.remove(!1,e);else!d||a&&a.enabled?u=!1:(t.forEach((function(t,e){t===l[e].y||l[e].destroyed||l[e].update(t,!1,null,!1)})),h.length=0);if(l.forEach((function(t){t&&(t.touched=!1)})),!u)return!1;h.forEach((function(t){this.addPoint(t,!1,null,null,!1)}),this);let p=this.getColumn("x");return null===this.xIncrement&&p.length&&(this.xIncrement=ho(p),this.autoIncrement()),!0}dataColumnKeys(){return["x",...this.pointArrayMap||["y"]]}setData(t,e=!0,i,r){let s,n,o,a=this.points,l=a&&a.length||0,h=this.options,c=this.chart,d=h.dataSorting,u=this.xAxis,p=h.turboThreshold,f=this.dataTable,g=this.dataColumnKeys(),m=this.pointValKey||"y",y=(this.pointArrayMap||[]).length,v=h.keys,b=0,x=1;c.options.chart.allowMutatingData||(h.data&&delete this.options.data,this.userOptions.data&&delete this.userOptions.data,o=Po(!0,t));let w=(t=o||t||[]).length;if(d&&d.enabled&&(t=this.sortData(t)),c.options.chart.allowMutatingData&&!1!==r&&w&&l&&!this.cropped&&!this.hasGroupedData&&this.visible&&!this.boosted&&(n=this.updateData(t,i)),!n){this.xIncrement=null,this.colorCounter=0;let e=p&&w>p;if(e){let i=this.getFirstValidPoint(t),r=this.getFirstValidPoint(t,w-1,-1),s=t=>!(!ko(t)||!v&&!Co(t[0]));if(Co(i)&&Co(r)){let e=[],i=[];for(let r of t)e.push(this.autoIncrement()),i.push(r);f.setColumns({x:e,[m]:i})}else if(s(i)&&s(r))if(y){let e=i.length===y?1:0,r=Array(g.length).fill(0).map((()=>[]));for(let i of t){e&&r[0].push(this.autoIncrement());for(let t=e;t<=y;t++)r[t]?.push(i[t-e])}f.setColumns(g.reduce(((t,e,i)=>(t[e]=r[i],t)),{}))}else{v&&(b=v.indexOf("x"),x=v.indexOf("y"),b=b>=0?b:0,x=x>=0?x:1),1===i.length&&(x=0);let e=[],r=[];if(b===x)for(let i of t)e.push(this.autoIncrement()),r.push(i[x]);else for(let i of t)e.push(i[b]),r.push(i[x]);f.setColumns({x:e,[m]:r})}else e=!1}if(!e){let e=g.reduce(((t,e)=>(t[e]=[],t)),{});for(s=0;s<w;s++){let i=this.pointClass.prototype.applyOptions.apply({series:this},[t[s]]);for(let t of g)e[t][s]=i[t]}f.setColumns(e)}for(Io(this.getColumn("y")[0])&&bo(14,!0,c),this.data=[],this.options.data=this.userOptions.data=t,s=l;s--;)a[s]?.destroy();u&&(u.minRange=u.userMinRange),this.isDirty=c.isDirtyBox=!0,this.isDirtyData=!!a,i=!1}"point"===h.legendType&&(this.processData(),this.generatePoints()),e&&c.redraw(i)}sortData(t){let e=this,i=e.options.dataSorting.sortKey||"y",r=function(t,e){return go(e)&&t.pointClass.prototype.optionsToObject.call({series:t},e)||{}};return t.forEach((function(i,s){t[s]=r(e,i),t[s].index=s}),this),t.concat().sort(((t,e)=>{let r=So(i,t),s=So(i,e);return s<r?-1:s>r?1:0})).forEach((function(t,e){t.x=e}),this),e.linkedSeries&&e.linkedSeries.forEach((function(e){let i=e.options,s=i.data;i.dataSorting&&i.dataSorting.enabled||!s||(s.forEach((function(i,n){s[n]=r(e,i),t[n]&&(s[n].x=t[n].x,s[n].index=n)})),e.setData(s,!1))})),t}getProcessedData(t){let e,i,r,s,n,o=this,{dataTable:a,isCartesian:l,options:h,xAxis:c}=o,d=h.cropThreshold,u=t||o.getExtremesFromAll,p=c?.logarithmic,f=a.rowCount,g=0,m=o.getColumn("x"),y=a,v=!1;return c&&(s=(r=c.getExtremes()).min,n=r.max,v=!(!c.categories||c.names.length),l&&o.sorted&&!u&&(!d||f>d||o.forceCrop)&&(m[f-1]<s||m[0]>n?y=new Xn:o.getColumn(o.pointValKey||"y").length&&(m[0]<s||m[f-1]>n)&&(y=(e=this.cropData(a,s,n)).modified,g=e.start,i=!0))),m=y.getColumn("x")||[],{modified:y,cropped:i,cropStart:g,closestPointRange:To([p?m.map(p.log2lin):m],(()=>o.requireSorting&&!v&&bo(15,!1,o.chart)))}}processData(t){let e=this.xAxis,i=this.dataTable;if(this.isCartesian&&!this.isDirty&&!e.isDirty&&!this.yAxis.isDirty&&!t)return!1;let r=this.getProcessedData();i.modified=r.modified,this.cropped=r.cropped,this.cropStart=r.cropStart,this.closestPointRange=this.basePointRange=r.closestPointRange,Eo(this,"afterProcessData")}cropData(t,e,i){let r,s,n=t.getColumn("x",!0)||[],o=n.length,a={},l=0,h=o;for(r=0;r<o;r++)if(n[r]>=e){l=Math.max(0,r-1);break}for(s=r;s<o;s++)if(n[s]>i){h=s+1;break}for(let e of this.dataColumnKeys()){let i=t.getColumn(e,!0);i&&(a[e]=i.slice(l,h))}return{modified:new Xn({columns:a}),start:l,end:h}}generatePoints(){let t,e,i,r,s,n=this.options,o=this.processedData||n.data,a=this.dataTable.modified,l=this.getColumn("x",!0),h=this.pointClass,c=a.rowCount,d=this.cropStart||0,u=this.hasGroupedData,p=n.keys,f=[],g=n.dataGrouping&&n.dataGrouping.groupAll?d:0,m=this.xAxis?.categories,y=this.pointArrayMap||["y"],v=this.dataColumnKeys(),b=this.data;if(!b&&!u){let t=[];t.length=o?.length||0,b=this.data=t}for(p&&u&&(this.options.keys=!1),r=0;r<c;r++)e=d+r,u?((i=new h(this,a.getRow(r,v)||[])).dataGroup=this.groupMap[g+r],i.dataGroup?.options&&(i.options=i.dataGroup.options,xo(i,i.dataGroup.options),delete i.dataLabels)):(i=b[e],s=o?o[e]:a.getRow(r,y),i||void 0===s||(b[e]=i=new h(this,s,l[r]))),i&&(i.index=u?g+r:e,f[r]=i,i.category=m?.[i.x]??i.x,i.key=i.name??i.category);if(this.options.keys=p,b&&(c!==(t=b.length)||u))for(r=0;r<t;r++)r!==d||u||(r+=c),b[r]&&(b[r].destroyElements(),b[r].plotX=void 0);this.data=b,this.points=f,Eo(this,"afterGeneratePoints")}getXExtremes(t){return{min:co(t),max:ho(t)}}getExtremes(t,e){let i,r,s,{xAxis:n,yAxis:o}=this,a=e||this.getExtremesFromAll||this.options.getExtremesFromAll,l=a&&this.cropped?this.dataTable:this.dataTable.modified,h=l.rowCount,c=t||this.stackedYData,d=c?[c]:(this.keysAffectYAxis||this.pointArrayMap||["y"])?.map((t=>l.getColumn(t,!0)||[]))||[],u=this.getColumn("x",!0),p=[],f=this.requireSorting&&!this.is("column")?1:0,g=!!o&&o.positiveValuesOnly,m=a||this.cropped||!n,y=0,v=0;for(n&&(y=(i=n.getExtremes()).min,v=i.max),s=0;s<h;s++)if(r=u[s],m||(u[s+f]||r)>=y&&(u[s-f]||r)<=v)for(let t of d){let e=t[s];Co(e)&&(e>0||!g)&&p.push(e)}let b={activeYData:p,dataMin:co(p),dataMax:ho(p)};return Eo(this,"afterGetExtremes",{dataExtremes:b}),b}applyExtremes(){let t=this.getExtremes();return this.dataMin=t.dataMin,this.dataMax=t.dataMax,t}getFirstValidPoint(t,e=0,i=1){let r=t.length,s=e;for(;s>=0&&s<r;){if(go(t[s]))return t[s];s+=i}}translate(){this.generatePoints();let t,e,i,r,s=this.options,n=s.stacking,o=this.xAxis,a=this.enabledDataSorting,l=this.yAxis,h=this.points,c=h.length,d=this.pointPlacementToXValue(),u=!!d,p=s.threshold,f=s.startFromThreshold?p:0,g=Number.MAX_VALUE;function m(t){return uo(t,-1e9,1e9)}for(t=0;t<c;t++){let s,c,y,v=h[t],b=v.x,x=v.y,w=v.low,E=n&&l.stacking?.stacks[(this.negStacks&&x<(f?0:p)?"-":"")+this.stackKey];e=o.translate(b,!1,!1,!1,!0,d),v.plotX=Co(e)?po(m(e)):void 0,n&&this.visible&&E&&E[b]&&(r=this.getStackIndicator(r,b,this.index),!v.isNull&&r.key&&(y=(c=E[b]).points[r.key]),c&&ko(y)&&(w=y[0],x=y[1],w===f&&r.key===E[b].base&&(w=Lo(Co(p)?p:l.min)),l.positiveValuesOnly&&go(w)&&w<=0&&(w=void 0),v.total=v.stackTotal=Lo(c.total),v.percentage=go(v.y)&&c.total?v.y/c.total*100:void 0,v.stackY=x,this.irregularWidths||c.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),v.yBottom=go(w)?m(l.translate(w,!1,!0,!1,!0)):void 0,this.dataModify&&(x=this.dataModify.modifyValue(x,t)),Co(x)&&void 0!==v.plotX&&(s=Co(s=l.translate(x,!1,!0,!1,!0))?m(s):void 0),v.plotY=s,v.isInside=this.isPointInside(v),v.clientX=u?po(o.translate(b,!1,!1,!1,!0,d)):e,v.negative=(v.y||0)<(p||0),v.isNull||!1===v.visible||(void 0!==i&&(g=Math.min(g,Math.abs(e-i))),i=e),v.zone=this.zones.length?v.getZone():void 0,!v.graphic&&this.group&&a&&(v.isNew=!0)}this.closestPointRangePx=g,Eo(this,"afterTranslate")}getValidPoints(t,e,i){let r=this.chart;return(t||this.points||[]).filter((function(t){let{plotX:s,plotY:n}=t;return!(!(i||!t.isNull&&Co(n))||e&&!r.isInsidePlot(s,n,{inverted:r.inverted}))&&!1!==t.visible}))}getClipBox(){let{chart:t,xAxis:e,yAxis:i}=this,{x:r,y:s,width:n,height:o}=Po(t.clipBox);return e&&e.len!==t.plotSizeX&&(n=e.len),i&&i.len!==t.plotSizeY&&(o=i.len),t.inverted&&!this.invertible&&([n,o]=[o,n]),{x:r,y:s,width:n,height:o}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:t,group:e,markerGroup:i}=this,r=t.sharedClips,s=t.renderer,n=this.getClipBox(),o=this.getSharedClipKey(),a=r[o];a?a.animate(n):r[o]=a=s.clipRect(n),e&&e.clip(!1===this.options.clip?void 0:a),i&&i.clip()}animate(t){let{chart:e,group:i,markerGroup:r}=this,s=e.inverted,n=io(this.options.animation),o=[this.getSharedClipKey(),n.duration,n.easing,n.defer].join(","),a=e.sharedClips[o],l=e.sharedClips[o+"m"];if(t&&i){let t=this.getClipBox();if(a)a.attr("height",t.height);else{t.width=0,s&&(t.x=e.plotHeight),a=e.renderer.clipRect(t),e.sharedClips[o]=a;let i={x:-99,y:-99,width:s?e.plotWidth+199:99,height:s?99:e.plotHeight+199};l=e.renderer.clipRect(i),e.sharedClips[o+"m"]=l}i.clip(a),r?.clip(l)}else if(a&&!a.hasClass("highcharts-animating")){let t=this.getClipBox(),i=n.step;(r?.element.childNodes.length||e.series.length>1)&&(n.step=function(t,e){i&&i.apply(e,arguments),"width"===e.prop&&l?.element&&l.attr(s?"height":"width",t+99)}),a.addClass("highcharts-animating").animate(t,n)}}afterAnimate(){this.setClip(),Mo(this.chart.sharedClips,((t,e,i)=>{t&&!this.chart.container.querySelector(`[clip-path="url(#${t.id})"]`)&&(t.destroy(),delete i[e])})),this.finishedAnimating=!0,Eo(this,"afterAnimate")}drawPoints(t=this.points){let e,i,r,s,n,o,a,l=this.chart,h=l.styledMode,{colorAxis:c,options:d}=this,u=d.marker,p=this[this.specialGroup||"markerGroup"],f=this.xAxis,g=Lo(u.enabled,!f||!!f.isRadial||null,this.closestPointRangePx>=u.enabledThreshold*u.radius);if(!1!==u.enabled||this._hasPointMarkers)for(e=0;e<t.length;e++)if(s=(r=(i=t[e]).graphic)?"animate":"attr",n=i.marker||{},o=!!i.marker,(g&&void 0===n.enabled||n.enabled)&&!i.isNull&&!1!==i.visible){let t=Lo(n.symbol,this.symbol,"rect");a=this.markerAttribs(i,i.selected&&"select"),this.enabledDataSorting&&(i.startXPos=f.reversed?-(a.width||0):f.width);let e=!1!==i.isInside;if(!r&&e&&((a.width||0)>0||i.hasImage)&&(i.graphic=r=l.renderer.symbol(t,a.x,a.y,a.width,a.height,o?n:u).add(p),this.enabledDataSorting&&l.hasRendered&&(r.attr({x:i.startXPos}),s="animate")),r&&"animate"===s&&r[e?"show":"hide"](e).animate(a),r){let t=this.pointAttribs(i,h||!i.selected?void 0:"select");h?c&&r.css({fill:t.fill}):r[s](t)}r&&r.addClass(i.getClassName(),!0)}else r&&(i.graphic=r.destroy())}markerAttribs(t,e){let i,r,s=this.options,n=s.marker,o=t.marker||{},a=o.symbol||n.symbol,l={},h=Lo(o.radius,n&&n.radius);e&&(i=n.states[e],h=Lo((r=o.states&&o.states[e])&&r.radius,i&&i.radius,h&&h+(i&&i.radiusPlus||0))),t.hasImage=a&&0===a.indexOf("url"),t.hasImage&&(h=0);let c=t.pos();return Co(h)&&c&&(s.crisp&&(c[0]=fo(c[0],t.hasImage?0:"rect"===a?n?.lineWidth||0:1)),l.x=c[0]-h,l.y=c[1]-h),h&&(l.width=l.height=2*h),l}pointAttribs(t,e){let i,r,s,n,o=this.options.marker,a=t&&t.options,l=a&&a.marker||{},h=a&&a.color,c=t&&t.color,d=t&&t.zone&&t.zone.color,u=this.color,p=Lo(l.lineWidth,o.lineWidth),f=1;return u=h||d||c||u,s=l.fillColor||o.fillColor||u,n=l.lineColor||o.lineColor||u,e=e||"normal",i=o.states[e]||{},p=Lo((r=l.states&&l.states[e]||{}).lineWidth,i.lineWidth,p+Lo(r.lineWidthPlus,i.lineWidthPlus,0)),s=r.fillColor||i.fillColor||s,{stroke:n=r.lineColor||i.lineColor||n,"stroke-width":p,fill:s,opacity:f=Lo(r.opacity,i.opacity,f)}}destroy(t){let e,i,r,s=this,n=s.chart,o=/AppleWebKit\/533/.test(ao.navigator.userAgent),a=s.data||[];for(Eo(s,"destroy",{keepEventsForUpdate:t}),this.removeEvents(t),(s.axisTypes||[]).forEach((function(t){(r=s[t])&&r.series&&(vo(r.series,s),r.isDirty=r.forceRedraw=!0)})),s.legendItem&&s.chart.legend.destroyItem(s),e=a.length;e--;)(i=a[e])&&i.destroy&&i.destroy();for(let t of s.zones)mo(t,void 0,!0);X.clearTimeout(s.animationTimeout),Mo(s,(function(t,e){t instanceof $e&&!t.survive&&t[o&&"group"===e?"hide":"destroy"]()})),n.hoverSeries===s&&(n.hoverSeries=void 0),vo(n.series,s),n.orderItems("series"),Mo(s,(function(e,i){t&&"hcEvents"===i||delete s[i]}))}applyZones(){let{area:t,chart:e,graph:i,zones:r,points:s,xAxis:n,yAxis:o,zoneAxis:a}=this,{inverted:l,renderer:h}=e,c=this[`${a}Axis`],{isXAxis:d,len:u=0,minPointOffset:p=0}=c||{},f=(i?.strokeWidth()||0)/2+1,g=(t,e=0,i=0)=>{l&&(i=u-i);let{translated:r=0,lineClip:s}=t,n=i-r;s?.push(["L",e,Math.abs(n)<f?i-f*(n<=0?-1:1):r])};if(r.length&&(i||t)&&c&&Co(c.min)){let e=c.getExtremes().max+p,f=t=>{t.forEach(((e,i)=>{("M"===e[0]||"L"===e[0])&&(t[i]=[e[0],d?u-e[1]:e[1],d?e[2]:u-e[2]])}))};if(r.forEach((t=>{t.lineClip=[],t.translated=uo(c.toPixels(Lo(t.value,e),!0)||0,0,u)})),i&&!this.showLine&&i.hide(),t&&t.hide(),"y"===a&&s.length<n.len)for(let t of s){let{plotX:e,plotY:i,zone:s}=t,n=s&&r[r.indexOf(s)-1];s&&g(s,e,i),n&&g(n,e,i)}let m=[],y=c.toPixels(c.getExtremes().min-p,!0);r.forEach((e=>{let r=e.lineClip||[],s=Math.round(e.translated||0);n.reversed&&r.reverse();let{clip:a,simpleClip:c}=e,u=0,p=0,g=n.len,v=o.len;d?(u=s,g=y):(p=s,v=y);let b=[["M",u,p],["L",g,p],["L",g,v],["L",u,v],["Z"]],x=[b[0],...r,b[1],b[2],...m,b[3],b[4]];m=r.reverse(),y=s,l&&(f(x),t&&f(b)),a?(a.animate({d:x}),c?.animate({d:b})):(a=e.clip=h.path(x),t&&(c=e.simpleClip=h.path(b))),i&&e.graph?.clip(a),t&&e.area?.clip(c)}))}else this.visible&&(i&&i.show(),t&&t.show())}plotGroup(t,e,i,r,s){let n=this[t],o=!n,a={visibility:i,zIndex:r||.1};return go(this.opacity)&&!this.chart.styledMode&&"inactive"!==this.state&&(a.opacity=this.opacity),n||(this[t]=n=this.chart.renderer.g().add(s)),n.addClass("highcharts-"+e+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(go(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(n.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),n.attr(a)[o?"attr":"animate"](this.getPlotBox(e)),n}getPlotBox(t){let e=this.xAxis,i=this.yAxis,r=this.chart,s=r.inverted&&!r.polar&&e&&this.invertible&&"series"===t;return r.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:r.plotLeft,translateY:i?i.top:r.plotTop,rotation:s?90:0,rotationOriginX:s?(e.len-i.len)/2:0,rotationOriginY:s?(e.len+i.len)/2:0,scaleX:s?-1:1,scaleY:1}}removeEvents(t){let{eventsToUnbind:e}=this;t||Oo(this),e.length&&(e.forEach((t=>{t()})),e.length=0)}render(){let t=this,{chart:e,options:i,hasRendered:r}=t,s=io(i.animation),n=t.visible?"inherit":"hidden",o=i.zIndex,a=e.seriesGroup,l=t.finishedAnimating?0:s.duration;Eo(this,"render"),t.plotGroup("group","series",n,o,a),t.markerGroup=t.plotGroup("markerGroup","markers",n,o,a),!1!==i.clip&&t.setClip(),l&&t.animate?.(!0),t.drawGraph&&(t.drawGraph(),t.applyZones()),t.visible&&t.drawPoints(),t.drawDataLabels?.(),t.redrawPoints?.(),i.enableMouseTracking&&t.drawTracker?.(),l&&t.animate?.(),r||(l&&s.defer&&(l+=s.defer),t.animationTimeout=No((()=>{t.afterAnimate()}),l||0)),t.isDirty=!1,t.hasRendered=!0,Eo(t,"afterRender")}redraw(){let t=this.isDirty||this.isDirtyData;this.translate(),this.render(),t&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(t,e){let{xAxis:i,yAxis:r}=this,s=this.chart.inverted;return this.searchKDTree({clientX:s?i.len-t.chartY+i.pos:t.chartX-i.pos,plotY:s?r.len-t.chartX+r.pos:t.chartY-r.pos},e,t)}buildKDTree(t){this.buildingKdTree=!0;let e=this,i=e.options.findNearestPointBy.indexOf("y")>-1?2:1;delete e.kdTree,No((function(){e.kdTree=function t(i,r,s){let n,o,a=i?.length;if(a)return n=e.kdAxisArray[r%s],i.sort(((t,e)=>(t[n]||0)-(e[n]||0))),{point:i[o=Math.floor(a/2)],left:t(i.slice(0,o),r+1,s),right:t(i.slice(o+1),r+1,s)}}(e.getValidPoints(void 0,!e.directTouch),i,i),e.buildingKdTree=!1}),e.options.kdNow||"touchstart"===t?.type?0:1)}searchKDTree(t,e,i){let r=this,[s,n]=this.kdAxisArray,o=e?"distX":"dist",a=(r.options.findNearestPointBy||"").indexOf("y")>-1?2:1,l=!!r.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(i),this.kdTree)return function t(e,i,a,h){let c,d,u=i.point,p=r.kdAxisArray[a%h],f=u;!function(t,e){let i=t[s],r=e[s],o=go(i)&&go(r)?i-r:null,a=t[n],h=e[n],c=go(a)&&go(h)?a-h:0,d=l&&e.marker?.radius||0;e.dist=Math.sqrt((o&&o*o||0)+c*c)-d,e.distX=go(o)?Math.abs(o)-d:Number.MAX_VALUE}(e,u);let g=(e[p]||0)-(u[p]||0)+(l&&u.marker?.radius||0),m=g<0?"left":"right",y=g<0?"right":"left";return i[m]&&(f=(c=t(e,i[m],a+1,h))[o]<f[o]?c:u),i[y]&&Math.sqrt(g*g)<f[o]&&(f=(d=t(e,i[y],a+1,h))[o]<f[o]?d:f),f}(t,this.kdTree,a,a)}pointPlacementToXValue(){let{options:t,xAxis:e}=this,i=t.pointPlacement;return"between"===i&&(i=e.reversed?-.5:.5),Co(i)?i*(t.pointRange||e.pointRange):0}isPointInside(t){let{chart:e,xAxis:i,yAxis:r}=this,{plotX:s=-1,plotY:n=-1}=t;return n>=0&&n<=(r?r.len:e.plotHeight)&&s>=0&&s<=(i?i.len:e.plotWidth)}drawTracker(){let t=this,e=t.options,i=e.trackByArea,r=[].concat((i?t.areaPath:t.graphPath)||[]),s=t.chart,n=s.pointer,o=s.renderer,a=s.options.tooltip?.snap||0,l=()=>{e.enableMouseTracking&&s.hoverSeries!==t&&t.onMouseOver()},h="rgba(192,192,192,"+(oo?1e-4:.002)+")",c=t.tracker;c?c.attr({d:r}):t.graph&&(t.tracker=c=o.path(r).attr({visibility:t.visible?"inherit":"hidden",zIndex:2}).addClass(i?"highcharts-tracker-area":"highcharts-tracker-line").add(t.group),s.styledMode||c.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:h,fill:i?h:"none","stroke-width":t.graph.strokeWidth()+(i?0:2*a)}),[t.tracker,t.markerGroup,t.dataLabelsGroup].forEach((t=>{t&&(t.addClass("highcharts-tracker").on("mouseover",l).on("mouseout",(t=>{n?.onTrackerMouseOut(t)})),e.cursor&&!s.styledMode&&t.css({cursor:e.cursor}),t.on("touchstart",l))}))),Eo(this,"afterDrawTracker")}addPoint(t,e,i,r,s){let n,o,a=this.options,{chart:l,data:h,dataTable:c,xAxis:d}=this,u=d&&d.hasNames&&d.names,p=a.data,f=this.getColumn("x");e=Lo(e,!0);let g={series:this};this.pointClass.prototype.applyOptions.apply(g,[t]);let m=g.x;if(o=f.length,this.requireSorting&&m<f[o-1])for(n=!0;o&&f[o-1]>m;)o--;c.setRow(g,o,!0,{addColumns:!1}),u&&g.name&&(u[m]=g.name),p?.splice(o,0,t),(n||this.processedData)&&(this.data.splice(o,0,null),this.processData()),"point"===a.legendType&&this.generatePoints(),i&&(h[0]&&h[0].remove?h[0].remove(!1):([h,p,...Object.values(c.getColumns())].filter(go).forEach((t=>{t.shift()})),c.rowCount-=1,Eo(c,"afterDeleteRows"))),!1!==s&&Eo(this,"addPoint",{point:g}),this.isDirty=!0,this.isDirtyData=!0,e&&l.redraw(r)}removePoint(t,e,i){let r=this,{chart:s,data:n,points:o,dataTable:a}=r,l=n[t],h=function(){[o?.length===n.length?o:void 0,n,r.options.data,...Object.values(a.getColumns())].filter(go).forEach((e=>{e.splice(t,1)})),a.rowCount-=1,Eo(a,"afterDeleteRows"),l?.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&s.redraw()};ro(i,s),e=Lo(e,!0),l?l.firePointEvent("remove",null,h):h()}remove(t,e,i,r){let s=this,n=s.chart;function o(){s.destroy(r),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(r),Lo(t,!0)&&n.redraw(e)}!1!==i?Eo(s,"remove",null,o):o()}update(t,e){Eo(this,"update",{options:t=yo(t,this.userOptions)});let i,r,s=this,n=s.chart,o=s.userOptions,a=s.initialType||s.type,l=n.options.plotOptions,h=lo[a].prototype,c=s.finishedAnimating&&{animation:!1},d={},u=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],p=t.type||o.type||n.options.chart.type,f=!(this.hasDerivedData||p&&p!==this.type||void 0!==t.keys||void 0!==t.pointStart||void 0!==t.pointInterval||void 0!==t.relativeXValue||t.joinBy||t.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some((t=>s.hasOptionChanged(t))));p=p||a,f?(u.push("data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),!1!==t.visible&&u.push("area","graph"),s.parallelArrays.forEach((function(t){u.push(t+"Data")})),t.data&&(t.dataSorting&&xo(s.options.dataSorting,t.dataSorting),this.setData(t.data,!1))):this.dataTable.modified=this.dataTable,t=Po(o,{index:void 0===o.index?s.index:o.index,pointStart:l?.series?.pointStart??o.pointStart??s.getColumn("x")[0]},!f&&{data:s.options.data},t,c),f&&t.data&&(t.data=s.options.data),(u=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(u)).forEach((function(t){u[t]=s[t],delete s[t]}));let g=!1;if(lo[p]){if(g=p!==s.type,s.remove(!1,!1,!1,!0),g)if(n.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(s,lo[p].prototype);else{let t=Object.hasOwnProperty.call(s,"hcEvents")&&s.hcEvents;for(r in h)s[r]=void 0;xo(s,lo[p].prototype),t?s.hcEvents=t:delete s.hcEvents}}else bo(17,!0,n,{missingModuleFor:p});if(u.forEach((function(t){s[t]=u[t]})),s.init(n,t),f&&this.points)for(let t of(!1===(i=s.options).visible?(d.graphic=1,d.dataLabel=1):(this.hasMarkerChanged(i,o)&&(d.graphic=1),s.hasDataLabels?.()||(d.dataLabel=1)),this.points))t&&t.series&&(t.resolveColor(),Object.keys(d).length&&t.destroyElements(d),!1===i.showInLegend&&t.legendItem&&n.legend.destroyItem(t));s.initialType=a,n.linkSeries(),n.setSortedData(),g&&s.linkedSeries.length&&(s.isDirtyData=!0),Eo(this,"afterUpdate"),Lo(e,!0)&&n.redraw(!!f&&void 0)}setName(t){this.name=this.options.name=this.userOptions.name=t,this.chart.isDirtyLegend=!0}hasOptionChanged(t){let e=this.chart,i=this.options[t],r=e.options.plotOptions,s=this.userOptions[t],n=Lo(r?.[this.type]?.[t],r?.series?.[t]);return s&&!go(n)?i!==s:i!==Lo(n,i)}onMouseOver(){let t=this.chart,e=t.hoverSeries,i=t.pointer;i?.setHoverChartIndex(),e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&Eo(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this}onMouseOut(){let t=this.options,e=this.chart,i=e.tooltip,r=e.hoverPoint;e.hoverSeries=null,r&&r.onMouseOut(),this&&t.events.mouseOut&&Eo(this,"mouseOut"),i&&!this.stickyTracking&&(!i.shared||this.noSharedTooltip)&&i.hide(),e.series.forEach((function(t){t.setState("",!0)}))}setState(t,e){let i=this,r=i.options,s=i.graph,n=r.inactiveOtherPoints,o=r.states,a=Lo(o[t||"normal"]&&o[t||"normal"].animation,i.chart.options.chart.animation),l=r.lineWidth,h=r.opacity;if(t=t||"",i.state!==t&&([i.group,i.markerGroup,i.dataLabelsGroup].forEach((function(e){e&&(i.state&&e.removeClass("highcharts-series-"+i.state),t&&e.addClass("highcharts-series-"+t))})),i.state=t,!i.chart.styledMode)){if(o[t]&&!1===o[t].enabled)return;if(t&&(l=o[t].lineWidth||l+(o[t].lineWidthPlus||0),h=Lo(o[t].opacity,h)),s&&!s.dashstyle&&Co(l))for(let t of[s,...this.zones.map((t=>t.graph))])t?.animate({"stroke-width":l},a);n||[i.group,i.markerGroup,i.dataLabelsGroup,i.labelBySeries].forEach((function(t){t&&t.animate({opacity:h},a)}))}e&&n&&i.points&&i.setAllPointsToState(t||void 0)}setAllPointsToState(t){this.points.forEach((function(e){e.setState&&e.setState(t)}))}setVisible(t,e){let i=this,r=i.chart,s=r.options.chart.ignoreHiddenSeries,n=i.visible;i.visible=t=i.options.visible=i.userOptions.visible=void 0===t?!n:t;let o=t?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((t=>{i[t]?.[o]()})),(r.hoverSeries===i||r.hoverPoint?.series===i)&&i.onMouseOut(),i.legendItem&&r.legend.colorizeItem(i,t),i.isDirty=!0,i.options.stacking&&r.series.forEach((t=>{t.options.stacking&&t.visible&&(t.isDirty=!0)})),i.linkedSeries.forEach((e=>{e.setVisible(t,!1)})),s&&(r.isDirtyBox=!0),Eo(i,o),!1!==e&&r.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(t){this.selected=t=this.options.selected=void 0===t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),Eo(this,t?"select":"unselect")}shouldShowTooltip(t,e,i={}){return i.series=this,i.visiblePlotOnly=!0,this.chart.isInsidePlot(t,e,i)}drawLegendSymbol(t,e){$n[this.options.legendSymbol||"rectangle"]?.call(this,t,e)}}_o.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:t}=this.series.chart;return"number"!=typeof this.y?"":t(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},_o.types=eo.seriesTypes,_o.registerType=eo.registerSeriesType,xo(_o.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:En,requireSorting:!0,sorted:!0}),eo.series=_o;let Do=_o,{animObject:Ro,setAnimation:Fo}=Dt,{registerEventOptions:Bo}=yr,{composed:zo,marginNames:Uo}=w,{distribute:Ho}=me,{format:Vo}=ce,{addEvent:jo,createElement:Go,css:Wo,defined:Xo,discardElement:qo,find:Yo,fireEvent:Ko,isNumber:$o,merge:Qo,pick:Zo,pushUnique:Jo,relativeLength:ta,stableSort:ea,syncTimeout:ia}=X;class ra{constructor(t,e){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=t,this.setOptions(e),e.enabled&&(this.render(),Bo(this,e),jo(this.chart,"endResize",(function(){this.legend.positionCheckboxes()}))),jo(this.chart,"render",(()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())}))}setOptions(t){let e=Zo(t.padding,8);this.options=t,this.chart.styledMode||(this.itemStyle=t.itemStyle,this.itemHiddenStyle=Qo(this.itemStyle,t.itemHiddenStyle)),this.itemMarginTop=t.itemMarginTop,this.itemMarginBottom=t.itemMarginBottom,this.padding=e,this.initialItemY=e-5,this.symbolWidth=Zo(t.symbolWidth,16),this.pages=[],this.proximate="proximate"===t.layout&&!this.chart.inverted,this.baseline=void 0}update(t,e){let i=this.chart;this.setOptions(Qo(!0,this.options,t)),"events"in this.options&&Bo(this,this.options),this.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,Zo(e,!0)&&i.redraw(),Ko(this,"afterUpdate",{redraw:e})}colorizeItem(t,e){let i=t.color,{area:r,group:s,label:n,line:o,symbol:a}=t.legendItem||{};if((t instanceof Do||t instanceof En)&&(t.color=t.options?.legendSymbolColor||i),s?.[e?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:i={}}=this,s=i.color,{fillColor:l,fillOpacity:h,lineColor:c,marker:d}=t.options,u=t=>(!e&&(t.fill&&(t.fill=s),t.stroke&&(t.stroke=s)),t);n?.css(Qo(e?this.itemStyle:i)),o?.attr(u({stroke:c||t.color})),a&&a.attr(u(d&&a.isMarker?t.pointAttribs():{fill:t.color})),r?.attr(u({fill:l||t.color,"fill-opacity":l?1:h??.75}))}t.color=i,Ko(this,"afterColorizeItem",{item:t,visible:e})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(t){let{group:e,x:i=0,y:r=0}=t.legendItem||{},s=this.options,n=s.symbolPadding,o=!s.rtl,a=t.checkbox;if(e&&e.element){let s={translateX:o?i:this.legendWidth-i-2*n-4,translateY:r};e[Xo(e.translateY)?"animate":"attr"](s,void 0,(()=>{Ko(this,"afterPositionItem",{item:t})}))}a&&(a.x=i,a.y=r)}destroyItem(t){let e=t.checkbox,i=t.legendItem||{};for(let t of["group","label","line","symbol"])i[t]&&(i[t]=i[t].destroy());e&&qo(e),t.legendItem=void 0}destroy(){for(let t of this.getAllItems())this.destroyItem(t);for(let t of["clipRect","up","down","pager","nav","box","title","group"])this[t]&&(this[t]=this[t].destroy());this.display=null}positionCheckboxes(){let t,e=this.group&&this.group.alignAttr,i=this.clipHeight||this.legendHeight,r=this.titleHeight;e&&(t=e.translateY,this.allItems.forEach((function(s){let n,o=s.checkbox;o&&(n=t+r+o.y+(this.scrollOffset||0)+3,Wo(o,{left:e.translateX+s.checkboxOffset+o.x-20+"px",top:n+"px",display:this.proximate||n>t-6&&n<t+i-6?"":"none"}))}),this))}renderTitle(){let t,e=this.options,i=this.padding,r=e.title,s=0;r.text&&(this.title||(this.title=this.chart.renderer.label(r.text,i-3,i-4,void 0,void 0,void 0,e.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(r.style),this.title.add(this.group)),r.width||this.title.css({width:this.maxLegendWidth+"px"}),s=(t=this.title.getBBox()).height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:s})),this.titleHeight=s}setText(t){let e=this.options;t.legendItem.label.attr({text:e.labelFormat?Vo(e.labelFormat,t,this.chart):e.labelFormatter.call(t)})}renderItem(t){let e=t.legendItem=t.legendItem||{},i=this.chart,r=i.renderer,s=this.options,n="horizontal"===s.layout,o=this.symbolWidth,a=s.symbolPadding||0,l=this.itemStyle,h=this.itemHiddenStyle,c=n?Zo(s.itemDistance,20):0,d=!s.rtl,u=!t.series,p=!u&&t.series.drawLegendSymbol?t.series:t,f=p.options,g=!!this.createCheckboxForItem&&f&&f.showCheckbox,m=s.useHTML,y=t.options.className,v=e.label,b=o+a+c+(g?20:0);!v&&(e.group=r.g("legend-item").addClass("highcharts-"+p.type+"-series highcharts-color-"+t.colorIndex+(y?" "+y:"")+(u?" highcharts-series-"+t.index:"")).attr({zIndex:1}).add(this.scrollGroup),e.label=v=r.text("",d?o+a:-a,this.baseline||0,m),i.styledMode||v.css(Qo(t.visible?l:h)),v.attr({align:d?"left":"right",zIndex:2}).add(e.group),!this.baseline&&(this.fontMetrics=r.fontMetrics(v),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,v.attr("y",this.baseline),this.symbolHeight=Zo(s.symbolHeight,this.fontMetrics.f),s.squareSymbol&&(this.symbolWidth=Zo(s.symbolWidth,Math.max(this.symbolHeight,16)),b=this.symbolWidth+a+c+(g?20:0),d&&v.attr("x",this.symbolWidth+a))),p.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,v,m)),g&&!t.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(t),this.colorizeItem(t,t.visible),(i.styledMode||!l.width)&&v.css({width:(s.itemWidth||this.widthOption||i.spacingBox.width)-b+"px"}),this.setText(t);let x=v.getBBox(),w=this.fontMetrics&&this.fontMetrics.h||0;t.itemWidth=t.checkboxOffset=s.itemWidth||e.labelWidth||x.width+b,this.maxItemWidth=Math.max(this.maxItemWidth,t.itemWidth),this.totalItemWidth+=t.itemWidth,this.itemHeight=t.itemHeight=Math.round(e.labelHeight||(x.height>1.5*w?x.height:w))}layoutItem(t){let e=this.options,i=this.padding,r="horizontal"===e.layout,s=t.itemHeight,n=this.itemMarginBottom,o=this.itemMarginTop,a=r?Zo(e.itemDistance,20):0,l=this.maxLegendWidth,h=e.alignColumns&&this.totalItemWidth>l?this.maxItemWidth:t.itemWidth,c=t.legendItem||{};r&&this.itemX-i+h>l&&(this.itemX=i,this.lastLineHeight&&(this.itemY+=o+this.lastLineHeight+n),this.lastLineHeight=0),this.lastItemY=o+this.itemY+n,this.lastLineHeight=Math.max(s,this.lastLineHeight),c.x=this.itemX,c.y=this.itemY,r?this.itemX+=h:(this.itemY+=o+s+n,this.lastLineHeight=s),this.offsetWidth=this.widthOption||Math.max((r?this.itemX-i-(t.checkbox?0:a):h)+i,this.offsetWidth)}getAllItems(){let t=[];return this.chart.series.forEach((function(e){let i=e&&e.options;e&&Zo(i.showInLegend,!Xo(i.linkedTo)&&void 0,!0)&&(t=t.concat((e.legendItem||{}).labels||("point"===i.legendType?e.data:e)))})),Ko(this,"afterGetAllItems",{allItems:t}),t}getAlignment(){let t=this.options;return this.proximate?t.align.charAt(0)+"tv":t.floating?"":t.align.charAt(0)+t.verticalAlign.charAt(0)+t.layout.charAt(0)}adjustMargins(t,e){let i=this.chart,r=this.options,s=this.getAlignment();s&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach((function(n,o){n.test(s)&&!Xo(t[o])&&(i[Uo[o]]=Math.max(i[Uo[o]],i.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*r[o%2?"x":"y"]+Zo(r.margin,12)+e[o]+(i.titleOffset[o]||0)))}))}proximatePositions(){let t,e=this.chart,i=[],r="left"===this.options.align;for(let s of(this.allItems.forEach((function(t){let s,n,o,a,l=r;t.yAxis&&(t.xAxis.options.reversed&&(l=!l),t.points&&(s=Yo(l?t.points:t.points.slice(0).reverse(),(function(t){return $o(t.plotY)}))),n=this.itemMarginTop+t.legendItem.label.getBBox().height+this.itemMarginBottom,a=t.yAxis.top-e.plotTop,o=t.visible?(s?s.plotY:t.yAxis.height)+(a-.3*n):a+t.yAxis.height,i.push({target:o,size:n,item:t}))}),this),Ho(i,e.plotHeight)))t=s.item.legendItem||{},$o(s.pos)&&(t.y=e.plotTop-e.spacing[0]+s.pos)}render(){let t,e,i,r,s=this.chart,n=s.renderer,o=this.options,a=this.padding,l=this.getAllItems(),h=this.group,c=this.box;this.itemX=a,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=ta(o.width,s.spacingBox.width-a),r=s.spacingBox.width-2*a-o.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(r/=2),this.maxLegendWidth=this.widthOption||r,h||(this.group=h=n.g("legend").addClass(o.className||"").attr({zIndex:7}).add(),this.contentGroup=n.g().attr({zIndex:1}).add(h),this.scrollGroup=n.g().add(this.contentGroup)),this.renderTitle(),ea(l,((t,e)=>(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0))),o.reversed&&l.reverse(),this.allItems=l,this.display=t=!!l.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,l.forEach(this.renderItem,this),l.forEach(this.layoutItem,this),e=(this.widthOption||this.offsetWidth)+a,i=this.lastItemY+this.lastLineHeight+this.titleHeight,i=this.handleOverflow(i)+a,c||(this.box=c=n.rect().addClass("highcharts-legend-box").attr({r:o.borderRadius}).add(h)),s.styledMode||c.attr({stroke:o.borderColor,"stroke-width":o.borderWidth||0,fill:o.backgroundColor||"none"}).shadow(o.shadow),e>0&&i>0&&c[c.placed?"animate":"attr"](c.crisp.call({},{x:0,y:0,width:e,height:i},c.strokeWidth())),h[t?"show":"hide"](),s.styledMode&&"none"===h.getStyle("display")&&(e=i=0),this.legendWidth=e,this.legendHeight=i,t&&this.align(),this.proximate||this.positionItems(),Ko(this,"afterRender")}align(t=this.chart.spacingBox){let e=this.chart,i=this.options,r=t.y;/(lth|ct|rth)/.test(this.getAlignment())&&e.titleOffset[0]>0?r+=e.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&e.titleOffset[2]>0&&(r-=e.titleOffset[2]),r!==t.y&&(t=Qo(t,{y:r})),e.hasRendered||(this.group.placed=!1),this.group.align(Qo(i,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":i.verticalAlign}),!0,t)}handleOverflow(t){let e,i,r,s=this,n=this.chart,o=n.renderer,a=this.options,l=a.y,h="top"===a.verticalAlign,c=this.padding,d=a.maxHeight,u=a.navigation,p=Zo(u.animation,!0),f=u.arrowSize||12,g=this.pages,m=this.allItems,y=function(t){"number"==typeof t?w.attr({height:t}):w&&(s.clipRect=w.destroy(),s.contentGroup.clip()),s.contentGroup.div&&(s.contentGroup.div.style.clip=t?"rect("+c+"px,9999px,"+(c+t)+"px,0)":"auto")},v=function(t){return s[t]=o.circle(0,0,1.3*f).translate(f/2,f/2).add(x),n.styledMode||s[t].attr("fill","rgba(0,0,0,0.0001)"),s[t]},b=n.spacingBox.height+(h?-l:l)-c,x=this.nav,w=this.clipRect;return"horizontal"!==a.layout||"middle"===a.verticalAlign||a.floating||(b/=2),d&&(b=Math.min(b,d)),g.length=0,t&&b>0&&t>b&&!1!==u.enabled?(this.clipHeight=e=Math.max(b-20-this.titleHeight-c,0),this.currentPage=Zo(this.currentPage,1),this.fullHeight=t,m.forEach(((t,s)=>{let n=(r=t.legendItem||{}).y||0,o=Math.round(r.label.getBBox().height),a=g.length;(!a||n-g[a-1]>e&&(i||n)!==g[a-1])&&(g.push(i||n),a++),r.pageIx=a-1,i&&((m[s-1].legendItem||{}).pageIx=a-1),s===m.length-1&&n+o-g[a-1]>e&&n>g[a-1]&&(g.push(n),r.pageIx=a),n!==i&&(i=n)})),w||(w=s.clipRect=o.clipRect(0,c-2,9999,0),s.contentGroup.clip(w)),y(e),x||(this.nav=x=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,f,f).add(x),v("upTracker").on("click",(function(){s.scroll(-1,p)})),this.pager=o.text("",15,10).addClass("highcharts-legend-navigation"),!n.styledMode&&u.style&&this.pager.css(u.style),this.pager.add(x),this.down=o.symbol("triangle-down",0,0,f,f).add(x),v("downTracker").on("click",(function(){s.scroll(1,p)}))),s.scroll(0),t=b):x&&(y(),this.nav=x.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t}scroll(t,e){let i=this.chart,r=this.pages,s=r.length,n=this.clipHeight,o=this.options.navigation,a=this.pager,l=this.padding,h=this.currentPage+t;h>s&&(h=s),h>0&&(void 0!==e&&Fo(e,i),this.nav.attr({translateX:l,translateY:n+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach((function(t){t.attr({class:1===h?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),a.attr({text:h+"/"+s}),[this.down,this.downTracker].forEach((function(t){t.attr({x:18+this.pager.getBBox().width,class:h===s?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),i.styledMode||(this.up.attr({fill:1===h?o.inactiveColor:o.activeColor}),this.upTracker.css({cursor:1===h?"default":"pointer"}),this.down.attr({fill:h===s?o.inactiveColor:o.activeColor}),this.downTracker.css({cursor:h===s?"default":"pointer"})),this.scrollOffset=-r[h-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=h,this.positionCheckboxes(),ia((()=>{Ko(this,"afterScroll",{currentPage:h})}),Ro(Zo(e,i.renderer.globalAnimation,!0)).duration))}setItemEvents(t,e,i){let r=this,s=t.legendItem||{},n=r.chart.renderer.boxWrapper,o=t instanceof En,a=t instanceof Do,l="highcharts-legend-"+(o?"point":"series")+"-active",h=r.chart.styledMode,c=i?[e,s.symbol]:[s.group],d=e=>{r.allItems.forEach((i=>{t!==i&&[i].concat(i.linkedSeries||[]).forEach((t=>{t.setState(e,!o)}))}))};for(let i of c)i&&i.on("mouseover",(function(){t.visible&&d("inactive"),t.setState("hover"),t.visible&&n.addClass(l),h||e.css(r.options.itemHoverStyle)})).on("mouseout",(function(){r.chart.styledMode||e.css(Qo(t.visible?r.itemStyle:r.itemHiddenStyle)),d(""),n.removeClass(l),t.setState()})).on("click",(function(e){n.removeClass(l),Ko(r,"itemClick",{browserEvent:e,legendItem:t},(function(){t.setVisible&&t.setVisible(),d(t.visible?"inactive":"")})),o?t.firePointEvent("legendItemClick",{browserEvent:e}):a&&Ko(t,"legendItemClick",{browserEvent:e})}))}createCheckboxForItem(t){t.checkbox=Go("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),jo(t.checkbox,"click",(function(e){let i=e.target;Ko(t.series||t,"checkboxClick",{checked:i.checked,item:t},(function(){t.select()}))}))}}!function(t){t.compose=function(e){Jo(zo,"Core.Legend")&&jo(e,"beforeMargins",(function(){this.legend=new t(this,this.options.legend)}))}}(ra||(ra={}));let sa=ra,{animate:na,animObject:oa,setAnimation:aa}=Dt,{defaultOptions:la}=ft,{numberFormat:ha}=ce,{registerEventOptions:ca}=yr,{charts:da,doc:ua,marginNames:pa,svg:fa,win:ga}=w,{seriesTypes:ma}=eo,{addEvent:ya,attr:va,createElement:ba,css:xa,defined:wa,diffObjects:Ea,discardElement:Ta,erase:Sa,error:Aa,extend:ka,find:Ca,fireEvent:Ia,getAlignFactor:Pa,getStyle:Ma,isArray:La,isNumber:Oa,isObject:Na,isString:_a,merge:Da,objectEach:Ra,pick:Fa,pInt:Ba,relativeLength:za,removeEvent:Ua,splat:Ha,syncTimeout:Va,uniqueKey:ja}=X;class Ga{static chart(t,e,i){return new Ga(t,e,i)}constructor(t,e,i){this.sharedClips={};let r=[...arguments];(_a(t)||t.nodeName)&&(this.renderTo=r.shift()),this.init(r[0],r[1])}setZoomOptions(){let t=this.options.chart,e=t.zooming;this.zooming={...e,type:Fa(t.zoomType,e.type),key:Fa(t.zoomKey,e.key),pinchType:Fa(t.pinchType,e.pinchType),singleTouch:Fa(t.zoomBySingleTouch,e.singleTouch,!1),resetButton:Da(e.resetButton,t.resetZoomButton)}}init(t,e){Ia(this,"init",{args:arguments},(function(){let i=Da(la,t),r=i.chart,s=this.renderTo||r.renderTo;this.userOptions=ka({},t),(this.renderTo=_a(s)?ua.getElementById(s):s)||Aa(13,!0,this),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=e,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.locale=i.lang.locale??this.renderTo.closest("[lang]")?.lang,this.time=new lt(ka(i.time||{},{locale:this.locale})),i.time=this.time.options,this.numberFormatter=(r.numberFormatter||ha).bind(this),this.styledMode=r.styledMode,this.hasCartesianSeries=r.showAxes,this.index=da.length,da.push(this),w.chartCount++,ca(this,r),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),Ia(this,"afterInit"),this.firstRender()}))}initSeries(t){let e=this.options.chart,i=t.type||e.type,r=ma[i];r||Aa(17,!0,this,{missingModuleFor:i});let s=new r;return"function"==typeof s.init&&s.init(this,t),s}setSortedData(){this.getSeriesOrderByLinks().forEach((function(t){t.points||t.data||!t.enabledDataSorting||t.setData(t.options.data,!1)}))}getSeriesOrderByLinks(){return this.series.concat().sort((function(t,e){return t.linkedSeries.length||e.linkedSeries.length?e.linkedSeries.length-t.linkedSeries.length:0}))}orderItems(t,e=0){let i=this[t],r=this.options[t]=Ha(this.options[t]).slice(),s=this.userOptions[t]=this.userOptions[t]?Ha(this.userOptions[t]).slice():[];if(this.hasRendered&&(r.splice(e),s.splice(e)),i)for(let t=e,n=i.length;t<n;++t){let e=i[t];e&&(e.index=t,e instanceof Do&&(e.name=e.getName()),e.options.isInternal||(r[t]=e.options,s[t]=e.userOptions))}}isInsidePlot(t,e,i={}){let{inverted:r,plotBox:s,plotLeft:n,plotTop:o,scrollablePlotBox:a}=this,{scrollLeft:l=0,scrollTop:h=0}=i.visiblePlotOnly&&this.scrollablePlotArea?.scrollingContainer||{},c=i.series,d=i.visiblePlotOnly&&a||s,u=i.inverted?e:t,p=i.inverted?t:e,f={x:u,y:p,isInsidePlot:!0,options:i};if(!i.ignoreX){let t=c&&(r&&!this.polar?c.yAxis:c.xAxis)||{pos:n,len:1/0},e=i.paneCoordinates?t.pos+u:n+u;e>=Math.max(l+n,t.pos)&&e<=Math.min(l+n+d.width,t.pos+t.len)||(f.isInsidePlot=!1)}if(!i.ignoreY&&f.isInsidePlot){let t=!r&&i.axis&&!i.axis.isXAxis&&i.axis||c&&(r?c.xAxis:c.yAxis)||{pos:o,len:1/0},e=i.paneCoordinates?t.pos+p:o+p;e>=Math.max(h+o,t.pos)&&e<=Math.min(h+o+d.height,t.pos+t.len)||(f.isInsidePlot=!1)}return Ia(this,"afterIsInsidePlot",f),f.isInsidePlot}redraw(t){Ia(this,"beforeRedraw");let e,i,r,s,n=this.hasCartesianSeries?this.axes:this.colorAxis||[],o=this.series,a=this.pointer,l=this.legend,h=this.userOptions.legend,c=this.renderer,d=c.isHidden(),u=[],p=this.isDirtyBox,f=this.isDirtyLegend;for(c.rootFontSize=c.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),aa(!!this.hasRendered&&t,this),d&&this.temporaryDisplay(),this.layOutTitles(!1),r=o.length;r--;)if(((s=o[r]).options.stacking||s.options.centerInCategory)&&(i=!0,s.isDirty)){e=!0;break}if(e)for(r=o.length;r--;)(s=o[r]).options.stacking&&(s.isDirty=!0);o.forEach((function(t){t.isDirty&&("point"===t.options.legendType?("function"==typeof t.updateTotals&&t.updateTotals(),f=!0):h&&(h.labelFormatter||h.labelFormat)&&(f=!0)),t.isDirtyData&&Ia(t,"updatedData")})),f&&l&&l.options.enabled&&(l.render(),this.isDirtyLegend=!1),i&&this.getStacks(),n.forEach((function(t){t.updateNames(),t.setScale()})),this.getMargins(),n.forEach((function(t){t.isDirty&&(p=!0)})),n.forEach((function(t){let e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,u.push((function(){Ia(t,"afterSetExtremes",ka(t.eventArgs,t.getExtremes())),delete t.eventArgs}))),(p||i)&&t.redraw()})),p&&this.drawChartBox(),Ia(this,"predraw"),o.forEach((function(t){(p||t.isDirty)&&t.visible&&t.redraw(),t.isDirtyData=!1})),a&&a.reset(!0),c.draw(),Ia(this,"redraw"),Ia(this,"render"),d&&this.temporaryDisplay(!0),u.forEach((function(t){t.call()}))}get(t){let e=this.series;function i(e){return e.id===t||e.options&&e.options.id===t}let r=Ca(this.axes,i)||Ca(this.series,i);for(let t=0;!r&&t<e.length;t++)r=Ca(e[t].points||[],i);return r}createAxes(){let t=this.userOptions;for(let e of(Ia(this,"createAxes"),["xAxis","yAxis"]))for(let i of t[e]=Ha(t[e]||{}))new as(this,i,e);Ia(this,"afterCreateAxes")}getSelectedPoints(){return this.series.reduce(((t,e)=>(e.getPointsCollection().forEach((e=>{Fa(e.selectedStaging,e.selected)&&t.push(e)})),t)),[])}getSelectedSeries(){return this.series.filter((t=>t.selected))}setTitle(t,e,i){this.applyDescription("title",t),this.applyDescription("subtitle",e),this.applyDescription("caption",void 0),this.layOutTitles(i)}applyDescription(t,e){let i=this,r=this.options[t]=Da(this.options[t],e),s=this[t];s&&e&&(this[t]=s=s.destroy()),r&&!s&&((s=this.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,class:"highcharts-"+t,zIndex:r.zIndex||4}).css({textOverflow:"ellipsis",whiteSpace:"nowrap"}).add()).update=function(e,r){i.applyDescription(t,e),i.layOutTitles(r)},this.styledMode||s.css(ka("title"===t?{fontSize:this.options.isStock?"1em":"1.2em"}:{},r.style)),s.textPxLength=s.getBBox().width,s.css({whiteSpace:r.style?.whiteSpace}),this[t]=s)}layOutTitles(t=!0){let e=[0,0,0],{options:i,renderer:r,spacingBox:s}=this;["title","subtitle","caption"].forEach((t=>{let i=this[t],n=this.options[t],o=Da(s),a=i?.textPxLength||0;if(i&&n){Ia(this,"layOutTitle",{alignTo:o,key:t,textPxLength:a});let s=r.fontMetrics(i),l=s.b,h=s.h,c=n.verticalAlign||"top",d="top"===c,u=d&&n.minScale||1,p="title"===t?d?-3:0:d?e[0]+2:0,f=Math.min(o.width/a,1),g=Math.max(u,f),m=Da({y:"bottom"===c?l:p+l},{align:"title"===t?f<u?"left":"center":this.title?.alignValue},n),y=n.width||(f>u?this.chartWidth:o.width)/g;i.alignValue!==m.align&&(i.placed=!1);let v=Math.round(i.css({width:`${y}px`}).getBBox(n.useHTML).height);if(m.height=v,i.align(m,!1,o).attr({align:m.align,scaleX:g,scaleY:g,"transform-origin":`${o.x+a*g*Pa(m.align)} ${h}`}),!n.floating){let t=v*(v<1.2*h?1:g);"top"===c?e[0]=Math.ceil(e[0]+t):"bottom"===c&&(e[2]=Math.ceil(e[2]+t))}}}),this),e[0]&&"top"===(i.title?.verticalAlign||"top")&&(e[0]+=i.title?.margin||0),e[2]&&"bottom"===i.caption?.verticalAlign&&(e[2]+=i.caption?.margin||0);let n=!this.titleOffset||this.titleOffset.join(",")!==e.join(",");this.titleOffset=e,Ia(this,"afterLayOutTitles"),!this.isDirtyBox&&n&&(this.isDirtyBox=this.isDirtyLegend=n,this.hasRendered&&t&&this.isDirtyBox&&this.redraw())}getContainerBox(){let t=[].map.call(this.renderTo.children,(t=>{if(t!==this.container){let e=t.style.display;return t.style.display="none",[t,e]}})),e={width:Ma(this.renderTo,"width",!0)||0,height:Ma(this.renderTo,"height",!0)||0};return t.filter(Boolean).forEach((([t,e])=>{t.style.display=e})),e}getChartSize(){let t=this.options.chart,e=t.width,i=t.height,r=this.getContainerBox(),s=r.height<=1||!this.renderTo.parentElement?.style.height&&"100%"===this.renderTo.style.height;this.chartWidth=Math.max(0,e||r.width||600),this.chartHeight=Math.max(0,za(i,this.chartWidth)||(s?400:r.height)),this.containerBox=r}temporaryDisplay(t){let e,i=this.renderTo;if(t)for(;i&&i.style;)i.hcOrigStyle&&(xa(i,i.hcOrigStyle),delete i.hcOrigStyle),i.hcOrigDetached&&(ua.body.removeChild(i),i.hcOrigDetached=!1),i=i.parentNode;else for(;i&&i.style&&(ua.body.contains(i)||i.parentNode||(i.hcOrigDetached=!0,ua.body.appendChild(i)),("none"===Ma(i,"display",!1)||i.hcOricDetached)&&(i.hcOrigStyle={display:i.style.display,height:i.style.height,overflow:i.style.overflow},e={display:"block",overflow:"hidden"},i!==this.renderTo&&(e.height=0),xa(i,e),i.offsetWidth||i.style.setProperty("display","block","important")),(i=i.parentNode)!==ua.body););}setClassName(t){this.container.className="highcharts-container "+(t||"")}getContainer(){let t,e=this.options,i=e.chart,r="data-highcharts-chart",s=ja(),n=this.renderTo,o=Ba(va(n,r));Oa(o)&&da[o]&&da[o].hasRendered&&da[o].destroy(),va(n,r,this.index),n.innerHTML=Kt.emptyHTML,i.skipClone||n.offsetWidth||this.temporaryDisplay(),this.getChartSize();let a=this.chartHeight,l=this.chartWidth;xa(n,{overflow:"hidden"}),this.styledMode||(t=ka({position:"relative",overflow:"hidden",width:l+"px",height:a+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},i.style||{}));let h=ba("div",{id:s},t,n);this.container=h,this.getChartSize(),l===this.chartWidth||(l=this.chartWidth,this.styledMode||xa(h,{width:Fa(i.style?.width,l+"px")})),this.containerBox=this.getContainerBox(),this._cursor=h.style.cursor;let c=i.renderer||!fa?de.getRendererType(i.renderer):Qi;if(this.renderer=new c(h,l,a,void 0,i.forExport,e.exporting&&e.exporting.allowHTML,this.styledMode),aa(void 0,this),this.setClassName(i.className),this.styledMode)for(let t in e.defs)this.renderer.definition(e.defs[t]);else this.renderer.setStyle(i.style);this.renderer.chartIndex=this.index,Ia(this,"afterGetContainer")}getMargins(t){let{spacing:e,margin:i,titleOffset:r}=this;this.resetMargins(),r[0]&&!wa(i[0])&&(this.plotTop=Math.max(this.plotTop,r[0]+e[0])),r[2]&&!wa(i[2])&&(this.marginBottom=Math.max(this.marginBottom,r[2]+e[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(i,e),Ia(this,"getMargins"),t||this.getAxisMargins()}getAxisMargins(){let t=this,e=t.axisOffset=[0,0,0,0],i=t.colorAxis,r=t.margin,s=function(t){t.forEach((function(t){t.visible&&t.getOffset()}))};t.hasCartesianSeries?s(t.axes):i&&i.length&&s(i),pa.forEach((function(i,s){wa(r[s])||(t[i]+=e[s])})),t.setChartSize()}getOptions(){return Ea(this.userOptions,la)}reflow(t){let e=this,i=e.containerBox,r=e.getContainerBox();delete e.pointer?.chartPosition,!e.isPrinting&&!e.isResizing&&i&&r.width&&((r.width!==i.width||r.height!==i.height)&&(X.clearTimeout(e.reflowTimeout),e.reflowTimeout=Va((function(){e.container&&e.setSize(void 0,void 0,!1)}),t?100:0)),e.containerBox=r)}setReflow(){let t=this,e=e=>{t.options?.chart.reflow&&t.hasLoaded&&t.reflow(e)};if("function"==typeof ResizeObserver)new ResizeObserver(e).observe(t.renderTo);else{let t=ya(ga,"resize",e);ya(this,"destroy",t)}}setSize(t,e,i){let r=this,s=r.renderer;r.isResizing+=1,aa(i,r);let n=s.globalAnimation;r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,void 0!==t&&(r.options.chart.width=t),void 0!==e&&(r.options.chart.height=e),r.getChartSize();let{chartWidth:o,chartHeight:a,scrollablePixelsX:l=0,scrollablePixelsY:h=0}=r;(r.isDirtyBox||o!==r.oldChartWidth||a!==r.oldChartHeight)&&(r.styledMode||(n?na:xa)(r.container,{width:`${o+l}px`,height:`${a+h}px`},n),r.setChartSize(!0),s.setSize(o,a,n),r.axes.forEach((function(t){t.isDirty=!0,t.setScale()})),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.layOutTitles(),r.getMargins(),r.redraw(n),r.oldChartHeight=void 0,Ia(r,"resize"),setTimeout((()=>{r&&Ia(r,"endResize")}),oa(n).duration)),r.isResizing-=1}setChartSize(t){let e,i,r,s,{chartHeight:n,chartWidth:o,inverted:a,spacing:l,renderer:h}=this,c=this.clipOffset,d=Math[a?"floor":"round"];this.plotLeft=e=Math.round(this.plotLeft),this.plotTop=i=Math.round(this.plotTop),this.plotWidth=r=Math.max(0,Math.round(o-e-this.marginRight)),this.plotHeight=s=Math.max(0,Math.round(n-i-this.marginBottom)),this.plotSizeX=a?s:r,this.plotSizeY=a?r:s,this.spacingBox=h.spacingBox={x:l[3],y:l[0],width:o-l[3]-l[1],height:n-l[0]-l[2]},this.plotBox=h.plotBox={x:e,y:i,width:r,height:s},c&&(this.clipBox={x:d(c[3]),y:d(c[0]),width:d(this.plotSizeX-c[1]-c[3]),height:d(this.plotSizeY-c[0]-c[2])}),t||(this.axes.forEach((function(t){t.setAxisSize(),t.setAxisTranslation()})),h.alignElements()),Ia(this,"afterSetChartSize",{skipAxes:t})}resetMargins(){Ia(this,"resetMargins");let t=this,e=t.options.chart,i=e.plotBorderWidth||0,r=i/2;["margin","spacing"].forEach((function(i){let r=e[i],s=Na(r)?r:[r,r,r,r];["Top","Right","Bottom","Left"].forEach((function(r,n){t[i][n]=Fa(e[i+r],s[n])}))})),pa.forEach((function(e,i){t[e]=Fa(t.margin[i],t.spacing[i])})),t.axisOffset=[0,0,0,0],t.clipOffset=[r,r,r,r],t.plotBorderWidth=i}drawChartBox(){let t,e,i,r=this.options.chart,s=this.renderer,n=this.chartWidth,o=this.chartHeight,a=this.styledMode,l=this.plotBGImage,h=r.backgroundColor,c=r.plotBackgroundColor,d=r.plotBackgroundImage,u=this.plotLeft,p=this.plotTop,f=this.plotWidth,g=this.plotHeight,m=this.plotBox,y=this.clipRect,v=this.clipBox,b=this.chartBackground,x=this.plotBackground,w=this.plotBorder,E="animate";b||(this.chartBackground=b=s.rect().addClass("highcharts-background").add(),E="attr"),a?t=e=b.strokeWidth():(e=(t=r.borderWidth||0)+(r.shadow?8:0),i={fill:h||"none"},(t||b["stroke-width"])&&(i.stroke=r.borderColor,i["stroke-width"]=t),b.attr(i).shadow(r.shadow)),b[E]({x:e/2,y:e/2,width:n-e-t%2,height:o-e-t%2,r:r.borderRadius}),E="animate",x||(E="attr",this.plotBackground=x=s.rect().addClass("highcharts-plot-background").add()),x[E](m),!a&&(x.attr({fill:c||"none"}).shadow(r.plotShadow),d&&(l?(d!==l.attr("href")&&l.attr("href",d),l.animate(m)):this.plotBGImage=s.image(d,u,p,f,g).add())),y?y.animate({width:v.width,height:v.height}):this.clipRect=s.clipRect(v),E="animate",w||(E="attr",this.plotBorder=w=s.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),a||w.attr({stroke:r.plotBorderColor,"stroke-width":r.plotBorderWidth||0,fill:"none"}),w[E](w.crisp({x:u,y:p,width:f,height:g},-w.strokeWidth())),this.isDirtyBox=!1,Ia(this,"afterDrawChartBox")}propFromSeries(){let t,e,i,r=this,s=r.options.chart,n=r.options.series;["inverted","angular","polar"].forEach((function(o){for(e=ma[s.type],i=s[o]||e&&e.prototype[o],t=n&&n.length;!i&&t--;)(e=ma[n[t].type])&&e.prototype[o]&&(i=!0);r[o]=i}))}linkSeries(t){let e=this,i=e.series;i.forEach((function(t){t.linkedSeries.length=0})),i.forEach((function(t){let{linkedTo:i}=t.options;if(_a(i)){let r;(r=":previous"===i?e.series[t.index-1]:e.get(i))&&r.linkedParent!==t&&(r.linkedSeries.push(t),t.linkedParent=r,r.enabledDataSorting&&t.setDataSortingOptions(),t.visible=Fa(t.options.visible,r.options.visible,t.visible))}})),Ia(this,"afterLinkSeries",{isUpdating:t})}renderSeries(){this.series.forEach((function(t){t.translate(),t.render()}))}render(){let t,e=this.axes,i=this.colorAxis,r=this.renderer,s=this.options.chart.axisLayoutRuns||2,n=t=>{t.forEach((t=>{t.visible&&t.render()}))},o=0,a=!0,l=0;for(let t of(this.setTitle(),Ia(this,"beforeMargins"),this.getStacks?.(),this.getMargins(!0),this.setChartSize(),e)){let{options:e}=t,{labels:i}=e;if(this.hasCartesianSeries&&t.horiz&&t.visible&&i.enabled&&t.series.length&&"colorAxis"!==t.coll&&!this.polar){o=e.tickLength,t.createGroups();let r=new Mr(t,0,"",!0),s=r.createLabel("x",i);if(r.destroy(),s&&Fa(i.reserveSpace,!Oa(e.crossing))&&(o=s.getBBox().height+i.distance+Math.max(e.offset||0,0)),o){s?.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-o,0);(a||t||s>1)&&l<s;){let i=this.plotWidth,r=this.plotHeight;for(let i of e)0===l?i.setScale():(i.horiz&&a||!i.horiz&&t)&&i.setTickInterval(!0);0===l?this.getAxisMargins():this.getMargins(),a=i/this.plotWidth>(l?1:1.1),t=r/this.plotHeight>(l?1:1.05),l++}this.drawChartBox(),this.hasCartesianSeries?n(e):i&&i.length&&n(i),this.seriesGroup||(this.seriesGroup=r.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(t){let e=this,i=Da(!0,this.options.credits,t);i.enabled&&!this.credits&&(this.credits=this.renderer.text(i.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){i.href&&(ga.location.href=i.href)})).attr({align:i.position.align,zIndex:8}),e.styledMode||this.credits.css(i.style),this.credits.add().align(i.position),this.credits.update=function(t){e.credits=e.credits.destroy(),e.addCredits(t)})}destroy(){let t,e=this,i=e.axes,r=e.series,s=e.container,n=s&&s.parentNode;for(Ia(e,"destroy"),e.renderer.forExport?Sa(da,e):da[e.index]=void 0,w.chartCount--,e.renderTo.removeAttribute("data-highcharts-chart"),Ua(e),t=i.length;t--;)i[t]=i[t].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),t=r.length;t--;)r[t]=r[t].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach((function(t){let i=e[t];i&&i.destroy&&(e[t]=i.destroy())})),s&&(s.innerHTML=Kt.emptyHTML,Ua(s),n&&Ta(s)),Ra(e,(function(t,i){delete e[i]}))}firstRender(){let t=this,e=t.options;t.getContainer(),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.createAxes();let i=La(e.series)?e.series:[];e.series=[],i.forEach((function(e){t.initSeries(e)})),t.linkSeries(),t.setSortedData(),Ia(t,"beforeRender"),t.render(),t.pointer?.getChartPosition(),t.renderer.imgCount||t.hasLoaded||t.onload(),t.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach((function(t){t&&void 0!==this.index&&t.apply(this,[this])}),this),Ia(this,"load"),Ia(this,"render"),wa(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:t,title:e}=this;!t||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(e&&e.element.textContent||"").replace(/</g,"&lt;")}),t.accessibility&&!1===t.accessibility.enabled||Aa('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(t,e,i){let r,s=this;return t&&(e=Fa(e,!0),Ia(s,"addSeries",{options:t},(function(){r=s.initSeries(t),s.isDirtyLegend=!0,s.linkSeries(),r.enabledDataSorting&&r.setData(t.data,!1),Ia(s,"afterAddSeries",{series:r}),e&&s.redraw(i)}))),r}addAxis(t,e,i,r){return this.createAxis(e?"xAxis":"yAxis",{axis:t,redraw:i,animation:r})}addColorAxis(t,e,i){return this.createAxis("colorAxis",{axis:t,redraw:e,animation:i})}createAxis(t,e){let i=new as(this,e.axis,t);return Fa(e.redraw,!0)&&this.redraw(e.animation),i}showLoading(t){let e=this,i=e.options,r=i.loading,s=function(){n&&xa(n,{left:e.plotLeft+"px",top:e.plotTop+"px",width:e.plotWidth+"px",height:e.plotHeight+"px"})},n=e.loadingDiv,o=e.loadingSpan;n||(e.loadingDiv=n=ba("div",{className:"highcharts-loading highcharts-loading-hidden"},null,e.container)),o||(e.loadingSpan=o=ba("span",{className:"highcharts-loading-inner"},null,n),ya(e,"redraw",s)),n.className="highcharts-loading",Kt.setElementHTML(o,Fa(t,i.lang.loading,"")),e.styledMode||(xa(n,ka(r.style,{zIndex:10})),xa(o,r.labelStyle),e.loadingShown||(xa(n,{opacity:0,display:""}),na(n,{opacity:r.style.opacity||.5},{duration:r.showDuration||0}))),e.loadingShown=!0,s()}hideLoading(){let t=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",this.styledMode||na(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){xa(e,{display:"none"})}})),this.loadingShown=!1}update(t,e,i,r){let s,n,o,a=this,l={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},h=t.isResponsiveOptions,c=[];Ia(a,"update",{options:t}),h||a.setResponsive(!1,!0),t=Ea(t,a.options),a.userOptions=Da(a.userOptions,t);let d=t.chart;d&&(Da(!0,a.options.chart,d),this.setZoomOptions(),"className"in d&&a.setClassName(d.className),("inverted"in d||"polar"in d||"type"in d)&&(a.propFromSeries(),s=!0),"alignTicks"in d&&(s=!0),"events"in d&&ca(this,d),Ra(d,(function(t,e){-1!==a.propsRequireUpdateSeries.indexOf("chart."+e)&&(n=!0),-1!==a.propsRequireDirtyBox.indexOf(e)&&(a.isDirtyBox=!0),-1===a.propsRequireReflow.indexOf(e)||(a.isDirtyBox=!0,h||(o=!0))})),!a.styledMode&&d.style&&a.renderer.setStyle(a.options.chart.style||{})),!a.styledMode&&t.colors&&(this.options.colors=t.colors),Ra(t,(function(e,i){a[i]&&"function"==typeof a[i].update?a[i].update(e,!1):"function"==typeof a[l[i]]?a[l[i]](e):"colors"!==i&&-1===a.collectionsWithUpdate.indexOf(i)&&Da(!0,a.options[i],t[i]),"chart"!==i&&-1!==a.propsRequireUpdateSeries.indexOf(i)&&(n=!0)})),this.collectionsWithUpdate.forEach((function(e){t[e]&&(Ha(t[e]).forEach((function(t,r){let s,n=wa(t.id);n&&(s=a.get(t.id)),!s&&a[e]&&(s=a[e][Fa(t.index,r)])&&(n&&wa(s.options.id)||s.options.isInternal)&&(s=void 0),s&&s.coll===e&&(s.update(t,!1),i&&(s.touched=!0)),!s&&i&&a.collectionsWithInit[e]&&(a.collectionsWithInit[e][0].apply(a,[t].concat(a.collectionsWithInit[e][1]||[]).concat([!1])).touched=!0)})),i&&a[e].forEach((function(t){t.touched||t.options.isInternal?delete t.touched:c.push(t)})))})),c.forEach((function(t){t.chart&&t.remove&&t.remove(!1)})),s&&a.axes.forEach((function(t){t.update({},!1)})),n&&a.getSeriesOrderByLinks().forEach((function(t){t.chart&&t.update({},!1)}),this);let u=d&&d.width,p=d&&(_a(d.height)?za(d.height,u||a.chartWidth):d.height);o||Oa(u)&&u!==a.chartWidth||Oa(p)&&p!==a.chartHeight?a.setSize(u,p,r):Fa(e,!0)&&a.redraw(r),Ia(a,"afterUpdate",{options:t,redraw:e,animation:r})}setSubtitle(t,e){this.applyDescription("subtitle",t),this.layOutTitles(e)}setCaption(t,e){this.applyDescription("caption",t),this.layOutTitles(e)}showResetZoom(){let t=this,e=la.lang,i=t.zooming.resetButton,r=i.theme,s="chart"===i.relativeTo||"spacingBox"===i.relativeTo?null:"plotBox";function n(){t.zoomOut()}Ia(this,"beforeShowResetZoom",null,(function(){t.resetZoomButton=t.renderer.button(e.resetZoom,null,null,n,r).attr({align:i.position.align,title:e.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,s)})),Ia(this,"afterShowResetZoom")}zoomOut(){Ia(this,"selection",{resetSelection:!0},(()=>this.transform({reset:!0,trigger:"zoom"})))}pan(t,e){let i=this,r="object"==typeof e?e:{enabled:e,type:"x"},s=r.type,n=s&&i[{x:"xAxis",xy:"axes",y:"yAxis"}[s]].filter((t=>t.options.panningEnabled&&!t.options.isInternal)),o=i.options.chart;o?.panning&&(o.panning=r),Ia(this,"pan",{originalEvent:t},(()=>{i.transform({axes:n,event:t,to:{x:t.chartX-(i.mouseDownX||0),y:t.chartY-(i.mouseDownY||0)},trigger:"pan"}),xa(i.container,{cursor:"move"})}))}transform(t){let e,i,{axes:r=this.axes,event:s,from:n={},reset:o,selection:a,to:l={},trigger:h}=t,{inverted:c,time:d}=this,u=!1;for(let t of(this.hoverPoints?.forEach((t=>t.setState())),r)){let{horiz:r,len:p,minPointOffset:f=0,options:g,reversed:m}=t,y=r?"width":"height",v=r?"x":"y",b=Fa(l[y],t.len),x=Fa(n[y],t.len),w=10>Math.abs(b)?1:b/x,E=(n[v]||0)+x/2-t.pos,T=E-((l[v]??t.pos)+b/2-t.pos)/w,S=m&&!c||!m&&c?-1:1;if(!o&&(E<0||E>t.len))continue;let A=t.toValue(T,!0)+(a||t.isOrdinal?0:f*S),k=t.toValue(T+p/w,!0)-(a||t.isOrdinal?0:f*S||0),C=t.allExtremes;if(A>k&&([A,k]=[k,A]),1===w&&!o&&"yAxis"===t.coll&&!C){for(let e of t.series){let t=e.getExtremes(e.getProcessedData(!0).modified.getColumn("y")||[],!0);C??(C={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Oa(t.dataMin)&&Oa(t.dataMax)&&(C.dataMin=Math.min(t.dataMin,C.dataMin),C.dataMax=Math.max(t.dataMax,C.dataMax))}t.allExtremes=C}let{dataMin:I,dataMax:P,min:M,max:L}=ka(t.getExtremes(),C||{}),O=d.parse(g.min),N=d.parse(g.max),_=I??O,D=P??N,R=k-A,F=t.categories?0:Math.min(R,D-_),B=_-F*(wa(O)?0:g.minPadding),z=D+F*(wa(N)?0:g.maxPadding),U=t.allowZoomOutside||1===w||"zoom"!==h&&w>1,H=Math.min(O??B,B,U?M:B),V=Math.max(N??z,z,U?L:z);(!t.isOrdinal||t.options.overscroll||1!==w||o)&&(A<H&&(A=H,w>=1&&(k=A+R)),k>V&&(k=V,w>=1&&(A=k-R)),(o||t.series.length&&(A!==M||k!==L)&&A>=H&&k<=V)&&(a?a[t.coll].push({axis:t,min:A,max:k}):(t.isPanning="zoom"!==h,t.isPanning&&(i=!0),t.setExtremes(o?void 0:A,o?void 0:k,!1,!1,{move:T,trigger:h,scale:w}),!o&&(A>H||k<V)&&"mousewheel"!==h&&(e=!0)),u=!0),s&&(this[r?"mouseDownX":"mouseDownY"]=s[r?"chartX":"chartY"]))}return u&&(a?Ia(this,"selection",a,(()=>{delete t.selection,t.trigger="zoom",this.transform(t)})):(!e||i||this.resetZoomButton?!e&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw("zoom"===h&&(this.options.chart.animation??this.pointCount<100)))),u}}ka(Ga.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Ga.prototype.addAxis,[!0]],yAxis:[Ga.prototype.addAxis,[!1]],series:[Ga.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]});let{stop:Wa}=Dt,{composed:Xa}=w,{addEvent:qa,createElement:Ya,css:Ka,defined:$a,erase:Qa,merge:Za,pushUnique:Ja}=X;function tl(){let t=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!t&&(this.scrollablePlotArea=t=new il(this)),t?.applyFixed()}function el(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class il{static compose(t,e,i){Ja(Xa,this.compose)&&(qa(t,"afterInit",el),qa(e,"afterSetChartSize",(t=>this.afterSetSize(t.target,t))),qa(e,"render",tl),qa(i,"show",el))}static afterSetSize(t,e){let i,r,s,{minWidth:n,minHeight:o}=t.options.chart.scrollablePlotArea||{},{clipBox:a,plotBox:l,inverted:h,renderer:c}=t;if(!c.forExport&&(n?(t.scrollablePixelsX=i=Math.max(0,n-t.chartWidth),i&&(t.scrollablePlotBox=Za(t.plotBox),l.width=t.plotWidth+=i,a[h?"height":"width"]+=i,s=!0)):o&&(t.scrollablePixelsY=r=Math.max(0,o-t.chartHeight),$a(r)&&(t.scrollablePlotBox=Za(t.plotBox),l.height=t.plotHeight+=r,a[h?"width":"height"]+=r,s=!1)),$a(s)&&!e.skipAxes))for(let e of t.axes)(e.horiz===s||t.hasParallelCoordinates&&"yAxis"===e.coll)&&(e.setAxisSize(),e.setAxisTranslation())}constructor(t){let e,i=t.options.chart,r=de.getRendererType(),s=i.scrollablePlotArea||{},n=this.moveFixedElements.bind(this),o={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};t.scrollablePixelsX&&(o.overflowX="auto"),t.scrollablePixelsY&&(o.overflowY="auto"),this.chart=t;let a=this.parentDiv=Ya("div",{className:"highcharts-scrolling-parent"},{position:"relative"},t.renderTo),l=this.scrollingContainer=Ya("div",{className:"highcharts-scrolling"},o,a),h=this.innerContainer=Ya("div",{className:"highcharts-inner-container"},void 0,l),c=this.fixedDiv=Ya("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(i.style?.zIndex||0)+2,top:0},void 0,!0),d=this.fixedRenderer=new r(c,t.chartWidth,t.chartHeight,i.style);this.mask=d.path().attr({fill:i.backgroundColor||"#fff","fill-opacity":s.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),l.parentNode.insertBefore(c,l),Ka(t.renderTo,{overflow:"visible"}),qa(t,"afterShowResetZoom",n),qa(t,"afterApplyDrilldown",n),qa(t,"afterLayOutTitles",n),qa(l,"scroll",(()=>{let{pointer:i,hoverPoint:r}=t;i&&(delete i.chartPosition,r&&(e=r),i.runPointActions(void 0,e,!0))})),h.appendChild(t.container)}applyFixed(){let{chart:t,fixedRenderer:e,isDirty:i,scrollingContainer:r}=this,{axisOffset:s,chartWidth:n,chartHeight:o,container:a,plotHeight:l,plotLeft:h,plotTop:c,plotWidth:d,scrollablePixelsX:u=0,scrollablePixelsY:p=0}=t,{scrollPositionX:f=0,scrollPositionY:g=0}=t.options.chart.scrollablePlotArea||{},m=n+u,y=o+p;e.setSize(n,o),(i??!0)&&(this.isDirty=!1,this.moveFixedElements()),Wa(t.container),Ka(a,{width:`${m}px`,height:`${y}px`}),t.renderer.boxWrapper.attr({width:m,height:y,viewBox:[0,0,m,y].join(" ")}),t.chartBackground?.attr({width:m,height:y}),Ka(r,{width:`${n}px`,height:`${o}px`}),$a(i)||(r.scrollLeft=u*f,r.scrollTop=p*g);let v=c-s[0]-1,b=h-s[3]-1,x=c+l+s[2]+1,w=h+d+s[1]+1,E=h+d-u,T=c+l-p,S=[["M",0,0]];u?S=[["M",0,v],["L",h-1,v],["L",h-1,x],["L",0,x],["Z"],["M",E,v],["L",n,v],["L",n,x],["L",E,x],["Z"]]:p&&(S=[["M",b,0],["L",b,c-1],["L",w,c-1],["L",w,0],["Z"],["M",b,T],["L",b,o],["L",w,o],["L",w,T],["Z"]]),"adjustHeight"!==t.redrawTrigger&&this.mask.attr({d:S})}moveFixedElements(){let t,{container:e,inverted:i,scrollablePixelsX:r,scrollablePixelsY:s}=this.chart,n=this.fixedRenderer,o=il.fixedSelectors;if(r&&!i?t=".highcharts-yaxis":r&&i||s&&!i?t=".highcharts-xaxis":s&&i&&(t=".highcharts-yaxis"),!t||this.chart.hasParallelCoordinates&&".highcharts-yaxis"===t)for(let t of[".highcharts-xaxis",".highcharts-yaxis"])for(let e of[`${t}:not(.highcharts-radial-axis)`,`${t}-labels:not(.highcharts-radial-axis-labels)`])Qa(o,e);else for(let e of[`${t}:not(.highcharts-radial-axis)`,`${t}-labels:not(.highcharts-radial-axis-labels)`])Ja(o,e);for(let t of o)[].forEach.call(e.querySelectorAll(t),(t=>{(t.namespaceURI===n.SVG_NS?n.box:n.box.parentNode).appendChild(t),t.style.pointerEvents="auto"}))}}il.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"];let{format:rl}=ce,{series:sl}=eo,{destroyObjectProperties:nl,fireEvent:ol,getAlignFactor:al,isNumber:ll,pick:hl}=X,cl=class{constructor(t,e,i,r,s){let n=t.chart.inverted,o=t.reversed;this.axis=t;let a=this.isNegative=!!i!=!!o;this.options=e=e||{},this.x=r,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=s,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:e.align||(n?a?"left":"right":"center"),verticalAlign:e.verticalAlign||(n?"middle":a?"bottom":"top"),y:e.y,x:e.x},this.textAlign=e.textAlign||(n?a?"right":"left":"center")}destroy(){nl(this,this.axis)}render(t){let e=this.axis.chart,i=this.options,r=i.format,s=r?rl(r,this,e):i.formatter.call(this);if(this.label)this.label.attr({text:s,visibility:"hidden"});else{this.label=e.renderer.label(s,null,void 0,i.shape,void 0,void 0,i.useHTML,!1,"stack-labels");let r={r:i.borderRadius||0,text:s,padding:hl(i.padding,5),visibility:"hidden"};e.styledMode||(r.fill=i.backgroundColor,r.stroke=i.borderColor,r["stroke-width"]=i.borderWidth,this.label.css(i.style||{})),this.label.attr(r),this.label.added||this.label.add(t)}this.label.labelrank=e.plotSizeY,ol(this,"afterRender")}setOffset(t,e,i,r,s,n){let{alignOptions:o,axis:a,label:l,options:h,textAlign:c}=this,d=a.chart,u=this.getStackBox({xOffset:t,width:e,boxBottom:i,boxTop:r,defaultX:s,xAxis:n}),{verticalAlign:p}=o;if(l&&u){let t,e=l.getBBox(void 0,0),i=l.padding,r="justify"===hl(h.overflow,"justify");o.x=h.x||0,o.y=h.y||0;let{x:s,y:n}=this.adjustStackPosition({labelBox:e,verticalAlign:p,textAlign:c});u.x-=s,u.y-=n,l.align(o,!1,u),(t=d.isInsidePlot(l.alignAttr.x+o.x+s,l.alignAttr.y+o.y+n))||(r=!1),r&&sl.prototype.justifyDataLabel.call(a,l,o,l.alignAttr,e,u),l.attr({x:l.alignAttr.x,y:l.alignAttr.y,rotation:h.rotation,rotationOriginX:e.width*al(h.textAlign||"center"),rotationOriginY:e.height/2}),hl(!r&&h.crop,!0)&&(t=ll(l.x)&&ll(l.y)&&d.isInsidePlot(l.x-i+(l.width||0),l.y)&&d.isInsidePlot(l.x+i,l.y)),l[t?"show":"hide"]()}ol(this,"afterSetOffset",{xOffset:t,width:e})}adjustStackPosition({labelBox:t,verticalAlign:e,textAlign:i}){return{x:t.width/2+t.width/2*(2*al(i)-1),y:t.height/2*2*(1-al(e))}}getStackBox(t){let e=this.axis,i=e.chart,{boxTop:r,defaultX:s,xOffset:n,width:o,boxBottom:a}=t,l=e.stacking.usePercentage?100:hl(r,this.total,0),h=e.toPixels(l),c=t.xAxis||i.xAxis[0],d=hl(s,c.translate(this.x))+n,u=Math.abs(h-e.toPixels(a||ll(e.min)&&e.logarithmic&&e.logarithmic.lin2log(e.min)||0)),p=i.inverted,f=this.isNegative;return p?{x:(f?h:h-u)-i.plotLeft,y:c.height-d-o+c.top-i.plotTop,width:u,height:o}:{x:d+c.transB-i.plotLeft,y:(f?h-u:h)-i.plotTop,width:o,height:u}}},{getDeferredAnimation:dl}=Dt,{series:{prototype:ul}}=eo,{addEvent:pl,correctFloat:fl,defined:gl,destroyObjectProperties:ml,fireEvent:yl,isNumber:vl,objectEach:bl,pick:xl}=X;function wl(){let t=this.inverted;this.axes.forEach((t=>{t.stacking&&t.stacking.stacks&&t.hasVisibleSeries&&(t.stacking.oldStacks=t.stacking.stacks)})),this.series.forEach((e=>{let i=e.xAxis&&e.xAxis.options||{};e.options.stacking&&e.reserveSpace()&&(e.stackKey=[e.type,xl(e.options.stack,""),t?i.top:i.left,t?i.height:i.width].join(","))}))}function El(){let t=this.stacking;if(t){let e=t.stacks;bl(e,((t,i)=>{ml(t),delete e[i]})),t.stackTotalGroup?.destroy()}}function Tl(){this.stacking||(this.stacking=new Pl(this))}function Sl(t,e,i,r){return!gl(t)||t.x!==e||r&&t.stackKey!==r?t={x:e,index:0,key:r,stackKey:r}:t.index++,t.key=[i,e,t.index].join(","),t}function Al(){let t,e=this,i=e.yAxis,r=e.stackKey||"",s=i.stacking.stacks,n=e.getColumn("x",!0),o=e.options.stacking,a=e[o+"Stacker"];a&&[r,"-"+r].forEach((i=>{let r,o,l,h=n.length;for(;h--;)r=n[h],t=e.getStackIndicator(t,r,e.index,i),o=s[i]?.[r],(l=o?.points[t.key||""])&&a.call(e,l,o,h)}))}function kl(t,e,i){let r=e.total?100/e.total:0;t[0]=fl(t[0]*r),t[1]=fl(t[1]*r),this.stackedYData[i]=t[1]}function Cl(t){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&this.chart.series.length>1?ul.setStackedPoints.call(this,t,"group"):t.stacking.resetStacks())}function Il(t,e){let i,r,s,n,o,a,l,h=e||this.options.stacking;if(!h||!this.reserveSpace()||({group:"xAxis"}[h]||"yAxis")!==t.coll)return;let c=this.getColumn("x",!0),d=this.getColumn(this.pointValKey||"y",!0),u=[],p=d.length,f=this.options,g=f.threshold||0,m=f.startFromThreshold?g:0,y=f.stack,v=e?`${this.type},${h}`:this.stackKey||"",b="-"+v,x=this.negStacks,w=t.stacking,E=w.stacks,T=w.oldStacks;for(w.stacksTouched+=1,l=0;l<p;l++){let e=c[l]||0,p=d[l],f=vl(p)&&p||0;a=(i=this.getStackIndicator(i,e,this.index)).key||"",E[o=(r=x&&f<(m?0:g))?b:v]||(E[o]={}),E[o][e]||(T[o]?.[e]?(E[o][e]=T[o][e],E[o][e].total=null):E[o][e]=new cl(t,t.options.stackLabels,!!r,e,y)),s=E[o][e],null!==p?(s.points[a]=s.points[this.index]=[xl(s.cumulative,m)],gl(s.cumulative)||(s.base=a),s.touched=w.stacksTouched,i.index>0&&!1===this.singleStacks&&(s.points[a][0]=s.points[this.index+","+e+",0"][0])):(delete s.points[a],delete s.points[this.index]);let S=s.total||0;"percent"===h?(n=r?v:b,S=x&&E[n]?.[e]?(n=E[n][e]).total=Math.max(n.total||0,S)+Math.abs(f):fl(S+Math.abs(f))):"group"===h?vl(p)&&S++:S=fl(S+f),s.cumulative="group"===h?(S||1)-1:fl(xl(s.cumulative,m)+f),s.total=S,null!==p&&(s.points[a].push(s.cumulative),u[l]=s.cumulative,s.hasValidPoints=!0)}"percent"===h&&(w.usePercentage=!0),"group"!==h&&(this.stackedYData=u),w.oldStacks={}}class Pl{constructor(t){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=t}buildStacks(){let t,e,i=this.axis,r=i.series,s="xAxis"===i.coll,n=i.options.reversedStacks,o=r.length;for(this.resetStacks(),this.usePercentage=!1,e=o;e--;)t=r[n?e:o-e-1],s&&t.setGroupedPoints(i),t.setStackedPoints(i);if(!s)for(e=0;e<o;e++)r[e].modifyStacks();yl(i,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,bl(this.stacks,(t=>{bl(t,(t=>{t.cumulative=t.total}))})))}resetStacks(){bl(this.stacks,(t=>{bl(t,((e,i)=>{vl(e.touched)&&e.touched<this.stacksTouched?(e.destroy(),delete t[i]):(e.total=null,e.cumulative=null)}))}))}renderStackTotals(){let t=this.axis,e=t.chart,i=e.renderer,r=this.stacks,s=dl(e,t.options.stackLabels?.animation||!1),n=this.stackTotalGroup=this.stackTotalGroup||i.g("stack-labels").attr({zIndex:6,opacity:0}).add();n.translate(e.plotLeft,e.plotTop),bl(r,(t=>{bl(t,(t=>{t.render(n)}))})),n.animate({opacity:1},s)}}(u||(u={})).compose=function(t,e,i){let r=e.prototype,s=i.prototype;r.getStacks||(pl(t,"init",Tl),pl(t,"destroy",El),r.getStacks=wl,s.getStackIndicator=Sl,s.modifyStacks=Al,s.percentStacker=kl,s.setGroupedPoints=Cl,s.setStackedPoints=Il)};let Ml=u,{defined:Ll,merge:Ol,isObject:Nl}=X;class _l extends Do{drawGraph(){let t=this.options,e=(this.gappedPath||this.getGraphPath).call(this),i=this.chart.styledMode;[this,...this.zones].forEach(((r,s)=>{let n,o=r.graph,a=o?"animate":"attr",l=r.dashStyle||t.dashStyle;o?(o.endX=this.preventGraphAnimation?null:e.xMap,o.animate({d:e})):e.length&&(r.graph=o=this.chart.renderer.path(e).addClass("highcharts-graph"+(s?` highcharts-zone-graph-${s-1} `:" ")+(s&&r.className||"")).attr({zIndex:1}).add(this.group)),o&&!i&&(n={stroke:!s&&t.lineColor||r.color||this.color||"#cccccc","stroke-width":t.lineWidth||0,fill:this.fillGraph&&this.color||"none"},l?n.dashstyle=l:"square"!==t.linecap&&(n["stroke-linecap"]=n["stroke-linejoin"]="round"),o[a](n).shadow(t.shadow&&Ol({filterUnits:"userSpaceOnUse"},Nl(t.shadow)?t.shadow:{}))),o&&(o.startX=e.xMap,o.isArea=e.isArea)}))}getGraphPath(t,e,i){let r,s=this,n=s.options,o=[],a=[],l=n.step,h=(t=t||s.points).reversed;return h&&t.reverse(),(l={right:1,center:2}[l]||l&&3)&&h&&(l=4-l),(t=this.getValidPoints(t,!1,!(n.connectNulls&&!e&&!i))).forEach((function(h,c){let d,u=h.plotX,p=h.plotY,f=t[c-1],g=h.isNull||"number"!=typeof p;(h.leftCliff||f&&f.rightCliff)&&!i&&(r=!0),g&&!Ll(e)&&c>0?r=!n.connectNulls:g&&!e?r=!0:(0===c||r?d=[["M",h.plotX,h.plotY]]:s.getPointSpline?d=[s.getPointSpline(t,h,c)]:l?(d=1===l?[["L",f.plotX,p]]:2===l?[["L",(f.plotX+u)/2,f.plotY],["L",(f.plotX+u)/2,p]]:[["L",u,f.plotY]]).push(["L",u,p]):d=[["L",u,p]],a.push(h.x),l&&(a.push(h.x),2===l&&a.push(h.x)),o.push.apply(o,d),r=!1)})),o.xMap=a,s.graphPath=o,o}}_l.defaultOptions=Ol(Do.defaultOptions,{legendSymbol:"lineMarker"}),eo.registerSeriesType("line",_l);let{seriesTypes:{line:Dl}}=eo,{extend:Rl,merge:Fl,objectEach:Bl,pick:zl}=X;class Ul extends Dl{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:t,options:e}=this;[this,...this.zones].forEach(((i,r)=>{let s={},n=i.fillColor||e.fillColor,o=i.area,a=o?"animate":"attr";o?(o.endX=this.preventGraphAnimation?null:t.xMap,o.animate({d:t})):(s.zIndex=0,(o=i.area=this.chart.renderer.path(t).addClass("highcharts-area"+(r?` highcharts-zone-area-${r-1} `:" ")+(r&&i.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(s.fill=n||i.color||this.color,s["fill-opacity"]=n?1:e.fillOpacity??.75,o.css({pointerEvents:this.stickyTracking?"none":"auto"})),o[a](s),o.startX=t.xMap,o.shiftUnit=e.step?2:1}))}getGraphPath(t){let e,i,r,s=Dl.prototype.getGraphPath,n=this.options,o=n.stacking,a=this.yAxis,l=[],h=[],c=this.index,d=a.stacking.stacks[this.stackKey],u=n.threshold,p=Math.round(a.getThreshold(n.threshold)),f=zl(n.connectNulls,"percent"===o),g=function(i,r,s){let n,f,g=t[i],m=o&&d[g.x].points[c],y=g[s+"Null"]||0,v=g[s+"Cliff"]||0,b=!0;v||y?(n=(y?m[0]:m[1])+v,f=m[0]+v,b=!!y):!o&&t[r]&&t[r].isNull&&(n=f=u),void 0!==n&&(h.push({plotX:e,plotY:null===n?p:a.getThreshold(n),isNull:b,isCliff:!0}),l.push({plotX:e,plotY:null===f?p:a.getThreshold(f),doCurve:!1}))};t=t||this.points,o&&(t=this.getStackPoints(t));for(let s=0,n=t.length;s<n;++s)o||(t[s].leftCliff=t[s].rightCliff=t[s].leftNull=t[s].rightNull=void 0),i=t[s].isNull,e=zl(t[s].rectPlotX,t[s].plotX),r=o?zl(t[s].yBottom,p):p,i&&!f||(f||g(s,s-1,"left"),i&&!o&&f||(h.push(t[s]),l.push({x:s,plotX:e,plotY:r})),f||g(s,s+1,"right"));let m=s.call(this,h,!0,!0);l.reversed=!0;let y=s.call(this,l,!0,!0),v=y[0];v&&"M"===v[0]&&(y[0]=["L",v[1],v[2]]);let b=m.concat(y);b.length&&b.push(["Z"]);let x=s.call(this,h,!1,f);return this.chart.series.length>1&&o&&h.some((t=>t.isCliff))&&(b.hasStackedCliffs=x.hasStackedCliffs=!0),b.xMap=m.xMap,this.areaPath=b,x}getStackPoints(t){let e=this,i=[],r=[],s=this.xAxis,n=this.yAxis,o=n.stacking.stacks[this.stackKey],a={},l=n.series,h=l.length,c=n.options.reversedStacks?1:-1,d=l.indexOf(e);if(t=t||this.points,this.options.stacking){for(let e=0;e<t.length;e++)t[e].leftNull=t[e].rightNull=void 0,a[t[e].x]=t[e];Bl(o,(function(t,e){null!==t.total&&r.push(e)})),r.sort((function(t,e){return t-e}));let u=l.map((t=>t.visible));r.forEach((function(t,p){let f,g,m=0;if(a[t]&&!a[t].isNull)i.push(a[t]),[-1,1].forEach((function(i){let s=1===i?"rightNull":"leftNull",n=o[r[p+i]],m=0;if(n){let i=d;for(;i>=0&&i<h;){let r=l[i].index;!(f=n.points[r])&&(r===e.index?a[t][s]=!0:u[i]&&(g=o[t].points[r])&&(m-=g[1]-g[0])),i+=c}}a[t][1===i?"rightCliff":"leftCliff"]=m}));else{let e=d;for(;e>=0&&e<h;){let i=l[e].index;if(f=o[t].points[i]){m=f[1];break}e+=c}m=zl(m,0),m=n.translate(m,0,1,0,1),i.push({isNull:!0,plotX:s.translate(t,0,0,0,1),x:t,plotY:m,yBottom:m})}}))}return i}}Ul.defaultOptions=Fl(Dl.defaultOptions,{threshold:0,legendSymbol:"areaMarker"}),Rl(Ul.prototype,{singleStacks:!1}),eo.registerSeriesType("area",Ul);let{line:Hl}=eo.seriesTypes,{merge:Vl,pick:jl}=X;class Gl extends Hl{getPointSpline(t,e,i){let r,s,n,o,a=e.plotX||0,l=e.plotY||0,h=t[i-1],c=t[i+1];function d(t){return t&&!t.isNull&&!1!==t.doCurve&&!e.isCliff}if(d(h)&&d(c)){let t=h.plotX||0,i=h.plotY||0,d=c.plotX||0,u=c.plotY||0,p=0;r=(1.5*a+t)/2.5,s=(1.5*l+i)/2.5,n=(1.5*a+d)/2.5,o=(1.5*l+u)/2.5,n!==r&&(p=(o-s)*(n-a)/(n-r)+l-o),s+=p,o+=p,s>i&&s>l?(s=Math.max(i,l),o=2*l-s):s<i&&s<l&&(s=Math.min(i,l),o=2*l-s),o>u&&o>l?(o=Math.max(u,l),s=2*l-o):o<u&&o<l&&(o=Math.min(u,l),s=2*l-o),e.rightContX=n,e.rightContY=o,e.controlPoints={low:[r,s],high:[n,o]}}let u=["C",jl(h.rightContX,h.plotX,0),jl(h.rightContY,h.plotY,0),jl(r,a,0),jl(s,l,0),a,l];return h.rightContX=h.rightContY=void 0,u}}Gl.defaultOptions=Vl(Hl.defaultOptions),eo.registerSeriesType("spline",Gl);let Wl=Gl,{area:Xl,area:{prototype:ql}}=eo.seriesTypes,{extend:Yl,merge:Kl}=X;class $l extends Wl{}$l.defaultOptions=Kl(Wl.defaultOptions,Xl.defaultOptions),Yl($l.prototype,{getGraphPath:ql.getGraphPath,getStackPoints:ql.getStackPoints,drawGraph:ql.drawGraph}),eo.registerSeriesType("areaspline",$l);let{animObject:Ql}=Dt,{parse:Zl}=bt,{noop:Jl}=w,{clamp:th,crisp:eh,defined:ih,extend:rh,fireEvent:sh,isArray:nh,isNumber:oh,merge:ah,pick:lh,objectEach:hh}=X;class ch extends Do{animate(t){let e,i,r=this,s=this.yAxis,n=s.pos,o=s.reversed,a=r.options,{clipOffset:l,inverted:h}=this.chart,c={},d=h?"translateX":"translateY";t&&l?(c.scaleY=.001,i=th(s.toPixels(a.threshold||0),n,n+s.len),h?(i+=o?-Math.floor(l[0]):Math.ceil(l[2]),c.translateX=i-s.len):(i+=o?Math.ceil(l[0]):-Math.floor(l[2]),c.translateY=i),r.clipBox&&r.setClip(),r.group.attr(c)):(e=Number(r.group.attr(d)),r.group.animate({scaleY:1},rh(Ql(r.options.animation),{step:function(t,i){r.group&&(c[d]=e+i.pos*(n-e),r.group.attr(c))}})))}init(t,e){super.init.apply(this,arguments);let i=this;(t=i.chart).hasRendered&&t.series.forEach((function(t){t.type===i.type&&(t.isDirty=!0)}))}getColumnMetrics(){let t,e=this,i=e.options,r=e.xAxis,s=e.yAxis,n=r.options.reversedStacks,o=r.reversed&&!n||!r.reversed&&n,a={},l=0;!1===i.grouping?l=1:e.chart.series.forEach((function(i){let r,n=i.yAxis,o=i.options;i.type===e.type&&i.reserveSpace()&&s.len===n.len&&s.pos===n.pos&&(o.stacking&&"group"!==o.stacking?(void 0===a[t=i.stackKey]&&(a[t]=l++),r=a[t]):!1!==o.grouping&&(r=l++),i.columnIndex=r)}));let h=Math.min(Math.abs(r.transA)*(!r.brokenAxis?.hasBreaks&&r.ordinal?.slope||i.pointRange||r.closestPointRange||r.tickInterval||1),r.len),c=h*i.groupPadding,d=(h-2*c)/(l||1),u=Math.min(i.maxPointWidth||r.len,lh(i.pointWidth,d*(1-2*i.pointPadding))),p=(e.columnIndex||0)+(o?1:0);return e.columnMetrics={width:u,offset:(d-u)/2+(c+p*d-h/2)*(o?-1:1),paddedWidth:d,columnCount:l},e.columnMetrics}crispCol(t,e,i,r){let s=this.borderWidth,n=this.chart.inverted;return r=eh(e+r,s,n)-(e=eh(e,s,n)),this.options.crisp&&(i=eh(t+i,s)-(t=eh(t,s))),{x:t,y:e,width:i,height:r}}adjustForMissingColumns(t,e,i,r){if(!i.isNull&&r.columnCount>1){let s=this.xAxis.series.filter((t=>t.visible)).map((t=>t.index)),n=0,o=0;hh(this.xAxis.stacking?.stacks,(t=>{let e="number"==typeof i.x?t[i.x.toString()]?.points:void 0,r=e?.[this.index],a={};if(e&&nh(r)){let t=this.index,i=Object.keys(e).filter((t=>!t.match(",")&&e[t]&&e[t].length>1)).map(parseFloat).filter((t=>-1!==s.indexOf(t))).filter((e=>{let i=this.chart.series[e].options,r=i.stacking&&i.stack;if(ih(r)){if(oh(a[r]))return t===e&&(t=a[r]),!1;a[r]=e}return!0})).sort(((t,e)=>e-t));n=i.indexOf(t),o=i.length}})),n=this.xAxis.reversed?o-1-n:n;let a=(o-1)*r.paddedWidth+e;t=(i.plotX||0)+a/2-e-n*r.paddedWidth}return t}translate(){let t=this,e=t.chart,i=t.options,r=t.dense=t.closestPointRange*t.xAxis.transA<2,s=t.borderWidth=lh(i.borderWidth,r?0:1),n=t.xAxis,o=t.yAxis,a=i.threshold,l=lh(i.minPointLength,5),h=t.getColumnMetrics(),c=h.width,d=t.pointXOffset=h.offset,u=t.dataMin,p=t.dataMax,f=t.translatedThreshold=o.getThreshold(a),g=t.barW=Math.max(c,1+2*s);i.pointPadding&&i.crisp&&(g=Math.ceil(g)),Do.prototype.translate.apply(t),t.points.forEach((function(r){let s,m=lh(r.yBottom,f),y=999+Math.abs(m),v=r.plotX||0,b=th(r.plotY,-y,o.len+y),x=Math.min(b,m),w=Math.max(b,m)-x,E=c,T=v+d,S=g;l&&Math.abs(w)<l&&(w=l,s=!o.reversed&&!r.negative||o.reversed&&r.negative,oh(a)&&oh(p)&&r.y===a&&p<=a&&(o.min||0)<a&&(u!==p||(o.max||0)<=a)&&(s=!s,r.negative=!r.negative),x=Math.abs(x-f)>l?m-l:f-(s?l:0)),ih(r.options.pointWidth)&&(T-=Math.round(((E=S=Math.ceil(r.options.pointWidth))-c)/2)),i.centerInCategory&&(T=t.adjustForMissingColumns(T,E,r,h)),r.barX=T,r.pointWidth=E,r.tooltipPos=e.inverted?[th(o.len+o.pos-e.plotLeft-b,o.pos-e.plotLeft,o.len+o.pos-e.plotLeft),n.len+n.pos-e.plotTop-T-S/2,w]:[n.left-e.plotLeft+T+S/2,th(b+o.pos-e.plotTop,o.pos-e.plotTop,o.len+o.pos-e.plotTop),w],r.shapeType=t.pointClass.prototype.shapeType||"roundedRect",r.shapeArgs=t.crispCol(T,r.isNull?f:x,S,r.isNull?0:w)})),sh(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(t,e){let i,r,s,n=this.options,o=this.pointAttrToOptions||{},a=o.stroke||"borderColor",l=o["stroke-width"]||"borderWidth",h=t&&t.color||this.color,c=t&&t[a]||n[a]||h,d=t&&t.options.dashStyle||n.dashStyle,u=t&&t[l]||n[l]||this[l]||0,p=lh(t&&t.opacity,n.opacity,1);t&&this.zones.length&&(r=t.getZone(),h=t.options.color||r&&(r.color||t.nonZonedColor)||this.color,r&&(c=r.borderColor||c,d=r.dashStyle||d,u=r.borderWidth||u)),e&&t&&(s=(i=ah(n.states[e],t.options.states&&t.options.states[e]||{})).brightness,h=i.color||void 0!==s&&Zl(h).brighten(i.brightness).get()||h,c=i[a]||c,u=i[l]||u,d=i.dashStyle||d,p=lh(i.opacity,p));let f={fill:h,stroke:c,"stroke-width":u,opacity:p};return d&&(f.dashstyle=d),f}drawPoints(t=this.points){let e,i=this,r=this.chart,s=i.options,n=r.renderer,o=s.animationLimit||250;t.forEach((function(t){let a=t.plotY,l=t.graphic,h=!!l,c=l&&r.pointCount<o?"animate":"attr";oh(a)&&null!==t.y?(e=t.shapeArgs,l&&t.hasNewShapeType()&&(l=l.destroy()),i.enabledDataSorting&&(t.startXPos=i.xAxis.reversed?-(e&&e.width||0):i.xAxis.width),!l&&(t.graphic=l=n[t.shapeType](e).add(t.group||i.group),l&&i.enabledDataSorting&&r.hasRendered&&r.pointCount<o&&(l.attr({x:t.startXPos}),h=!0,c="animate")),l&&h&&l[c](ah(e)),r.styledMode||l[c](i.pointAttribs(t,t.selected&&"select")).shadow(!1!==t.allowShadow&&s.shadow),l&&(l.addClass(t.getClassName(),!0),l.attr({visibility:t.visible?"inherit":"hidden"}))):l&&(t.graphic=l.destroy())}))}drawTracker(t=this.points){let e,i=this,r=i.chart,s=r.pointer,n=function(t){s?.normalize(t);let e=s?.getPointFromEvent(t),n=!r.scrollablePlotArea||r.isInsidePlot(t.chartX-r.plotLeft,t.chartY-r.plotTop,{visiblePlotOnly:!0});s&&e&&i.options.enableMouseTracking&&n&&(s.isDirectTouch=!0,e.onMouseOver(t))};t.forEach((function(t){e=nh(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[],t.graphic&&(t.graphic.element.point=t),e.forEach((function(e){(e.div||e.element).point=t}))})),i._hasTracking||(i.trackerGroups.forEach((function(t){i[t]&&(i[t].addClass("highcharts-tracker").on("mouseover",n).on("mouseout",(function(t){s?.onTrackerMouseOut(t)})).on("touchstart",n),!r.styledMode&&i.options.cursor&&i[t].css({cursor:i.options.cursor}))})),i._hasTracking=!0),sh(this,"afterDrawTracker")}remove(){let t=this,e=t.chart;e.hasRendered&&e.series.forEach((function(e){e.type===t.type&&(e.isDirty=!0)})),Do.prototype.remove.apply(t,arguments)}}ch.defaultOptions=ah(Do.defaultOptions,{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),rh(ch.prototype,{directTouch:!0,getSymbol:Jl,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),eo.registerSeriesType("column",ch);let dh=ch,{getDeferredAnimation:uh}=Dt,{format:ph}=ce,{defined:fh,extend:gh,fireEvent:mh,getAlignFactor:yh,isArray:vh,isString:bh,merge:xh,objectEach:wh,pick:Eh,pInt:Th,splat:Sh}=X;!function(t){function e(){return l(this).some((t=>t?.enabled))}function i(t,e,i,r,s){let{chart:n,enabledDataSorting:o}=this,a=this.isCartesian&&n.inverted,l=t.plotX,h=t.plotY,c=i.rotation||0,d=fh(l)&&fh(h)&&n.isInsidePlot(l,Math.round(h),{inverted:a,paneCoordinates:!0,series:this}),u=0===c&&"justify"===Eh(i.overflow,o?"none":"justify"),p=this.visible&&!1!==t.visible&&fh(l)&&(t.series.forceDL||o&&!u||d||Eh(i.inside,!!this.options.stacking)&&r&&n.isInsidePlot(l,a?r.x+1:r.y+r.height-1,{inverted:a,paneCoordinates:!0,series:this})),f=t.pos();if(p&&f){var g;let l=e.getBBox(),h=e.getBBox(void 0,0);if(r=gh({x:f[0],y:Math.round(f[1]),width:0,height:0},r||{}),"plotEdges"===i.alignTo&&this.isCartesian&&(r[a?"x":"y"]=0,r[a?"width":"height"]=this.yAxis?.len||0),gh(i,{width:l.width,height:l.height}),g=r,o&&this.xAxis&&!u&&this.setDataLabelStartPos(t,e,s,d,g),e.align(xh(i,{width:h.width,height:h.height}),!1,r,!1),e.alignAttr.x+=yh(i.align)*(h.width-l.width),e.alignAttr.y+=yh(i.verticalAlign)*(h.height-l.height),e[e.placed?"animate":"attr"]({x:e.alignAttr.x+(l.width-h.width)/2,y:e.alignAttr.y+(l.height-h.height)/2,rotationOriginX:(e.width||0)/2,rotationOriginY:(e.height||0)/2}),u&&r.height>=0)this.justifyDataLabel(e,i,e.alignAttr,l,r,s);else if(Eh(i.crop,!0)){let{x:t,y:i}=e.alignAttr;p=n.isInsidePlot(t,i,{paneCoordinates:!0,series:this})&&n.isInsidePlot(t+l.width-1,i+l.height-1,{paneCoordinates:!0,series:this})}i.shape&&!c&&e[s?"attr":"animate"]({anchorX:f[0],anchorY:f[1]})}s&&o&&(e.placed=!1),p||o&&!u?(e.show(),e.placed=!0):(e.hide(),e.placed=!1)}function r(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function s(t){let e=this.hasRendered||0,i=this.initDataLabelsGroup().attr({opacity:+e});return!e&&i&&(this.visible&&i.show(),this.options.animation?i.animate({opacity:1},t):i.attr({opacity:1})),i}function n(t){let e;t=t||this.points;let i=this,r=i.chart,s=i.options,n=r.renderer,{backgroundColor:o,plotBackgroundColor:h}=r.options.chart,c=n.getContrast(bh(h)&&h||bh(o)&&o||"#000000"),d=l(i),{animation:u,defer:p}=d[0],f=p?uh(r,u,i):{defer:0,duration:0};mh(this,"drawDataLabels"),i.hasDataLabels?.()&&(e=this.initDataLabels(f),t.forEach((t=>{let o=t.dataLabels||[];Sh(a(d,t.dlOptions||t.options?.dataLabels)).forEach(((a,l)=>{let h,d,u,p,f=a.enabled&&(t.visible||t.dataLabelOnHidden)&&(!t.isNull||t.dataLabelOnNull)&&function(t,e){let i=e.filter;if(i){let e=i.operator,r=t[i.property],s=i.value;return">"===e&&r>s||"<"===e&&r<s||">="===e&&r>=s||"<="===e&&r<=s||"=="===e&&r==s||"==="===e&&r===s||"!="===e&&r!=s||"!=="===e&&r!==s}return!0}(t,a),{backgroundColor:g,borderColor:m,distance:y,style:v={}}=a,b={},x=o[l],w=!x;f&&(d=fh(h=Eh(a[t.formatPrefix+"Format"],a.format))?ph(h,t,r):(a[t.formatPrefix+"Formatter"]||a.formatter).call(t,a),u=a.rotation,!r.styledMode&&(v.color=Eh(a.color,v.color,bh(i.color)?i.color:void 0,"#000000"),"contrast"===v.color?("none"!==g&&(p=g),t.contrastColor=n.getContrast("auto"!==p&&p||t.color||i.color),v.color=p||!fh(y)&&a.inside||0>Th(y||0)||s.stacking?t.contrastColor:c):delete t.contrastColor,s.cursor&&(v.cursor=s.cursor)),b={r:a.borderRadius||0,rotation:u,padding:a.padding,zIndex:1},r.styledMode||(b.fill="auto"===g?t.color:g,b.stroke="auto"===m?t.color:m,b["stroke-width"]=a.borderWidth),wh(b,((t,e)=>{void 0===t&&delete b[e]}))),!x||f&&fh(d)&&!!x.div==!!a.useHTML&&(x.rotation&&a.rotation||x.rotation===a.rotation)||(x=void 0,w=!0),f&&fh(d)&&(x?b.text=d:(x=n.label(d,0,0,a.shape,void 0,void 0,a.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+t.colorIndex+" "+(a.className||"")+(a.useHTML?" highcharts-tracker":"")),x&&(x.options=a,x.attr(b),r.styledMode?v.width&&x.css({width:v.width,textOverflow:v.textOverflow,whiteSpace:v.whiteSpace}):x.css(v).shadow(a.shadow),mh(x,"beforeAddingDataLabel",{labelOptions:a,point:t}),x.added||x.add(e),i.alignDataLabel(t,x,a,void 0,w),x.isActive=!0,o[l]&&o[l]!==x&&o[l].destroy(),o[l]=x))}));let l=o.length;for(;l--;)o[l]&&o[l].isActive?o[l].isActive=!1:(o[l]?.destroy(),o.splice(l,1));t.dataLabel=o[0],t.dataLabels=o}))),mh(this,"afterDrawDataLabels")}function o(t,e,i,r,s,n){let o,a,l=this.chart,h=e.align,c=e.verticalAlign,d=t.box?0:t.padding||0,u=l.inverted?this.yAxis:this.xAxis,p=u?u.left-l.plotLeft:0,f=l.inverted?this.xAxis:this.yAxis,g=f?f.top-l.plotTop:0,{x:m=0,y=0}=e;return(o=(i.x||0)+d+p)<0&&("right"===h&&m>=0?(e.align="left",e.inside=!0):m-=o,a=!0),(o=(i.x||0)+r.width-d+p)>l.plotWidth&&("left"===h&&m<=0?(e.align="right",e.inside=!0):m+=l.plotWidth-o,a=!0),(o=i.y+d+g)<0&&("bottom"===c&&y>=0?(e.verticalAlign="top",e.inside=!0):y-=o,a=!0),(o=(i.y||0)+r.height-d+g)>l.plotHeight&&("top"===c&&y<=0?(e.verticalAlign="bottom",e.inside=!0):y+=l.plotHeight-o,a=!0),a&&(e.x=m,e.y=y,t.placed=!n,t.align(e,void 0,s)),a}function a(t,e){let i,r=[];if(vh(t)&&!vh(e))r=t.map((function(t){return xh(t,e)}));else if(vh(e)&&!vh(t))r=e.map((function(e){return xh(t,e)}));else if(vh(t)||vh(e)){if(vh(t)&&vh(e))for(i=Math.max(t.length,e.length);i--;)r[i]=xh(t[i],e[i])}else r=xh(t,e);return r}function l(t){let e=t.chart.options.plotOptions;return Sh(a(a(e?.series?.dataLabels,e?.[t.type]?.dataLabels),t.options.dataLabels))}function h(t,e,i,r,s){let n=this.chart,o=n.inverted,a=this.xAxis,l=a.reversed,h=((o?e.height:e.width)||0)/2,c=t.pointWidth,d=c?c/2:0;e.startXPos=o?s.x:l?-h-d:a.width-h+d,e.startYPos=o?l?this.yAxis.height-h+d:-h-d:s.y,r?"hidden"===e.visibility&&(e.show(),e.attr({opacity:0}).animate({opacity:1})):e.attr({opacity:1}).animate({opacity:0},void 0,e.hide),n.hasRendered&&(i&&e.attr({x:e.startXPos,y:e.startYPos}),e.placed=!0)}t.compose=function(t){let a=t.prototype;a.initDataLabels||(a.initDataLabels=s,a.initDataLabelsGroup=r,a.alignDataLabel=i,a.drawDataLabels=n,a.justifyDataLabel=o,a.setDataLabelStartPos=h,a.hasDataLabels=e)}}(p||(p={}));let Ah=p,{composed:kh}=w,{series:Ch}=eo,{merge:Ih,pick:Ph,pushUnique:Mh}=X;!function(t){function e(t,e,i,r,s){let n=this.chart.inverted,o=t.series,a=(o.xAxis?o.xAxis.len:this.chart.plotSizeX)||0,l=(o.yAxis?o.yAxis.len:this.chart.plotSizeY)||0,h=t.dlBox||t.shapeArgs,c=Ph(t.below,t.plotY>Ph(this.translatedThreshold,l)),d=Ph(i.inside,!!this.options.stacking);if(h){if(r=Ih(h),"allow"!==i.overflow||!1!==i.crop){r.y<0&&(r.height+=r.y,r.y=0);let t=r.y+r.height-l;t>0&&t<r.height-1&&(r.height-=t)}n&&(r={x:l-r.y-r.height,y:a-r.x-r.width,width:r.height,height:r.width}),d||(n?(r.x+=c?0:r.width,r.width=0):(r.y+=c?r.height:0,r.height=0))}i.align=Ph(i.align,!n||d?"center":c?"right":"left"),i.verticalAlign=Ph(i.verticalAlign,n||d?"middle":c?"top":"bottom"),Ch.prototype.alignDataLabel.call(this,t,e,i,r,s),i.inside&&t.contrastColor&&e.css({color:t.contrastColor})}t.compose=function(t){Ah.compose(Ch),Mh(kh,"ColumnDataLabel")&&(t.prototype.alignDataLabel=e)}}(f||(f={}));let Lh=f,{extend:Oh,merge:Nh}=X;class _h extends dh{}_h.defaultOptions=Nh(dh.defaultOptions,{}),Oh(_h.prototype,{inverted:!0}),eo.registerSeriesType("bar",_h);let{column:Dh,line:Rh}=eo.seriesTypes,{addEvent:Fh,extend:Bh,merge:zh}=X;class Uh extends Rh{applyJitter(){let t=this,e=this.options.jitter,i=this.points.length;e&&this.points.forEach((function(r,s){["x","y"].forEach((function(n,o){if(e[n]&&!r.isNull){let a=`plot${n.toUpperCase()}`,l=t[`${n}Axis`],h=e[n]*l.transA;if(l&&!l.logarithmic){let t=Math.max(0,(r[a]||0)-h),e=Math.min(l.len,(r[a]||0)+h);r[a]=t+(e-t)*function(t){let e=1e4*Math.sin(t);return e-Math.floor(e)}(s+o*i),"x"===n&&(r.clientX=r.plotX)}}}))}))}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}Uh.defaultOptions=zh(Rh.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),Bh(Uh.prototype,{drawTracker:Dh.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),Fh(Uh,"afterTranslate",(function(){this.applyJitter()})),eo.registerSeriesType("scatter",Uh);let{deg2rad:Hh}=w,{fireEvent:Vh,isNumber:jh,pick:Gh,relativeLength:Wh}=X;!function(t){t.getCenter=function(){let t,e,i,r=this.options,s=this.chart,n=2*(r.slicedOffset||0),o=s.plotWidth-2*n,a=s.plotHeight-2*n,l=r.center,h=Math.min(o,a),c=r.thickness,d=r.size,u=r.innerSize||0;"string"==typeof d&&(d=parseFloat(d)),"string"==typeof u&&(u=parseFloat(u));let p=[Gh(l?.[0],"50%"),Gh(l?.[1],"50%"),Gh(d&&d<0?void 0:r.size,"100%"),Gh(u&&u<0?void 0:r.innerSize||0,"0%")];for(!s.angular||this instanceof Do||(p[3]=0),e=0;e<4;++e)i=p[e],t=e<2||2===e&&/%$/.test(i),p[e]=Wh(i,[o,a,h,p[2]][e])+(t?n:0);return p[3]>p[2]&&(p[3]=p[2]),jh(c)&&2*c<p[2]&&c>0&&(p[3]=p[2]-2*c),Vh(this,"afterGetCenter",{positions:p}),p},t.getStartAndEndRadians=function(t,e){let i=jh(t)?t:0,r=jh(e)&&e>i&&e-i<360?e:i+360;return{start:Hh*(i+-90),end:Hh*(r+-90)}}}(g||(g={}));let Xh=g,{setAnimation:qh}=Dt,{addEvent:Yh,defined:Kh,extend:$h,isNumber:Qh,pick:Zh,relativeLength:Jh}=X;class tc extends En{getConnectorPath(t){let e=t.dataLabelPosition,i=t.options||{},r=i.connectorShape,s=this.connectorShapes[r]||r;return e&&s.call(this,{...e.computed,alignment:e.alignment},e.connectorPosition,i)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(t){let e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:e.r-1,start:e.start,end:e.end,borderRadius:e.borderRadius})}constructor(t,e,i){super(t,e,i),this.half=0,this.name??(this.name="Slice");let r=t=>{this.slice("select"===t.type)};Yh(this,"select",r),Yh(this,"unselect",r)}isValid(){return Qh(this.y)&&this.y>=0}setVisible(t,e=!0){t!==this.visible&&this.update({visible:t??!this.visible},e,void 0,!1)}slice(t,e,i){let r=this.series;qh(i,r.chart),e=Zh(e,!0),this.sliced=this.options.sliced=t=Kh(t)?t:!this.sliced,r.options.data[r.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}$h(tc.prototype,{connectorShapes:{fixedOffset:function(t,e,i){let r=e.breakAt,s=e.touchingSliceAt,n=i.softConnector?["C",t.x+("left"===t.alignment?-5:5),t.y,2*r.x-s.x,2*r.y-s.y,r.x,r.y]:["L",r.x,r.y];return[["M",t.x,t.y],n,["L",s.x,s.y]]},straight:function(t,e){let i=e.touchingSliceAt;return[["M",t.x,t.y],["L",i.x,i.y]]},crookedLine:function(t,e,i){let{angle:r=this.angle||0,breakAt:s,touchingSliceAt:n}=e,{series:o}=this,[a,l,h]=o.center,c=h/2,{plotLeft:d,plotWidth:u}=o.chart,p="left"===t.alignment,{x:f,y:g}=t,m=s.x;if(i.crookDistance){let t=Jh(i.crookDistance,1);m=p?a+c+(u+d-a-c)*(1-t):d+(a-c)*t}else m=a+(l-g)*Math.tan(r-Math.PI/2);let y=[["M",f,g]];return(p?m<=f&&m>=s.x:m>=f&&m<=s.x)&&y.push(["L",m,g]),y.push(["L",s.x,s.y],["L",n.x,n.y]),y}}});let{getStartAndEndRadians:ec}=Xh,{noop:ic}=w,{clamp:rc,extend:sc,fireEvent:nc,merge:oc,pick:ac}=X;class lc extends Do{animate(t){let e=this,i=e.points,r=e.startAngleRad;t||i.forEach((function(t){let i=t.graphic,s=t.shapeArgs;i&&s&&(i.attr({r:ac(t.startR,e.center&&e.center[3]/2),start:r,end:r}),i.animate({r:s.r,start:s.start,end:s.end},e.options.animation))}))}drawEmpty(){let t,e,i=this.startAngleRad,r=this.endAngleRad,s=this.options;0===this.total&&this.center?(t=this.center[0],e=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(t,e,this.center[1]/2,0,i,r).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:di.arc(t,e,this.center[2]/2,0,{start:i,end:r,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":s.borderWidth,fill:s.fillColor||"none",stroke:s.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let t=this.chart.renderer;this.points.forEach((function(e){e.graphic&&e.hasNewShapeType()&&(e.graphic=e.graphic.destroy()),e.graphic||(e.graphic=t[e.shapeType](e.shapeArgs).add(e.series.group),e.delayedRendering=!0)}))}generatePoints(){super.generatePoints(),this.updateTotals()}getX(t,e,i,r){let s=this.center,n=this.radii?this.radii[i.index]||0:s[2]/2,o=r.dataLabelPosition,a=o?.distance||0,l=Math.asin(rc((t-s[1])/(n+a),-1,1));return s[0]+Math.cos(l)*(n+a)*(e?-1:1)+(a>0?(e?-1:1)*(r.padding||0):0)}hasData(){return!!this.dataTable.rowCount}redrawPoints(){let t,e,i,r,s=this,n=s.chart;this.drawEmpty(),s.group&&!n.styledMode&&s.group.shadow(s.options.shadow),s.points.forEach((function(o){let a={};e=o.graphic,!o.isNull&&e?(r=o.shapeArgs,t=o.getTranslate(),n.styledMode||(i=s.pointAttribs(o,o.selected&&"select")),o.delayedRendering?(e.setRadialReference(s.center).attr(r).attr(t),n.styledMode||e.attr(i).attr({"stroke-linejoin":"round"}),o.delayedRendering=!1):(e.setRadialReference(s.center),n.styledMode||oc(!0,a,i),oc(!0,a,r,t),e.animate(a)),e.attr({visibility:o.visible?"inherit":"hidden"}),e.addClass(o.getClassName(),!0)):e&&(o.graphic=e.destroy())}))}sortByAngle(t,e){t.sort((function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e}))}translate(t){nc(this,"translate"),this.generatePoints();let e,i,r,s,n,o,a,l=this.options,h=l.slicedOffset,c=ec(l.startAngle,l.endAngle),d=this.startAngleRad=c.start,u=(this.endAngleRad=c.end)-d,p=this.points,f=l.ignoreHiddenPoint,g=p.length,m=0;for(t||(this.center=t=this.getCenter()),o=0;o<g;o++){a=p[o],e=d+m*u,a.isValid()&&(!f||a.visible)&&(m+=a.percentage/100),i=d+m*u;let l={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1e3*e)/1e3,end:Math.round(1e3*i)/1e3};a.shapeType="arc",a.shapeArgs=l,(r=(i+e)/2)>1.5*Math.PI?r-=2*Math.PI:r<-Math.PI/2&&(r+=2*Math.PI),a.slicedTranslation={translateX:Math.round(Math.cos(r)*h),translateY:Math.round(Math.sin(r)*h)},s=Math.cos(r)*t[2]/2,n=Math.sin(r)*t[2]/2,a.tooltipPos=[t[0]+.7*s,t[1]+.7*n],a.half=r<-Math.PI/2||r>Math.PI/2?1:0,a.angle=r}nc(this,"afterTranslate")}updateTotals(){let t,e,i=this.points,r=i.length,s=this.options.ignoreHiddenPoint,n=0;for(t=0;t<r;t++)(e=i[t]).isValid()&&(!s||e.visible)&&(n+=e.y);for(t=0,this.total=n;t<r;t++)(e=i[t]).percentage=n>0&&(e.visible||!s)?e.y/n*100:0,e.total=n}}lc.defaultOptions=oc(Do.defaultOptions,{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.isNull?void 0:this.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),sc(lc.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:dh.prototype.drawTracker,getCenter:Xh.getCenter,getSymbol:ic,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:dh.prototype.pointAttribs,pointClass:tc,requireSorting:!1,searchPoint:ic,trackerGroups:["group","dataLabelsGroup"]}),eo.registerSeriesType("pie",lc);let{composed:hc,noop:cc}=w,{distribute:dc}=me,{series:uc}=eo,{arrayMax:pc,clamp:fc,defined:gc,pick:mc,pushUnique:yc,relativeLength:vc}=X;!function(t){let e={radialDistributionY:function(t,e){return(e.dataLabelPosition?.top||0)+t.distributeBox.pos},radialDistributionX:function(t,e,i,r,s){let n=s.dataLabelPosition;return t.getX(i<(n?.top||0)+2||i>(n?.bottom||0)-2?r:i,e.half,e,s)},justify:function(t,e,i,r){return r[0]+(t.half?-1:1)*(i+(e.dataLabelPosition?.distance||0))},alignToPlotEdges:function(t,e,i,r){let s=t.getBBox().width;return e?s+r:i-s-r},alignToConnectors:function(t,e,i,r){let s,n=0;return t.forEach((function(t){(s=t.dataLabel.getBBox().width)>n&&(n=s)})),e?n+r:i-n-r}};function i(t,e){let i=Math.PI/2,{start:r=0,end:s=0}=t.shapeArgs||{},n=t.angle||0;e>0&&r<i&&s>i&&n>i/2&&n<1.5*i&&(n=n<=i?Math.max(i/2,(r+i)/2):Math.min(1.5*i,(i+s)/2));let{center:o,options:a}=this,l=o[2]/2,h=Math.cos(n),c=Math.sin(n),d=o[0]+h*l,u=o[1]+c*l,p=Math.min((a.slicedOffset||0)+(a.borderWidth||0),e/5);return{natural:{x:d+h*e,y:u+c*e},computed:{},alignment:e<0?"center":t.half?"right":"left",connectorPosition:{angle:n,breakAt:{x:d+h*p,y:u+c*p},touchingSliceAt:{x:d,y:u}},distance:e}}function r(){let t,e,i,r=this,s=r.points,n=r.chart,o=n.plotWidth,a=n.plotHeight,l=n.plotLeft,h=Math.round(n.chartWidth/3),c=r.center,d=c[2]/2,u=c[1],p=[[],[]],f=[0,0,0,0],g=r.dataLabelPositioners,m=0;r.visible&&r.hasDataLabels?.()&&(s.forEach((t=>{(t.dataLabels||[]).forEach((t=>{t.shortened&&(t.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),t.shortened=!1)}))})),uc.prototype.drawDataLabels.apply(r),s.forEach((t=>{(t.dataLabels||[]).forEach(((e,i)=>{let r=c[2]/2,s=e.options,n=vc(s?.distance||0,r);0===i&&p[t.half].push(t),!gc(s?.style?.width)&&e.getBBox().width>h&&(e.css({width:Math.round(.7*h)+"px"}),e.shortened=!0),e.dataLabelPosition=this.getDataLabelPosition(t,n),m=Math.max(m,n)}))})),p.forEach(((t,s)=>{let h,p,y,v=t.length,b=[],x=0;v&&(r.sortByAngle(t,s-.5),m>0&&(h=Math.max(0,u-d-m),p=Math.min(u+d+m,n.plotHeight),t.forEach((t=>{(t.dataLabels||[]).forEach((e=>{let i=e.dataLabelPosition;i&&i.distance>0&&(i.top=Math.max(0,u-d-i.distance),i.bottom=Math.min(u+d+i.distance,n.plotHeight),x=e.getBBox().height||21,e.lineHeight=n.renderer.fontMetrics(e.text||e).h+2*e.padding,t.distributeBox={target:(e.dataLabelPosition?.natural.y||0)-i.top+e.lineHeight/2,size:x,rank:t.y},b.push(t.distributeBox))}))})),dc(b,y=p+x-h,y/5)),t.forEach((n=>{(n.dataLabels||[]).forEach((h=>{let u=h.options||{},p=n.distributeBox,m=h.dataLabelPosition,y=m?.natural.y||0,v=u.connectorPadding||0,x=h.lineHeight||21,w=(x-h.getBBox().height)/2,E=0,T=y,S="inherit";if(m){if(b&&gc(p)&&m.distance>0&&(void 0===p.pos?S="hidden":(i=p.size,T=g.radialDistributionY(n,h))),u.justify)E=g.justify(n,h,d,c);else switch(u.alignTo){case"connectors":E=g.alignToConnectors(t,s,o,l);break;case"plotEdges":E=g.alignToPlotEdges(h,s,o,l);break;default:E=g.radialDistributionX(r,n,T-w,y,h)}if(m.attribs={visibility:S,align:m.alignment},m.posAttribs={x:E+(u.x||0)+({left:v,right:-v}[m.alignment]||0),y:T+(u.y||0)-x/2},m.computed.x=E,m.computed.y=T-w,mc(u.crop,!0)){let t;E-(e=h.getBBox().width)<v&&1===s?(t=Math.round(e-E+v),f[3]=Math.max(t,f[3])):E+e>o-v&&0===s&&(t=Math.round(E+e-o+v),f[1]=Math.max(t,f[1])),T-i/2<0?f[0]=Math.max(Math.round(i/2-T),f[0]):T+i/2>a&&(f[2]=Math.max(Math.round(T+i/2-a),f[2])),m.sideOverflow=t}}}))})))})),(0===pc(f)||this.verifyDataLabelOverflow(f))&&(this.placeDataLabels(),this.points.forEach((e=>{(e.dataLabels||[]).forEach((i=>{let{connectorColor:s,connectorWidth:o=1}=i.options||{},a=i.dataLabelPosition;if(o){let l;t=i.connector,a&&a.distance>0?(l=!t,t||(i.connector=t=n.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+e.colorIndex+(e.className?" "+e.className:"")).add(r.dataLabelsGroup)),n.styledMode||t.attr({"stroke-width":o,stroke:s||e.color||"#666666"}),t[l?"attr":"animate"]({d:e.getConnectorPath(i)}),t.attr({visibility:a.attribs?.visibility})):t&&(i.connector=t.destroy())}}))}))))}function s(){this.points.forEach((t=>{(t.dataLabels||[]).forEach((t=>{let e=t.dataLabelPosition;e?(e.sideOverflow&&(t.css({width:Math.max(t.getBBox().width-e.sideOverflow,0)+"px",textOverflow:(t.options?.style||{}).textOverflow||"ellipsis"}),t.shortened=!0),t.attr(e.attribs),t[t.moved?"animate":"attr"](e.posAttribs),t.moved=!0):t&&t.attr({y:-9999})})),delete t.distributeBox}),this)}function n(t){let e=this.center,i=this.options,r=i.center,s=i.minSize||80,n=s,o=null!==i.size;return!o&&(null!==r[0]?n=Math.max(e[2]-Math.max(t[1],t[3]),s):(n=Math.max(e[2]-t[1]-t[3],s),e[0]+=(t[3]-t[1])/2),null!==r[1]?n=fc(n,s,e[2]-Math.max(t[0],t[2])):(n=fc(n,s,e[2]-t[0]-t[2]),e[1]+=(t[0]-t[2])/2),n<e[2]?(e[2]=n,e[3]=Math.min(i.thickness?Math.max(0,n-2*i.thickness):Math.max(0,vc(i.innerSize||0,n)),n),this.translate(e),this.drawDataLabels&&this.drawDataLabels()):o=!0),o}t.compose=function(t){if(Ah.compose(uc),yc(hc,"PieDataLabel")){let o=t.prototype;o.dataLabelPositioners=e,o.alignDataLabel=cc,o.drawDataLabels=r,o.getDataLabelPosition=i,o.placeDataLabels=s,o.verifyDataLabelOverflow=n}}}(m||(m={}));let bc=m;!function(t){t.getCenterOfPoints=function(t){let e=t.reduce(((t,e)=>(t.x+=e.x,t.y+=e.y,t)),{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}},t.getDistanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.getAngleBetweenPoints=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},t.pointInPolygon=function({x:t,y:e},i){let r,s,n=i.length,o=!1;for(r=0,s=n-1;r<n;s=r++){let[n,a]=i[r],[l,h]=i[s];a>e!=h>e&&t<(l-n)*(e-a)/(h-a)+n&&(o=!o)}return o}}(y||(y={}));let{pointInPolygon:xc}=y,{addEvent:wc,fireEvent:Ec,objectEach:Tc,pick:Sc}=X;function Ac(t){let e,i,r,s,n,o=t.length,a=(t,e)=>!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y),l=(t,e)=>{for(let i of t)if(xc({x:i[0],y:i[1]},e))return!0;return!1},h=!1;for(let i=0;i<o;i++)(e=t[i])&&(e.oldOpacity=e.opacity,e.newOpacity=1,e.absoluteBox=function(t){if(t&&(!t.alignAttr||t.placed)){let e=t.box?0:t.padding||0,i=t.alignAttr||{x:t.attr("x"),y:t.attr("y")},r=t.getBBox();return t.width=r.width,t.height=r.height,{x:i.x+(t.parentGroup?.translateX||0)+e,y:i.y+(t.parentGroup?.translateY||0)+e,width:(t.width||0)-2*e,height:(t.height||0)-2*e,polygon:r?.polygon}}}(e));t.sort(((t,e)=>(e.labelrank||0)-(t.labelrank||0)));for(let e=0;e<o;++e){s=(i=t[e])&&i.absoluteBox;let h=s?.polygon;for(let c=e+1;c<o;++c){n=(r=t[c])&&r.absoluteBox;let e=!1;if(s&&n&&i!==r&&0!==i.newOpacity&&0!==r.newOpacity&&"hidden"!==i.visibility&&"hidden"!==r.visibility){let t=n.polygon;if(h&&t&&h!==t?l(h,t)&&(e=!0):a(s,n)&&(e=!0),e){let t=i.labelrank<r.labelrank?i:r,e=t.text;t.newOpacity=0,e?.element.querySelector("textPath")&&e.hide()}}}}for(let e of t)kc(e,this)&&(h=!0);h&&Ec(this,"afterHideAllOverlappingLabels")}function kc(t,e){let i,r,s=!1;return t&&(r=t.newOpacity,t.oldOpacity!==r&&(t.hasClass("highcharts-data-label")?(t[r?"removeClass":"addClass"]("highcharts-data-label-hidden"),i=function(){e.styledMode||t.css({pointerEvents:r?"auto":"none"})},s=!0,t[t.isOld?"animate":"attr"]({opacity:r},void 0,i),Ec(e,"afterHideOverlappingLabel")):t.attr({opacity:r})),t.isOld=!0),s}function Cc(){let t=this,e=[];for(let i of t.labelCollectors||[])e=e.concat(i());for(let i of t.yAxis||[])i.stacking&&i.options.stackLabels&&!i.options.stackLabels.allowOverlap&&Tc(i.stacking.stacks,(t=>{Tc(t,(t=>{t.label&&e.push(t.label)}))}));for(let i of t.series||[])if(i.visible&&i.hasDataLabels?.()){let r=i=>{for(let r of i)r.visible&&(r.dataLabels||[]).forEach((i=>{let s=i.options||{};i.labelrank=Sc(s.labelrank,r.labelrank,r.shapeArgs?.height),s.allowOverlap??Number(s.distance)>0?(i.oldOpacity=i.opacity,i.newOpacity=1,kc(i,t)):e.push(i)}))};r(i.nodes||[]),r(i.points)}this.hideOverlappingLabels(e)}let Ic={compose:function(t){let e=t.prototype;e.hideOverlappingLabels||(e.hideOverlappingLabels=Ac,wc(t,"render",Cc))}},{defaultOptions:Pc}=ft,{noop:Mc}=w,{addEvent:Lc,extend:Oc,isObject:Nc,merge:_c,relativeLength:Dc}=X,Rc={radius:0,scope:"stack",where:void 0},Fc=Mc,Bc=Mc;function zc(t,e,i,r,s={}){let n=Fc(t,e,i,r,s),{innerR:o=0,r:a=i,start:l=0,end:h=0}=s;if(s.open||!s.borderRadius)return n;let c=h-l,d=Math.sin(c/2),u=Math.max(Math.min(Dc(s.borderRadius||0,a-o),(a-o)/2,a*d/(1+d)),0),p=Math.min(u,c/Math.PI*2*o),f=n.length-1;for(;f--;)!function(t,e,i){let r,s,n,o=t[e],a=t[e+1];if("Z"===a[0]&&(a=t[0]),"M"!==o[0]&&"L"!==o[0]||"A"!==a[0]?"A"===o[0]&&("M"===a[0]||"L"===a[0])&&(r=a,s=o):(r=o,s=a,n=!0),r&&s&&s.params){let o=s[1],a=s[5],l=s.params,{start:h,end:c,cx:d,cy:u}=l,p=a?o-i:o+i,f=p?Math.asin(i/p):0,g=a?f:-f,m=Math.cos(f)*p;n?(l.start=h+g,r[1]=d+m*Math.cos(h),r[2]=u+m*Math.sin(h),t.splice(e+1,0,["A",i,i,0,0,1,d+o*Math.cos(l.start),u+o*Math.sin(l.start)])):(l.end=c-g,s[6]=d+o*Math.cos(l.end),s[7]=u+o*Math.sin(l.end),t.splice(e+1,0,["A",i,i,0,0,1,d+m*Math.cos(c),u+m*Math.sin(c)])),s[4]=Math.abs(l.end-l.start)<Math.PI?0:1}}(n,f,f>1?p:u);return n}function Uc(){if(this.options.borderRadius&&(!this.chart.is3d||!this.chart.is3d())){let{options:t,yAxis:e}=this,i="percent"===t.stacking,r=Pc.plotOptions?.[this.type]?.borderRadius,s=Hc(t.borderRadius,Nc(r)?r:{}),n=e.options.reversed;for(let r of this.points){let{shapeArgs:o}=r;if("roundedRect"===r.shapeType&&o){let{width:a=0,height:l=0,y:h=0}=o,c=h,d=l;if("stack"===s.scope&&r.stackTotal){let s=e.translate(i?100:r.stackTotal,!1,!0,!1,!0),n=e.translate(t.threshold||0,!1,!0,!1,!0),o=this.crispCol(0,Math.min(s,n),0,Math.abs(s-n));c=o.y,d=o.height}let u=(r.negative?-1:1)*(n?-1:1)==-1,p=s.where;!p&&this.is("waterfall")&&Math.abs((r.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(p="all"),p||(p="end");let f=Math.min(Dc(s.radius,a),a/2,"all"===p?l/2:1/0)||0;"end"===p&&(u&&(c-=f),d+=f),Oc(o,{brBoxHeight:d,brBoxY:c,r:f})}}}}function Hc(t,e){return Nc(t)||(t={radius:t||0}),_c(Rc,e,t)}function Vc(){let t=Hc(this.options.borderRadius);for(let e of this.points){let i=e.shapeArgs;i&&(i.borderRadius=Dc(t.radius,(i.r||0)-(i.innerR||0)))}}function jc(t,e,i,r,s={}){let n=Bc(t,e,i,r,s),{r:o=0,brBoxHeight:a=r,brBoxY:l=e}=s,h=e-l,c=l+a-(e+r),d=h-o>-.1?0:o,u=c-o>-.1?0:o,p=Math.max(d&&h,0),f=Math.max(u&&c,0),g=[t+d,e],m=[t+i-d,e],y=[t+i,e+d],v=[t+i,e+r-u],b=[t+i-u,e+r],x=[t+u,e+r],w=[t,e+r-u],E=[t,e+d],T=(t,e)=>Math.sqrt(Math.pow(t,2)-Math.pow(e,2));if(p){let t=T(d,d-p);g[0]-=t,m[0]+=t,y[1]=E[1]=e+d-p}if(r<d-p){let s=T(d,d-p-r);y[0]=v[0]=t+i-d+s,b[0]=Math.min(y[0],b[0]),x[0]=Math.max(v[0],x[0]),w[0]=E[0]=t+d-s,y[1]=E[1]=e+r}if(f){let t=T(u,u-f);b[0]+=t,x[0]-=t,v[1]=w[1]=e+r-u+f}if(r<u-f){let s=T(u,u-f-r);y[0]=v[0]=t+i-u+s,m[0]=Math.min(y[0],m[0]),g[0]=Math.max(v[0],g[0]),w[0]=E[0]=t+u-s,v[1]=w[1]=e}return n.length=0,n.push(["M",...g],["L",...m],["A",d,d,0,0,1,...y],["L",...v],["A",u,u,0,0,1,...b],["L",...x],["A",u,u,0,0,1,...w],["L",...E],["A",d,d,0,0,1,...g],["Z"]),n}let{diffObjects:Gc,extend:Wc,find:Xc,merge:qc,pick:Yc,uniqueKey:Kc}=X;!function(t){function e(t,e){let i=t.condition;(i.callback||function(){return this.chartWidth<=Yc(i.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=Yc(i.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=Yc(i.minWidth,0)&&this.chartHeight>=Yc(i.minHeight,0)}).call(this)&&e.push(t._id)}function i(t,e){let i,r=this.options.responsive,s=this.currentResponsive,n=[];!e&&r&&r.rules&&r.rules.forEach((t=>{void 0===t._id&&(t._id=Kc()),this.matchResponsiveRule(t,n)}),this);let o=qc(...n.map((t=>Xc((r||{}).rules||[],(e=>e._id===t)))).map((t=>t&&t.chartOptions)));o.isResponsiveOptions=!0,n=n.toString()||void 0;let a=s&&s.ruleIds;n===a||(s&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(s.undoOptions,t,!0),this.updatingResponsive=!1),n?((i=Gc(o,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:n,mergedOptions:o,undoOptions:i},this.updatingResponsive||this.update(o,t,!0)):this.currentResponsive=void 0)}t.compose=function(t){let r=t.prototype;return r.matchResponsiveRule||Wc(r,{matchResponsiveRule:e,setResponsive:i}),t}}(v||(v={}));let $c=v;w.AST=Kt,w.Axis=as,w.Chart=Ga,w.Color=bt,w.DataLabel=Ah,w.DataTableCore=Xn,w.Fx=St,w.HTMLElement=cr,w.Legend=sa,w.LegendSymbol=$n,w.OverlappingDataLabels=w.OverlappingDataLabels||Ic,w.PlotLineOrBand=Ls,w.Point=En,w.Pointer=Hn,w.RendererRegistry=de,w.Series=Do,w.SeriesRegistry=eo,w.StackItem=cl,w.SVGElement=$e,w.SVGRenderer=Qi,w.Templating=ce,w.Tick=Mr,w.Time=lt,w.Tooltip=en,w.animate=Dt.animate,w.animObject=Dt.animObject,w.chart=Ga.chart,w.color=bt.parse,w.dateFormat=ce.dateFormat,w.defaultOptions=ft.defaultOptions,w.distribute=me.distribute,w.format=ce.format,w.getDeferredAnimation=Dt.getDeferredAnimation,w.getOptions=ft.getOptions,w.numberFormat=ce.numberFormat,w.seriesType=eo.seriesType,w.setAnimation=Dt.setAnimation,w.setOptions=ft.setOptions,w.stop=Dt.stop,w.time=ft.defaultTime,w.timers=St.timers,function(t,e,i){let r=t.types.pie;if(!e.symbolCustomAttribs.includes("borderRadius")){let s=i.prototype.symbols;Lc(t,"afterColumnTranslate",Uc,{order:9}),Lc(r,"afterTranslate",Vc),e.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),Fc=s.arc,Bc=s.roundedRect,s.arc=zc,s.roundedRect=jc}}(w.Series,w.SVGElement,w.SVGRenderer),Lh.compose(w.Series.types.column),Ah.compose(w.Series),us.compose(w.Axis),cr.compose(w.SVGRenderer),sa.compose(w.Chart),ms.compose(w.Axis),Ic.compose(w.Chart),bc.compose(w.Series.types.pie),Ls.compose(w.Chart,w.Axis),Hn.compose(w.Chart),$c.compose(w.Chart),il.compose(w.Axis,w.Chart,w.Series),Ml.compose(w.Axis,w.Chart,w.Series),en.compose(w.Pointer),X.extend(w,X);let Qc=w;return x.default})()))},802:function(t){!function(e,i){t.exports=i(e._Highcharts,e._Highcharts.Templating,e._Highcharts.AST,e._Highcharts.Legend,e._Highcharts.Axis,e._Highcharts.Color,e._Highcharts.SeriesRegistry,e._Highcharts.RendererRegistry,e._Highcharts.SVGRenderer,e._Highcharts.Point,e._Highcharts.Series)}("undefined"==typeof window?this:window,((t,e,i,r,s,n,o,a,l,h,c)=>(()=>{"use strict";let d;var u,p,f,g,m={660:t=>{t.exports=i},532:t=>{t.exports=s},620:t=>{t.exports=n},632:t=>{t.exports=r},260:t=>{t.exports=h},608:t=>{t.exports=a},540:t=>{t.exports=l},820:t=>{t.exports=c},512:t=>{t.exports=o},984:t=>{t.exports=e},944:e=>{e.exports=t}},y={};function v(t){var e=y[t];if(void 0!==e)return e.exports;var i=y[t]={exports:{}};return m[t](i,i.exports,v),i.exports}v.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return v.d(e,{a:e}),e},v.d=(t,e)=>{for(var i in e)v.o(e,i)&&!v.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},v.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var b={};v.d(b,{default:()=>Zs});var x=v(944),w=v.n(x);let{doc:E,win:T}=w(),{css:S}=w(),A=T.EventTarget&&new T.EventTarget||"none";function k(t){if("function"==typeof T.MouseEvent)return new T.MouseEvent(t.type,t);if(E.createEvent){let e=E.createEvent("MouseEvent");if(e.initMouseEvent)return e.initMouseEvent(t.type,t.bubbles,t.cancelable,t.view||T,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),e}return C(t.type)}function C(t,e,i){let r=e||{x:0,y:0};if("function"==typeof T.MouseEvent)return new T.MouseEvent(t,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:i||A,view:T,detail:"click"===t?1:0,screenX:r.x,screenY:r.y,clientX:r.x,clientY:r.y});if(E.createEvent){let e=E.createEvent("MouseEvent");if(e.initMouseEvent)return e.initMouseEvent(t,!0,!0,T,"click"===t?1:0,r.x,r.y,r.x,r.y,!1,!1,!1,!1,0,null),e}return{type:t}}let I={addClass:function(t,e){t.classList?t.classList.add(e):0>t.className.indexOf(e)&&(t.className+=" "+e)},cloneMouseEvent:k,cloneTouchEvent:function(t){let e=t=>{let e=[];for(let i=0;i<t.length;++i){let r=t.item(i);r&&e.push(r)}return e};if("function"==typeof T.TouchEvent){let i=new T.TouchEvent(t.type,{touches:e(t.touches),targetTouches:e(t.targetTouches),changedTouches:e(t.changedTouches),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed,detail:t.detail,view:t.view});return t.defaultPrevented&&i.preventDefault(),i}let i=k(t);return i.touches=t.touches,i.changedTouches=t.changedTouches,i.targetTouches=t.targetTouches,i},escapeStringForHTML:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(t){return E.getElementById(t)},getFakeMouseEvent:C,getHeadingTagNameForElement:function(t){let e=t=>"h"+Math.min(6,parseInt(t.slice(1),10)+1),i=t=>/^H[1-6]$/i.test(t),r=t=>{let s=(t=>{let e=t;for(;e=e.previousSibling;){let t=e.tagName||"";if(i(t))return t}return""})(t);if(s)return e(s);let n=t.parentElement;if(!n)return"h6";let o=n.tagName;return i(o)?e(o):r(n)};return r(t)},removeChildNodes:function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp(e,"g"),"")},removeElement:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},reverseChildNodes:function(t){let e=t.childNodes.length;for(;e--;)t.appendChild(t.childNodes[e])},simulatedEventTarget:A,stripHTMLTagsFromString:function(t,e=!1){return"string"==typeof t?e?t.replace(/<\/?[^>]+(>|$)/g,""):t.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):t},visuallyHideElement:function(t){S(t,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}};var P=v(984),M=v.n(P);let{format:L}=M(),{getNestedProperty:O,pick:N}=w();!function(t){function e(t,e,i){let r,s,n=(t,e)=>{let i=t.slice(e||0),r=i.indexOf("{"),s=i.indexOf("}");if(r>-1&&s>r)return{statement:i.substring(r+1,s),begin:e+r+1,end:e+s}},o=[],a=0;do{r=n(t,a),(s=t.substring(a,r&&r.begin-1)).length&&o.push({value:s,type:"constant"}),r&&o.push({value:r.statement,type:"statement"}),a=r?r.end+1:a+1}while(r);return o.forEach((t=>{"statement"===t.type&&(t.value=function(t,e){let i,r,s=t.indexOf("#each("),n=t.indexOf("#plural("),o=t.indexOf("["),a=t.indexOf("]");if(s>-1){let n,o=t.slice(s).indexOf(")")+s,a=t.substring(0,s),l=t.substring(o+1),h=t.substring(s+6,o).split(","),c=Number(h[1]);if(r="",i=O(h[0],e)){n=(c=isNaN(c)?i.length:c)<0?i.length+c:Math.min(c,i.length);for(let t=0;t<n;++t)r+=a+i[t]+l}return r.length?r:""}if(n>-1){var l;let i=t.slice(n).indexOf(")")+n,s=t.substring(n+8,i).split(",");switch(Number(O(s[0],e))){case 0:r=N(s[4],s[1]);break;case 1:r=N(s[2],s[1]);break;case 2:r=N(s[3],s[1]);break;default:r=s[1]}return r?(l=r).trim&&l.trim()||l.replace(/^\s+|\s+$/g,""):""}if(o>-1){let r,s=t.substring(0,o),n=Number(t.substring(o+1,a));return i=O(s,e),!isNaN(n)&&i&&(n<0?void 0===(r=i[i.length+n])&&(r=i[0]):void 0===(r=i[n])&&(r=i[i.length-1])),void 0!==r?r:""}return"{"+t+"}"}(t.value,e))})),L(o.reduce(((t,e)=>t+e.value),""),e,i)}function i(t,i){let r=t.split("."),s=this.options.lang,n=0;for(;n<r.length;++n)s=s&&s[r[n]];return"string"==typeof s?e(s,i,this):""}t.compose=function(t){let e=t.prototype;e.langFormat||(e.langFormat=i)},t.i18nFormat=e}(u||(u={}));let _=u,{doc:D}=w(),{stripHTMLTagsFromString:R}=I,{defined:F,find:B,fireEvent:z}=w();function U(t){if(t.points&&t.points.length){let e=B(t.points,(t=>!!t.graphic));return e&&e.graphic&&e.graphic.element}}function H(t){let e=U(t);return e&&e.parentNode||t.graph&&t.graph.element||t.group&&t.group.element}let V={fireEventOnWrappedOrUnwrappedElement:function t(e,i){let r=i.type,s=e.hcEvents;D.createEvent&&(e.dispatchEvent||e.fireEvent)?e.dispatchEvent?e.dispatchEvent(i):e.fireEvent(r,i):s&&s[r]?z(e,r,i):e.element&&t(e.element,i)},getChartTitle:function(t){return R(t.options.title.text||t.langFormat("accessibility.defaultChartTitle",{chart:t}),t.renderer.forExport)},getAxisDescription:function(t){return t&&(t.options.accessibility?.description||t.axisTitle?.textStr||t.options.id||t.categories&&"categories"||t.dateTime&&"Time"||"values")},getAxisRangeDescription:function(t){let e=t.options||{};return e.accessibility&&void 0!==e.accessibility.rangeDescription?e.accessibility.rangeDescription:t.categories?function(t){let e=t.chart;return t.dataMax&&t.dataMin?e.langFormat("accessibility.axis.rangeCategories",{chart:e,axis:t,numCategories:t.dataMax-t.dataMin+1}):""}(t):!t.dateTime||0!==t.min&&0!==t.dataMin?function(t){let e=t.chart,i=e.options,r=i&&i.accessibility&&i.accessibility.screenReaderSection.axisRangeDateFormat||"",s={min:t.dataMin||t.min||0,max:t.dataMax||t.max||0},n=function(i){return t.dateTime?e.time.dateFormat(r,s[i]):s[i].toString()};return e.langFormat("accessibility.axis.rangeFromTo",{chart:e,axis:t,rangeFrom:n("min"),rangeTo:n("max")})}(t):function(t){let e=t.chart,i={},r=t.dataMin||t.min||0,s=t.dataMax||t.max||0,n="Seconds";i.Seconds=(s-r)/1e3,i.Minutes=i.Seconds/60,i.Hours=i.Minutes/60,i.Days=i.Hours/24,["Minutes","Hours","Days"].forEach((function(t){i[t]>2&&(n=t)}));let o=i[n].toFixed("Seconds"!==n&&"Minutes"!==n?1:0);return e.langFormat("accessibility.axis.timeRange"+n,{chart:e,axis:t,range:o.replace(".0","")})}(t)},getPointFromXY:function(t,e,i){let r,s=t.length;for(;s--;)if(r=B(t[s].points||[],(function(t){return t.x===e&&t.y===i})))return r},getSeriesFirstPointElement:U,getSeriesFromName:function(t,e){return e?(t.series||[]).filter((function(t){return t.name===e})):t.series},getSeriesA11yElement:H,unhideChartElementFromAT:function t(e,i){i.setAttribute("aria-hidden",!1),i!==e.renderTo&&i.parentNode&&i.parentNode!==D.body&&(Array.prototype.forEach.call(i.parentNode.childNodes,(function(t){t.hasAttribute("aria-hidden")||t.setAttribute("aria-hidden",!0)})),t(e,i.parentNode))},hideSeriesFromAT:function(t){let e=H(t);e&&e.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(t){let e=t.series.xAxis,i=t.series.yAxis,r=e&&e.scrollbar?e:i,s=r&&r.scrollbar;if(s&&F(s.to)&&F(s.from)){let e=s.to-s.from,i=function(t,e){if(!F(t.dataMin)||!F(t.dataMax))return 0;let i=t.toPixels(t.dataMin),r=t.toPixels(t.dataMax),s="xAxis"===t.coll?"x":"y";return(t.toPixels(e[s]||0)-i)/(r-i)}(r,t);s.updatePosition(i-e/2,i+e/2),z(s,"changed",{from:s.from,to:s.to,trigger:"scrollbar",DOMEvent:null})}}},{doc:j}=w(),{removeElement:G}=I,W=class{constructor(){this.elements=[]}createElement(){let t=j.createElement.apply(j,arguments);return this.elements.push(t),t}removeElement(t){G(t),this.elements.splice(this.elements.indexOf(t),1)}destroyCreatedElements(){this.elements.forEach((function(t){G(t)})),this.elements=[]}},{addEvent:X}=w(),q=class{constructor(){this.eventRemovers=[]}addEvent(){let t=X.apply(w(),arguments);return this.eventRemovers.push({element:arguments[0],remover:t}),t}removeEvent(t){let e=this.eventRemovers.map((t=>t.remover)).indexOf(t);this.eventRemovers[e].remover(),this.eventRemovers.splice(e,1)}removeAddedEvents(){this.eventRemovers.map((t=>t.remover)).forEach((t=>t())),this.eventRemovers=[]}},{fireEventOnWrappedOrUnwrappedElement:Y}=V,{getFakeMouseEvent:K}=I,$=class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(t,e){this.chart=t,this.eventProvider=new q,this.domElementProvider=new W,this.proxyProvider=e,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(t,e,i,r){return this.eventProvider.addEvent(t,e,i,r)}createElement(t,e){return this.domElementProvider.createElement(t,e)}fakeClickEvent(t){Y(t,K("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}},{find:Q}=w(),Z=class{constructor(t,e){this.chart=t,this.keyCodeMap=e.keyCodeMap||[],this.validate=e.validate,this.init=e.init,this.terminate=e.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(t){let e=t.which||t.keyCode,i=this.response.noHandler,r=Q(this.keyCodeMap,(function(t){return t[0].indexOf(e)>-1}));return r?i=r[1].call(this,e,t):9===e&&(i=this.response[t.shiftKey?"prev":"next"]),i}},{unhideChartElementFromAT:J,getChartTitle:tt}=V,{doc:et}=w(),{stripHTMLTagsFromString:it}=I,rt=class extends ${onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let t=this.chart,e="highcharts-title-"+t.index,i=it(t.langFormat("accessibility.svgContainerTitle",{chartTitle:tt(t)}));if(i.length){let r=this.svgTitleElement=this.svgTitleElement||et.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=i,r.id=e,t.renderTo.insertBefore(r,t.renderTo.firstChild)}}setSVGContainerLabel(){let t=this.chart,e=t.langFormat("accessibility.svgContainerLabel",{chartTitle:tt(t)});t.renderer.box&&e.length&&t.renderer.box.setAttribute("aria-label",e)}setGraphicContainerAttrs(){let t=this.chart,e=t.langFormat("accessibility.graphicContainerLabel",{chartTitle:tt(t)});e.length&&t.container.setAttribute("aria-label",e)}setRenderToAttrs(){let t=this.chart,e="disabled"!==t.options.accessibility.landmarkVerbosity,i=t.langFormat("accessibility.chartContainerLabel",{title:tt(t),chart:t});i&&(t.renderTo.setAttribute("role",e?"region":"group"),t.renderTo.setAttribute("aria-label",i))}makeCreditsAccessible(){let t=this.chart,e=t.credits;e&&(e.textStr&&e.element.setAttribute("aria-label",t.langFormat("accessibility.credits",{creditsStr:it(e.textStr,t.renderer.forExport)})),J(t,e.element))}getKeyboardNavigation(){let t=this.chart;return new Z(t,{keyCodeMap:[],validate:function(){return!0},init:function(){let e=t.accessibility;e&&e.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}},{addEvent:st,pick:nt}=w();!function(t){let e=["x","y","transform","width","height","r","d","stroke-width"];function i(){let t=this.focusElement,e=this.options.accessibility.keyboardNavigation.focusBorder;t&&(t.removeFocusBorder(),e.enabled&&t.addFocusBorder(e.margin,{stroke:e.style.color,strokeWidth:e.style.lineWidth,r:e.style.borderRadius}))}function r(t,e){let i=this.options.accessibility.keyboardNavigation.focusBorder,r=e||t.element;r&&r.focus&&(r.hcEvents&&r.hcEvents.focusin||st(r,"focusin",(function(){})),r.focus(),i.hideBrowserFocusOutline&&(r.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=t,this.renderFocusBorder()}function s(t,i){this.focusBorder&&this.removeFocusBorder();let r=this.getBBox(),s=nt(t,3),n=this.parentGroup,o=this.scaleX||n&&n.scaleX,a=this.scaleY||n&&n.scaleY,l=(o?!a:a)?Math.abs(o||a||1):(Math.abs(o||1)+Math.abs(a||1))/2,h=this.renderer.fontMetrics(this).h;r.x+=this.translateX?this.translateX:0,r.y+=this.translateY?this.translateY:0;let c=r.x-s,d=r.y-s,u=r.width+2*s,p=r.height+2*s,f=!!this.text;if("text"===this.element.nodeName||f){let t,e,i=!!this.rotation,n=f?{x:i?1:0,y:0}:(t=0,e=0,"middle"===this.attr("text-anchor")?t=e=.5:this.rotation?t=.25:e=.75,{x:t,y:e}),o=+this.attr("x"),a=+this.attr("y");if(isNaN(o)||(c=o-r.width*n.x-s),isNaN(a)||(d=a-("start"===this.attr("text-anchor")?h:r.height)*n.y-s),f&&i){let t=u;u=p,p=t,isNaN(o)||(c=o-r.height*n.x-s),isNaN(a)||(d=a-r.width*n.y-s)}}this.focusBorder=this.renderer.rect(c,d,u,p,parseInt((i&&i.r||0).toString(),10)/l).addClass("highcharts-focus-border").attr({zIndex:99}).add(n),this.renderer.styledMode||this.focusBorder.attr({stroke:i&&i.stroke,"stroke-width":(i&&i.strokeWidth||0)/l}),function(t,...i){t.focusBorderUpdateHooks||(t.focusBorderUpdateHooks={},e.forEach((e=>{let r=e+"Setter",s=t[r]||t._defaultSetter;t.focusBorderUpdateHooks[r]=s,t[r]=function(){let e=s.apply(t,arguments);return t.addFocusBorder.apply(t,i),e}})))}(this,t,i),function(t){if(t.focusBorderDestroyHook)return;let e=t.destroy;t.destroy=function(){return t.focusBorder&&t.focusBorder.destroy&&t.focusBorder.destroy(),e.apply(t,arguments)},t.focusBorderDestroyHook=e}(this)}function n(){var t;(t=this).focusBorderUpdateHooks&&(Object.keys(t.focusBorderUpdateHooks).forEach((e=>{let i=t.focusBorderUpdateHooks[e];i===t._defaultSetter?delete t[e]:t[e]=i})),delete t.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}t.compose=function(t,e){let o=t.prototype,a=e.prototype;o.renderFocusBorder||(o.renderFocusBorder=i,o.setFocusToElement=r),a.addFocusBorder||(a.addFocusBorder=s,a.removeFocusBorder=n)}}(p||(p={}));let ot=p;var at=v(660),lt=v.n(at);let{doc:ht}=w(),{addClass:ct,visuallyHideElement:dt}=I,{attr:ut}=w(),pt=class{constructor(t,e){this.chart=t,this.domElementProvider=new W,this.announceRegion=this.addAnnounceRegion(e)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(t){lt().setElementHTML(this.announceRegion,t),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout((()=>{this.announceRegion.innerHTML=lt().emptyHTML,delete this.clearAnnouncementRegionTimer}),3e3)}addAnnounceRegion(t){let e=this.chart.announcerContainer||this.createAnnouncerContainer(),i=this.domElementProvider.createElement("div");return ut(i,{"aria-hidden":!1,"aria-live":t,"aria-atomic":!0}),this.chart.styledMode?ct(i,"highcharts-visually-hidden"):dt(i),e.appendChild(i),i}createAnnouncerContainer(){let t=this.chart,e=ht.createElement("div");return ut(e,{"aria-hidden":!1,class:"highcharts-announcer-container"}),e.style.position="relative",t.renderTo.insertBefore(e,t.renderTo.firstChild),t.announcerContainer=e,e}},{escapeStringForHTML:ft,stripHTMLTagsFromString:gt}=I;function mt(t){return(t.annotations||[]).reduce(((t,e)=>(e.options&&!1!==e.options.visible&&(t=t.concat(e.labels)),t)),[])}function yt(t){return t.options&&t.options.accessibility&&t.options.accessibility.description||t.graphic&&t.graphic.text&&t.graphic.text.textStr||""}function vt(t){let e=t.options&&t.options.accessibility&&t.options.accessibility.description;if(e)return e;let i=t.chart,r=yt(t),s=t.points.filter((t=>!!t.graphic)).map((t=>{let e=t.accessibility&&t.accessibility.valueDescription||(t=>t.graphic&&t.graphic.element&&t.graphic.element.getAttribute("aria-label")||"")(t),i=t&&t.series.name||"";return(i?i+", ":"")+"data point "+e})).filter((t=>!!t)),n=s.length,o=n>1?"MultiplePoints":n?"SinglePoint":"NoPoints",a={annotationText:r,annotation:t,numPoints:n,annotationPoint:s[0],additionalAnnotationPoints:s.slice(1)};return i.langFormat("accessibility.screenReaderSection.annotations.description"+o,a)}function bt(t){return mt(t).map((e=>{let i=ft(gt(vt(e),t.renderer.forExport));return i?`<li>${i}</li>`:""}))}let xt={getAnnotationsInfoHTML:function(t){let e=t.annotations;return e&&e.length?`<ul style="list-style-type: none">${bt(t).join(" ")}</ul>`:""},getAnnotationLabelDescription:vt,getAnnotationListItems:bt,getPointAnnotationTexts:function(t){let e=mt(t.series.chart).filter((e=>e.points.indexOf(t)>-1));return e.length?e.map((t=>`${yt(t)}`)):[]}},{getAnnotationsInfoHTML:wt}=xt,{getAxisDescription:Et,getAxisRangeDescription:Tt,getChartTitle:St,unhideChartElementFromAT:At}=V,{format:kt}=M(),{doc:Ct}=w(),{addClass:It,getElement:Pt,getHeadingTagNameForElement:Mt,stripHTMLTagsFromString:Lt,visuallyHideElement:Ot}=I,{attr:Nt,pick:_t,replaceNested:Dt}=w();function Rt(t){return Dt(t,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}let Ft=class extends ${constructor(){super(...arguments),this.screenReaderSections={}}init(){let t=this.chart,e=this;this.initRegionsDefinitions(),this.addEvent(t,"aftergetTableAST",(function(t){e.onDataTableCreated(t)})),this.addEvent(t,"afterViewData",(function(t){t.wasHidden&&(e.dataTableDiv=t.element,setTimeout((function(){e.focusDataTable()}),300))})),this.addEvent(t,"afterHideData",(function(){e.viewDataTableButton&&e.viewDataTableButton.setAttribute("aria-expanded","false")})),t.exporting&&this.addEvent(t,"afterPrint",(function(){e.updateAllScreenReaderSections()})),this.announcer=new pt(t,"assertive")}initRegionsDefinitions(){let t=this,e=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(i){let r=e.screenReaderSection.beforeChartFormatter;return r?r(i):t.defaultBeforeChartFormatter(i)},insertIntoDOM:function(t,e){e.renderTo.insertBefore(t,e.renderTo.firstChild)},afterInserted:function(){void 0!==t.sonifyButtonId&&t.initSonifyButton(t.sonifyButtonId),void 0!==t.dataTableButtonId&&t.initDataTableButton(t.dataTableButtonId)}},after:{element:null,buildContent:function(i){let r=e.screenReaderSection.afterChartFormatter;return r?r(i):t.defaultAfterChartFormatter()},insertIntoDOM:function(t,e){e.renderTo.insertBefore(t,e.container.nextSibling)},afterInserted:function(){t.chart.accessibility&&e.keyboardNavigation.enabled&&t.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let t=this;Object.keys(this.screenReaderSections).forEach((function(e){t.updateScreenReaderSection(e)}))}getLinkedDescriptionElement(){let t=this.chart.options.accessibility.linkedDescription;if(!t)return;if("string"!=typeof t)return t;let e=kt(t,this.chart),i=Ct.querySelectorAll(e);return 1===i.length?i[0]:void 0}setLinkedDescriptionAttrs(){let t=this.linkedDescriptionElement;t&&(t.setAttribute("aria-hidden","true"),It(t,"highcharts-linked-description"))}updateScreenReaderSection(t){let e=this.chart,i=this.screenReaderSections[t],r=i.buildContent(e),s=i.element=i.element||this.createElement("div"),n=s.firstChild||this.createElement("div");r?(this.setScreenReaderSectionAttribs(s,t),lt().setElementHTML(n,r),s.appendChild(n),i.insertIntoDOM(s,e),e.styledMode?It(n,"highcharts-visually-hidden"):Ot(n),At(e,n),i.afterInserted&&i.afterInserted()):(s.parentNode&&s.parentNode.removeChild(s),i.element=null)}setScreenReaderSectionAttribs(t,e){let i=this.chart,r=i.langFormat("accessibility.screenReaderSection."+e+"RegionLabel",{chart:i,chartTitle:St(i)});Nt(t,{id:`highcharts-screen-reader-region-${e}-${i.index}`,"aria-label":r||void 0}),t.style.position="relative",r&&t.setAttribute("role","all"===i.options.accessibility.landmarkVerbosity?"region":"group")}defaultBeforeChartFormatter(){let t=this.chart,e=t.options.accessibility.screenReaderSection.beforeChartFormat;if(!e)return"";let i=this.getAxesDescription(),r=t.sonify&&t.options.sonification&&t.options.sonification.enabled,s="highcharts-a11y-sonify-data-btn-"+t.index,n="hc-linkto-highcharts-data-table-"+t.index,o=wt(t),a=t.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:t}),l={headingTagName:Mt(t.renderTo),chartTitle:St(t),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:i.xAxis,yAxisDescription:i.yAxis,playAsSoundButton:r?this.getSonifyButtonText(s):"",viewTableButton:t.getCSV?this.getDataTableButtonText(n):"",annotationsTitle:o?a:"",annotationsList:o},h=_.i18nFormat(e,l,t);return this.dataTableButtonId=n,this.sonifyButtonId=s,Rt(h)}defaultAfterChartFormatter(){let t=this.chart,e=t.options.accessibility.screenReaderSection.afterChartFormat;if(!e)return"";let i={endOfChartMarker:this.getEndOfChartMarkerText()};return Rt(_.i18nFormat(e,i,t))}getLinkedDescription(){let t=this.linkedDescriptionElement;return Lt(t&&t.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let t=this.chart.options,e=t.caption,i=e&&e.text,r=this.getLinkedDescription();return t.accessibility.description||r||i||""}getTypeDescriptionText(){let t=this.chart;return t.types?t.options.accessibility.typeDescription||function(t,e){let i=e[0],r=t.series&&t.series[0]||{},s=t.mapView&&t.mapView.geoMap&&t.mapView.geoMap.title,n={numSeries:t.series.length,numPoints:r.points&&r.points.length,chart:t,mapTitle:s};return i?"map"===i||"tiledwebmap"===i?n.mapTitle?t.langFormat("accessibility.chartTypes.mapTypeDescription",n):t.langFormat("accessibility.chartTypes.unknownMap",n):t.types.length>1?t.langFormat("accessibility.chartTypes.combinationChart",n):function(t,e,i){let r=e[0],s=t.langFormat("accessibility.seriesTypeDescriptions."+r,i),n=t.series&&t.series.length<2?"Single":"Multiple";return(t.langFormat("accessibility.chartTypes."+r+n,i)||t.langFormat("accessibility.chartTypes.default"+n,i))+(s?" "+s:"")}(t,e,n):t.langFormat("accessibility.chartTypes.emptyChart",n)}(t,t.types):""}getDataTableButtonText(t){let e=this.chart;return'<button id="'+t+'">'+e.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:e,chartTitle:St(e)})+"</button>"}getSonifyButtonText(t){let e=this.chart;return e.options.sonification&&!1===e.options.sonification.enabled?"":'<button id="'+t+'">'+e.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:e,chartTitle:St(e)})+"</button>"}getSubtitleText(){let t=this.chart.options.subtitle;return Lt(t&&t.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let t=Pt(`highcharts-end-of-chart-marker-${this.chart.index}`);if(t)return t.outerHTML;let e=this.chart,i=e.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:e});return'<div id="highcharts-end-of-chart-marker-'+e.index+'">'+i+"</div>"}onDataTableCreated(t){let e=this.chart;if(e.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let i=t.tree.attributes||{};i.tabindex=-1,i.summary=e.langFormat("accessibility.table.tableSummary",{chart:e}),t.tree.attributes=i}}focusDataTable(){let t=this.dataTableDiv,e=t&&t.getElementsByTagName("table")[0];e&&e.focus&&e.focus()}initSonifyButton(t){let e=this.sonifyButton=Pt(t),i=this.chart,r=t=>{e&&(e.setAttribute("aria-hidden","true"),e.setAttribute("aria-label","")),t.preventDefault(),t.stopPropagation();let r=i.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:i});this.announcer.announce(r),setTimeout((()=>{e&&(e.removeAttribute("aria-hidden"),e.removeAttribute("aria-label")),i.sonify&&i.sonify()}),1e3)};e&&i&&(e.setAttribute("tabindex",-1),e.onclick=function(t){(i.options.accessibility&&i.options.accessibility.screenReaderSection.onPlayAsSoundClick||r).call(this,t,i)})}initDataTableButton(t){let e=this.viewDataTableButton=Pt(t),i=this.chart,r=t.replace("hc-linkto-","");e&&(Nt(e,{tabindex:-1,"aria-expanded":!!Pt(r)}),e.onclick=i.options.accessibility.screenReaderSection.onViewDataTableClick||function(){i.viewData()})}getAxesDescription(){let t=this.chart,e=function(e,i){let r=t[e];return r.length>1||r[0]&&_t(r[0].options.accessibility&&r[0].options.accessibility.enabled,i)},i=!!t.types&&0>t.types.indexOf("map")&&0>t.types.indexOf("treemap")&&0>t.types.indexOf("tilemap"),r=!!t.hasCartesianSeries,s=e("xAxis",!t.angular&&r&&i),n=e("yAxis",r&&i),o={};return s&&(o.xAxis=this.getAxisDescriptionText("xAxis")),n&&(o.yAxis=this.getAxisDescriptionText("yAxis")),o}getAxisDescriptionText(t){let e=this.chart,i=e[t];return e.langFormat("accessibility.axis."+t+"Description"+(i.length>1?"Plural":"Singular"),{chart:e,names:i.map((function(t){return Et(t)})),ranges:i.map((function(t){return Tt(t)})),numAxes:i.length})}destroy(){this.announcer&&this.announcer.destroy()}},{attr:Bt}=w(),{getChartTitle:zt,unhideChartElementFromAT:Ut}=V,{getFakeMouseEvent:Ht}=I;function Vt(t){return t.exportSVGElements&&t.exportSVGElements[0]}class jt extends ${init(){let t=this.chart,e=this;this.addEvent(t,"exportMenuShown",(function(){e.onMenuShown()})),this.addEvent(t,"exportMenuHidden",(function(){e.onMenuHidden()})),this.createProxyGroup()}onMenuHidden(){let t=this.chart.exportContextMenu;t&&t.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let t=this.chart,e=t.exportContextMenu;e&&(this.addAccessibleContextMenuAttribs(),Ut(t,e)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(t){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",t)}onChartRender(){let t=this.chart,e=t.focusElement,i=t.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&e&&e===t.exportingGroup&&(e.focusBorder?t.setFocusToElement(e,this.exportButtonProxy.innerElement):i&&i.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let t=this.chart,e=this.proxyProvider,i=Vt(t);(function(t){let e=t.options.exporting,i=Vt(t);return!!(e&&!1!==e.enabled&&e.accessibility&&e.accessibility.enabled&&i&&i.element)})(t)&&i&&(this.exportButtonProxy=e.addProxyElement("chartMenu",{click:i},"button",{"aria-label":t.langFormat("accessibility.exporting.menuButtonLabel",{chart:t,chartTitle:zt(t)}),"aria-expanded":!1,title:t.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let t=this.chart,e=t.exportDivElements;if(e&&e.length){e.forEach((t=>{t&&("LI"!==t.tagName||t.children&&t.children.length?t.setAttribute("aria-hidden","true"):t.setAttribute("tabindex",-1))}));let i=e[0]&&e[0].parentNode;i&&Bt(i,{"aria-hidden":void 0,"aria-label":t.langFormat("accessibility.exporting.chartMenuLabel",{chart:t}),role:"list"})}}getKeyboardNavigation(){let t=this.keyCodes,e=this.chart,i=this;return new Z(e,{keyCodeMap:[[[t.left,t.up],function(){return i.onKbdPrevious(this)}],[[t.right,t.down],function(){return i.onKbdNext(this)}],[[t.enter,t.space],function(){return i.onKbdClick(this)}]],validate:function(){return!!e.exporting&&!1!==e.options.exporting.enabled&&!1!==e.options.exporting.accessibility.enabled},init:function(){let t=i.exportButtonProxy,r=i.chart.exportingGroup;t&&r&&e.setFocusToElement(r,t.innerElement)},terminate:function(){e.hideExportMenu()}})}onKbdPrevious(t){let e=this.chart,i=e.options.accessibility,r=t.response,s=e.highlightedExportItemIx||0;for(;s--;)if(e.highlightExportItem(s))return r.success;return i.keyboardNavigation.wrapAround?(e.highlightLastExportItem(),r.success):r.prev}onKbdNext(t){let e=this.chart,i=e.options.accessibility,r=t.response;for(let t=(e.highlightedExportItemIx||0)+1;t<e.exportDivElements.length;++t)if(e.highlightExportItem(t))return r.success;return i.keyboardNavigation.wrapAround?(e.highlightExportItem(0),r.success):r.next}onKbdClick(t){let e=this.chart,i=e.exportDivElements[e.highlightedExportItemIx],r=Vt(e).element;return e.openMenu?this.fakeClickEvent(i):(this.fakeClickEvent(r),e.highlightExportItem(0)),t.response.success}}!function(t){function e(){let t=Vt(this);if(t){let e=t.element;e.onclick&&e.onclick(Ht("click"))}}function i(){let t=this.exportDivElements;t&&this.exportContextMenu&&this.openMenu&&(t.forEach((t=>{t&&"highcharts-menu-item"===t.className&&t.onmouseout&&t.onmouseout(Ht("mouseout"))})),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function r(t){let e=this.exportDivElements&&this.exportDivElements[t],i=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(e&&"LI"===e.tagName&&(!e.children||!e.children.length)){let r=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return e.focus&&r&&e.focus(),i&&i.onmouseout&&i.onmouseout(Ht("mouseout")),e.onmouseover&&e.onmouseover(Ht("mouseover")),this.highlightedExportItemIx=t,!0}return!1}function s(){if(this.exportDivElements){let t=this.exportDivElements.length;for(;t--;)if(this.highlightExportItem(t))return!0}return!1}t.compose=function(t){let n=t.prototype;n.hideExportMenu||(n.hideExportMenu=i,n.highlightExportItem=r,n.highlightLastExportItem=s,n.showExportMenu=e)}}(jt||(jt={}));let Gt=jt,{doc:Wt,win:Xt}=w(),{addEvent:qt,defined:Yt,fireEvent:Kt}=w(),{getElement:$t,simulatedEventTarget:Qt}=I;class Zt{constructor(t,e){this.currentModuleIx=NaN,this.modules=[],this.init(t,e)}init(t,e){let i=this.eventProvider=new q;this.chart=t,this.components=e,this.modules=[],this.currentModuleIx=0,this.update(),i.addEvent(this.tabindexContainer,"keydown",(t=>this.onKeydown(t))),i.addEvent(this.tabindexContainer,"focus",(t=>this.onFocus(t))),["mouseup","touchend"].forEach((t=>i.addEvent(Wt,t,(t=>this.onMouseUp(t))))),["mousedown","touchstart"].forEach((e=>i.addEvent(t.renderTo,e,(()=>{this.isClickingChart=!0}))))}update(t){let e=this.chart.options.accessibility,i=e&&e.keyboardNavigation,r=this.components;this.updateContainerTabindex(),i&&i.enabled&&t&&t.length?(this.modules=t.reduce((function(t,e){let i=r[e].getKeyboardNavigation();return t.concat(i)}),[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let t=$t(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),t?(this.makeElementAnExitAnchor(t),this.exitAnchor=t):this.createExitAnchor()}move(t){let e=this.modules&&this.modules[this.currentModuleIx];e&&e.terminate&&e.terminate(t),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=t;let i=this.modules&&this.modules[this.currentModuleIx];if(i){if(i.validate&&!i.validate())return this.move(t);if(i.init)return i.init(t),!0}return this.currentModuleIx=0,this.exiting=!0,t>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(t){let e=this.chart,i=t.relatedTarget&&e.container.contains(t.relatedTarget),r=e.options.accessibility,s=r&&r.keyboardNavigation;if(s&&s.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!i){let t=this.getFirstValidModuleIx();null!==t&&(this.currentModuleIx=t,this.modules[t].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(t){if(delete this.isClickingChart,!this.keyboardReset&&t.relatedTarget!==Qt){let e=this.chart;if(!t.target||!e.container.contains(t.target)){let t=this.modules&&this.modules[this.currentModuleIx||0];t&&t.terminate&&t.terminate(),this.currentModuleIx=0}e.focusElement&&(e.focusElement.removeFocusBorder(),delete e.focusElement),this.keyboardReset=!0}}onKeydown(t){let e,i=t||Xt.event,r=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],s=i.target;if((!s||"INPUT"!==s.nodeName||s.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,r)){let t=r.run(i);t===r.response.success?e=!0:t===r.response.prev?e=this.move(-1):t===r.response.next&&(e=this.move(1)),e&&(i.preventDefault(),i.stopPropagation())}}updateContainerTabindex(){let t,e=this.chart.options.accessibility,i=e&&e.keyboardNavigation,r=!(i&&!1===i.enabled),s=this.chart,n=s.container;s.renderTo.hasAttribute("tabindex")?(n.removeAttribute("tabindex"),t=s.renderTo):t=n,this.tabindexContainer=t;let o=t.getAttribute("tabindex");r&&!o?t.setAttribute("tabindex","0"):r||s.container.removeAttribute("tabindex")}createExitAnchor(){let t=this.chart,e=this.exitAnchor=Wt.createElement("div");t.renderTo.appendChild(e),this.makeElementAnExitAnchor(e)}makeElementAnExitAnchor(t){let e=this.tabindexContainer.getAttribute("tabindex")||0;t.setAttribute("class","highcharts-exit-anchor"),t.setAttribute("tabindex",e),t.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(t)}removeExitAnchor(){if(this.exitAnchor){let t=this.eventProvider.eventRemovers.find((t=>t.element===this.exitAnchor));t&&Yt(t.remover)&&this.eventProvider.removeEvent(t.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(t){let e=this.chart,i=this;this.eventProvider.addEvent(t,"focus",(function(t){let r=t||Xt.event,s=!(r.relatedTarget&&e.container.contains(r.relatedTarget)||i.exiting);if(e.focusElement&&delete e.focusElement,s){if(i.tabbingInBackwards=!0,i.tabindexContainer.focus(),delete i.tabbingInBackwards,r.preventDefault(),i.modules&&i.modules.length){i.currentModuleIx=i.modules.length-1;let t=i.modules[i.currentModuleIx];t&&t.validate&&!t.validate()?i.move(-1):t&&t.init(-1)}}else i.exiting=!1}))}getFirstValidModuleIx(){let t=this.modules.length;for(let e=0;e<t;++e){let t=this.modules[e];if(!t.validate||t.validate())return e}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}!function(t){function e(){let t=this;Kt(this,"dismissPopupContent",{},(function(){t.tooltip&&t.tooltip.hide(0),t.hideExportMenu()}))}function i(t){27===(t.which||t.keyCode)&&w().charts&&w().charts.forEach((t=>{t&&t.dismissPopupContent&&t.dismissPopupContent()}))}t.compose=function(t){Gt.compose(t);let r=t.prototype;return r.dismissPopupContent||(r.dismissPopupContent=e,qt(Wt,"keydown",i)),t}}(Zt||(Zt={}));let Jt=Zt;var te=v(632),ee=v.n(te);let{animObject:ie}=w(),{doc:re}=w(),{addEvent:se,fireEvent:ne,isNumber:oe,pick:ae,syncTimeout:le}=w(),{getChartTitle:he}=V,{stripHTMLTagsFromString:ce,addClass:de,removeClass:ue}=I;function pe(t){let e=t.legend&&t.legend.allItems,i=t.options.legend.accessibility||{},r=t.colorAxis&&t.colorAxis.some((t=>!t.dataClasses||!t.dataClasses.length));return!(!e||!e.length||r||!1===i.enabled)}function fe(t,e){let i=e.legendItem||{};for(let r of(e.setState(t?"hover":"",!0),["group","label","symbol"])){let e=i[r],s=e&&e.element||e;s&&ne(s,t?"mouseover":"mouseout")}}class ge extends ${constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let t=this;this.recreateProxies(),this.addEvent(ee(),"afterScroll",(function(){this.chart===t.chart&&(t.proxyProvider.updateGroupProxyElementPositions("legend"),t.updateLegendItemProxyVisibility(),t.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(t.highlightedLegendItemIx))})),this.addEvent(ee(),"afterPositionItem",(function(e){this.chart===t.chart&&this.chart.renderer&&t.updateProxyPositionForItem(e.item)})),this.addEvent(ee(),"afterRender",(function(){this.chart===t.chart&&this.chart.renderer&&t.recreateProxies()&&le((()=>t.proxyProvider.updateGroupProxyElementPositions("legend")),ie(ae(this.chart.renderer.globalAnimation,!0)).duration)}))}updateLegendItemProxyVisibility(){let t,e=this.chart,i=e.legend,r=i.allItems||[],s=i.currentPage||1,n=i.clipHeight||0;r.forEach((r=>{if(r.a11yProxyElement){let o=i.pages&&i.pages.length,a=r.a11yProxyElement.element,l=!1;if(t=r.legendItem||{},o){let e=t.pageIx||0;l=(t.y||0)+(t.label?Math.round(t.label.getBBox().height):0)-i.pages[e]>n||e!==s-1}l?e.styledMode?de(a,"highcharts-a11y-invisible"):a.style.visibility="hidden":(ue(a,"highcharts-a11y-invisible"),a.style.visibility="")}}))}onChartRender(){pe(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(t){let e=this.chart,i=e.legend,r=(i.currentPage||1)+t,s=i.pages||[];if(r>0&&r<=s.length){let t=0;for(let s of i.allItems)((s.legendItem||{}).pageIx||0)+1===r&&e.highlightLegendItem(t)&&(this.highlightedLegendItemIx=t),++t}}updateProxyPositionForItem(t){t.a11yProxyElement&&t.a11yProxyElement.refreshPosition()}recreateProxies(){let t=re.activeElement,e=this.proxyGroup,i=t&&e&&e.contains(t);return this.removeProxies(),!!pe(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),i&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let t=this.chart,e=ce((t.legend&&t.legend.options.title&&t.legend.options.title.text||"").replace(/<br ?\/?>/g," "),t.renderer.forExport),i=t.langFormat("accessibility.legend.legendLabel"+(e?"":"NoTitle"),{chart:t,legendTitle:e,chartTitle:he(t)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":i})}addLegendProxyGroup(){let t="all"===this.chart.options.accessibility.landmarkVerbosity?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:t})}proxyLegendItems(){let t,e=this;((this.chart.legend||{}).allItems||[]).forEach((i=>{(t=i.legendItem||{}).label&&t.label.element&&e.proxyLegendItem(i)}))}proxyLegendItem(t){let e=t.legendItem||{};if(!e.label||!e.group)return;let i=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:ce(t.name,this.chart.renderer.forExport),item:t}),r={tabindex:-1,"aria-pressed":t.visible,"aria-label":i},s=e.group.div?e.label:e.group;t.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:e.label,visual:s.element},"button",r)}getKeyboardNavigation(){let t=this.keyCodes,e=this,i=this.chart;return new Z(i,{keyCodeMap:[[[t.left,t.right,t.up,t.down],function(t){return e.onKbdArrowKey(this,t)}],[[t.enter,t.space],function(){return e.onKbdClick(this)}],[[t.pageDown,t.pageUp],function(i){let r=i===t.pageDown?1:-1;return e.highlightAdjacentLegendPage(r),this.response.success}]],validate:function(){return e.shouldHaveLegendNavigation()},init:function(){i.highlightLegendItem(0),e.highlightedLegendItemIx=0},terminate:function(){e.highlightedLegendItemIx=-1,i.legend.allItems.forEach((t=>fe(!1,t)))}})}onKbdArrowKey(t,e){let{keyCodes:{left:i,up:r},highlightedLegendItemIx:s,chart:n}=this,o=n.legend.allItems.length,a=n.options.accessibility.keyboardNavigation.wrapAround,l=e===i||e===r?-1:1;return n.highlightLegendItem(s+l)?this.highlightedLegendItemIx+=l:a&&o>1&&(this.highlightedLegendItemIx=l>0?0:o-1,n.highlightLegendItem(this.highlightedLegendItemIx)),t.response.success}onKbdClick(t){let e=this.chart.legend.allItems[this.highlightedLegendItemIx];return e&&e.a11yProxyElement&&e.a11yProxyElement.click(),t.response.success}shouldHaveLegendNavigation(){if(!pe(this.chart))return!1;let t=this.chart,e=(t.options.legend||{}).accessibility||{};return!!(t.legend.display&&e.keyboardNavigation&&e.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}!function(t){function e(t){let e=this.legend.allItems,i=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,r=e[t],s=r?.legendItem||{};if(r){oe(i)&&e[i]&&fe(!1,e[i]),function(t,e){let i=(t.allItems[e].legendItem||{}).pageIx,r=t.currentPage;void 0!==i&&i+1!==r&&t.scroll(1+i-r)}(this.legend,t);let n=s.label,o=r.a11yProxyElement&&r.a11yProxyElement.innerElement;return n&&n.element&&o&&this.setFocusToElement(n,o),fe(!0,r),!0}return!1}function i(t){let e=this.chart.options.accessibility,i=t.item;e.enabled&&i&&i.a11yProxyElement&&i.a11yProxyElement.innerElement.setAttribute("aria-pressed",t.visible?"true":"false")}t.compose=function(t,r){let s=t.prototype;s.highlightLegendItem||(s.highlightLegendItem=e,se(r,"afterColorizeItem",i))}}(ge||(ge={}));let me=ge;var ye=v(532),ve=v.n(ye);let{isTouchDevice:be}=w(),{addEvent:xe,merge:we,pick:Ee}=w(),Te=[];function Se(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function Ae(){let t,e,i,r=this.legend,s=this.navigator;if(s){t=r&&r.options,e=s.xAxis,i=s.yAxis;let{scrollbarHeight:n,scrollButtonSize:o}=s;this.inverted?(s.left=s.opposite?this.chartWidth-n-s.height:this.spacing[3]+n,s.top=this.plotTop+o):(s.left=Ee(e.left,this.plotLeft+o),s.top=s.navigatorOptions.top||this.chartHeight-s.height-n-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(t&&"bottom"===t.verticalAlign&&"proximate"!==t.layout&&t.enabled&&!t.floating?r.legendHeight+Ee(t.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),e&&i&&(this.inverted?e.options.left=i.options.left=s.left:e.options.top=i.options.top=s.top,e.setAxisSize(),i.setAxisSize())}}function ke(t){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new d(this),Ee(t.redraw,!0)&&this.redraw(t.animation))}function Ce(){let t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=this.navigator=new d(this))}function Ie(){let t=this.options,e=t.navigator,i=t.rangeSelector;if((e&&e.enabled||i&&i.enabled)&&(!be&&"x"===this.zooming.type||be&&"x"===this.zooming.pinchType))return!1}function Pe(t){let e=t.navigator;if(e&&t.xAxis[0]){let i=t.xAxis[0].getExtremes();e.render(i.min,i.max)}}function Me(t){let e=t.options.navigator||{},i=t.options.scrollbar||{};!this.navigator&&!this.scroller&&(e.enabled||i.enabled)&&(we(!0,this.options.navigator,e),we(!0,this.options.scrollbar,i),delete t.options.navigator,delete t.options.scrollbar)}let{isTouchDevice:Le}=w(),{addEvent:Oe,correctFloat:Ne,defined:_e,isNumber:De,pick:Re}=w();function Fe(){this.navigatorAxis||(this.navigatorAxis=new ze(this))}function Be(t){let e,i=this.chart,r=i.options,s=r.navigator,n=this.navigatorAxis,o=i.zooming.pinchType,a=r.rangeSelector,l=i.zooming.type;if(this.isXAxis&&(s?.enabled||a?.enabled))if("y"===l&&"zoom"===t.trigger)e=!1;else if(("zoom"===t.trigger&&"xy"===l||Le&&"xy"===o)&&this.options.range){let e=n.previousZoom;_e(t.min)?n.previousZoom=[this.min,this.max]:e&&(t.min=e[0],t.max=e[1],n.previousZoom=void 0)}void 0!==e&&t.preventDefault()}class ze{static compose(t){t.keepProps.includes("navigatorAxis")||(t.keepProps.push("navigatorAxis"),Oe(t,"init",Fe),Oe(t,"setExtremes",Be))}constructor(t){this.axis=t}destroy(){this.axis=void 0}toFixedRange(t,e,i,r){let s=this.axis,n=(s.pointRange||0)/2,o=Re(i,s.translate(t,!0,!s.horiz)),a=Re(r,s.translate(e,!0,!s.horiz));return _e(i)||(o=Ne(o+n)),_e(r)||(a=Ne(a-n)),De(o)&&De(a)||(o=a=void 0),{min:o,max:a}}}var Ue=v(620),He=v.n(Ue),Ve=v(512),je=v.n(Ve);let{parse:Ge}=He(),{seriesTypes:We}=je(),Xe={height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:Ge("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:void 0===We.areaspline?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}},{defined:qe,isNumber:Ye,pick:Ke}=w(),$e=function(t,e,i,r,s){return s&&s.r?function(t,e,i,r,s){let n=s?.r||0;return[["M",t+n,e],["L",t+i-n,e],["A",n,n,0,0,1,t+i,e+n],["L",t+i,e+r-n],["A",n,n,0,0,1,t+i-n,e+r],["L",t+n,e+r],["A",n,n,0,0,1,t,e+r-n],["L",t,e+n],["A",n,n,0,0,1,t+n,e],["Z"]]}(t,e,i,r,s):[["M",t,e],["L",t+i,e],["L",t+i,e+r],["L",t,e+r],["Z"]]},{relativeLength:Qe}=w(),Ze={"navigator-handle":function(t,e,i,r,s={}){let n=s.width?s.width/2:i,o=Qe(s.borderRadius||0,Math.min(2*n,r));return[["M",-1.5,(r=s.height||r)/2-3.5],["L",-1.5,r/2+4.5],["M",.5,r/2-3.5],["L",.5,r/2+4.5],...$e(-n-1,.5,2*n+1,r,{r:o})]}};var Je=v(608),ti=v.n(Je);let{defined:ei}=w(),{setOptions:ii}=w(),{composed:ri}=w(),{getRendererType:si}=ti(),{setFixedRange:ni}={setFixedRange:function(t){let e=this.xAxis[0];ei(e.dataMax)&&ei(e.dataMin)&&t?this.fixedRange=Math.min(t,e.dataMax-e.dataMin):this.fixedRange=t}},{addEvent:oi,extend:ai,pushUnique:li}=w();function hi(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}let{composed:ci}=w(),{addEvent:di,defined:ui,pick:pi,pushUnique:fi}=w();!function(t){let e;function i(t){let e=pi(t.options&&t.options.min,t.min),i=pi(t.options&&t.options.max,t.max);return{axisMin:e,axisMax:i,scrollMin:ui(t.dataMin)?Math.min(e,t.min,t.dataMin,pi(t.threshold,1/0)):e,scrollMax:ui(t.dataMax)?Math.max(i,t.max,t.dataMax,pi(t.threshold,-1/0)):i}}function r(){let t=this.scrollbar,e=t&&!t.options.opposite,i=this.horiz?2:e?3:1;t&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[i]+=t.size+(t.options.margin||0))}function s(){let t=this;t.options&&t.options.scrollbar&&t.options.scrollbar.enabled&&(t.options.scrollbar.vertical=!t.horiz,t.options.startOnTick=t.options.endOnTick=!1,t.scrollbar=new e(t.chart.renderer,t.options.scrollbar,t.chart),di(t.scrollbar,"changed",(function(e){let r,s,{axisMin:n,axisMax:o,scrollMin:a,scrollMax:l}=i(t),h=l-a;if(ui(n)&&ui(o))if(t.horiz&&!t.reversed||!t.horiz&&t.reversed?(r=a+h*this.to,s=a+h*this.from):(r=a+h*(1-this.from),s=a+h*(1-this.to)),this.shouldUpdateExtremes(e.DOMType)){let i="mousemove"!==e.DOMType&&"touchmove"!==e.DOMType&&void 0;t.setExtremes(s,r,!0,i,e)}else this.setRange(this.from,this.to)})))}function n(){let t,e,r,{scrollMin:s,scrollMax:n}=i(this),o=this.scrollbar,a=this.axisTitleMargin+(this.titleOffset||0),l=this.chart.scrollbarsOffsets,h=this.options.margin||0;if(o&&l){if(this.horiz)this.opposite||(l[1]+=a),o.position(this.left,this.top+this.height+2+l[1]-(this.opposite?h:0),this.width,this.height),this.opposite||(l[1]+=h),t=1;else{let e;this.opposite&&(l[0]+=a),e=o.options.opposite?this.left+this.width+2+l[0]-(this.opposite?0:h):this.opposite?0:h,o.position(e,this.top,this.width,this.height),this.opposite&&(l[0]+=h),t=0}if(l[t]+=o.size+(o.options.margin||0),isNaN(s)||isNaN(n)||!ui(this.min)||!ui(this.max)||this.dataMin===this.dataMax)o.setRange(0,1);else if(this.min===this.max){let t=this.pointRange/(this.dataMax+1);e=t*this.min,r=t*(this.max+1),o.setRange(e,r)}else e=(this.min-s)/(n-s),r=(this.max-s)/(n-s),this.horiz&&!this.reversed||!this.horiz&&this.reversed?o.setRange(e,r):o.setRange(1-r,1-e)}}t.compose=function(t,i){fi(ci,"Axis.Scrollbar")&&(e=i,di(t,"afterGetOffset",r),di(t,"afterInit",s),di(t,"afterRender",n))}}(f||(f={}));let gi=f,mi={height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1},{defaultOptions:yi}=w(),{addEvent:vi,correctFloat:bi,crisp:xi,defined:wi,destroyObjectProperties:Ei,fireEvent:Ti,merge:Si,pick:Ai,removeEvent:ki}=w();class Ci{static compose(t){gi.compose(t,Ci)}static swapXY(t,e){return e&&t.forEach((t=>{let e,i=t.length;for(let r=0;r<i;r+=2)"number"==typeof(e=t[r+1])&&(t[r+1]=t[r+2],t[r+2]=e)})),t}constructor(t,e,i){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(t,e,i)}addEvents(){let t=this.options.inverted?[1,0]:[0,1],e=this.scrollbarButtons,i=this.scrollbarGroup.element,r=this.track.element,s=this.mouseDownHandler.bind(this),n=this.mouseMoveHandler.bind(this),o=this.mouseUpHandler.bind(this),a=[[e[t[0]].element,"click",this.buttonToMinClick.bind(this)],[e[t[1]].element,"click",this.buttonToMaxClick.bind(this)],[r,"click",this.trackClick.bind(this)],[i,"mousedown",s],[i.ownerDocument,"mousemove",n],[i.ownerDocument,"mouseup",o],[i,"touchstart",s],[i.ownerDocument,"touchmove",n],[i.ownerDocument,"touchend",o]];a.forEach((function(t){vi.apply(null,t)})),this._events=a}buttonToMaxClick(t){let e=(this.to-this.from)*Ai(this.options.step,.2);this.updatePosition(this.from+e,this.to+e),Ti(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:t})}buttonToMinClick(t){let e=bi(this.to-this.from)*Ai(this.options.step,.2);this.updatePosition(bi(this.from-e),bi(this.to-e)),Ti(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:t})}cursorToScrollbarPosition(t){let e=this.options,i=e.minWidth>this.calculatedWidth?e.minWidth:0;return{chartX:(t.chartX-this.x-this.xOffset)/(this.barWidth-i),chartY:(t.chartY-this.y-this.yOffset)/(this.barWidth-i)}}destroy(){let t=this,e=t.chart.scroller;t.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach((function(e){t[e]&&t[e].destroy&&(t[e]=t[e].destroy())})),e&&t===e.scrollbar&&(e.scrollbar=null,Ei(e.scrollbarButtons))}drawScrollbarButton(t){let e=this.renderer,i=this.scrollbarButtons,r=this.options,s=this.size,n=e.g().add(this.group);if(i.push(n),r.buttonsEnabled){let o=e.rect().addClass("highcharts-scrollbar-button").add(n);this.chart.styledMode||o.attr({stroke:r.buttonBorderColor,"stroke-width":r.buttonBorderWidth,fill:r.buttonBackgroundColor}),o.attr(o.crisp({x:-.5,y:-.5,width:s,height:s,r:r.buttonBorderRadius},o.strokeWidth()));let a=e.path(Ci.swapXY([["M",s/2+(t?-1:1),s/2-3],["L",s/2+(t?-1:1),s/2+3],["L",s/2+(t?2:-2),s/2]],r.vertical)).addClass("highcharts-scrollbar-arrow").add(i[t]);this.chart.styledMode||a.attr({fill:r.buttonArrowColor})}}init(t,e,i){this.scrollbarButtons=[],this.renderer=t,this.userOptions=e,this.options=Si(mi,yi.scrollbar,e),this.options.margin=Ai(this.options.margin,10),this.chart=i,this.size=Ai(this.options.size,this.options.height),e.enabled&&(this.render(),this.addEvents())}mouseDownHandler(t){let e=this.chart.pointer?.normalize(t)||t,i=this.cursorToScrollbarPosition(e);this.chartX=i.chartX,this.chartY=i.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(t){let e,i=this.chart.pointer?.normalize(t)||t,r=this.options.vertical?"chartY":"chartX",s=this.initPositions||[];this.grabbedCenter&&(!t.touches||0!==t.touches[0][r])&&(e=this.cursorToScrollbarPosition(i)[r]-this[r],this.hasDragged=!0,this.updatePosition(s[0]+e,s[1]+e),this.hasDragged&&Ti(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:t.type,DOMEvent:t}))}mouseUpHandler(t){this.hasDragged&&Ti(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:t.type,DOMEvent:t}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(t,e,i,r){let{buttonsEnabled:s,margin:n=0,vertical:o}=this.options,a=this.rendered?"animate":"attr",l=r,h=0;this.group.show(),this.x=t,this.y=e+this.trackBorderWidth,this.width=i,this.height=r,this.xOffset=l,this.yOffset=h,o?(this.width=this.yOffset=i=h=this.size,this.xOffset=l=0,this.yOffset=h=s?this.size:0,this.barWidth=r-(s?2*i:0),this.x=t+=n):(this.height=r=this.size,this.xOffset=l=s?this.size:0,this.barWidth=i-(s?2*r:0),this.y=this.y+n),this.group[a]({translateX:t,translateY:this.y}),this.track[a]({width:i,height:r}),this.scrollbarButtons[1][a]({translateX:o?0:i-l,translateY:o?r-h:0})}removeEvents(){this._events.forEach((function(t){ki.apply(null,t)})),this._events.length=0}render(){let t=this.renderer,e=this.options,i=this.size,r=this.chart.styledMode,s=t.g("scrollbar").attr({zIndex:e.zIndex}).hide().add();this.group=s,this.track=t.rect().addClass("highcharts-scrollbar-track").attr({r:e.trackBorderRadius||0,height:i,width:i}).add(s),r||this.track.attr({fill:e.trackBackgroundColor,stroke:e.trackBorderColor,"stroke-width":e.trackBorderWidth});let n=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-xi(0,n),y:-xi(0,n)}),this.scrollbarGroup=t.g().add(s),this.scrollbar=t.rect().addClass("highcharts-scrollbar-thumb").attr({height:i-n,width:i-n,r:e.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=t.path(Ci.swapXY([["M",-3,i/4],["L",-3,2*i/3],["M",0,i/4],["L",0,2*i/3],["M",3,i/4],["L",3,2*i/3]],e.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),r||(this.scrollbar.attr({fill:e.barBackgroundColor,stroke:e.barBorderColor,"stroke-width":e.barBorderWidth}),this.scrollbarRifles.attr({stroke:e.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-xi(0,this.scrollbarStrokeWidth),-xi(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(t,e){let i,r,s=this.options,n=s.vertical,o=s.minWidth,a=this.barWidth,l=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!wi(a))return;let h=a*Math.min(e,1);i=Math.ceil(a*(t=Math.max(t,0))),this.calculatedWidth=r=bi(h-i),r<o&&(i=(a-o+r)*t,r=o);let c=Math.floor(i+this.xOffset+this.yOffset),d=r/2-.5;this.from=t,this.to=e,n?(this.scrollbarGroup[l]({translateY:c}),this.scrollbar[l]({height:r}),this.scrollbarRifles[l]({translateY:d}),this.scrollbarTop=c,this.scrollbarLeft=0):(this.scrollbarGroup[l]({translateX:c}),this.scrollbar[l]({width:r}),this.scrollbarRifles[l]({translateX:d}),this.scrollbarLeft=c,this.scrollbarTop=0),r<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),!1===s.showFull&&(t<=0&&e>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(t){return Ai(this.options.liveRedraw,w().svg&&!w().isTouchDevice&&!this.chart.boosted)||"mouseup"===t||"touchend"===t||!wi(t)}trackClick(t){let e=this.chart.pointer?.normalize(t)||t,i=this.to-this.from,r=this.y+this.scrollbarTop,s=this.x+this.scrollbarLeft;this.options.vertical&&e.chartY>r||!this.options.vertical&&e.chartX>s?this.updatePosition(this.from+i,this.to+i):this.updatePosition(this.from-i,this.to-i),Ti(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:t})}update(t){this.destroy(),this.init(this.chart.renderer,Si(!0,this.options,t),this.chart)}updatePosition(t,e){e>1&&(t=bi(1-bi(e-t)),e=1),t<0&&(e=bi(e-t),t=0),this.from=t,this.to=e}}Ci.defaultOptions=mi,yi.scrollbar=Si(!0,Ci.defaultOptions,yi.scrollbar);var Ii=v(540),Pi=v.n(Ii);let{defaultOptions:Mi}=w(),{isTouchDevice:Li}=w(),{prototype:{symbols:Oi}}=Pi(),{addEvent:Ni,clamp:_i,correctFloat:Di,defined:Ri,destroyObjectProperties:Fi,erase:Bi,extend:zi,find:Ui,fireEvent:Hi,isArray:Vi,isNumber:ji,merge:Gi,pick:Wi,removeEvent:Xi,splat:qi}=w();function Yi(t,...e){let i=[].filter.call(e,ji);if(i.length)return Math[t].apply(0,i)}class Ki{static compose(t,e,i){(function(t,e){if(w().pushUnique(Te,t)){let i=t.prototype;d=e,i.callbacks.push(Pe),xe(t,"afterAddSeries",Se),xe(t,"afterSetChartSize",Ae),xe(t,"afterUpdate",ke),xe(t,"beforeRender",Ce),xe(t,"beforeShowResetZoom",Ie),xe(t,"update",Me)}})(t,Ki),function(t,e,i){ze.compose(e),li(ri,"Navigator")&&(t.prototype.setFixedRange=ni,ai(si().prototype.symbols,Ze),oi(i,"afterUpdate",hi),ii({navigator:Xe}))}(t,e,i)}constructor(t){this.isDirty=!1,this.scrollbarHeight=0,this.init(t)}drawHandle(t,e,i,r){let s=this.navigatorOptions.handles.height;this.handles[e][r](i?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(t,10)+.5-s)}:{translateX:Math.round(this.left+parseInt(t,10)),translateY:Math.round(this.top+this.height/2-s/2-1)})}drawOutline(t,e,i,r){let s,n,o=this.navigatorOptions.maskInside,a=this.outline.strokeWidth(),l=a/2,h=a%2/2,c=this.scrollButtonSize,d=this.size,u=this.top,p=this.height,f=u-l,g=u+p,m=this.left;i?(s=u+e+h,n=[["M",m+p,u-c-h],["L",m+p,s],["L",m,s],["M",m,e=u+t+h],["L",m+p,e],["L",m+p,u+d+c]],o&&n.push(["M",m+p,s-l],["L",m+p,e+l])):(m-=c,n=[["M",m,f],["L",t+=m+c-h,f],["L",t,g],["M",e+=m+c-h,g],["L",e,f],["L",m+d+2*c,f]],o&&n.push(["M",t-l,f],["L",e+l,f])),this.outline[r]({d:n})}drawMasks(t,e,i,r){let s,n,o,a,l=this.left,h=this.top,c=this.height;i?(o=[l,l,l],a=[h,h+t,h+e],n=[c,c,c],s=[t,e-t,this.size-e]):(o=[l,l+t,l+e],a=[h,h,h],n=[t,e-t,this.size-e],s=[c,c,c]),this.shades.forEach(((t,e)=>{t[r]({x:o[e],y:a[e],width:n[e],height:s[e]})}))}renderElements(){let t=this,e=t.navigatorOptions,i=e.maskInside,r=t.chart,s=r.inverted,n=r.renderer,o={cursor:s?"ns-resize":"ew-resize"},a=t.navigatorGroup??(t.navigatorGroup=n.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!i,i,!i].forEach(((i,s)=>{let l=t.shades[s]??(t.shades[s]=n.rect().addClass("highcharts-navigator-mask"+(1===s?"-inside":"-outside")).add(a));r.styledMode||(l.attr({fill:i?e.maskFill:"rgba(0,0,0,0)"}),1===s&&l.css(o))})),t.outline||(t.outline=n.path().addClass("highcharts-navigator-outline").add(a)),r.styledMode||t.outline.attr({"stroke-width":e.outlineWidth,stroke:e.outlineColor}),e.handles?.enabled){let i=e.handles,{height:s,width:l}=i;[0,1].forEach((e=>{let h=i.symbols[e];if(t.handles[e]&&t.handles[e].symbolUrl===h){if(!t.handles[e].isImg&&t.handles[e].symbolName!==h){let i=Oi[h].call(Oi,-l/2-1,0,l,s);t.handles[e].attr({d:i}),t.handles[e].symbolName=h}}else t.handles[e]?.destroy(),t.handles[e]=n.symbol(h,-l/2-1,0,l,s,i),t.handles[e].attr({zIndex:7-e}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][e]).add(a),t.addMouseEvents();r.inverted&&t.handles[e].attr({rotation:90,rotationOriginX:Math.floor(-l/2),rotationOriginY:(s+l)/2}),r.styledMode||t.handles[e].attr({fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.lineWidth,width:i.width,height:i.height,x:-l/2-1,y:0}).css(o)}))}}update(t,e=!1){let i=this.chart,r=i.options.chart.inverted!==i.scrollbar?.options.vertical;if(Gi(!0,i.options.navigator,t),this.navigatorOptions=i.options.navigator||{},this.setOpposite(),Ri(t.enabled)||r)return this.destroy(),this.navigatorEnabled=t.enabled||this.navigatorEnabled,this.init(i);if(this.navigatorEnabled&&(this.isDirty=!0,!1===t.adaptToUpdatedData&&this.baseSeries.forEach((t=>{Xi(t,"updatedData",this.updatedDataHandler)}),this),t.adaptToUpdatedData&&this.baseSeries.forEach((t=>{t.eventsToUnbind.push(Ni(t,"updatedData",this.updatedDataHandler))}),this),(t.series||t.baseSeries)&&this.setBaseSeries(void 0,!1),t.height||t.xAxis||t.yAxis)){this.height=t.height??this.height;let e=this.getXAxisOffsets();this.xAxis.update({...t.xAxis,offsets:e,[i.inverted?"width":"height"]:this.height,[i.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...t.yAxis,[i.inverted?"width":"height"]:this.height},!1)}e&&i.redraw()}render(t,e,i,r){let s,n,o,a,l,h=this.chart,c=this.xAxis,d=c.pointRange||0,u=c.navigatorAxis.fake?h.xAxis[0]:c,p=this.navigatorEnabled,f=this.rendered,g=h.inverted,m=h.xAxis[0].minRange,y=h.xAxis[0].options.maxRange,v=this.scrollButtonSize,b=this.scrollbarHeight;if(this.hasDragged&&!Ri(i))return;if(this.isDirty&&this.renderElements(),t=Di(t-d/2),e=Di(e+d/2),!ji(t)||!ji(e)){if(!f)return;i=0,r=Wi(c.width,u.width)}this.left=Wi(c.left,h.plotLeft+v+(g?h.plotWidth:0));let x=this.size=a=Wi(c.len,(g?h.plotHeight:h.plotWidth)-2*v);s=g?b:a+2*v,i=Wi(i,c.toPixels(t,!0)),r=Wi(r,c.toPixels(e,!0)),ji(i)&&Math.abs(i)!==1/0||(i=0,r=s);let w=c.toValue(i,!0),E=c.toValue(r,!0),T=Math.abs(Di(E-w));T<m?this.grabbedLeft?i=c.toPixels(E-m-d,!0):this.grabbedRight&&(r=c.toPixels(w+m+d,!0)):Ri(y)&&Di(T-d)>y&&(this.grabbedLeft?i=c.toPixels(E-y-d,!0):this.grabbedRight&&(r=c.toPixels(w+y+d,!0))),this.zoomedMax=_i(Math.max(i,r),0,x),this.zoomedMin=_i(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(i,r),0,x),this.range=this.zoomedMax-this.zoomedMin,x=Math.round(this.zoomedMax);let S=Math.round(this.zoomedMin);p&&(this.navigatorGroup.attr({visibility:"inherit"}),l=f&&!this.hasDragged?"animate":"attr",this.drawMasks(S,x,g,l),this.drawOutline(S,x,g,l),this.navigatorOptions.handles.enabled&&(this.drawHandle(S,0,g,l),this.drawHandle(x,1,g,l))),this.scrollbar&&(g?(o=this.top-v,n=this.left-b+(p||!u.opposite?0:(u.titleOffset||0)+u.axisTitleMargin),b=a+2*v):(o=this.top+(p?this.height:-b),n=this.left-v),this.scrollbar.position(n,o,s,b),this.scrollbar.setRange(this.zoomedMin/(a||1),this.zoomedMax/(a||1))),this.rendered=!0,this.isDirty=!1,Hi(this,"afterRender")}addMouseEvents(){let t,e,i=this,r=i.chart,s=r.container,n=[];i.mouseMoveHandler=t=function(t){i.onMouseMove(t)},i.mouseUpHandler=e=function(t){i.onMouseUp(t)},(n=i.getPartsEvents("mousedown")).push(Ni(r.renderTo,"mousemove",t),Ni(s.ownerDocument,"mouseup",e),Ni(r.renderTo,"touchmove",t),Ni(s.ownerDocument,"touchend",e)),n.concat(i.getPartsEvents("touchstart")),i.eventsToUnbind=n,i.series&&i.series[0]&&n.push(Ni(i.series[0].xAxis,"foundExtremes",(function(){r.navigator.modifyNavigatorAxisExtremes()})))}getPartsEvents(t){let e=this,i=[];return["shades","handles"].forEach((function(r){e[r].forEach((function(s,n){i.push(Ni(s.element,t,(function(t){e[r+"Mousedown"](t,n)})))}))})),i}shadesMousedown(t,e){t=this.chart.pointer?.normalize(t)||t;let i,r,s,n,o=this.chart,a=this.xAxis,l=this.zoomedMin,h=this.size,c=this.range,d=this.left,u=t.chartX;o.inverted&&(u=t.chartY,d=this.top),1===e?(this.grabbedCenter=u,this.fixedWidth=c,this.dragOffset=u-l):(n=u-d-c/2,0===e?n=Math.max(0,n):2===e&&n+c>=h&&(n=h-c,this.reversedExtremes?(n-=c,r=this.getUnionExtremes().dataMin):i=this.getUnionExtremes().dataMax),n!==l&&(this.fixedWidth=c,Ri((s=a.navigatorAxis.toFixedRange(n,n+c,r,i)).min)&&Hi(this,"setRange",{min:Math.min(s.min,s.max),max:Math.max(s.min,s.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(t,e){t=this.chart.pointer?.normalize(t)||t;let i=this.chart,r=i.xAxis[0],s=this.reversedExtremes;0===e?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=s?r.min:r.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=s?r.max:r.min),i.setFixedRange(void 0)}onMouseMove(t){let e,i=this,r=i.chart,s=i.navigatorSize,n=i.range,o=i.dragOffset,a=r.inverted,l=i.left;(!t.touches||0!==t.touches[0].pageX)&&(e=(t=r.pointer?.normalize(t)||t).chartX,a&&(l=i.top,e=t.chartY),i.grabbedLeft?(i.hasDragged=!0,i.render(0,0,e-l,i.otherHandlePos)):i.grabbedRight?(i.hasDragged=!0,i.render(0,0,i.otherHandlePos,e-l)):i.grabbedCenter&&(i.hasDragged=!0,e<o?e=o:e>s+o-n&&(e=s+o-n),i.render(0,0,e-o,e-o+n)),i.hasDragged&&i.scrollbar&&Wi(i.scrollbar.options.liveRedraw,!Li&&!this.chart.boosted)&&(t.DOMType=t.type,setTimeout((function(){i.onMouseUp(t)}),0)))}onMouseUp(t){let e,i,r,s,n,o,a=this.chart,l=this.xAxis,h=this.scrollbar,c=t.DOMEvent||t,d=a.inverted,u=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!h||!h.hasDragged)||"scrollbar"===t.trigger)&&(r=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?s=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(n=this.fixedExtreme),this.zoomedMax===this.size&&(n=this.reversedExtremes?r.dataMin:r.dataMax),0===this.zoomedMin&&(s=this.reversedExtremes?r.dataMax:r.dataMin),Ri((o=l.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,s,n)).min)&&Hi(this,"setRange",{min:Math.min(o.min,o.max),max:Math.max(o.min,o.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:c}})),"mousemove"!==t.DOMType&&"touchmove"!==t.DOMType&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&ji(this.zoomedMin)&&ji(this.zoomedMax)&&(i=Math.round(this.zoomedMin),e=Math.round(this.zoomedMax),this.shades&&this.drawMasks(i,e,d,u),this.outline&&this.drawOutline(i,e,d,u),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(i,0,d,u),this.drawHandle(e,1,d,u)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach((function(t){t()})),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let t=this.baseSeries||[];this.navigatorEnabled&&t[0]&&(!1!==this.navigatorOptions.adaptToUpdatedData&&t.forEach((function(t){Xi(t,"updatedData",this.updatedDataHandler)}),this),t[0].xAxis&&Xi(t[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(t){let e=t.options,i=e.navigator||{},r=i.enabled,s=e.scrollbar||{},n=s.enabled,o=r&&i.height||0,a=n&&s.height||0,l=s.buttonsEnabled&&a||0;this.handles=[],this.shades=[],this.chart=t,this.setBaseSeries(),this.height=o,this.scrollbarHeight=a,this.scrollButtonSize=l,this.scrollbarEnabled=n,this.navigatorEnabled=r,this.navigatorOptions=i,this.scrollbarOptions=s,this.setOpposite();let h=this,c=h.baseSeries,d=t.xAxis.length,u=t.yAxis.length,p=c&&c[0]&&c[0].xAxis||t.xAxis[0]||{options:{}};if(t.isDirtyBox=!0,h.navigatorEnabled){let e=this.getXAxisOffsets();h.xAxis=new(ve())(t,Gi({breaks:p.options.breaks,ordinal:p.options.ordinal,overscroll:p.options.overscroll},i.xAxis,{type:"datetime",yAxis:i.yAxis?.id,index:d,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:p.options.ordinal?0:p.options.minPadding,maxPadding:p.options.ordinal?0:p.options.maxPadding,zoomEnabled:!1},t.inverted?{offsets:e,width:o}:{offsets:e,height:o}),"xAxis"),h.yAxis=new(ve())(t,Gi(i.yAxis,{alignTicks:!1,offset:0,index:u,isInternal:!0,reversed:Wi(i.yAxis&&i.yAxis.reversed,t.yAxis[0]&&t.yAxis[0].reversed,!1),zoomEnabled:!1},t.inverted?{width:o}:{height:o}),"yAxis"),c||i.series.data?h.updateNavigatorSeries(!1):0===t.series.length&&(h.unbindRedraw=Ni(t,"beforeRedraw",(function(){t.series.length>0&&!h.series&&(h.setBaseSeries(),h.unbindRedraw())}))),h.reversedExtremes=t.inverted&&!h.xAxis.reversed||!t.inverted&&h.xAxis.reversed,h.renderElements(),h.addMouseEvents()}else h.xAxis={chart:t,navigatorAxis:{fake:!0},translate:function(e,i){let r=t.xAxis[0],s=r.getExtremes(),n=r.len-2*l,o=Yi("min",r.options.min,s.dataMin),a=Yi("max",r.options.max,s.dataMax)-o;return i?e*a/n+o:n*(e-o)/a},toPixels:function(t){return this.translate(t)},toValue:function(t){return this.translate(t,!0)}},h.xAxis.navigatorAxis.axis=h.xAxis,h.xAxis.navigatorAxis.toFixedRange=ze.prototype.toFixedRange.bind(h.xAxis.navigatorAxis);if(t.options.scrollbar.enabled){let e=Gi(t.options.scrollbar,{vertical:t.inverted});!ji(e.margin)&&h.navigatorEnabled&&(e.margin=t.inverted?-3:3),t.scrollbar=h.scrollbar=new Ci(t.renderer,e,t),Ni(h.scrollbar,"changed",(function(t){let e=h.size,i=e*this.to,r=e*this.from;h.hasDragged=h.scrollbar.hasDragged,h.render(0,0,r,i),this.shouldUpdateExtremes(t.DOMType)&&setTimeout((function(){h.onMouseUp(t)}))}))}h.addBaseSeriesEvents(),h.addChartEvents()}setOpposite(){let t=this.navigatorOptions,e=this.navigatorEnabled,i=this.chart;this.opposite=Wi(t.opposite,!(e||!i.inverted))}getUnionExtremes(t){let e,i=this.chart.xAxis[0],r=this.chart.time,s=this.xAxis,n=s.options,o=i.options;return t&&null===i.dataMin||(e={dataMin:Wi(r.parse(n?.min),Yi("min",r.parse(o.min),i.dataMin,s.dataMin,s.min)),dataMax:Wi(r.parse(n?.max),Yi("max",r.parse(o.max),i.dataMax,s.dataMax,s.max))}),e}setBaseSeries(t,e){let i=this.chart,r=this.baseSeries=[];t=t||i.options&&i.options.navigator.baseSeries||(i.series.length?Ui(i.series,(t=>!t.options.isInternal)).index:0),(i.series||[]).forEach(((e,i)=>{!e.options.isInternal&&(e.options.showInNavigator||(i===t||e.options.id===t)&&!1!==e.options.showInNavigator)&&r.push(e)})),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,e)}updateNavigatorSeries(t,e){let i,r,s,n=this,o=n.chart,a=n.baseSeries,l={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:this.navigatorOptions.xAxis?.id,yAxis:this.navigatorOptions.yAxis?.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},h=n.series=(n.series||[]).filter((t=>{let e=t.baseSeries;return!(0>a.indexOf(e)&&(e&&(Xi(e,"updatedData",n.updatedDataHandler),delete e.navigatorSeries),t.chart&&t.destroy(),1))})),c=n.navigatorOptions.series;a&&a.length&&a.forEach((t=>{let d=t.navigatorSeries,u=zi({color:t.color,visible:t.visible},Vi(c)?Mi.navigator.series:c);if(d&&!1===n.navigatorOptions.adaptToUpdatedData)return;l.name="Navigator "+a.length,s=(i=t.options||{}).navigatorOptions||{},u.dataLabels=qi(u.dataLabels),(r=Gi(i,l,u,s)).pointRange=Wi(u.pointRange,s.pointRange,Mi.plotOptions[r.type||"line"].pointRange);let p=s.data||u.data;n.hasNavigatorData=n.hasNavigatorData||!!p,r.data=p||i.data?.slice(0),d&&d.options?d.update(r,e):(t.navigatorSeries=o.initSeries(r),o.setSortedData(),t.navigatorSeries.baseSeries=t,h.push(t.navigatorSeries))})),(c.data&&!(a&&a.length)||Vi(c))&&(n.hasNavigatorData=!1,(c=qi(c)).forEach(((t,e)=>{l.name="Navigator "+(h.length+1),(r=Gi(Mi.navigator.series,{color:o.series[e]&&!o.series[e].options.isInternal&&o.series[e].color||o.options.colors[e]||o.options.colors[0]},l,t)).data=t.data,r.data&&(n.hasNavigatorData=!0,h.push(o.initSeries(r)))}))),t&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let t=this,e=t.baseSeries||[];e[0]&&e[0].xAxis&&e[0].eventsToUnbind.push(Ni(e[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),e.forEach((i=>{i.eventsToUnbind.push(Ni(i,"show",(function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)}))),i.eventsToUnbind.push(Ni(i,"hide",(function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)}))),!1!==this.navigatorOptions.adaptToUpdatedData&&i.xAxis&&i.eventsToUnbind.push(Ni(i,"updatedData",this.updatedDataHandler)),i.eventsToUnbind.push(Ni(i,"remove",(function(){e&&Bi(e,i),this.navigatorSeries&&t.series&&(Bi(t.series,this.navigatorSeries),Ri(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)})))}))}getBaseSeriesMin(t){return this.baseSeries.reduce((function(t,e){return Math.min(t,e.getColumn("x")[0]??t)}),t)}modifyNavigatorAxisExtremes(){let t=this.xAxis;if(void 0!==t.getExtremes){let e=this.getUnionExtremes(!0);e&&(e.dataMin!==t.min||e.dataMax!==t.max)&&(t.min=e.dataMin,t.max=e.dataMax)}}modifyBaseAxisExtremes(){let t,e,i=this.chart.navigator,r=this.getExtremes(),s=r.min,n=r.max,o=r.dataMin,a=r.dataMax,l=n-s,h=i.stickToMin,c=i.stickToMax,d=Wi(this.ordinal?.convertOverscroll(this.options.overscroll),0),u=i.series&&i.series[0],p=!!this.setExtremes;!(this.eventArgs&&"rangeSelectorButton"===this.eventArgs.trigger)&&(h&&(t=(e=o)+l),c&&(t=a+d,h||(e=Math.max(o,t-l,i.getBaseSeriesMin(u&&u.xData?u.xData[0]:-Number.MAX_VALUE)))),p&&(h||c)&&ji(e)&&(this.min=this.userMin=e,this.max=this.userMax=t)),i.stickToMin=i.stickToMax=null}updatedDataHandler(){let t=this.chart.navigator,e=this.navigatorSeries,i=t.reversedExtremes?0===Math.round(t.zoomedMin):Math.round(t.zoomedMax)>=Math.round(t.size);t.stickToMax=Wi(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,i),t.stickToMin=t.shouldStickToMin(this,t),e&&!t.hasNavigatorData&&(e.options.pointStart=this.getColumn("x")[0],e.setData(this.options.data,!1,null,!1))}shouldStickToMin(t,e){let i=e.getBaseSeriesMin(t.getColumn("x")[0]),r=t.xAxis,s=r.max,n=r.min,o=r.options.range;return!(!ji(s)||!ji(n))&&(o&&s-i>0?s-i<o:n<=i)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(Ni(this.chart,"redraw",(function(){let t=this.navigator,e=t&&(t.baseSeries&&t.baseSeries[0]&&t.baseSeries[0].xAxis||this.xAxis[0]);e&&t.render(e.min,e.max)})),Ni(this.chart,"getMargins",(function(){let t=this.navigator,e=t.opposite?"plotTop":"marginBottom";this.inverted&&(e=t.opposite?"marginRight":"plotLeft"),this[e]=(this[e]||0)+(t.navigatorEnabled||!this.inverted?t.height+t.scrollbarHeight:0)+t.navigatorOptions.margin})),Ni(Ki,"setRange",(function(t){this.chart.xAxis[0].setExtremes(t.min,t.max,t.redraw,t.animation,t.eventArguments)})))}destroy(){this.removeEvents(),this.xAxis&&(Bi(this.chart.xAxis,this.xAxis),Bi(this.chart.axes,this.xAxis)),this.yAxis&&(Bi(this.chart.yAxis,this.yAxis),Bi(this.chart.axes,this.yAxis)),(this.series||[]).forEach((t=>{t.destroy&&t.destroy()})),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach((t=>{this[t]&&this[t].destroy&&this[t].destroy(),this[t]=null})),[this.handles].forEach((t=>{Fi(t)})),this.navigatorEnabled=!1}}let{animObject:$i}=w(),{format:Qi}=M(),{clamp:Zi,pick:Ji,syncTimeout:tr}=w(),{getFakeMouseEvent:er}=I,{getAxisRangeDescription:ir,fireEventOnWrappedOrUnwrappedElement:rr}=V,sr=class extends ${init(){let t=this.chart,e=this;this.announcer=new pt(t,"polite"),this.addEvent(Ki,"afterRender",(function(){this.chart===e.chart&&this.chart.renderer&&tr((()=>{e.proxyProvider.updateGroupProxyElementPositions("navigator"),e.updateHandleValues()}),$i(Ji(this.chart.renderer.globalAnimation,!0)).duration)}))}onChartUpdate(){let t=this.chart,e=t.options,i=e.navigator;if(i.enabled&&i.accessibility?.enabled){let i=e.accessibility.landmarkVerbosity,r=e.lang.accessibility?.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:"all"===i?"region":"group","aria-label":Qi(r,{chart:t},t)});let s=e.lang.accessibility?.navigator.handleLabel;[0,1].forEach((e=>{let i=this.getHandleByIx(e);if(i){let r=this.proxyProvider.addProxyElement("navigator",{click:i},"input",{type:"range","aria-label":Qi(s,{handleIx:e,chart:t},t)});this[e?"maxHandleProxy":"minHandleProxy"]=r.innerElement,r.innerElement.style.pointerEvents="none",r.innerElement.oninput=()=>this.updateNavigator()}})),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(t){let e=this,i=this.chart,r=t?this.maxHandleProxy:this.minHandleProxy,s=this.keyCodes;return new Z(i,{keyCodeMap:[[[s.left,s.right,s.up,s.down],function(n){if(r){let o=n===s.left||n===s.up?-1:1;r.value=""+Zi(parseFloat(r.value)+o,0,100),e.updateNavigator((()=>{let s=e.getHandleByIx(t);s&&i.setFocusToElement(s,r)}))}return this.response.success}]],init:()=>{i.setFocusToElement(this.getHandleByIx(t),r)},validate:()=>!!(this.getHandleByIx(t)&&r&&i.options.navigator.accessibility?.enabled)})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let t=this.chart.navigator;if(t&&this.minHandleProxy&&this.maxHandleProxy){let e=t.size;this.minHandleProxy.value=""+Math.round(t.zoomedMin/e*100),this.maxHandleProxy.value=""+Math.round(t.zoomedMax/e*100)}}getHandleByIx(t){let e=this.chart.navigator;return e&&e.handles&&e.handles[t]}updateNavigator(t){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((t=>{let e=this.chart,{navigator:i,pointer:r}=e;if(i&&r&&this.minHandleProxy&&this.maxHandleProxy){let s=r.getChartPosition(),n=parseFloat(this.minHandleProxy.value)/100*i.size,o=parseFloat(this.maxHandleProxy.value)/100*i.size;[[0,"mousedown",i.zoomedMin],[0,"mousemove",n],[0,"mouseup",n],[1,"mousedown",i.zoomedMax],[1,"mousemove",o],[1,"mouseup",o]].forEach((([t,e,r])=>{let n=this.getHandleByIx(t)?.element;n&&rr(n,er(e,{x:s.left+i.left+r,y:s.top+i.top},n))})),t&&t();let a=e.options.lang.accessibility?.navigator.changeAnnouncement,l=ir(e.xAxis[0]);this.announcer.announce(Qi(a,{axisRangeDescription:l,chart:e},e))}}).bind(this,t),20)}},{getPointAnnotationTexts:nr}=xt,{getAxisDescription:or,getSeriesFirstPointElement:ar,getSeriesA11yElement:lr,unhideChartElementFromAT:hr}=V,{format:cr,numberFormat:dr}=M(),{reverseChildNodes:ur,stripHTMLTagsFromString:pr}=I,{find:fr,isNumber:gr,isString:mr,pick:yr,defined:vr}=w();function br(t){let e=t.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(!1!==e&&t.points&&t.points.length>=+e)}function xr(t,e){let i=t.series,r=i.chart,s=r.options.accessibility.point||{},n=i.options.accessibility&&i.options.accessibility.point||{},o=i.tooltipOptions||{},a=r.options.lang;return gr(e)?dr(e,n.valueDecimals||s.valueDecimals||o.valueDecimals||-1,a.decimalPoint,a.accessibility.thousandsSep||a.thousandsSep):e}function wr(t,e){let i=t[e];return t.chart.langFormat("accessibility.series."+e+"Description",{name:or(i),series:t})}function Er(t){let e=t.series,i=e.chart.series.length>1||e.options.name,r=function(t){let e=t.series,i=e.chart,r=e.options.accessibility,s=r&&r.point&&r.point.valueDescriptionFormat||i.options.accessibility.point.valueDescriptionFormat,n=yr(e.xAxis&&e.xAxis.options.accessibility&&e.xAxis.options.accessibility.enabled,!i.angular&&"flowmap"!==e.type),o=n?function(t){let e=function(t){let e=t.series,i=e.chart,r=e.options.accessibility&&e.options.accessibility.point||{},s=i.options.accessibility.point||{},n=e.xAxis&&e.xAxis.dateTime;if(n){let e=n.getXDateFormat(t.x||0,i.options.tooltip.dateTimeLabelFormats),o=r.dateFormatter&&r.dateFormatter(t)||s.dateFormatter&&s.dateFormatter(t)||r.dateFormat||s.dateFormat||e;return i.time.dateFormat(o,t.x||0,void 0)}}(t),i=(t.series.xAxis||{}).categories&&vr(t.category)&&(""+t.category).replace("<br/>"," "),r=vr(t.id)&&0>(""+t.id).indexOf("highcharts-"),s="x, "+t.x;return t.name||e||i||(r?t.id:s)}(t):"";return cr(s,{point:t,index:vr(t.index)?t.index+1:"",xDescription:o,value:function(t){let e=t.series,i=e.chart.options.accessibility.point||{},r=e.chart.options.accessibility&&e.chart.options.accessibility.point||{},s=e.tooltipOptions||{},n=r.valuePrefix||i.valuePrefix||s.valuePrefix||"",o=r.valueSuffix||i.valueSuffix||s.valueSuffix||"",a=xr(t,t[void 0!==t.value?"value":"y"]);return t.isNull?e.chart.langFormat("accessibility.series.nullPointValue",{point:t}):e.pointArrayMap?function(t,e,i){let r=e||"",s=i||"",n=function(e){let i=xr(t,yr(t[e],t.options[e]));return void 0!==i?e+": "+r+i+s:i};return t.series.pointArrayMap.reduce((function(t,e){let i=n(e);return i?t+(t.length?", ":"")+i:t}),"")}(t,n,o):n+a+o}(t),separator:n?", ":""},i)}(t),s=t.options&&t.options.accessibility&&t.options.accessibility.description,n=i?" "+e.name+".":"",o=function(t){let e=t.series.chart,i=nr(t);return i.length?e.langFormat("accessibility.series.pointAnnotationsDescription",{point:t,annotations:i}):""}(t);return t.accessibility=t.accessibility||{},t.accessibility.valueDescription=r,r+(s?" "+s:"")+n+(o?" "+o:"")}function Tr(t){let e=t.chart,i=e.types||[],r=function(t){let e=(t.options.accessibility||{}).description;return e&&t.chart.langFormat("accessibility.series.description",{description:e,series:t})||""}(t),s=function(i){return e[i]&&e[i].length>1&&t[i]},n=t.index+1,o=wr(t,"xAxis"),a=wr(t,"yAxis"),l={seriesNumber:n,series:t,chart:e},h=i.length>1?"Combination":"",c=e.langFormat("accessibility.series.summary."+t.type+h,l)||e.langFormat("accessibility.series.summary.default"+h,l),d=(s("yAxis")?" "+a+".":"")+(s("xAxis")?" "+o+".":"");return cr(yr(t.options.accessibility&&t.options.accessibility.descriptionFormat,e.options.accessibility.series.descriptionFormat,""),{seriesDescription:c,authorDescription:r?" "+r:"",axisDescription:d,series:t,chart:e,seriesNumber:n},void 0)}let Sr={defaultPointDescriptionFormatter:Er,defaultSeriesDescriptionFormatter:Tr,describeSeries:function(t){let e=t.chart,i=ar(t),r=lr(t),s=e.is3d&&e.is3d();r&&(r.lastChild!==i||s||ur(r),function(t){let e=function(t){let e=t.options.accessibility||{};return!br(t)&&!e.exposeAsGroupOnly}(t),i=function(t){let e=t.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!(!t.points||!(t.points.length<+e.pointNavigationEnabledThreshold||!1===e.pointNavigationEnabledThreshold))}(t),r=t.chart.options.accessibility.point.describeNull;(e||i)&&t.points.forEach((i=>{let s=i.graphic&&i.graphic.element||function(t){let e=t.series,i=e&&e.chart,r=e&&e.is("sunburst"),s=t.isNull,n=i&&i.options.accessibility.point.describeNull;return s&&!r&&n}(i)&&function(t){let e=t.series,i=function(t){let e=t.index;return t.series&&t.series.data&&vr(e)&&fr(t.series.data,(function(t){return!!(t&&void 0!==t.index&&t.index>e&&t.graphic&&t.graphic.element)}))||null}(t),r=i&&i.graphic,s=r?r.parentGroup:e.graph||e.group,n=function(t,e){let i=t.series.chart.renderer.rect(e.x,e.y,1,1);return i.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),i}(t,i?{x:yr(t.plotX,i.plotX,0),y:yr(t.plotY,i.plotY,0)}:{x:yr(t.plotX,0),y:yr(t.plotY,0)});if(s&&s.element)return t.graphic=n,t.hasMockGraphic=!0,n.add(s),s.element.insertBefore(n.element,r?r.element:null),n.element}(i),n=i.options&&i.options.accessibility&&!1===i.options.accessibility.enabled;if(s){if(i.isNull&&!r)return void s.setAttribute("aria-hidden",!0);s.setAttribute("tabindex","-1"),t.chart.styledMode||(s.style.outline="none"),e&&!n?function(t,e){let i=t.series,r=i.options.accessibility?.point||{},s=i.chart.options.accessibility.point||{},n=pr(mr(r.descriptionFormat)&&cr(r.descriptionFormat,t,i.chart)||r.descriptionFormatter?.(t)||mr(s.descriptionFormat)&&cr(s.descriptionFormat,t,i.chart)||s.descriptionFormatter?.(t)||Er(t),i.chart.renderer.forExport);e.setAttribute("role","img"),e.setAttribute("aria-label",n)}(i,s):s.setAttribute("aria-hidden",!0)}}))}(t),hr(e,r),function(t){let e=t.chart,i=e.options.chart,r=i.options3d&&i.options3d.enabled,s=e.series.length>1,n=e.options.accessibility.series.describeSingleSeries,o=(t.options.accessibility||{}).exposeAsGroupOnly;return!(r&&s)&&(s||n||o||br(t))}(t)?function(t,e){let i=t.options.accessibility||{},r=t.chart.options.accessibility,s=r.landmarkVerbosity;i.exposeAsGroupOnly?e.setAttribute("role","img"):"all"===s?e.setAttribute("role","region"):e.setAttribute("role","group"),e.setAttribute("tabindex","-1"),t.chart.styledMode||(e.style.outline="none"),e.setAttribute("aria-label",pr(r.series.descriptionFormatter&&r.series.descriptionFormatter(t)||Tr(t),t.chart.renderer.forExport))}(t,r):r.removeAttribute("aria-label"))}},{composed:Ar}=w(),{addEvent:kr,defined:Cr,pushUnique:Ir}=w(),{getChartTitle:Pr}=V,{defaultPointDescriptionFormatter:Mr,defaultSeriesDescriptionFormatter:Lr}=Sr;function Or(t){return!!t.options.accessibility.announceNewData.enabled}class Nr{constructor(t){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=t}init(){let t=this.chart,e=t.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new q,this.announcer=new pt(t,e),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let t=this,e=this.chart,i=this.eventProvider;i.addEvent(e,"afterApplyDrilldown",(function(){t.lastAnnouncementTime=0})),i.addEvent(e,"afterAddSeries",(function(e){t.onSeriesAdded(e.series)})),i.addEvent(e,"redraw",(function(){t.announceDirtyData()}))}onSeriesAdded(t){Or(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[t.name+t.index]=t,this.dirty.newSeries=Cr(this.dirty.newSeries)?void 0:t)}announceDirtyData(){let t=this.chart,e=this;if(t.options.accessibility.announceNewData&&this.dirty.hasDirty){let t=this.dirty.newPoint;t&&(t=function(t){let e=t.series.data.filter((e=>t.x===e.x&&t.y===e.y));return 1===e.length?e[0]:t}(t)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map((t=>e.dirty.allSeries[t])),this.dirty.newSeries,t),this.dirty={allSeries:{}}}}queueAnnouncement(t,e,i){let r=this.chart.options.accessibility.announceNewData;if(r.enabled){let s=+new Date,n=s-this.lastAnnouncementTime,o=Math.max(0,r.minAnnounceInterval-n),a=function(t,e){let i=(t||[]).concat(e||[]).reduce(((t,e)=>(t[e.name+e.index]=e,t)),{});return Object.keys(i).map((t=>i[t]))}(this.queuedAnnouncement&&this.queuedAnnouncement.series,t),l=this.buildAnnouncementMessage(a,e,i);l&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:s,message:l,series:a},this.queuedAnnouncementTimer=setTimeout((()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)}),o))}}buildAnnouncementMessage(t,e,i){let r=this.chart,s=r.options.accessibility.announceNewData;if(s.announcementFormatter){let r=s.announcementFormatter(t,e,i);if(!1!==r)return r.length?r:null}let n=w().charts&&w().charts.length>1?"Multiple":"Single",o=e?"newSeriesAnnounce"+n:i?"newPointAnnounce"+n:"newDataAnnounce",a=Pr(r);return r.langFormat("accessibility.announceNewData."+o,{chartTitle:a,seriesDesc:e?Lr(e):null,pointDesc:i?Mr(i):null,point:i,series:e})}}!function(t){function e(t){let e=this.chart,i=e.accessibility?.components.series.newDataAnnouncer;i&&i.chart===e&&Or(e)&&(i.dirty.newPoint=Cr(i.dirty.newPoint)?void 0:t.point)}function i(){let t=this.chart,e=t.accessibility?.components.series.newDataAnnouncer;e&&e.chart===t&&Or(t)&&(e.dirty.hasDirty=!0,e.dirty.allSeries[this.name+this.index]=this)}t.compose=function(t){Ir(Ar,"A11y.NDA")&&(kr(t,"addPoint",e),kr(t,"updatedData",i))}}(Nr||(Nr={}));let _r=Nr,{doc:Dr}=w(),{attr:Rr,css:Fr,merge:Br}=w(),{fireEventOnWrappedOrUnwrappedElement:zr}=V,{cloneMouseEvent:Ur,cloneTouchEvent:Hr,getFakeMouseEvent:Vr,removeElement:jr}=I,Gr=class{constructor(t,e,i="button",r,s){this.chart=t,this.target=e,this.eventProvider=new q;let n=this.innerElement=Dr.createElement(i),o=this.element=r?Dr.createElement(r):n;t.styledMode||this.hideElementVisually(n),r&&("li"!==r||t.styledMode||(o.style.listStyle="none"),o.appendChild(n),this.element=o),this.updateTarget(e,s)}click(){let t=this.getTargetPosition();t.x+=t.width/2,t.y+=t.height/2;let e=Vr("click",t);zr(this.target.click,e)}updateTarget(t,e){this.target=t,this.updateCSSClassName();let i=e||{};Object.keys(i).forEach((t=>{null===i[t]&&delete i[t]}));let r=this.getTargetAttr(t.click,"aria-label");Rr(this.innerElement,Br(r?{"aria-label":r}:{},i)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,t.click),this.refreshPosition()}refreshPosition(){let t=this.getTargetPosition();Fr(this.innerElement,{width:(t.width||1)+"px",height:(t.height||1)+"px",left:(Math.round(t.x)||0)+"px",top:(Math.round(t.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),jr(this.element)}updateCSSClassName(){let t=t=>t.indexOf("highcharts-no-tooltip")>-1,e=this.chart.legend,i=e.group&&e.group.div,r=t(i&&i.className||""),s=t(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=r||s?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(t,e){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach((i=>{let r=0===i.indexOf("touch");this.eventProvider.addEvent(t,i,(t=>{let i=r?Hr(t):Ur(t);e&&zr(e,i),t.stopPropagation(),r||t.preventDefault()}),{passive:!1})}))}hideElementVisually(t){Fr(t,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let t=this.target.click,e=t.element?t.element:t,i=this.target.visual||e,r=this.chart.renderTo,s=this.chart.pointer;if(r&&i?.getBoundingClientRect&&s){let t=i.getBoundingClientRect(),e=s.getChartPosition();return{x:(t.left-e.left)/e.scaleX,y:(t.top-e.top)/e.scaleY,width:t.right/e.scaleX-t.left/e.scaleX,height:t.bottom/e.scaleY-t.top/e.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(t,e){return t.element?t.element.getAttribute(e):t.getAttribute(e)}},{doc:Wr}=w(),{attr:Xr,css:qr}=w(),{unhideChartElementFromAT:Yr}=V,{removeChildNodes:Kr}=I,$r=class{constructor(t){this.chart=t,this.domElementProvider=new W,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(t,e,i="button",r){let s=this.groups[t];if(!s)throw Error("ProxyProvider.addProxyElement: Invalid group key "+t);let n="ul"===s.type||"ol"===s.type?"li":void 0,o=new Gr(this.chart,e,i,n,r);return s.proxyContainerElement.appendChild(o.element),s.proxyElements.push(o),o}addGroup(t,e="div",i){let r,s=this.groups[t];if(s)return s.groupElement;let n=this.domElementProvider.createElement(e);return i&&i.role&&"div"!==e?(r=this.domElementProvider.createElement("div")).appendChild(n):r=n,r.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+t.replace(/\W/g,"-"),this.groups[t]={proxyContainerElement:n,groupElement:r,type:e,proxyElements:[]},Xr(r,i||{}),"ul"===e&&n.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(r),this.updateGroupOrder(this.groupOrder),r}updateGroupAttrs(t,e){let i=this.groups[t];if(!i)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+t);Xr(i.groupElement,e)}updateGroupOrder(t){if(this.groupOrder=t.slice(),this.isDOMOrderGroupOrder())return;let e=t.indexOf("series"),i=e>-1?t.slice(0,e):t,r=e>-1?t.slice(e+1):[],s=Wr.activeElement;["before","after"].forEach((t=>{let e=this["before"===t?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];Kr(e),("before"===t?i:r).forEach((t=>{let i=this.groups[t];i&&e.appendChild(i.groupElement)}))})),(this.beforeChartProxyPosContainer.contains(s)||this.afterChartProxyPosContainer.contains(s))&&s&&s.focus&&s.focus()}clearGroup(t){let e=this.groups[t];if(!e)throw Error("ProxyProvider.clearGroup: Invalid group key "+t);Kr(e.proxyContainerElement)}removeGroup(t){let e=this.groups[t];e&&(this.domElementProvider.removeElement(e.groupElement),e.groupElement!==e.proxyContainerElement&&this.domElementProvider.removeElement(e.proxyContainerElement),delete this.groups[t])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(t){let e=this.groups[t];e&&e.proxyElements.forEach((t=>t.refreshPosition()))}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(t){let e=this.domElementProvider.createElement("div");return e.setAttribute("aria-hidden","false"),e.className="highcharts-a11y-proxy-container"+(t?"-"+t:""),qr(e,{top:"0",left:"0"}),this.chart.styledMode||(e.style.whiteSpace="nowrap",e.style.position="absolute"),e}getCurrentGroupOrderInDOM(){let t=t=>{let e=Object.keys(this.groups),i=e.length;for(;i--;){let r=e[i],s=this.groups[r];if(s&&t===s.groupElement)return r}},e=e=>{let i=[],r=e.children;for(let e=0;e<r.length;++e){let s=t(r[e]);s&&i.push(s)}return i},i=e(this.beforeChartProxyPosContainer),r=e(this.afterChartProxyPosContainer);return i.push("series"),i.concat(r)}isDOMOrderGroupOrder(){let t=this.getCurrentGroupOrderInDOM(),e=this.groupOrder.filter((t=>"series"===t||!!this.groups[t])),i=t.length;if(i!==e.length)return!1;for(;i--;)if(t[i]!==e[i])return!1;return!0}updatePosContainerPositions(){let t=this.chart;if(t.renderer.forExport)return;let e=t.renderer.box;t.container.insertBefore(this.afterChartProxyPosContainer,e.nextSibling),t.container.insertBefore(this.beforeChartProxyPosContainer,e),Yr(this.chart,this.afterChartProxyPosContainer),Yr(this.chart,this.beforeChartProxyPosContainer)}},{unhideChartElementFromAT:Qr,getAxisRangeDescription:Zr}=V,{addEvent:Jr,attr:ts}=w();class es extends ${init(){let t=this.chart;this.announcer=new pt(t,"polite")}onChartUpdate(){let t=this.chart,e=this,i=t.rangeSelector;i&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),i.buttons&&i.buttons.length&&i.buttons.forEach((t=>{e.setRangeButtonAttrs(t)})),i.maxInput&&i.minInput&&["minInput","maxInput"].forEach((function(r,s){let n=i[r];n&&(Qr(t,n),e.setRangeInputAttrs(n,"accessibility.rangeSelector."+(s?"max":"min")+"InputLabel"))})))}updateSelectorVisibility(){let t=this.chart,e=t.rangeSelector,i=e&&e.dropdown,r=e&&e.buttons||[],s=t=>t.setAttribute("aria-hidden",!0);e&&e.hasVisibleDropdown&&i?(Qr(t,i),r.forEach((t=>s(t.element)))):(i&&s(i),r.forEach((e=>Qr(t,e.element))))}setDropdownAttrs(){let t=this.chart,e=t.rangeSelector&&t.rangeSelector.dropdown;if(e){let i=t.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:t.options.lang.rangeSelectorZoom});e.setAttribute("aria-label",i),e.setAttribute("tabindex",-1)}}setRangeButtonAttrs(t){ts(t.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(t,e){let i=this.chart;ts(t,{tabindex:-1,"aria-label":i.langFormat(e,{chart:i})})}onButtonNavKbdArrowKey(t,e){let i=t.response,r=this.keyCodes,s=this.chart,n=s.options.accessibility.keyboardNavigation.wrapAround,o=e===r.left||e===r.up?-1:1;return s.highlightRangeSelectorButton(s.highlightedRangeSelectorItemIx+o)?i.success:n?(t.init(o),i.success):i[o>0?"next":"prev"]}onButtonNavKbdClick(t){let e=t.response,i=this.chart;return 3!==i.oldRangeSelectorItemState&&this.fakeClickEvent(i.rangeSelector.buttons[i.highlightedRangeSelectorItemIx].element),e.success}onAfterBtnClick(){let t=this.chart,e=Zr(t.xAxis[0]),i=t.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:t,axisRangeDescription:e});i&&this.announcer.announce(i)}onInputKbdMove(t){let e=this.chart,i=e.rangeSelector,r=e.highlightedInputRangeIx=(e.highlightedInputRangeIx||0)+t;if(r>1||r<0){if(e.accessibility)return e.accessibility.keyboardNavigation.exiting=!0,e.accessibility.keyboardNavigation.tabindexContainer.focus(),e.accessibility.keyboardNavigation.move(t)}else if(i){let t=i[r?"maxDateBox":"minDateBox"],s=i[r?"maxInput":"minInput"];t&&s&&e.setFocusToElement(t,s)}return!0}onInputNavInit(t){let e=this,i=this.chart,r=t>0?0:1,s=i.rangeSelector,n=s&&s[r?"maxDateBox":"minDateBox"],o=s&&s.minInput,a=s&&s.maxInput;if(i.highlightedInputRangeIx=r,n&&o&&a){i.setFocusToElement(n,r?a:o),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let t=t=>{(t.which||t.keyCode)===this.keyCodes.tab&&e.onInputKbdMove(t.shiftKey?-1:1)&&(t.preventDefault(),t.stopPropagation())},s=Jr(o,"keydown",t),l=Jr(a,"keydown",t);this.removeInputKeydownHandler=()=>{s(),l()}}}onInputNavTerminate(){let t=this.chart.rangeSelector||{};t.maxInput&&t.hideInput("max"),t.minInput&&t.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let t=this.chart,e=t.rangeSelector,i=e&&e.dropdown;e&&i&&(t.setFocusToElement(e.buttonGroup,i),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=Jr(i,"keydown",(e=>{let i=(e.which||e.keyCode)===this.keyCodes.tab,r=t.accessibility;i&&(e.preventDefault(),e.stopPropagation(),r&&r.keyboardNavigation.move(e.shiftKey?-1:1))})))}getRangeSelectorButtonNavigation(){let t=this.chart,e=this.keyCodes,i=this;return new Z(t,{keyCodeMap:[[[e.left,e.right,e.up,e.down],function(t){return i.onButtonNavKbdArrowKey(this,t)}],[[e.enter,e.space],function(){return i.onButtonNavKbdClick(this)}]],validate:function(){return!!(t.rangeSelector&&t.rangeSelector.buttons&&t.rangeSelector.buttons.length)},init:function(e){let r=t.rangeSelector;if(r&&r.hasVisibleDropdown)i.initDropdownNav();else if(r){let i=r.buttons.length-1;t.highlightRangeSelectorButton(e>0?0:i)}},terminate:function(){i.removeDropdownKeydownHandler&&(i.removeDropdownKeydownHandler(),delete i.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let t=this.chart,e=this;return new Z(t,{keyCodeMap:[],validate:function(){return!!(t.rangeSelector&&t.rangeSelector.inputGroup&&"hidden"!==t.rangeSelector.inputGroup.element.style.visibility&&!1!==t.options.rangeSelector.inputEnabled&&t.rangeSelector.minInput&&t.rangeSelector.maxInput)},init:function(t){e.onInputNavInit(t)},terminate:function(){e.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}!function(t){function e(t){let e=this.rangeSelector&&this.rangeSelector.buttons||[],i=this.highlightedRangeSelectorItemIx,r=this.rangeSelector&&this.rangeSelector.selected;return void 0!==i&&e[i]&&i!==r&&e[i].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=t,!!e[t]&&(this.setFocusToElement(e[t].box,e[t].element),t!==r&&(this.oldRangeSelectorItemState=e[t].state,e[t].setState(1)),!0)}function i(){let t=this.chart.accessibility;if(t&&t.components.rangeSelector)return t.components.rangeSelector.onAfterBtnClick()}t.compose=function(t,r){let s=t.prototype;s.highlightRangeSelectorButton||(s.highlightRangeSelectorButton=e,Jr(r,"afterBtnClick",i))}}(es||(es={}));let is=es,{composed:rs}=w(),{addEvent:ss,merge:ns,pushUnique:os}=w();!function(t){function e(t){ns(!0,t,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function i(t){return t.marker.states&&t.marker.states.normal&&t.marker.states.normal.opacity}function r(t){return!!(t._hasPointMarkers&&t.points&&t.points.length)}function s(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),r(this)&&this.points.forEach((t=>{t.graphic&&(t.graphic[t.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),t.graphic[!1===t.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))})))}function n(t){this.resetA11yMarkerOptions=ns(t.options.marker||{},this.userOptions.marker||{})}function o(){let t=this.options;!function(t){let e=t.chart.options.accessibility.enabled,i=!1!==(t.options.accessibility&&t.options.accessibility.enabled);return e&&i&&function(t){let e=t.chart.options.accessibility;return t.points.length<e.series.pointDescriptionEnabledThreshold||!1===e.series.pointDescriptionEnabledThreshold}(t)}(this)?this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(t){let e=t.resetA11yMarkerOptions;if(e){let i=e.states&&e.states.normal&&e.states.normal.opacity;t.userOptions&&t.userOptions.marker&&(t.userOptions.marker.enabled=!0),t.update({marker:{enabled:e.enabled,states:{normal:{opacity:i}}}})}}(this),delete this.resetA11yMarkerOptions):(t.marker&&!1===t.marker.enabled&&(this.a11yMarkersForced=!0,e(this.options)),r(this)&&function(t){let r=t.points.length;for(;r--;){let s=t.points[r],n=s.options,o=s.hasForcedA11yMarker;if(delete s.hasForcedA11yMarker,n.marker){let t=o&&0===i(n);n.marker.enabled&&!t?(ns(!0,n.marker,{states:{normal:{opacity:i(n)||1}}}),s.hasForcedA11yMarker=!1):!1===n.marker.enabled&&(e(n),s.hasForcedA11yMarker=!0)}}}(this))}function a(){this.boosted&&this.a11yMarkersForced&&(ns(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}t.compose=function(t){os(rs,"A11y.FM")&&(ss(t,"afterSetOptions",n),ss(t,"render",o),ss(t,"afterRender",s),ss(t,"renderCanvas",a))}}(g||(g={}));let as=g;var ls=v(260),hs=v.n(ls),cs=v(820),ds=v.n(cs);let{seriesTypes:us}=je(),{doc:ps}=w(),{defined:fs,fireEvent:gs}=w(),{getPointFromXY:ms,getSeriesFromName:ys,scrollAxisToPoint:vs}=V;function bs(t){let e=t.index,i=t.series.points,r=i.length;if(i[e]===t)return e;for(;r--;)if(i[r]===t)return r}function xs(t){let e=t.chart.options.accessibility.keyboardNavigation.seriesNavigation,i=t.options.accessibility||{},r=i.keyboardNavigation;return r&&!1===r.enabled||!1===i.enabled||!1===t.options.enableMouseTracking||!t.visible||e.pointNavigationEnabledThreshold&&+e.pointNavigationEnabledThreshold<=t.points.length}function ws(t){let e=t.series.chart.options.accessibility,i=t.options.accessibility&&!1===t.options.accessibility.enabled;return t.isNull&&e.keyboardNavigation.seriesNavigation.skipNullPoints||!1===t.visible||!1===t.isInside||i||xs(t.series)}function Es(t){let e=t.series||[],i=e.length;for(let t=0;t<i;++t)if(!xs(e[t])){let i=function(t){let e=t.points||[],i=e.length;for(let t=0;t<i;++t)if(!ws(e[t]))return e[t];return null}(e[t]);if(i)return i}return null}function Ts(t){let e=t.series.length,i=!1;for(;e--&&(t.highlightedPoint=t.series[e].points[t.series[e].points.length-1],!(i=t.series[e].highlightNextValidPoint())););return i}function Ss(t){delete t.highlightedPoint;let e=Es(t);return!!e&&e.highlight()}class As{constructor(t,e){this.keyCodes=e,this.chart=t}init(){let t=this,e=this.chart,i=this.eventProvider=new q;i.addEvent(ds(),"destroy",(function(){return t.onSeriesDestroy(this)})),i.addEvent(e,"afterApplyDrilldown",(function(){!function(t){let e=Es(t);e&&e.highlight(!1)}(this)})),i.addEvent(e,"drilldown",(function(e){let i=e.point,r=i.series;t.lastDrilledDownPoint={x:i.x,y:i.y,seriesName:r?r.name:""}})),i.addEvent(e,"drillupall",(function(){setTimeout((function(){t.onDrillupAll()}),10)})),i.addEvent(hs(),"afterSetState",(function(){let t=this.graphic&&this.graphic.element,i=ps.activeElement,r=i&&i.getAttribute("class"),s=r&&r.indexOf("highcharts-a11y-proxy-element")>-1;e.highlightedPoint===this&&i!==t&&!s&&t&&t.focus&&t.focus()}))}onDrillupAll(){let t,e=this.lastDrilledDownPoint,i=this.chart,r=e&&ys(i,e.seriesName);e&&r&&fs(e.x)&&fs(e.y)&&(t=ms(r,e.x,e.y)),t=t||Es(i),i.container&&i.container.focus(),t&&t.highlight&&t.highlight(!1)}getKeyboardNavigationHandler(){let t=this,e=this.keyCodes,i=this.chart,r=i.inverted;return new Z(i,{keyCodeMap:[[r?[e.up,e.down]:[e.left,e.right],function(e){return t.onKbdSideways(this,e)}],[r?[e.left,e.right]:[e.up,e.down],function(e){return t.onKbdVertical(this,e)}],[[e.enter,e.space],function(t,e){let r=i.highlightedPoint;if(r){let{plotLeft:t,plotTop:i}=this.chart,{plotX:s=0,plotY:n=0}=r;e={...e,chartX:t+s,chartY:i+n,point:r,target:r.graphic?.element||e.target},gs(r.series,"click",e),r.firePointEvent("click",e)}return this.response.success}],[[e.home],function(){return Ss(i),this.response.success}],[[e.end],function(){return Ts(i),this.response.success}],[[e.pageDown,e.pageUp],function(t){return i.highlightAdjacentSeries(t===e.pageDown),this.response.success}]],init:function(){return t.onHandlerInit(this)},validate:function(){return!!Es(i)},terminate:function(){return t.onHandlerTerminate()}})}onKbdSideways(t,e){let i=this.keyCodes,r=e===i.right||e===i.down;return this.attemptHighlightAdjacentPoint(t,r)}onHandlerInit(t){let e=this.chart;return e.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&e.highlightedPoint?e.highlightedPoint.highlight():Ss(e),t.response.success}onKbdVertical(t,e){let i=this.chart,r=this.keyCodes,s=e===r.down||e===r.right,n=i.options.accessibility.keyboardNavigation.seriesNavigation;return n.mode&&"serialize"===n.mode?this.attemptHighlightAdjacentPoint(t,s):(i[i.highlightedPoint&&i.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](s),t.response.success)}onHandlerTerminate(){let t=this.chart,e=t.options.accessibility.keyboardNavigation;t.tooltip&&t.tooltip.hide(0);let i=t.highlightedPoint&&t.highlightedPoint.series;i&&i.onMouseOut&&i.onMouseOut(),t.highlightedPoint&&t.highlightedPoint.onMouseOut&&t.highlightedPoint.onMouseOut(),e.seriesNavigation.rememberPointFocus||delete t.highlightedPoint}attemptHighlightAdjacentPoint(t,e){let i=this.chart,r=i.options.accessibility.keyboardNavigation.wrapAround;return i.highlightAdjacentPoint(e)||r&&(e?Ss(i):Ts(i))?t.response.success:t.response[e?"next":"prev"]}onSeriesDestroy(t){let e=this.chart;e.highlightedPoint&&e.highlightedPoint.series===t&&(delete e.highlightedPoint,e.focusElement&&e.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}!function(t){function e(t){let e,i,r=this.series,s=this.highlightedPoint,n=s&&bs(s)||0,o=s&&s.series.points||[],a=this.series&&this.series[this.series.length-1],l=a&&a.points&&a.points[a.points.length-1];if(!r[0]||!r[0].points)return!1;if(s){if(e=r[s.series.index+(t?1:-1)],(i=o[n+(t?1:-1)])||!e||(i=e.points[t?0:e.points.length-1]),!i)return!1}else i=t?r[0].points[0]:l;return ws(i)?(xs(e=i.series)?this.highlightedPoint=t?e.points[e.points.length-1]:e.points[0]:this.highlightedPoint=i,this.highlightAdjacentPoint(t)):i.highlight()}function i(t){let e,i=this.highlightedPoint,r=1/0;return!(!fs(i.plotX)||!fs(i.plotY))&&(this.series.forEach((s=>{xs(s)||s.points.forEach((n=>{if(!fs(n.plotY)||!fs(n.plotX)||n===i)return;let o=n.plotY-i.plotY,a=Math.abs(n.plotX-i.plotX),l=Math.abs(o)*Math.abs(o)+a*a*4;s.yAxis&&s.yAxis.reversed&&(o*=-1),!(o<=0&&t||o>=0&&!t||l<5||ws(n))&&l<r&&(r=l,e=n)}))})),!!e&&e.highlight())}function r(t){let e,i,r,s=this.highlightedPoint,n=this.series&&this.series[this.series.length-1],o=n&&n.points&&n.points[n.points.length-1];return this.highlightedPoint?!(!(e=this.series[s.series.index+(t?-1:1)])||!(i=function(t,e){let i,r,s,n=1/0,o=e.points.length,a=t=>!(fs(t.plotX)&&fs(t.plotY));if(!a(t)){for(;o--;)!a(i=e.points[o])&&(s=(t.plotX-i.plotX)*(t.plotX-i.plotX)*4+(t.plotY-i.plotY)*(t.plotY-i.plotY)*1)<n&&(n=s,r=o);return fs(r)?e.points[r]:void 0}}(s,e)))&&(xs(e)?(i.highlight(),(r=this.highlightAdjacentSeries(t))?r:(s.highlight(),!1)):(i.highlight(),i.series.highlightNextValidPoint())):(e=t?this.series&&this.series[0]:n,!!(i=t?e&&e.points&&e.points[0]:o)&&i.highlight())}function s(t=!0){let e=this.series.chart,i=e.tooltip?.label?.element;!this.isNull&&t?this.onMouseOver():e.tooltip&&e.tooltip.hide(0),vs(this),this.graphic&&(e.setFocusToElement(this.graphic),!t&&e.focusElement&&e.focusElement.removeFocusBorder()),e.highlightedPoint=this;let r=i?.getBoundingClientRect().top;if(i&&r&&r<0){let t=window.scrollY;window.scrollTo({behavior:"smooth",top:t+r})}return this}function n(){let t=this.chart.highlightedPoint,e=(t&&t.series)===this?bs(t):0,i=this.points,r=i.length;if(i&&r){for(let t=e;t<r;++t)if(!ws(i[t]))return i[t].highlight();for(let t=e;t>=0;--t)if(!ws(i[t]))return i[t].highlight()}return!1}t.compose=function(t,o,a){let l=t.prototype,h=o.prototype,c=a.prototype;l.highlightAdjacentPoint||(l.highlightAdjacentPoint=e,l.highlightAdjacentPointVertical=i,l.highlightAdjacentSeries=r,h.highlight=s,c.keyboardMoveVertical=!0,["column","gantt","pie"].forEach((t=>{us[t]&&(us[t].prototype.keyboardMoveVertical=!1)})),c.highlightNextValidPoint=n)}}(As||(As={}));let ks=As,{hideSeriesFromAT:Cs}=V,{describeSeries:Is}=Sr,Ps=class extends ${static compose(t,e,i){_r.compose(i),as.compose(i),ks.compose(t,e,i)}init(){this.newDataAnnouncer=new _r(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new ks(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let t=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",(function(){this.chart===t.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)}))}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",(function(){this.series.forEach((function(t){t.labelBySeries&&t.labelBySeries.attr("aria-hidden",!0)}))}))}onChartRender(){this.chart.series.forEach((function(t){!1!==(t.options.accessibility&&t.options.accessibility.enabled)&&t.visible&&0!==t.getPointsCollection().length?Is(t):Cs(t)}))}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}},{unhideChartElementFromAT:Ms}=V,{getFakeMouseEvent:Ls}=I,{attr:Os,pick:Ns}=w(),_s=class extends ${constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let t=this,e=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach((i=>{t.addEvent(e,i,(function(){t.updateProxyOverlays()}))}))}onChartUpdate(){let t=this.chart,e=this;t.mapNavigation&&t.mapNavigation.navButtons.forEach(((i,r)=>{Ms(t,i.element),e.setMapNavButtonAttrs(i.element,"accessibility.zoom.mapZoom"+(r?"Out":"In"))}))}setMapNavButtonAttrs(t,e){let i=this.chart;Os(t,{tabindex:-1,role:"button","aria-label":i.langFormat(e,{chart:i})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let t=this.chart;if(this.proxyProvider.clearGroup("zoom"),t.resetZoomButton&&this.createZoomProxyButton(t.resetZoomButton,"resetZoomProxyButton",t.langFormat("accessibility.zoom.resetZoomButton",{chart:t})),t.drillUpButton&&t.breadcrumbs&&t.breadcrumbs.list){let e=t.breadcrumbs.list[t.breadcrumbs.list.length-1];this.createZoomProxyButton(t.drillUpButton,"drillUpProxyButton",t.langFormat("accessibility.drillUpButton",{chart:t,buttonText:t.breadcrumbs.getButtonText(e)}))}}createZoomProxyButton(t,e,i){this[e]=this.proxyProvider.addProxyElement("zoom",{click:t},"button",{"aria-label":i,tabindex:-1})}getMapZoomNavigation(){let t=this.keyCodes,e=this.chart,i=this;return new Z(e,{keyCodeMap:[[[t.up,t.down,t.left,t.right],function(t){return i.onMapKbdArrow(this,t)}],[[t.tab],function(t,e){return i.onMapKbdTab(this,e)}],[[t.space,t.enter],function(){return i.onMapKbdClick(this)}]],validate:function(){return!!(e.mapView&&e.mapNavigation&&e.mapNavigation.navButtons.length)},init:function(t){return i.onMapNavInit(t)}})}onMapKbdArrow(t,e){let i=this.chart,r=this.keyCodes,s=i.container,n=e===r.up||e===r.down,o=e===r.left||e===r.up?1:-1,a=(n?i.plotHeight:i.plotWidth)/10*o,l=10*Math.random(),h={x:s.offsetLeft+i.plotLeft+i.plotWidth/2+l,y:s.offsetTop+i.plotTop+i.plotHeight/2+l},c=n?{x:h.x,y:h.y+a}:{x:h.x+a,y:h.y};return[Ls("mousedown",h),Ls("mousemove",c),Ls("mouseup",c)].forEach((t=>s.dispatchEvent(t))),t.response.success}onMapKbdTab(t,e){let i=this.chart,r=t.response,s=e.shiftKey,n=s&&!this.focusedMapNavButtonIx||!s&&this.focusedMapNavButtonIx;if(i.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),n)return i.mapView&&i.mapView.zoomBy(),r[s?"prev":"next"];this.focusedMapNavButtonIx+=s?-1:1;let o=i.mapNavigation.navButtons[this.focusedMapNavButtonIx];return i.setFocusToElement(o.box,o.element),o.setState(2),r.success}onMapKbdClick(t){let e=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(e),t.response.success}onMapNavInit(t){let e=this.chart,i=e.mapNavigation.navButtons[0],r=e.mapNavigation.navButtons[1],s=t>0?i:r;e.setFocusToElement(s.box,s.element),s.setState(2),this.focusedMapNavButtonIx=t>0?0:1}simpleButtonNavigation(t,e,i){let r=this.keyCodes,s=this,n=this.chart;return new Z(n,{keyCodeMap:[[[r.tab,r.up,r.down,r.left,r.right],function(t,e){let i=t===r.tab&&e.shiftKey||t===r.left||t===r.up;return this.response[i?"prev":"next"]}],[[r.space,r.enter],function(){return Ns(i(this,n),this.response.success)}]],validate:function(){return n[t]&&n[t].box&&s[e].innerElement},init:function(){n.setFocusToElement(n[t].box,s[e].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",(function(t,e){e.zoomOut()})),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",(function(t,e){return e.drillUp(),t.response.prev})),this.getMapZoomNavigation()]}},{doc:Ds,isMS:Rs,win:Fs}=w(),{error:Bs,pick:zs}=w();function Us(t,e,i){let r,s=t,n=0;for(;n<e.length-1;++n)s=s[r=e[n]]=zs(s[r],{});s[e[e.length-1]]=i}function Hs(t,e,i,r){function s(t,e){return e.reduce((function(t,e){return t[e]}),t)}let n=s(t.options,e),o=s(t.options,i);Object.keys(r).forEach((function(s){let a=n[s];void 0!==a&&(Us(o,r[s],a),Bs(32,!1,t,{[e.join(".")+"."+s]:i.join(".")+"."+r[s].join(".")}))}))}let{defaultOptions:Vs}=w(),{doc:js}=w(),{addEvent:Gs,extend:Ws,fireEvent:Xs,merge:qs}=w(),{removeElement:Ys}=I;class Ks{constructor(t){this.init(t)}init(t){if(this.chart=t,!js.addEventListener)return this.zombie=!0,this.components={},void t.renderTo.setAttribute("aria-hidden",!0);(function(t){!function(t){let e=t.options.chart,i=t.options.accessibility||{};["description","typeDescription"].forEach((function(r){e[r]&&(i[r]=e[r],Bs(32,!1,t,{[`chart.${r}`]:`use accessibility.${r}`}))}))}(t),function(t){t.axes.forEach((function(e){let i=e.options;i&&i.description&&(i.accessibility=i.accessibility||{},i.accessibility.description=i.description,Bs(32,!1,t,{"axis.description":"use axis.accessibility.description"}))}))}(t),t.series&&function(t){let e={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};t.series.forEach((function(i){Object.keys(e).forEach((function(r){let s=i.options[r];"accessibility.pointDescriptionFormatter"===r&&(s=i.options.accessibility&&i.options.accessibility.pointDescriptionFormatter),void 0!==s&&(Us(i.options,e[r],"skipKeyboardNavigation"===r?!s:s),Bs(32,!1,t,{[`series.${r}`]:"series."+e[r].join(".")}))}))}))}(t),Hs(t,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),Hs(t,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),Hs(t,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})})(t),this.proxyProvider=new $r(this.chart),this.initComponents(),this.keyboardNavigation=new Jt(t,this.components)}initComponents(){let t=this.chart,e=this.proxyProvider,i=t.options.accessibility;this.components={container:new rt,infoRegions:new Ft,legend:new me,chartMenu:new Gt,rangeSelector:new is,series:new Ps,zoom:new _s,navigator:new sr},i.customComponents&&Ws(this.components,i.customComponents);let r=this.components;this.getComponentOrder().forEach((function(i){r[i].initBase(t,e),r[i].init()}))}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter((t=>"series"!==t))):Object.keys(this.components):[]}update(){let t=this.components,e=this.chart,i=e.options.accessibility;Xs(e,"beforeA11yUpdate"),e.types=this.getChartTypes();let r=i.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(r),this.getComponentOrder().forEach((function(i){t[i].onChartUpdate(),Xs(e,"afterA11yComponentUpdate",{name:i,component:t[i]})})),this.keyboardNavigation.update(r),!e.highContrastModeActive&&!1!==i.highContrastMode&&(function(){let t=/(Edg)/.test(Fs.navigator.userAgent);if(Fs.matchMedia&&t)return Fs.matchMedia("(-ms-high-contrast: active)").matches;if(Rs&&Fs.getComputedStyle){let t=Ds.createElement("div");t.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",Ds.body.appendChild(t);let e=(t.currentStyle||Fs.getComputedStyle(t)).backgroundImage;return Ds.body.removeChild(t),"none"===e}return Fs.matchMedia&&Fs.matchMedia("(forced-colors: active)").matches}()||!0===i.highContrastMode)&&function(t){t.highContrastModeActive=!0;let e=t.options.accessibility.highContrastTheme;t.update(e,!1);let i=e.colors?.length>1;t.series.forEach((function(t){let r=e.plotOptions[t.type]||{},s=i&&void 0!==t.colorIndex?e.colors[t.colorIndex]:r.color||"window",n={color:r.color||"windowText",colors:i?e.colors:[r.color||"windowText"],borderColor:r.borderColor||"window",fillColor:s};t.update(n,!1),t.points&&t.points.forEach((function(t){t.options&&t.options.color&&t.update({color:r.color||"windowText",borderColor:r.borderColor||"window"},!1)}))})),t.redraw()}(e),Xs(e,"afterA11yUpdate",{accessibility:this})}destroy(){let t=this.chart||{},e=this.components;Object.keys(e).forEach((function(t){e[t].destroy(),e[t].destroyBase()})),this.proxyProvider&&this.proxyProvider.destroy(),t.announcerContainer&&Ys(t.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),t.renderTo&&t.renderTo.setAttribute("aria-hidden",!0),t.focusElement&&t.focusElement.removeFocusBorder()}getChartTypes(){let t={};return this.chart.series.forEach((function(e){t[e.type]=1})),Object.keys(t)}}!function(t){function e(){this.accessibility&&this.accessibility.destroy()}function i(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let t=this.accessibility;t&&!t.zombie&&(t.proxyProvider.updateProxyElementPositions(),t.getComponentOrder().forEach((function(e){t.components[e].onChartRender()})))}function r(t){let e=t.options.accessibility;e&&(e.customComponents&&(this.options.accessibility.customComponents=e.customComponents,delete e.customComponents),qs(!0,this.options.accessibility,e),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function s(){let e=this.accessibility,i=this.options.accessibility,r=this.renderer.boxWrapper.element,s=this.title;if(i&&i.enabled)e&&!e.zombie?e.update():(this.accessibility=e=new t(this),e&&!e.zombie&&e.update(),"img"===r.getAttribute("role")&&r.removeAttribute("role"));else if(e)e.destroy&&e.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(s&&s.element.textContent||"").replace(/</g,"&lt;")),r.setAttribute("aria-hidden",!0);let t=document.getElementsByClassName("highcharts-description")[0];t&&(t.setAttribute("aria-hidden",!1),t.classList.remove("highcharts-linked-description"))}}function n(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}t.i18nFormat=_.i18nFormat,t.compose=function(t,o,a,l,h,c){Jt.compose(t),_r.compose(l),me.compose(t,o),Gt.compose(t),Ps.compose(t,a,l),_.compose(t),ot.compose(t,h),c&&is.compose(t,c);let d=t.prototype;d.updateA11yEnabled||(d.updateA11yEnabled=s,Gs(t,"destroy",e),Gs(t,"render",i),Gs(t,"update",r),["addSeries","init"].forEach((e=>{Gs(t,e,(function(){this.a11yDirty=!0}))})),["afterApplyDrilldown","drillupall"].forEach((e=>{Gs(t,e,(function(){let t=this.accessibility;t&&!t.zombie&&t.update()}))})),Gs(a,"update",n),["update","updatedData","remove"].forEach((t=>{Gs(l,t,(function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)}))})))}}(Ks||(Ks={})),qs(!0,Vs,{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}},{accessibility:{highContrastTheme:{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}},lang:{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}});let $s=Ks,Qs=w();Qs.i18nFormat=$s.i18nFormat,Qs.A11yChartUtilities=V,Qs.A11yHTMLUtilities=I,Qs.AccessibilityComponent=$,Qs.KeyboardNavigationHandler=Z,Qs.SeriesAccessibilityDescriber=Sr,$s.compose(Qs.Chart,Qs.Legend,Qs.Point,Qs.Series,Qs.SVGElement,Qs.RangeSelector);let Zs=w();return b.default})()))}},i={};function r(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={exports:{}};return t[e].call(n.exports,n,n.exports,r),n.exports}r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};r.r(t),r.d(t,{addAuthStateListener:()=>Ss,checkAuthState:()=>Ts,getCurrentUser:()=>bs,signIn:()=>ws,signOut:()=>Es,signUp:()=>xs});var i={};r.r(i),r.d(i,{getFormFromUser:()=>up,getGeneralFormCategoriesAverage:()=>vp,getUserCurrentFormStep:()=>dp,getUserLatestResult:()=>bp,saveAllForms:()=>fp,saveAnswersForUser:()=>mp,saveFormForUser:()=>gp,saveGeneralForm:()=>yp,saveTempFormForUser:()=>pp});var s={};r.r(s),r.d(s,{addUser:()=>Op,getUserData:()=>Fp,hasAnswerForAllForms:()=>Np,hasUserData:()=>Rp,loginUser:()=>_p,logoutUser:()=>Dp,setUserData:()=>Bp});var n=r(783),o=(r(802),r(357));const a=function(t){const e=[];let i=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=63&s|128):55296==(64512&s)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++r)),e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=63&s|128):(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=63&s|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const s=t[e],n=e+1<t.length,o=n?t[e+1]:0,a=e+2<t.length,l=a?t[e+2]:0,h=s>>2,c=(3&s)<<4|o>>4;let d=(15&o)<<2|l>>6,u=63&l;a||(u=64,n||(d=64)),r.push(i[h],i[c],i[d],i[u])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let i=0,r=0;for(;i<t.length;){const s=t[i++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const n=t[i++];e[r++]=String.fromCharCode((31&s)<<6|63&n)}else if(s>239&&s<365){const n=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;e[r++]=String.fromCharCode(55296+(n>>10)),e[r++]=String.fromCharCode(56320+(1023&n))}else{const n=t[i++],o=t[i++];e[r++]=String.fromCharCode((15&s)<<12|(63&n)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const s=i[t.charAt(e++)],n=e<t.length?i[t.charAt(e)]:0;++e;const o=e<t.length?i[t.charAt(e)]:64;++e;const a=e<t.length?i[t.charAt(e)]:64;if(++e,null==s||null==n||null==o||null==a)throw new h;const l=s<<2|n>>4;if(r.push(l),64!==o){const t=n<<4&240|o>>2;if(r.push(t),64!==a){const t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(t){return function(t){const e=a(t);return l.encodeByteArray(e,!0)}(t).replace(/\./g,"")},d=function(t){try{return l.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},u=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&d(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},p=t=>{var e,i;return null===(i=null===(e=u())||void 0===e?void 0:e.emulatorHosts)||void 0===i?void 0:i[t]},f=()=>{var t;return null===(t=u())||void 0===t?void 0:t.config},g=t=>{var e;return null===(e=u())||void 0===e?void 0:e[`_${t}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,i))}}}function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class v extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],n=s?function(t,e){return t.replace(x,((t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`}))}(s,i):"Error",o=`${this.serviceName}: ${n} (${r}).`;return new v(r,o,i)}}const x=/\{\$([^}]+)}/g;function w(t,e){if(t===e)return!0;const i=Object.keys(t),r=Object.keys(e);for(const s of i){if(!r.includes(s))return!1;const i=t[s],n=e[s];if(E(i)&&E(n)){if(!w(i,n))return!1}else if(i!==n)return!1}for(const t of r)if(!i.includes(t))return!1;return!0}function E(t){return null!==t&&"object"==typeof t}function T(t){const e=[];for(const[i,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function S(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[i,r]=t.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}})),e}function A(t){const e=t.indexOf("?");if(!e)return"";const i=t.indexOf("#",e);return t.substring(e,i>0?i:void 0)}class k{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,i){let r;if(void 0===t&&void 0===e&&void 0===i)throw new Error("Missing Observer.");r=function(t){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:i},void 0===r.next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),s}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function C(){}function I(t){return t&&t._delegate?t._delegate:t}class P{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const M="[DEFAULT]";class L{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new m;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&t.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:M})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});e.resolve(t)}catch(t){}}}}clearInstance(t=M){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=M){return this.instances.has(t)}getOptions(t=M){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[t,e]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const n=this.instances.get(r);return n&&t(n,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===M?void 0:r),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(t){}var r;return i||null}normalizeInstanceIdentifier(t=M){return this.component?this.component.multipleInstances?t:M:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new L(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const N=[];var _;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(_||(_={}));const D={debug:_.DEBUG,verbose:_.VERBOSE,info:_.INFO,warn:_.WARN,error:_.ERROR,silent:_.SILENT},R=_.INFO,F={[_.DEBUG]:"log",[_.VERBOSE]:"log",[_.INFO]:"info",[_.WARN]:"warn",[_.ERROR]:"error"},B=(t,e,...i)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),s=F[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${r}]  ${t.name}:`,...i)};class z{constructor(t){this.name=t,this._logLevel=R,this._logHandler=B,this._userLogHandler=null,N.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?D[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_.DEBUG,...t),this._logHandler(this,_.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_.VERBOSE,...t),this._logHandler(this,_.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_.INFO,...t),this._logHandler(this,_.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_.WARN,...t),this._logHandler(this,_.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_.ERROR,...t),this._logHandler(this,_.ERROR,...t)}}let U,H;const V=new WeakMap,j=new WeakMap,G=new WeakMap,W=new WeakMap,X=new WeakMap;let q={get(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return j.get(t);if("objectStoreNames"===e)return t.objectStoreNames||G.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return K(t[e])},set:(t,e,i)=>(t[e]=i,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Y(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply($(this),t),K(V.get(this))}:function(...t){return K(e.apply($(this),t))}:function(t,...i){const r=e.call($(this),t,...i);return G.set(r,t.sort?t.sort():[t]),K(r)}:(t instanceof IDBTransaction&&function(t){if(j.has(t))return;const e=new Promise(((e,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",n),t.removeEventListener("abort",n)},s=()=>{e(),r()},n=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",n),t.addEventListener("abort",n)}));j.set(t,e)}(t),i=t,(U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>i instanceof t))?new Proxy(t,q):t);var e,i}function K(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",n)},s=()=>{e(K(t.result)),r()},n=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",n)}));return e.then((e=>{e instanceof IDBCursor&&V.set(e,t)})).catch((()=>{})),X.set(e,t),e}(t);if(W.has(t))return W.get(t);const e=Y(t);return e!==t&&(W.set(t,e),X.set(e,t)),e}const $=t=>X.get(t),Q=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],J=new Map;function tt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(J.get(e))return J.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,s=Z.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Q.includes(i))return;const n=async function(t,...e){const n=this.transaction(t,s?"readwrite":"readonly");let o=n.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[i](...e),s&&n.done]))[0]};return J.set(e,n),n}var et;et=q,q={...et,get:(t,e,i)=>tt(t,e)||et.get(t,e,i),has:(t,e)=>!!tt(t,e)||et.has(t,e)};class it{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const rt="@firebase/app",st="0.10.15",nt=new z("@firebase/app"),ot="@firebase/app-compat",at="@firebase/analytics-compat",lt="@firebase/analytics",ht="@firebase/app-check-compat",ct="@firebase/app-check",dt="@firebase/auth",ut="@firebase/auth-compat",pt="@firebase/database",ft="@firebase/data-connect",gt="@firebase/database-compat",mt="@firebase/functions",yt="@firebase/functions-compat",vt="@firebase/installations",bt="@firebase/installations-compat",xt="@firebase/messaging",wt="@firebase/messaging-compat",Et="@firebase/performance",Tt="@firebase/performance-compat",St="@firebase/remote-config",At="@firebase/remote-config-compat",kt="@firebase/storage",Ct="@firebase/storage-compat",It="@firebase/firestore",Pt="@firebase/vertexai",Mt="@firebase/firestore-compat",Lt="firebase",Ot="[DEFAULT]",Nt={[rt]:"fire-core",[ot]:"fire-core-compat",[lt]:"fire-analytics",[at]:"fire-analytics-compat",[ct]:"fire-app-check",[ht]:"fire-app-check-compat",[dt]:"fire-auth",[ut]:"fire-auth-compat",[pt]:"fire-rtdb",[ft]:"fire-data-connect",[gt]:"fire-rtdb-compat",[mt]:"fire-fn",[yt]:"fire-fn-compat",[vt]:"fire-iid",[bt]:"fire-iid-compat",[xt]:"fire-fcm",[wt]:"fire-fcm-compat",[Et]:"fire-perf",[Tt]:"fire-perf-compat",[St]:"fire-rc",[At]:"fire-rc-compat",[kt]:"fire-gcs",[Ct]:"fire-gcs-compat",[It]:"fire-fst",[Mt]:"fire-fst-compat",[Pt]:"fire-vertex","fire-js":"fire-js",[Lt]:"fire-js-all"},_t=new Map,Dt=new Map,Rt=new Map;function Ft(t,e){try{t.container.addComponent(e)}catch(i){nt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function Bt(t){const e=t.name;if(Rt.has(e))return nt.debug(`There were multiple attempts to register component ${e}.`),!1;Rt.set(e,t);for(const e of _t.values())Ft(e,t);for(const e of Dt.values())Ft(e,t);return!0}function zt(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return void 0!==t.settings}const Ht=new b("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Vt{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new P("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}}const jt="11.0.1";function Gt(t,e={}){let i=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},e),s=r.name;if("string"!=typeof s||!s)throw Ht.create("bad-app-name",{appName:String(s)});if(i||(i=f()),!i)throw Ht.create("no-options");const n=_t.get(s);if(n){if(w(i,n.options)&&w(r,n.config))return n;throw Ht.create("duplicate-app",{appName:s})}const o=new O(s);for(const t of Rt.values())o.addComponent(t);const a=new Vt(i,r,o);return _t.set(s,a),a}function Wt(t=Ot){const e=_t.get(t);if(!e&&t===Ot&&f())return Gt();if(!e)throw Ht.create("no-app",{appName:t});return e}function Xt(t,e,i){var r;let s=null!==(r=Nt[t])&&void 0!==r?r:t;i&&(s+=`-${i}`);const n=s.match(/\s|\//),o=e.match(/\s|\//);if(n||o){const t=[`Unable to register library "${s}" with version "${e}":`];return n&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),n&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void nt.warn(t.join(" "))}Bt(new P(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}const qt="firebase-heartbeat-store";let Yt=null;function Kt(){return Yt||(Yt=function(t,e,{blocked:i,upgrade:r,blocking:s,terminated:n}={}){const o=indexedDB.open(t,e),a=K(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(K(o.result),t.oldVersion,t.newVersion,K(o.transaction),t)})),i&&o.addEventListener("blocked",(t=>i(t.oldVersion,t.newVersion,t))),a.then((t=>{n&&t.addEventListener("close",(()=>n())),s&&t.addEventListener("versionchange",(t=>s(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(qt)}catch(t){console.warn(t)}}}).catch((t=>{throw Ht.create("idb-open",{originalErrorMessage:t.message})}))),Yt}async function $t(t,e){try{const i=(await Kt()).transaction(qt,"readwrite"),r=i.objectStore(qt);await r.put(e,Qt(t)),await i.done}catch(t){if(t instanceof v)nt.warn(t.message);else{const e=Ht.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});nt.warn(e.message)}}}function Qt(t){return`${t.name}!${t.options.appId}`}class Zt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new te(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jt();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(t){nt.warn(t)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Jt(),{heartbeatsToSend:i,unsentEntries:r}=function(t,e=1024){const i=[];let r=t.slice();for(const s of t){const t=i.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),ee(i)>e){t.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),ee(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=c(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return nt.warn(t),""}}}function Jt(){return(new Date).toISOString().substring(0,10)}class te{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Kt()).transaction(qt),i=await e.objectStore(qt).get(Qt(t));return await e.done,i}catch(t){if(t instanceof v)nt.warn(t.message);else{const e=Ht.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});nt.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return $t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return $t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}}}function ee(t){return c(JSON.stringify({version:2,heartbeats:t})).length}function ie(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i}Bt(new P("platform-logger",(t=>new it(t)),"PRIVATE")),Bt(new P("heartbeat",(t=>new Zt(t)),"PRIVATE")),Xt(rt,st,""),Xt(rt,st,"esm2017"),Xt("fire-js",""),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const re=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},se=new b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ne=new z("@firebase/auth");function oe(t,...e){ne.logLevel<=_.ERROR&&ne.error(`Auth (${jt}): ${t}`,...e)}function ae(t,...e){throw de(t,...e)}function le(t,...e){return de(t,...e)}function he(t,e,i){const r=Object.assign(Object.assign({},re()),{[e]:i});return new b("auth","Firebase",r).create(e,{appName:t.name})}function ce(t){return he(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function de(t,...e){if("string"!=typeof t){const i=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(i,...r)}return se.create(t,...e)}function ue(t,e,...i){if(!t)throw de(e,...i)}function pe(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oe(e),new Error(e)}function fe(t,e){t||pe(e)}function ge(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function me(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function ye(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===me()||"https:"===me()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class ve{constructor(t,e){this.shortDelay=t,this.longDelay=e,fe(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return ye()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function be(t,e){fe(t.emulator,"Emulator should always be set here");const{url:i}=t.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}class xe{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const we={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new ve(3e4,6e4);function Te(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Se(t,e,i,r,s={}){return Ae(t,s,(async()=>{let s={},n={};r&&("GET"===e?n=r:s={body:JSON.stringify(r)});const o=T(Object.assign({key:t.config.apiKey},n)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:a},s);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),xe.fetch()(Ce(t,t.config.apiHost,i,o),l)}))}async function Ae(t,e,i){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},we),e);try{const e=new Pe(t),s=await Promise.race([i(),e.promise]);e.clearNetworkTimeout();const n=await s.json();if("needConfirmation"in n)throw Me(t,"account-exists-with-different-credential",n);if(s.ok&&!("errorMessage"in n))return n;{const e=s.ok?n.errorMessage:n.error.message,[i,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===i)throw Me(t,"credential-already-in-use",n);if("EMAIL_EXISTS"===i)throw Me(t,"email-already-in-use",n);if("USER_DISABLED"===i)throw Me(t,"user-disabled",n);const a=r[i]||i.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw he(t,a,o);ae(t,a)}}catch(e){if(e instanceof v)throw e;ae(t,"network-request-failed",{message:String(e)})}}async function ke(t,e,i,r,s={}){const n=await Se(t,e,i,r,s);return"mfaPendingCredential"in n&&ae(t,"multi-factor-auth-required",{_serverResponse:n}),n}function Ce(t,e,i,r){const s=`${e}${i}?${r}`;return t.config.emulator?be(t.config,s):`${t.config.apiScheme}://${s}`}function Ie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pe{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(le(this.auth,"network-request-failed"))),Ee.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Me(t,e,i){const r={appName:t.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const s=le(t,e,r);return s.customData._tokenResponse=i,s}function Le(t){return void 0!==t&&void 0!==t.enterprise}class Oe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return Ie(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ne(t,e){return Se(t,"GET","/v2/recaptchaConfig",Te(t,e))}async function _e(t,e){return Se(t,"POST","/v1/accounts:lookup",e)}function De(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function Re(t){return 1e3*Number(t)}function Fe(t){const[e,i,r]=t.split(".");if(void 0===e||void 0===i||void 0===r)return oe("JWT malformed, contained fewer than 3 sections"),null;try{const t=d(i);return t?JSON.parse(t):(oe("Failed to decode base64 JWT payload"),null)}catch(t){return oe("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}function Be(t){const e=Fe(t);return ue(e,"internal-error"),ue(void 0!==e.exp,"internal-error"),ue(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}async function ze(t,e,i=!1){if(i)return e;try{return await e}catch(e){throw e instanceof v&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class Ue{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class He{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=De(this.lastLoginAt),this.creationTime=De(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ve(t){var e;const i=t.auth,r=await t.getIdToken(),s=await ze(t,_e(i,{idToken:r}));ue(null==s?void 0:s.users.length,i,"internal-error");const n=s.users[0];t._notifyReloadListener(n);const o=(null===(e=n.providerUserInfo)||void 0===e?void 0:e.length)?je(n.providerUserInfo):[],a=(l=t.providerData,h=o,[...l.filter((t=>!h.some((e=>e.providerId===t.providerId)))),...h]);var l,h;const c=t.isAnonymous,d=!(t.email&&n.passwordHash||(null==a?void 0:a.length)),u=!!c&&d,p={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:a,metadata:new He(n.createdAt,n.lastLoginAt),isAnonymous:u};Object.assign(t,p)}function je(t){return t.map((t=>{var{providerId:e}=t,i=ie(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}}))}class Ge{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ue(t.idToken,"internal-error"),ue(void 0!==t.idToken,"internal-error"),ue(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):Be(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){ue(0!==t.length,"internal-error");const e=Be(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return e||!this.accessToken||this.isExpired?(ue(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:s}=await async function(t,e){const i=await Ae(t,{},(async()=>{const i=T({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,n=Ce(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",xe.fetch()(n,{method:"POST",headers:o,body:i})}));return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}(t,e);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:s}=e,n=new Ge;return i&&(ue("string"==typeof i,"internal-error",{appName:t}),n.refreshToken=i),r&&(ue("string"==typeof r,"internal-error",{appName:t}),n.accessToken=r),s&&(ue("number"==typeof s,"internal-error",{appName:t}),n.expirationTime=s),n}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ge,this.toJSON())}_performRefresh(){return pe("not implemented")}}function We(t,e){ue("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Xe{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,s=ie(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ue(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new He(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await ze(this,this.stsTokenManager.getToken(this.auth,t));return ue(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const i=I(t),r=await i.getIdToken(e),s=Fe(r);ue(s&&s.exp&&s.auth_time&&s.iat,i.auth,"internal-error");const n="object"==typeof s.firebase?s.firebase:void 0,o=null==n?void 0:n.sign_in_provider;return{claims:s,token:r,authTime:De(Re(s.auth_time)),issuedAtTime:De(Re(s.iat)),expirationTime:De(Re(s.exp)),signInProvider:o||null,signInSecondFactor:(null==n?void 0:n.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=I(t);await Ve(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(ue(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Xe(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Ve(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(ce(this.auth));const t=await this.getIdToken();return await ze(this,async function(t,e){return Se(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,s,n,o,a,l,h;const c=null!==(i=e.displayName)&&void 0!==i?i:void 0,d=null!==(r=e.email)&&void 0!==r?r:void 0,u=null!==(s=e.phoneNumber)&&void 0!==s?s:void 0,p=null!==(n=e.photoURL)&&void 0!==n?n:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=e.createdAt)&&void 0!==l?l:void 0,y=null!==(h=e.lastLoginAt)&&void 0!==h?h:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:E}=e;ue(v&&E,t,"internal-error");const T=Ge.fromJSON(this.name,E);ue("string"==typeof v,t,"internal-error"),We(c,t.name),We(d,t.name),ue("boolean"==typeof b,t,"internal-error"),ue("boolean"==typeof x,t,"internal-error"),We(u,t.name),We(p,t.name),We(f,t.name),We(g,t.name),We(m,t.name),We(y,t.name);const S=new Xe({uid:v,auth:t,email:d,emailVerified:b,displayName:c,isAnonymous:x,photoURL:p,phoneNumber:u,tenantId:f,stsTokenManager:T,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(S.providerData=w.map((t=>Object.assign({},t)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(t,e,i=!1){const r=new Ge;r.updateFromServerResponse(e);const s=new Xe({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Ve(s),s}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];ue(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?je(r.providerUserInfo):[],n=!(r.email&&r.passwordHash||(null==s?void 0:s.length)),o=new Ge;o.updateFromIdToken(i);const a=new Xe({uid:r.localId,auth:t,stsTokenManager:o,isAnonymous:n}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new He(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==s?void 0:s.length))};return Object.assign(a,l),a}}const qe=new Map;function Ye(t){fe(t instanceof Function,"Expected a class definition");let e=qe.get(t);return e?(fe(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qe.set(t,e),e)}class Ke{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Ke.type="NONE";const $e=Ke;function Qe(t,e,i){return`firebase:${t}:${e}:${i}`}class Ze{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Qe(this.userKey,r.apiKey,s),this.fullPersistenceKey=Qe("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Xe._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Ze(Ye($e),t,i);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let s=r[0]||Ye($e);const n=Qe(i,t.config.apiKey,t.name);let o=null;for(const i of e)try{const e=await i._get(n);if(e){const r=Xe._fromJSON(t,e);i!==s&&(o=r),s=i;break}}catch(t){}const a=r.filter((t=>t._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(n,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==s)try{await t._remove(n)}catch(t){}}))),new Ze(s,t,i)):new Ze(s,t,i)}}function Je(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ri(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ti(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ni(e))return"Blackberry";if(oi(e))return"Webos";if(ei(e))return"Safari";if((e.includes("chrome/")||ii(e))&&!e.includes("edge/"))return"Chrome";if(si(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(e);if(2===(null==i?void 0:i.length))return i[1]}return"Other"}function ti(t=y()){return/firefox\//i.test(t)}function ei(t=y()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ii(t=y()){return/crios\//i.test(t)}function ri(t=y()){return/iemobile/i.test(t)}function si(t=y()){return/android/i.test(t)}function ni(t=y()){return/blackberry/i.test(t)}function oi(t=y()){return/webos/i.test(t)}function ai(t=y()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function li(t=y()){return ai(t)||si(t)||oi(t)||ni(t)||/windows phone/i.test(t)||ri(t)}function hi(t,e=[]){let i;switch(t){case"Browser":i=Je(y());break;case"Worker":i=`${Je(y())}-${t}`;break;default:i=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${jt}/${r}`}class ci{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=e=>new Promise(((i,r)=>{try{i(t(e))}catch(t){r(t)}}));i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class di{constructor(t){var e,i,r,s;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=n.minPasswordLength)&&void 0!==e?e:6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),void 0!==n.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),void 0!==n.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),void 0!==n.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),void 0!==n.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(i=t.allowedNonAlphanumericCharacters)||void 0===i?void 0:i.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=t.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,s,n,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(i=a.meetsMaxPasswordLength)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsUppercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(n=a.containsNumericCharacter)||void 0===n||n),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){let i;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}class ui{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fi(this),this.idTokenSubscription=new fi(this),this.beforeStateQueue=new ci(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=se,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ye(e)),this._initializationPromise=this.queue((async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ze.create(this,t),!this._deleted)){if(null===(i=this._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUserFromIdToken(t){try{const e=await _e(this,{idToken:t}),i=await Xe._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Ut(this.app)){const t=this.app.settings.authIdToken;return t?new Promise((e=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(t).then(e,e)))})):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,n=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(t);i&&i!==n||!(null==o?void 0:o.user)||(r=o.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(t){r=i,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Ve(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ut(this.app))return Promise.reject(ce(this));const e=t?I(t):null;return e&&ue(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&ue(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return Ut(this.app)?Promise.reject(ce(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ut(this.app)?Promise.reject(ce(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ye(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return Se(t,"GET","/v2/passwordPolicy",Te(t,e))}(this),e=new di(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new b("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged((()=>{i(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Se(t,"POST","/v2/accounts:revokeToken",Te(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return null===t?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ye(t)||this._popupRedirectResolver;ue(e,this,"argument-error"),this.redirectPersistenceManager=await Ze.create(this,[Ye(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const s="function"==typeof e?e:e.next.bind(e);let n=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(o,this,"internal-error"),o.then((()=>{n||s(this.currentUser)})),"function"==typeof e){const s=t.addObserver(e,i,r);return()=>{n=!0,s()}}{const i=t.addObserver(e);return()=>{n=!0,i()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=hi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){ne.logLevel<=_.WARN&&ne.warn(`Auth (${jt}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function pi(t){return I(t)}class fi{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t){const e=new k(t,void 0);return e.subscribe.bind(e)}((t=>this.observer=t))}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mi(t){return gi.loadJS(t)}function yi(t){return`__${t}${Math.floor(1e6*Math.random())}`}class vi{constructor(){this.enterprise=new bi}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class bi{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const xi="NO_RECAPTCHA";class wi{constructor(t){this.type="recaptcha-enterprise",this.auth=pi(t)}async verify(t="verify",e=!1){function i(e,i,r){const s=window.grecaptcha;Le(s)?s.enterprise.ready((()=>{s.enterprise.execute(e,{action:t}).then((t=>{i(t)})).catch((()=>{i(xi)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?(new vi).execute("siteKey",{action:"verify"}):new Promise(((t,r)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,i)=>{Ne(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const i=new Oe(r);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,e(i.siteKey)}i(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{i(t)}))}))})(this.auth).then((s=>{if(!e&&Le(window.grecaptcha))i(s,t,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let e=gi.recaptchaEnterpriseScript;0!==e.length&&(e+=s),mi(e).then((()=>{i(s,t,r)})).catch((t=>{r(t)}))}})).catch((t=>{r(t)}))}))}}async function Ei(t,e,i,r=!1,s=!1){const n=new wi(t);let o;if(s)o=xi;else try{o=await n.verify(i)}catch(t){o=await n.verify(i,!0)}const a=Object.assign({},e);if("mfaSmsEnrollment"===i||"mfaSmsSignIn"===i){if("phoneEnrollmentInfo"in a){const t=a.phoneEnrollmentInfo.phoneNumber,e=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const t=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ti(t,e,i,r,s){var n,o;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ei(t,e,i,"getOobCode"===i);return r(t,s)}return r(t,e).catch((async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Ei(t,e,i,"getOobCode"===i);return r(t,s)}return Promise.reject(s)}))}if("PHONE_PROVIDER"===s){if(null===(o=t._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const s=await Ei(t,e,i);return r(t,s).catch((async s=>{var n;if("AUDIT"===(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${i} flow.`);const s=await Ei(t,e,i,!1,!0);return r(t,s)}return Promise.reject(s)}))}{const s=await Ei(t,e,i,!1,!0);return r(t,s)}}return Promise.reject(s+" provider is not supported.")}function Si(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ai(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class ki{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return pe("not implemented")}_getIdTokenResponse(t){return pe("not implemented")}_linkToIdToken(t,e){return pe("not implemented")}_getReauthenticationResolver(t){return pe("not implemented")}}async function Ci(t,e){return Se(t,"POST","/v1/accounts:signUp",e)}async function Ii(t,e){return ke(t,"POST","/v1/accounts:signInWithPassword",Te(t,e))}class Pi extends ki{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Pi(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Pi(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Ti(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ii,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(t,e){return ke(t,"POST","/v1/accounts:signInWithEmailLink",Te(t,e))}(t,{email:this._email,oobCode:this._password});default:ae(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Ti(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ci,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(t,e){return ke(t,"POST","/v1/accounts:signInWithEmailLink",Te(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:ae(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Mi(t,e){return ke(t,"POST","/v1/accounts:signInWithIdp",Te(t,e))}class Li extends ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Li(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ae("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,s=ie(e,["providerId","signInMethod"]);if(!i||!r)return null;const n=new Li(i,r);return n.idToken=s.idToken||void 0,n.accessToken=s.accessToken||void 0,n.secret=s.secret,n.nonce=s.nonce,n.pendingToken=s.pendingToken||null,n}_getIdTokenResponse(t){return Mi(t,this.buildRequest())}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Mi(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Mi(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=T(e)}return t}}async function Oi(t,e){return Se(t,"POST","/v1/accounts:sendVerificationCode",Te(t,e))}const Ni={USER_NOT_FOUND:"user-not-found"};class _i extends ki{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new _i({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new _i({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return ke(t,"POST","/v1/accounts:signInWithPhoneNumber",Te(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const i=await ke(t,"POST","/v1/accounts:signInWithPhoneNumber",Te(t,e));if(i.temporaryProof)throw Me(t,"account-exists-with-different-credential",i);return i}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return ke(t,"POST","/v1/accounts:signInWithPhoneNumber",Te(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ni)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:i,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:i,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:i,phoneNumber:r,temporaryProof:s}=t;return i||e||r||s?new _i({verificationId:e,verificationCode:i,phoneNumber:r,temporaryProof:s}):null}}class Di{constructor(t){var e,i,r,s,n,o;const a=S(A(t)),l=null!==(e=a.apiKey)&&void 0!==e?e:null,h=null!==(i=a.oobCode)&&void 0!==i?i:null,c=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ue(l&&h&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=h,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(n=a.languageCode)&&void 0!==n?n:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=S(A(t)).link,i=e?S(A(e)).deep_link_id:null,r=S(A(t)).deep_link_id;return(r?S(A(r)).link:null)||r||i||e||t}(t);try{return new Di(e)}catch(t){return null}}}class Ri{constructor(){this.providerId=Ri.PROVIDER_ID}static credential(t,e){return Pi._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Di.parseLink(e);return ue(i,"argument-error"),Pi._fromEmailAndCode(t,i.code,i.tenantId)}}Ri.PROVIDER_ID="password",Ri.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ri.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fi{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Bi extends Fi{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class zi extends Bi{constructor(){super("facebook.com")}static credential(t){return Li._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zi.credentialFromTaggedObject(t)}static credentialFromError(t){return zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zi.credential(t.oauthAccessToken)}catch(t){return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com",zi.PROVIDER_ID="facebook.com";class Ui extends Bi{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Li._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ui.credentialFromTaggedObject(t)}static credentialFromError(t){return Ui.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Ui.credential(e,i)}catch(t){return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com",Ui.PROVIDER_ID="google.com";class Hi extends Bi{constructor(){super("github.com")}static credential(t){return Li._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hi.credentialFromTaggedObject(t)}static credentialFromError(t){return Hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hi.credential(t.oauthAccessToken)}catch(t){return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com",Hi.PROVIDER_ID="github.com";class Vi extends Bi{constructor(){super("twitter.com")}static credential(t,e){return Li._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Vi.credential(e,i)}catch(t){return null}}}async function ji(t,e){return ke(t,"POST","/v1/accounts:signUp",Te(t,e))}Vi.TWITTER_SIGN_IN_METHOD="twitter.com",Vi.PROVIDER_ID="twitter.com";class Gi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const s=await Xe._fromIdTokenResponse(t,i,r),n=Wi(i);return new Gi({user:s,providerId:n,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=Wi(i);return new Gi({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function Wi(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Xi extends v{constructor(t,e,i,r){var s;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Xi.prototype),this.customData={appName:t.name,tenantId:null!==(s=t.tenantId)&&void 0!==s?s:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new Xi(t,e,i,r)}}function qi(t,e,i,r){return("reauthenticate"===e?i._getReauthenticationResolver(t):i._getIdTokenResponse(t)).catch((i=>{if("auth/multi-factor-auth-required"===i.code)throw Xi._fromErrorAndOperation(t,i,e,r);throw i}))}async function Yi(t,e,i=!1){if(Ut(t.app))return Promise.reject(ce(t));const r="signIn",s=await qi(t,r,e),n=await Gi._fromIdTokenResponse(t,r,s);return i||await t._updateCurrentUser(n.user),n}async function Ki(t){const e=pi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $i(t,e,i){if(Ut(t.app))return Promise.reject(ce(t));const r=pi(t),s=Ti(r,{returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ji,"EMAIL_PASSWORD_PROVIDER"),n=await s.catch((e=>{throw"auth/password-does-not-meet-requirements"===e.code&&Ki(t),e})),o=await Gi._fromIdTokenResponse(r,"signIn",n);return await r._updateCurrentUser(o.user),o}function Qi(t,e,i){return Ut(t.app)?Promise.reject(ce(t)):async function(t,e){return Yi(pi(t),e)}(I(t),Ri.credential(e,i)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&Ki(t),e}))}function Zi(t,e,i,r){return I(t).onAuthStateChanged(e,i,r)}function Ji(t){return I(t).signOut()}function tr(t,e){return Se(t,"POST","/v2/accounts/mfaEnrollment:start",Te(t,e))}new WeakMap;const er="__sak";class ir{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(er,"1"),this.storage.removeItem(er),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class rr extends ir{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=li(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,i)=>{this.notifyListeners(t,i)}));const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const t=this.storage.getItem(i);(e||this.localCache[i]!==t)&&this.notifyListeners(i,t)},s=this.storage.getItem(i);!function(){const t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||s===t.newValue||t.newValue===t.oldValue?r():setTimeout(r,10)}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const t of Array.from(i))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}rr.type="LOCAL";const sr=rr;class nr extends ir{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}nr.type="SESSION";const or=nr;class ar{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const i=new ar(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:s}=e.data,n=this.handlersMap[r];if(!(null==n?void 0:n.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(n).map((async t=>t(e.origin,s))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function lr(t="",e=10){let i="";for(let t=0;t<e;t++)i+=Math.floor(10*Math.random());return t+i}ar.receivers=[];class hr{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,n;return new Promise(((o,a)=>{const l=lr("",20);r.port1.start();const h=setTimeout((()=>{a(new Error("unsupported_event"))}),i);n={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(h),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(e.data.response);break;default:clearTimeout(h),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(n),r.port1.addEventListener("message",n.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[r.port2])})).finally((()=>{n&&this.removeMessageHandler(n)}))}}function cr(){return window}function dr(){return void 0!==cr().WorkerGlobalScope&&"function"==typeof cr().importScripts}const ur="firebaseLocalStorageDb",pr="firebaseLocalStorage",fr="fbase_key";class gr{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function mr(t,e){return t.transaction([pr],e?"readwrite":"readonly").objectStore(pr)}function yr(){const t=indexedDB.open(ur,1);return new Promise(((e,i)=>{t.addEventListener("error",(()=>{i(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(pr,{keyPath:fr})}catch(t){i(t)}})),t.addEventListener("success",(async()=>{const i=t.result;i.objectStoreNames.contains(pr)?e(i):(i.close(),await function(){const t=indexedDB.deleteDatabase(ur);return new gr(t).toPromise()}(),e(await yr()))}))}))}async function vr(t,e,i){const r=mr(t,!0).put({[fr]:e,value:i});return new gr(r).toPromise()}function br(t,e){const i=mr(t,!0).delete(e);return new gr(i).toPromise()}class xr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await yr()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ar._getInstance(dr()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new hr(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&(null===(t=i[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=i[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await yr();return await vr(t,er,"1"),await br(t,er),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((i=>vr(i,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const i=mr(t,!1).get(e),r=await new gr(i).toPromise();return void 0===r?null:r.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>br(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=mr(t,!1).getAll();return new gr(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],i=new Set;if(0!==t.length)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),e.push(r));for(const t of Object.keys(this.localCache))this.localCache[t]&&!i.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const t of Array.from(i))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xr.type="LOCAL";const wr=xr;function Er(t,e){return Se(t,"POST","/v2/accounts/mfaSignIn:start",Te(t,e))}yi("rcb"),new ve(3e4,6e4);const Tr="recaptcha";async function Sr(t,e,i){var r;if(!t._getRecaptchaConfig())try{await async function(t){const e=pi(t),i=await Ne(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Oe(i);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new wi(e).verify()}(t)}catch(t){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){ue("enroll"===e.type,t,"internal-error");const r=Ti(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},"mfaSmsEnrollment",(async(t,e)=>e.phoneEnrollmentInfo.captchaResponse===xi?(ue((null==i?void 0:i.type)===Tr,t,"argument-error"),tr(t,await Ar(t,e,i))):tr(t,e)),"PHONE_PROVIDER"),n=await r.catch((t=>Promise.reject(t)));return n.phoneSessionInfo.sessionInfo}{ue("signin"===e.type,t,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ue(n,t,"missing-multi-factor-info");const o=Ti(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},"mfaSmsSignIn",(async(t,e)=>e.phoneSignInInfo.captchaResponse===xi?(ue((null==i?void 0:i.type)===Tr,t,"argument-error"),Er(t,await Ar(t,e,i))):Er(t,e)),"PHONE_PROVIDER"),a=await o.catch((t=>Promise.reject(t)));return a.phoneResponseInfo.sessionInfo}}{const e=Ti(t,{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},"sendVerificationCode",(async(t,e)=>e.captchaResponse===xi?(ue((null==i?void 0:i.type)===Tr,t,"argument-error"),Oi(t,await Ar(t,e,i))):Oi(t,e)),"PHONE_PROVIDER"),r=await e.catch((t=>Promise.reject(t)));return r.sessionInfo}}finally{null==i||i._reset()}}async function Ar(t,e,i){ue(i.type===Tr,t,"argument-error");const r=await i.verify();ue("string"==typeof r,t,"argument-error");const s=Object.assign({},e);if("phoneEnrollmentInfo"in s){const t=s.phoneEnrollmentInfo.phoneNumber,e=s.phoneEnrollmentInfo.captchaResponse,i=s.phoneEnrollmentInfo.clientType,n=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:r,captchaResponse:e,clientType:i,recaptchaVersion:n}}),s}if("phoneSignInInfo"in s){const t=s.phoneSignInInfo.captchaResponse,e=s.phoneSignInInfo.clientType,i=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:t,clientType:e,recaptchaVersion:i}}),s}return Object.assign(s,{recaptchaToken:r}),s}class kr{constructor(t){this.providerId=kr.PROVIDER_ID,this.auth=pi(t)}verifyPhoneNumber(t,e){return Sr(this.auth,t,I(e))}static credential(t,e){return _i._fromVerification(t,e)}static credentialFromResult(t){const e=t;return kr.credentialFromTaggedObject(e)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:i}=t;return e&&i?_i._fromTokenResponse(e,i):null}}kr.PROVIDER_ID="phone",kr.PHONE_SIGN_IN_METHOD="phone";class Cr extends ki{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Mi(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Mi(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Mi(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Ir(t){return Yi(t.auth,new Cr(t),t.bypassAuthState)}function Pr(t){const{auth:e,user:i}=t;return ue(i,e,"internal-error"),async function(t,e,i=!1){const{auth:r}=t;if(Ut(r.app))return Promise.reject(ce(r));const s="reauthenticate";try{const n=await ze(t,qi(r,s,e,t),i);ue(n.idToken,r,"internal-error");const o=Fe(n.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),Gi._forOperation(t,s,n)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&ae(r,"user-mismatch"),t}}(i,new Cr(t),t.bypassAuthState)}async function Mr(t){const{auth:e,user:i}=t;return ue(i,e,"internal-error"),async function(t,e,i=!1){const r=await ze(t,e._linkToIdToken(t.auth,await t.getIdToken()),i);return Gi._forOperation(t,"link",r)}(i,new Cr(t),t.bypassAuthState)}class Lr{constructor(t,e,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:s,error:n,type:o}=t;if(n)return void this.reject(n);const a={auth:this.auth,requestUri:e,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ir;case"linkViaPopup":case"linkViaRedirect":return Mr;case"reauthViaPopup":case"reauthViaRedirect":return Pr;default:ae(this.auth,"internal-error")}}resolve(t){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Or=new ve(2e3,1e4);class Nr extends Lr{constructor(t,e,i,r,s){super(t,e,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Nr.currentPopupAction&&Nr.currentPopupAction.cancel(),Nr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ue(t,this.auth,"internal-error"),t}async onExecution(){fe(1===this.filter.length,"Popup operations only handle one event");const t=lr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(le(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;(null===(i=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===i?void 0:i.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(le(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Or.get())};t()}}Nr.currentPopupAction=null;const _r=new Map;class Dr extends Lr{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=_r.get(this.auth._key());if(!t){try{const e=await async function(t,e){const i=function(t){return Qe("pendingRedirect",t.config.apiKey,t.name)}(e),r=function(t){return Ye(t._redirectPersistence)}(t);if(!await r._isAvailable())return!1;const s="true"===await r._get(i);return await r._remove(i),s}(this.resolver,this.auth),i=e?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}_r.set(this.auth._key(),t)}return this.bypassAuthState||_r.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Rr(t,e){_r.set(t._key(),e)}async function Fr(t,e,i=!1){if(Ut(t.app))return Promise.reject(ce(t));const r=pi(t),s=function(t,e){return e?Ye(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),n=new Dr(r,s,i),o=await n.execute();return o&&!i&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}class Br{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ur(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Ur(t)){const r=(null===(i=t.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";e.onError(le(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zr(t))}saveEventToCache(t){this.cachedEventUids.add(zr(t)),this.lastProcessedEventTime=Date.now()}}function zr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Ur({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Hr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vr=/^https?/;function jr(t){const e=ge(),{protocol:i,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===i&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===i&&s.hostname===r}if(!Vr.test(i))return!1;if(Hr.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Gr=new ve(3e4,6e4);function Wr(){const t=cr().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}function Xr(t){return new Promise(((e,i)=>{var r,s,n;function o(){Wr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wr(),i(le(t,"network-request-failed"))},timeout:Gr.get()})}if(null===(s=null===(r=cr().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)e(gapi.iframes.getContext());else{if(!(null===(n=cr().gapi)||void 0===n?void 0:n.load)){const e=yi("iframefcb");return cr()[e]=()=>{gapi.load?o():i(le(t,"network-request-failed"))},mi(`${gi.gapiScript}?onload=${e}`).catch((t=>i(t)))}o()}})).catch((t=>{throw qr=null,t}))}let qr=null;const Yr=new ve(5e3,15e3),Kr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$r=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qr(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const i=e.emulator?be(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:jt},s=$r.get(t.config.apiHost);s&&(r.eid=s);const n=t._getFrameworks();return n.length&&(r.fw=n.join(",")),`${i}?${T(r).slice(1)}`}const Zr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const ts=encodeURIComponent("fac");async function es(t,e,i,r,s,n){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:i,redirectUrl:r,v:jt,eventId:s};if(e instanceof Fi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(n||{}))o[t]=e}if(e instanceof Bi){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const l=await t._getAppCheckToken(),h=l?`#${ts}=${encodeURIComponent(l)}`:"";return`${function({config:t}){return t.emulator?be(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${T(a).slice(1)}${h}`}const is="webStorageSupport",rs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=or,this._completeRedirectFn=Fr,this._overrideRedirectResult=Rr}async _openPopup(t,e,i,r){var s;return fe(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(t,e,i,r=500,s=600){const n=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Zr),{width:r.toString(),height:s.toString(),top:n,left:o}),h=y().toLowerCase();i&&(a=ii(h)?"_blank":i),ti(h)&&(e=e||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((t,[e,i])=>`${t}${e}=${i},`),"");if(function(t=y()){var e;return ai(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(h)&&"_self"!==a)return function(t,e){const i=document.createElement("a");i.href=t,i.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}(e||"",a),new Jr(null);const d=window.open(e||"",a,c);ue(d,t,"popup-blocked");try{d.focus()}catch(t){}return new Jr(d)}(t,await es(t,e,i,ge(),r),lr())}async _openRedirect(t,e,i,r){return await this._originValidation(t),s=await es(t,e,i,ge(),r),cr().location.href=s,new Promise((()=>{}));var s}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:i}=this.eventManagers[e];return t?Promise.resolve(t):(fe(i,"If manager is not set, promise should be"),i)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch((()=>{delete this.eventManagers[e]})),i}async initAndGetManager(t){const e=await async function(t){const e=await function(t){return qr=qr||Xr(t),qr}(t),i=cr().gapi;return ue(i,t,"internal-error"),e.open({where:document.body,url:Qr(t),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kr,dontclear:!0},(e=>new Promise((async(i,r)=>{await e.restyle({setHideOnLeave:!1});const s=le(t,"network-request-failed"),n=cr().setTimeout((()=>{r(s)}),Yr.get());function o(){cr().clearTimeout(n),i(e)}e.ping(o).then(o,(()=>{r(s)}))}))))}(t),i=new Br(t);return e.register("authEvent",(e=>(ue(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:i.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(is,{type:is},(i=>{var r;const s=null===(r=null==i?void 0:i[0])||void 0===r?void 0:r[is];void 0!==s&&e(!!s),ae(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Se(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(jr(t))return}catch(t){}ae(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return li()||ei()||ai()}};var ss="@firebase/auth",ns="1.8.0";class os{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const as=g("authIdTokenMaxAge")||300;let ls=null;var hs,cs;hs={loadJS:t=>new Promise(((e,i)=>{const r=document.createElement("script");var s,n;r.setAttribute("src",t),r.onload=e,r.onerror=t=>{const e=le("internal-error");e.customData=t,i(e)},r.type="text/javascript",r.charset="UTF-8",(null!==(n=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==n?n:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},gi=hs,cs="Browser",Bt(new P("auth",((t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:n,authDomain:o}=i.options;ue(n&&!n.includes(":"),"invalid-api-key",{appName:i.name});const a={apiKey:n,authDomain:o,clientPlatform:cs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hi(cs)},l=new ui(i,r,s,a);return function(t,e){const i=(null==e?void 0:e.persistence)||[],r=(Array.isArray(i)?i:[i]).map(Ye);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(l,e),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,i)=>{t.getProvider("auth-internal").initialize()}))),Bt(new P("auth-internal",(t=>(t=>new os(t))(pi(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Xt(ss,ns,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(cs)),Xt(ss,ns,"esm2017"),Xt("firebase","11.0.1","app");var ds=Gt({apiKey:"AIzaSyBDeCL2hF0kH1enhoI3gk_hvuKkUMh-Vo4",authDomain:"ptpt-3ce02.firebaseapp.com",projectId:"ptpt-3ce02",storageBucket:"ptpt-3ce02.firebasestorage.app",messagingSenderId:"128277472240",appId:"1:128277472240:web:b21413cfb6c17da546f335"});function us(t){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(t)}function ps(){ps=function(){return e};var t,e={},i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var n=e&&e.prototype instanceof y?e:y,o=Object.create(n.prototype),a=new M(r||[]);return s(o,"_invoke",{value:k(t,i,a)}),o}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var u="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function y(){}function v(){}function b(){}var x={};h(x,o,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(L([])));E&&E!==i&&r.call(E,o)&&(x=E);var T=b.prototype=y.prototype=Object.create(x);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function i(s,n,o,a){var l=d(t[s],t,n);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==us(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(c).then((function(t){h.value=t,o(h)}),(function(t){return i("throw",t,o,a)}))}a(l.arg)}var n;s(this,"_invoke",{value:function(t,r){function s(){return new e((function(e,s){i(t,r,e,s)}))}return n=n?n.then(s,s):s()}})}function k(e,i,r){var s=u;return function(n,o){if(s===f)throw Error("Generator is already running");if(s===g){if("throw"===n)throw o;return{value:t,done:!0}}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var l=C(a,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===u)throw s=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=f;var h=d(e,i,r);if("normal"===h.type){if(s=r.done?g:p,h.arg===m)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(s=g,r.method="throw",r.arg=h.arg)}}}function C(e,i){var r=i.method,s=e.iterator[r];if(s===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var n=d(s,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,m;var o=n.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function L(e){if(e||""===e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,n=function i(){for(;++s<e.length;)if(r.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return n.next=n}}throw new TypeError(us(e)+" is not iterable")}return v.prototype=b,s(T,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:v,configurable:!0}),v.displayName=h(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(A.prototype),h(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,i,r,s,n){void 0===n&&(n=Promise);var o=new A(c(t,i,r,s),n);return e.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(T),h(T,l,"Generator"),h(T,o,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(r,s){return a.type="throw",a.arg=e,i.next=r,s&&(i.method="next",i.arg=t),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),h=r.call(o,"finallyLoc");if(l&&h){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;P(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:L(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function fs(t,e,i,r,s,n,o){try{var a=t[n](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(r,s)}function gs(t){return function(){var e=this,i=arguments;return new Promise((function(r,s){var n=t.apply(e,i);function o(t){fs(n,r,s,o,a,"next",t)}function a(t){fs(n,r,s,o,a,"throw",t)}o(void 0)}))}}var ms,ys,vs=function(t=Wt()){const e=zt(t,"auth");if(e.isInitialized())return e.getImmediate();const i=function(t,e){const i=zt(t,"auth");if(i.isInitialized()){const t=i.getImmediate();if(w(i.getOptions(),null!=e?e:{}))return t;ae(t,"already-initialized")}return i.initialize({options:e})}(t,{popupRedirectResolver:rs,persistence:[wr,sr,or]}),r=g("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const t=new URL(r,location.origin);if(location.origin===t.origin){const e=(s=t.toString(),async t=>{const e=t&&await t.getIdTokenResult(),i=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>as)return;const r=null==e?void 0:e.token;ls!==r&&(ls=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(t,e,i){I(t).beforeAuthStateChanged(e,i)}(i,e,(()=>e(i.currentUser))),function(t){I(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(i)}}var s;const n=p("auth");return n&&function(t,e,i){const r=pi(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(null==i?void 0:i.disableWarnings),n=Si(e),{host:o,port:a}=function(t){const e=Si(t),i=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const t=s[1];return{host:t,port:Ai(r.substr(t.length+1))}}{const[t,e]=r.split(":");return{host:t,port:Ai(e)}}}(e),l=null===a?"":`:${a}`;r.config.emulator={url:`${n}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:n.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(i,`http://${n}`),i}(ds),bs=function(){var t=gs(ps().mark((function t(){return ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vs.currentUser;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),xs=function(){var t=gs(ps().mark((function t(e,i){var r,s;return ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$i(vs,e,i);case 3:return r=t.sent,s=r.user,t.abrupt("return",s);case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),xp(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,i){return t.apply(this,arguments)}}(),ws=function(){var t=gs(ps().mark((function t(e,i){var r,s;return ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Qi(vs,e,i);case 3:return r=t.sent,s=r.user,t.abrupt("return",s);case 8:t.prev=8,t.t0=t.catch(0),t.t1=t.t0.code,t.next="auth/invalid-credential"===t.t1?13:15;break;case 13:return xp("Email ou senha inválidos"),t.abrupt("break",17);case 15:return console.error(t.t0),t.abrupt("break",17);case 17:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,i){return t.apply(this,arguments)}}(),Es=function(){var t=gs(ps().mark((function t(){return ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ji(vs);case 3:zp.user.logoutUser(),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),xp(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),Ts=function(){Zi(vs,function(){var t=gs(ps().mark((function t(e){return ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}if(console.log("user is signed in"),!document.body.hasAttribute("data-redirect-if-logged-in")){t.next=5;break}return window.location="".concat("/neurotreino","/"),t.abrupt("return");case 5:if(zp.user.hasUserData()){t.next=8;break}return t.next=8,zp.user.loginUser(e.uid);case 8:return t.abrupt("return");case 9:if(console.log("user is not signed in"),!document.body.hasAttribute("data-redirect-if-not-logged-in")){t.next=13;break}return window.location="".concat("/neurotreino","/"),t.abrupt("return");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Ss=function(t){Zi(vs,t)},As="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ks={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(t,e,i){i||(i=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(i++)|e.charCodeAt(i++)<<8|e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<24;else for(s=0;16>s;++s)r[s]=e[i++]|e[i++]<<8|e[i++]<<16|e[i++]<<24;e=t.g[0],i=t.g[1],s=t.g[2];var n=t.g[3],o=e+(n^i&(s^n))+r[0]+3614090360&4294967295;o=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=(i=(s=(n=(e=i+(o<<7&4294967295|o>>>25))+((o=n+(s^e&(i^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(i^n&(e^i))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^s&(n^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(n^i&(s^n))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=n+(s^e&(i^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(i^n&(e^i))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^s&(n^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(n^i&(s^n))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=n+(s^e&(i^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(i^n&(e^i))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^s&(n^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(n^i&(s^n))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=n+(s^e&(i^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(i^n&(e^i))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^s&(n^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=n+(i^s&(e^i))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^i&(n^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=i+(n^e&(s^n))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^n&(i^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=n+(i^s&(e^i))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^i&(n^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=i+(n^e&(s^n))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^n&(i^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=n+(i^s&(e^i))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^i&(n^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=i+(n^e&(s^n))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^n&(i^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=n+(i^s&(e^i))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^i&(n^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=i+(n^e&(s^n))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s^n)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=n+(e^i^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(n^e^i)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=i+(s^n^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^s^n)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=n+(e^i^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(n^e^i)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=i+(s^n^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^s^n)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=n+(e^i^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(n^e^i)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=i+(s^n^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^s^n)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=n+(e^i^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(n^e^i)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=i+(s^n^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(s^(i|~n))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=n+(i^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(n|~i))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=i+(n^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(i|~n))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=n+(i^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(n|~i))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=i+(n^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(i|~n))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=n+(i^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(n|~i))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=i+(n^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((n=(e=i+((o=e+(s^(i|~n))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=n+(i^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=n+((o=s+(e^(n|~i))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+n&4294967295}function r(t,e){this.h=e;for(var i=[],r=!0,s=t.length-1;0<=s;s--){var n=0|t[s];r&&n==e||(i[s]=n,r=!1)}this.g=i}!function(t,e){function i(){}i.prototype=e.prototype,t.D=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.C=function(t,i,r){for(var s=Array(arguments.length-2),n=2;n<arguments.length;n++)s[n-2]=arguments[n];return e.prototype[i].apply(t,s)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var r=e-this.blockSize,s=this.B,n=this.h,o=0;o<e;){if(0==n)for(;o<=r;)i(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(s[n++]=t.charCodeAt(o++),n==this.blockSize){i(this,s),n=0;break}}else for(;o<e;)if(s[n++]=t[o++],n==this.blockSize){i(this,s),n=0;break}}this.h=n,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var i=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&i,i/=256;for(this.u(t),t=Array(16),e=i=0;4>e;++e)for(var r=0;32>r;r+=8)t[i++]=this.g[e]>>>r&255;return t};var s={};function n(t){return-128<=t&&128>t?function(t){var e=s;return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=function(t){return new r([0|t],0>t?-1:0)}(t)}(t):new r([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return u(o(-t));for(var e=[],i=1,s=0;t>=i;s++)e[s]=t/i|0,i*=4294967296;return new r(e,0)}var a=n(0),l=n(1),h=n(16777216);function c(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function d(t){return-1==t.h}function u(t){for(var e=t.g.length,i=[],s=0;s<e;s++)i[s]=~t.g[s];return new r(i,~t.h).add(l)}function p(t,e){return t.add(u(e))}function f(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(c(e))throw Error("division by zero");if(c(t))return new g(a,a);if(d(t))return e=m(u(t),e),new g(u(e.g),u(e.h));if(d(e))return e=m(t,u(e)),new g(u(e.g),e.h);if(30<t.g.length){if(d(t)||d(e))throw Error("slowDivide_ only works with positive integers.");for(var i=l,r=e;0>=r.l(t);)i=y(i),r=y(r);var s=v(i,1),n=v(r,1);for(r=v(r,2),i=v(i,2);!c(r);){var h=n.add(r);0>=h.l(t)&&(s=s.add(i),n=h),r=v(r,1),i=v(i,1)}return e=p(t,s.j(e)),new g(s,e)}for(s=a;0<=t.l(e);){for(i=Math.max(1,Math.floor(t.m()/e.m())),r=48>=(r=Math.ceil(Math.log(i)/Math.LN2))?1:Math.pow(2,r-48),h=(n=o(i)).j(e);d(h)||0<h.l(t);)h=(n=o(i-=r)).j(e);c(n)&&(n=l),s=s.add(n),t=p(t,h)}return new g(s,t)}function y(t){for(var e=t.g.length+1,i=[],s=0;s<e;s++)i[s]=t.i(s)<<1|t.i(s-1)>>>31;return new r(i,t.h)}function v(t,e){var i=e>>5;e%=32;for(var s=t.g.length-i,n=[],o=0;o<s;o++)n[o]=0<e?t.i(o+i)>>>e|t.i(o+i+1)<<32-e:t.i(o+i);return new r(n,t.h)}(t=r.prototype).m=function(){if(d(this))return-u(this).m();for(var t=0,e=1,i=0;i<this.g.length;i++){var r=this.i(i);t+=(0<=r?r:4294967296+r)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(c(this))return"0";if(d(this))return"-"+u(this).toString(t);for(var e=o(Math.pow(t,6)),i=this,r="";;){var s=m(i,e).g,n=((0<(i=p(i,s.j(e))).g.length?i.g[0]:i.h)>>>0).toString(t);if(c(i=s))return n+r;for(;6>n.length;)n="0"+n;r=n+r}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return d(t=p(this,t))?-1:c(t)?0:1},t.abs=function(){return d(this)?u(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],s=0,n=0;n<=e;n++){var o=s+(65535&this.i(n))+(65535&t.i(n)),a=(o>>>16)+(this.i(n)>>>16)+(t.i(n)>>>16);s=a>>>16,o&=65535,a&=65535,i[n]=a<<16|o}return new r(i,-2147483648&i[i.length-1]?-1:0)},t.j=function(t){if(c(this)||c(t))return a;if(d(this))return d(t)?u(this).j(u(t)):u(u(this).j(t));if(d(t))return u(this.j(u(t)));if(0>this.l(h)&&0>t.l(h))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,i=[],s=0;s<2*e;s++)i[s]=0;for(s=0;s<this.g.length;s++)for(var n=0;n<t.g.length;n++){var l=this.i(s)>>>16,p=65535&this.i(s),g=t.i(n)>>>16,m=65535&t.i(n);i[2*s+2*n]+=p*m,f(i,2*s+2*n),i[2*s+2*n+1]+=l*m,f(i,2*s+2*n+1),i[2*s+2*n+1]+=p*g,f(i,2*s+2*n+1),i[2*s+2*n+2]+=l*g,f(i,2*s+2*n+2)}for(s=0;s<e;s++)i[s]=i[2*s+1]<<16|i[2*s];for(s=e;s<2*e;s++)i[s]=0;return new r(i,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],s=0;s<e;s++)i[s]=this.i(s)&t.i(s);return new r(i,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],s=0;s<e;s++)i[s]=this.i(s)|t.i(s);return new r(i,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],s=0;s<e;s++)i[s]=this.i(s)^t.i(s);return new r(i,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,ys=ks.Md5=e,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function t(e,i){if(0==e.length)throw Error("number format error: empty string");if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if("-"==e.charAt(0))return u(t(e.substring(1),i));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(i,8)),s=a,n=0;n<e.length;n+=8){var l=Math.min(8,e.length-n),h=parseInt(e.substring(n,n+l),i);8>l?(l=o(Math.pow(i,l)),s=s.j(l).add(o(h))):s=(s=s.j(r)).add(o(h))}return s},ms=ks.Integer=r}).apply(void 0!==As?As:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Cs,Is,Ps,Ms,Ls,Os,Ns,_s,Ds="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Rs={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){return t==Array.prototype||t==Object.prototype||(t[e]=i.value),t},i=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ds&&Ds];for(var e=0;e<t.length;++e){var i=t[e];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);!function(t,r){if(r)t:{var s=i;t=t.split(".");for(var n=0;n<t.length-1;n++){var o=t[n];if(!(o in s))break t;s=s[o]}(r=r(n=s[t=t[t.length-1]]))!=n&&null!=r&&e(s,t,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var i=0,r=!1,s={next:function(){if(!r&&i<t.length){var s=i++;return{value:e(0,t[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(t,e){return e}))}}));var r=r||{},s=this||self;function n(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,i){return t.call.apply(t.bind,arguments)}function l(t,e,i){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function h(t,e,i){return(h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function d(t,e){function i(){}i.prototype=e.prototype,t.aa=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.Qb=function(t,i,r){for(var s=Array(arguments.length-2),n=2;n<arguments.length;n++)s[n-2]=arguments[n];return e.prototype[i].apply(t,s)}}function u(t){const e=t.length;if(0<e){const i=Array(e);for(let r=0;r<e;r++)i[r]=t[r];return i}return[]}function p(t,e){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(n(i)){const e=t.length||0,r=i.length||0;t.length=e+r;for(let s=0;s<r;s++)t[e+s]=i[s]}else t.push(i)}}function f(t){return/^[\s\xa0]*$/.test(t)}function g(){var t=s.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var y=!(-1==g().indexOf("Gecko")||-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge")||-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE")||-1!=g().indexOf("Edge"));function v(t,e,i){for(const r in t)e.call(i,t[r],r,t)}function b(t){const e={};for(const i in t)e[i]=t[i];return e}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(t,e){let i,r;for(let e=1;e<arguments.length;e++){for(i in r=arguments[e],r)t[i]=r[i];for(let e=0;e<x.length;e++)i=x[e],Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}}function E(t){var e=1;t=t.split(":");const i=[];for(;0<e&&t.length;)i.push(t.shift()),e--;return t.length&&i.push(t.join(":")),i}function T(t){s.setTimeout((()=>{throw t}),0)}function S(){var t=P;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var A=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new k),(t=>t.reset()));class k{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let C,I=!1,P=new class{constructor(){this.h=this.g=null}add(t,e){const i=A.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},M=()=>{const t=s.Promise.resolve(void 0);C=()=>{t.then(L)}};var L=()=>{for(var t;t=S();){try{t.h.call(t.g)}catch(t){T(t)}var e=A;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}I=!1};function O(){this.s=this.s,this.C=this.C}function N(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var _=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};s.addEventListener("test",t,e),s.removeEventListener("test",t,e)}catch(t){}return t}();function D(t,e){if(N.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{m(e.nodeName);var s=!0;break t}catch(t){}s=!1}s||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:R[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&D.aa.h.call(this)}}d(D,N);var R={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),B=0;function z(t,e,i,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!r,this.ha=s,this.key=++B,this.da=this.fa=!1}function U(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function H(t){this.src=t,this.g={},this.h=0}function V(t,e){var i=e.type;if(i in t.g){var r,s=t.g[i],n=Array.prototype.indexOf.call(s,e,void 0);(r=0<=n)&&Array.prototype.splice.call(s,n,1),r&&(U(e),0==t.g[i].length&&(delete t.g[i],t.h--))}}function j(t,e,i,r){for(var s=0;s<t.length;++s){var n=t[s];if(!n.da&&n.listener==e&&n.capture==!!i&&n.ha==r)return s}return-1}H.prototype.add=function(t,e,i,r,s){var n=t.toString();(t=this.g[n])||(t=this.g[n]=[],this.h++);var o=j(t,e,r,s);return-1<o?(e=t[o],i||(e.fa=!1)):((e=new z(e,this.src,n,!!r,s)).fa=i,t.push(e)),e};var G="closure_lm_"+(1e6*Math.random()|0),W={};function X(t,e,i,r,s){if(r&&r.once)return Y(t,e,i,r,s);if(Array.isArray(e)){for(var n=0;n<e.length;n++)X(t,e[n],i,r,s);return null}return i=et(i),t&&t[F]?t.K(e,i,o(r)?!!r.capture:!!r,s):q(t,e,i,!1,r,s)}function q(t,e,i,r,s,n){if(!e)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,l=J(t);if(l||(t[G]=l=new H(t)),(i=l.add(e,i,r,a,n)).proxy)return i;if(r=function(){const t=Z;return function e(i){return t.call(e.src,e.listener,i)}}(),i.proxy=r,r.src=t,r.listener=i,t.addEventListener)_||(s=a),void 0===s&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Q(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return i}function Y(t,e,i,r,s){if(Array.isArray(e)){for(var n=0;n<e.length;n++)Y(t,e[n],i,r,s);return null}return i=et(i),t&&t[F]?t.L(e,i,o(r)?!!r.capture:!!r,s):q(t,e,i,!0,r,s)}function K(t,e,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)K(t,e[n],i,r,s);else r=o(r)?!!r.capture:!!r,i=et(i),t&&t[F]?(t=t.i,(e=String(e).toString())in t.g&&-1<(i=j(n=t.g[e],i,r,s))&&(U(n[i]),Array.prototype.splice.call(n,i,1),0==n.length&&(delete t.g[e],t.h--))):t&&(t=J(t))&&(e=t.g[e.toString()],t=-1,e&&(t=j(e,i,r,s)),(i=-1<t?e[t]:null)&&$(i))}function $(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[F])V(e.i,t);else{var i=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(i,r,t.capture):e.detachEvent?e.detachEvent(Q(i),r):e.addListener&&e.removeListener&&e.removeListener(r),(i=J(e))?(V(i,t),0==i.h&&(i.src=null,e[G]=null)):U(t)}}}function Q(t){return t in W?W[t]:W[t]="on"+t}function Z(t,e){if(t.da)t=!0;else{e=new D(e,this);var i=t.listener,r=t.ha||t.src;t.fa&&$(t),t=i.call(r,e)}return t}function J(t){return(t=t[G])instanceof H?t:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"==typeof t?t:(t[tt]||(t[tt]=function(e){return t.handleEvent(e)}),t[tt])}function it(){O.call(this),this.i=new H(this),this.M=this,this.F=null}function rt(t,e){var i,r=t.F;if(r)for(i=[];r;r=r.F)i.push(r);if(t=t.M,r=e.type||e,"string"==typeof e)e=new N(e,t);else if(e instanceof N)e.target=e.target||t;else{var s=e;w(e=new N(r,t),s)}if(s=!0,i)for(var n=i.length-1;0<=n;n--){var o=e.g=i[n];s=st(o,r,!0,e)&&s}if(s=st(o=e.g=t,r,!0,e)&&s,s=st(o,r,!1,e)&&s,i)for(n=0;n<i.length;n++)s=st(o=e.g=i[n],r,!1,e)&&s}function st(t,e,i,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,n=0;n<e.length;++n){var o=e[n];if(o&&!o.da&&o.capture==i){var a=o.listener,l=o.ha||o.src;o.fa&&V(t.i,o),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}function nt(t,e,i){if("function"==typeof t)i&&(t=h(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=h(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function ot(t){t.g=nt((()=>{t.g=null,t.i&&(t.i=!1,ot(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}d(it,O),it.prototype[F]=!0,it.prototype.removeEventListener=function(t,e,i,r){K(this,t,e,i,r)},it.prototype.N=function(){if(it.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var i=e.g[t],r=0;r<i.length;r++)U(i[r]);delete e.g[t],e.h--}}this.F=null},it.prototype.K=function(t,e,i,r){return this.i.add(String(t),e,!1,i,r)},it.prototype.L=function(t,e,i,r){return this.i.add(String(t),e,!0,i,r)};class at extends O{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(t){O.call(this),this.h=t,this.g={}}d(lt,O);var ht=[];function ct(t){v(t.g,(function(t,e){this.g.hasOwnProperty(e)&&$(t)}),t),t.g={}}lt.prototype.N=function(){lt.aa.N.call(this),ct(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dt=s.JSON.stringify,ut=s.JSON.parse,pt=class{stringify(t){return s.JSON.stringify(t,void 0)}parse(t){return s.JSON.parse(t,void 0)}};function ft(){}function gt(t){return t.h||(t.h=t.i())}function mt(){}ft.prototype.h=null;var yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vt(){N.call(this,"d")}function bt(){N.call(this,"c")}d(vt,N),d(bt,N);var xt={},wt=null;function Et(){return wt=wt||new it}function Tt(t){N.call(this,xt.La,t)}function St(t){const e=Et();rt(e,new Tt(e))}function At(t,e){N.call(this,xt.STAT_EVENT,t),this.stat=e}function kt(t){const e=Et();rt(e,new At(e,t))}function Ct(t,e){N.call(this,xt.Ma,t),this.size=e}function It(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){t()}),e)}function Pt(){this.g=!0}function Mt(t,e,i,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var r=i[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var n=s[0];if("noop"!=n&&"stop"!=n&&"close"!=n)for(var o=1;o<s.length;o++)s[o]=""}}}return dt(i)}catch(t){return e}}(t,i)+(r?" "+r:"")}))}xt.La="serverreachability",d(Tt,N),xt.STAT_EVENT="statevent",d(At,N),xt.Ma="timingevent",d(Ct,N),Pt.prototype.xa=function(){this.g=!1},Pt.prototype.info=function(){};var Lt,Ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function _t(){}function Dt(t,e,i,r){this.j=t,this.i=e,this.l=i,this.R=r||1,this.U=new lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rt}function Rt(){this.i=null,this.g="",this.h=!1}d(_t,ft),_t.prototype.g=function(){return new XMLHttpRequest},_t.prototype.i=function(){return{}},Lt=new _t;var Ft={},Bt={};function zt(t,e,i){t.L=1,t.v=de(oe(e)),t.m=i,t.P=!0,Ut(t,null)}function Ut(t,e){t.F=Date.now(),jt(t),t.A=oe(t.v);var i=t.A,r=t.R;Array.isArray(r)||(r=[String(r)]),Ae(i.i,"t",r),t.C=0,i=t.j.J,t.h=new Rt,t.g=ui(t.j,i?e:null,!t.m),0<t.O&&(t.M=new at(h(t.Y,t,t.g),t.O)),e=t.U,i=t.g,r=t.ca;var s="readystatechange";Array.isArray(s)||(s&&(ht[0]=s.toString()),s=ht);for(var n=0;n<s.length;n++){var o=X(i,s[n],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?b(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),St(),function(t,e,i,r,s,n){t.info((function(){if(t.g)if(n)for(var o="",a=n.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var c=h[0];h=h[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+h+"&":o+(c+"=redacted&")}}else o=null;else o=n;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+i+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Ht(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.j.Ca}function Vt(t,e){var i=t.C,r=e.indexOf("\n",i);return-1==r?Bt:(i=Number(e.substring(i,r)),isNaN(i)?Ft:(r+=1)+i>e.length?Bt:(e=e.slice(r,r+i),t.C=r+i,e))}function jt(t){t.S=Date.now()+t.I,Gt(t,t.I)}function Gt(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=It(h(t.ba,t),e)}function Wt(t){t.B&&(s.clearTimeout(t.B),t.B=null)}function Xt(t){0==t.j.G||t.J||ai(t.j,t)}function qt(t){Wt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ct(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Yt(t,e){try{var i=t.j;if(0!=i.G&&(i.g==t||Jt(i.h,t)))if(!t.K&&Jt(i.h,t)&&3==i.G){try{var r=i.Da.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){t:if(!i.u){if(i.g){if(!(i.g.F+3e3<t.F))break t;oi(i),$e(i)}ri(i),kt(18)}}else i.za=s[1],0<i.za-i.T&&37500>s[2]&&i.F&&0==i.v&&!i.C&&(i.C=It(h(i.Za,i),6e3));if(1>=Zt(i.h)&&i.ca){try{i.ca()}catch(t){}i.ca=void 0}}else hi(i,11)}else if((t.K||i.g==t)&&oi(i),!f(e))for(s=i.Da.g.parse(e),e=0;e<s.length;e++){let h=s[e];if(i.T=h[0],h=h[1],2==i.G)if("c"==h[0]){i.K=h[1],i.ia=h[2];const e=h[3];null!=e&&(i.la=e,i.j.info("VER="+i.la));const s=h[4];null!=s&&(i.Aa=s,i.j.info("SVER="+i.Aa));const c=h[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,i.L=r,i.j.info("backChannelRequestTimeoutMs_="+r)),r=i;const d=t.g;if(d){const t=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var n=r.h;n.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(n.j=n.l,n.g=new Set,n.h&&(te(n,n.h),n.h=null))}if(r.D){const t=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.ya=t,ce(r.I,r.D,t))}}i.G=3,i.l&&i.l.ua(),i.ba&&(i.R=Date.now()-t.F,i.j.info("Handshake RTT: "+i.R+"ms"));var o=t;if((r=i).qa=di(r,r.J?r.ia:null,r.W),o.K){ee(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Wt(a),jt(a)),r.g=o}else ii(r);0<i.i.length&&Ze(i)}else"stop"!=h[0]&&"close"!=h[0]||hi(i,7);else 3==i.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?hi(i,7):Ke(i):"noop"!=h[0]&&i.l&&i.l.ta(h),i.v=0)}St()}catch(t){}}Dt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==We(t)?e.j():this.Y(t)},Dt.prototype.Y=function(t){try{if(t==this.g)t:{const u=We(this.g);var e=this.g.Ba();if(this.g.Z(),!(3>u)&&(3!=u||this.g&&(this.h.h||this.g.oa()||Xe(this.g)))){this.J||4!=u||7==e||St(),Wt(this);var i=this.g.Z();this.X=i;e:if(Ht(this)){var r=Xe(this.g);t="";var n=r.length,o=4==We(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qt(this),Xt(this);var a="";break e}this.h.i=new s.TextDecoder}for(e=0;e<n;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:!(o&&e==n-1)});r.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==i,function(t,e,i,r,s,n,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+i+"\n"+n+" "+o}))}(this.i,this.u,this.A,this.l,this.R,u,i),this.o){if(this.T&&!this.K){e:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var c=l;break e}}c=null}if(!(i=c)){this.o=!1,this.s=3,kt(12),qt(this),Xt(this);break t}Mt(this.i,this.l,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yt(this,i)}if(this.P){let t;for(i=!0;!this.J&&this.C<a.length;){if(t=Vt(this,a),t==Bt){4==u&&(this.s=4,kt(14),i=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Ft){this.s=4,kt(15),Mt(this.i,this.l,a,"[Invalid Chunk]"),i=!1;break}Mt(this.i,this.l,t,null),Yt(this,t)}if(Ht(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=u||0!=a.length||this.h.h||(this.s=1,kt(16),i=!1),this.o=this.o&&i,i){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),si(d),d.M=!0,kt(11))}}else Mt(this.i,this.l,a,"[Invalid Chunked Response]"),qt(this),Xt(this)}else Mt(this.i,this.l,a,null),Yt(this,a);4==u&&qt(this),this.o&&!this.J&&(4==u?ai(this.j,this):(this.o=!1,jt(this)))}else(function(t){const e={};t=(t.g&&2<=We(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(f(t[r]))continue;var i=E(t[r]);const s=i[0];if("string"!=typeof(i=i[1]))continue;i=i.trim();const n=e[s]||[];e[s]=n,n.push(i)}!function(t,e){for(const i in t)e.call(void 0,t[i],i,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==i&&0<a.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),qt(this),Xt(this)}}}catch(t){}},Dt.prototype.cancel=function(){this.J=!0,qt(this)},Dt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(St(),kt(17)),qt(this),this.s=2,Xt(this)):Gt(this,this.S-t)};var Kt=class{constructor(t,e){this.g=t,this.map=e}};function $t(t){this.l=t||10,t=s.PerformanceNavigationTiming?0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Zt(t){return t.h?1:t.g?t.g.size:0}function Jt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function te(t,e){t.g?t.g.add(e):t.h=e}function ee(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ie(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const i of t.g.values())e=e.concat(i.D);return e}return u(t.i)}function re(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(n(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var i=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(n(t)||"string"==typeof t){var e=[];t=t.length;for(var i=0;i<t;i++)e.push(i);return e}e=[],i=0;for(const r in t)e[i++]=r;return e}}}(t),r=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(n(t)){for(var e=[],i=t.length,r=0;r<i;r++)e.push(t[r]);return e}for(r in e=[],i=0,t)e[i++]=t[r];return e}(t),s=r.length,o=0;o<s;o++)e.call(void 0,r[o],i&&i[o],t)}$t.prototype.cancel=function(){if(this.i=ie(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var se=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ne(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof ne){this.h=t.h,ae(this,t.j),this.o=t.o,this.g=t.g,le(this,t.s),this.l=t.l;var e=t.i,i=new we;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),he(this,i),this.m=t.m}else t&&(e=String(t).match(se))?(this.h=!1,ae(this,e[1]||"",!0),this.o=ue(e[2]||""),this.g=ue(e[3]||"",!0),le(this,e[4]),this.l=ue(e[5]||"",!0),he(this,e[6]||"",!0),this.m=ue(e[7]||"")):(this.h=!1,this.i=new we(null,this.h))}function oe(t){return new ne(t)}function ae(t,e,i){t.j=i?ue(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function he(t,e,i){e instanceof we?(t.i=e,function(t,e){e&&!t.j&&(Ee(t),t.i=null,t.g.forEach((function(t,e){var i=e.toLowerCase();e!=i&&(Te(this,e),Ae(this,i,t))}),t)),t.j=e}(t.i,t.h)):(i||(e=pe(e,be)),t.i=new we(e,t.h))}function ce(t,e,i){t.i.set(e,i)}function de(t){return ce(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ue(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pe(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,fe),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ne.prototype.toString=function(){var t=[],e=this.j;e&&t.push(pe(e,me,!0),":");var i=this.g;return(i||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(pe(e,me,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.s)&&t.push(":",String(i))),(i=this.l)&&(this.g&&"/"!=i.charAt(0)&&t.push("/"),t.push(pe(i,"/"==i.charAt(0)?ve:ye,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.m)&&t.push("#",pe(i,xe)),t.join("")};var ge,me=/[#\/\?@]/g,ye=/[#\?:]/g,ve=/[#\?]/g,be=/[#\?@]/g,xe=/#/g;function we(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ee(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var r=t[i].indexOf("="),s=null;if(0<=r){var n=t[i].substring(0,r);s=t[i].substring(r+1)}else n=t[i];e(n,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,(function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)})))}function Te(t,e){Ee(t),e=ke(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Se(t,e){return Ee(t),e=ke(t,e),t.g.has(e)}function Ae(t,e,i){Te(t,e),0<i.length&&(t.i=null,t.g.set(ke(t,e),u(i)),t.h+=i.length)}function ke(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ce(t,e,i,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(i)}catch(t){}}function Ie(){this.g=new pt}function Pe(t,e,i){const r=i||"";try{re(t,(function(t,i){let s=t;o(t)&&(s=dt(t)),e.push(r+i+"="+encodeURIComponent(s))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Me(t){this.l=t.Ub||null,this.j=t.eb||!1}function Le(t,e){it.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Oe(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function Ne(t){t.readyState=4,t.l=null,t.j=null,t.v=null,_e(t)}function _e(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function De(t){let e="";return v(t,(function(t,i){e+=i,e+=":",e+=t,e+="\r\n"})),e}function Re(t,e,i){t:{for(r in i){var r=!1;break t}r=!0}r||(i=De(i),"string"==typeof t?null!=i&&encodeURIComponent(String(i)):ce(t,e,i))}function Fe(t){it.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=we.prototype).add=function(t,e){Ee(this),this.i=null,t=ke(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this},t.forEach=function(t,e){Ee(this),this.g.forEach((function(i,r){i.forEach((function(i){t.call(e,i,r,this)}),this)}),this)},t.na=function(){Ee(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let r=0;r<e.length;r++){const s=t[r];for(let t=0;t<s.length;t++)i.push(e[r])}return i},t.V=function(t){Ee(this);let e=[];if("string"==typeof t)Se(this,t)&&(e=e.concat(this.g.get(ke(this,t))));else{t=Array.from(this.g.values());for(let i=0;i<t.length;i++)e=e.concat(t[i])}return e},t.set=function(t,e){return Ee(this),this.i=null,Se(this,t=ke(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var r=e[i];const n=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var s=n;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")},d(Me,ft),Me.prototype.g=function(){return new Le(this.l,this.j)},Me.prototype.i=(ge={},function(){return ge}),d(Le,it),(t=Le.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,_e(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||s).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ne(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,_e(this)),this.g&&(this.readyState=3,_e(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==s.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oe(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ne(this):_e(this),3==this.readyState&&Oe(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,Ne(this))},t.Qa=function(t){this.g&&(this.response=t,Ne(this))},t.ga=function(){this.g&&Ne(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var i=e.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=e.next();return t.join("\r\n")},Object.defineProperty(Le.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),d(Fe,it);var Be=/^https?$/i,ze=["POST","PUT"];function Ue(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,He(t),je(t)}function He(t){t.A||(t.A=!0,rt(t,"complete"),rt(t,"error"))}function Ve(t){if(t.h&&void 0!==r&&(!t.v[1]||4!=We(t)||2!=t.Z()))if(t.u&&4==We(t))nt(t.Ea,0,t);else if(rt(t,"readystatechange"),4==We(t)){t.h=!1;try{const r=t.Z();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var i;if(!(i=e)){var n;if(n=0===r){var o=String(t.D).match(se)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),n=!Be.test(o?o.toLowerCase():"")}i=n}if(i)rt(t,"complete"),rt(t,"success");else{t.m=6;try{var a=2<We(t)?t.g.statusText:""}catch(t){a=""}t.l=a+" ["+t.Z()+"]",He(t)}}finally{je(t)}}}function je(t,e){if(t.g){Ge(t);const i=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||rt(t,"ready");try{i.onreadystatechange=r}catch(t){}}}function Ge(t){t.I&&(s.clearTimeout(t.I),t.I=null)}function We(t){return t.g?t.g.readyState:0}function Xe(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qe(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function Ye(t){this.Aa=0,this.i=[],this.j=new Pt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qe("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qe("baseRetryDelayMs",5e3,t),this.cb=qe("retryDelaySeedMs",1e4,t),this.Wa=qe("forwardChannelMaxRetries",2,t),this.wa=qe("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new $t(t&&t.concurrentRequestLimit),this.Da=new Ie,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ke(t){if(Qe(t),3==t.G){var e=t.U++,i=oe(t.I);if(ce(i,"SID",t.K),ce(i,"RID",e),ce(i,"TYPE","terminate"),ti(t,i),(e=new Dt(t,t.j,e)).L=2,e.v=de(oe(i)),i=!1,s.navigator&&s.navigator.sendBeacon)try{i=s.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!i&&s.Image&&((new Image).src=e.v,i=!0),i||(e.g=ui(e.j,null),e.g.ea(e.v)),e.F=Date.now(),jt(e)}ci(t)}function $e(t){t.g&&(si(t),t.g.cancel(),t.g=null)}function Qe(t){$e(t),t.u&&(s.clearTimeout(t.u),t.u=null),oi(t),t.h.cancel(),t.s&&("number"==typeof t.s&&s.clearTimeout(t.s),t.s=null)}function Ze(t){if(!Qt(t.h)&&!t.s){t.s=!0;var e=t.Ga;C||M(),I||(C(),I=!0),P.add(e,t),t.B=0}}function Je(t,e){var i;i=e?e.l:t.U++;const r=oe(t.I);ce(r,"SID",t.K),ce(r,"RID",i),ce(r,"AID",t.T),ti(t,r),t.m&&t.o&&Re(r,t.m,t.o),i=new Dt(t,t.j,i,t.B+1),null===t.m&&(i.H=t.o),e&&(t.i=e.D.concat(t.i)),e=ei(t,i,1e3),i.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),te(t.h,i),zt(i,r,e)}function ti(t,e){t.H&&v(t.H,(function(t,i){ce(e,i,t)})),t.l&&re({},(function(t,i){ce(e,i,t)}))}function ei(t,e,i){i=Math.min(t.i.length,i);var r=t.l?h(t.l.Na,t.l,t):null;t:{var s=t.i;let e=-1;for(;;){const t=["count="+i];-1==e?0<i?(e=s[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let n=!0;for(let o=0;o<i;o++){let i=s[o].g;const a=s[o].map;if(i-=e,0>i)e=Math.max(0,s[o].g-100),n=!1;else try{Pe(a,t,"req"+i+"_")}catch(t){r&&r(a)}}if(n){r=t.join("&");break t}}}return t=t.i.splice(0,i),e.D=t,r}function ii(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;C||M(),I||(C(),I=!0),P.add(e,t),t.v=0}}function ri(t){return!(t.g||t.u||3<=t.v||(t.Y++,t.u=It(h(t.Fa,t),li(t,t.v)),t.v++,0))}function si(t){null!=t.A&&(s.clearTimeout(t.A),t.A=null)}function ni(t){t.g=new Dt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=oe(t.qa);ce(e,"RID","rpc"),ce(e,"SID",t.K),ce(e,"AID",t.T),ce(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&ce(e,"TO",t.ja),ce(e,"TYPE","xmlhttp"),ti(t,e),t.m&&t.o&&Re(e,t.m,t.o),t.L&&(t.g.I=t.L);var i=t.g;t=t.ia,i.L=1,i.v=de(oe(e)),i.m=null,i.P=!0,Ut(i,t)}function oi(t){null!=t.C&&(s.clearTimeout(t.C),t.C=null)}function ai(t,e){var i=null;if(t.g==e){oi(t),si(t),t.g=null;var r=2}else{if(!Jt(t.h,e))return;i=e.D,ee(t.h,e),r=1}if(0!=t.G)if(e.o)if(1==r){i=e.m?e.m.length:0,e=Date.now()-e.F;var s=t.B;rt(r=Et(),new Ct(r,i)),Ze(t)}else ii(t);else if(3==(s=e.s)||0==s&&0<e.X||!(1==r&&function(t,e){return!(Zt(t.h)>=t.h.j-(t.s?1:0)||(t.s?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa)||(t.s=It(h(t.Ga,t,e),li(t,t.B)),t.B++,0)))}(t,e)||2==r&&ri(t)))switch(i&&0<i.length&&(e=t.h,e.i=e.i.concat(i)),s){case 1:hi(t,5);break;case 4:hi(t,10);break;case 3:hi(t,6);break;default:hi(t,2)}}function li(t,e){let i=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(i*=2),i*e}function hi(t,e){if(t.j.info("Error code "+e),2==e){var i=h(t.fb,t),r=t.Xa;const e=!r;r=new ne(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ae(r,"https"),de(r),e?function(t,e){const i=new Pt;if(s.Image){const r=new Image;r.onload=c(Ce,i,"TestLoadImage: loaded",!0,e,r),r.onerror=c(Ce,i,"TestLoadImage: error",!1,e,r),r.onabort=c(Ce,i,"TestLoadImage: abort",!1,e,r),r.ontimeout=c(Ce,i,"TestLoadImage: timeout",!1,e,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(r.toString(),i):function(t,e){new Pt;const i=new AbortController,r=setTimeout((()=>{i.abort(),Ce(0,0,!1,e)}),1e4);fetch(t,{signal:i.signal}).then((t=>{clearTimeout(r),t.ok?Ce(0,0,!0,e):Ce(0,0,!1,e)})).catch((()=>{clearTimeout(r),Ce(0,0,!1,e)}))}(r.toString(),i)}else kt(2);t.G=0,t.l&&t.l.sa(e),ci(t),Qe(t)}function ci(t){if(t.G=0,t.ka=[],t.l){const e=ie(t.h);0==e.length&&0==t.i.length||(p(t.ka,e),p(t.ka,t.i),t.h.i.length=0,u(t.i),t.i.length=0),t.l.ra()}}function di(t,e,i){var r=i instanceof ne?oe(i):new ne(i);if(""!=r.g)e&&(r.g=e+"."+r.g),le(r,r.s);else{var n=s.location;r=n.protocol,e=e?e+"."+n.hostname:n.hostname,n=+n.port;var o=new ne(null);r&&ae(o,r),e&&(o.g=e),n&&le(o,n),i&&(o.l=i),r=o}return i=t.D,e=t.ya,i&&e&&ce(r,i,e),ce(r,"VER",t.la),ti(t,r),r}function ui(t,e,i){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Fe(new Me({eb:i})):new Fe(t.pa)).Ha(t.J),e}function pi(){}function fi(){}function gi(t,e){it.call(this),this.g=new Ye(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!f(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!f(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new vi(this)}function mi(t){vt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const i in e){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function yi(){bt.call(this),this.status=1}function vi(t){this.g=t}(t=Fe.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,i,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lt.g(),this.v=this.o?gt(this.o):gt(Lt),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(t){return void Ue(this,t)}if(t=i||"",i=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var n in r)i.set(n,r[n]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())i.set(t,r.get(t))}r=Array.from(i.keys()).find((t=>"content-type"==t.toLowerCase())),n=s.FormData&&t instanceof s.FormData,!(0<=Array.prototype.indexOf.call(ze,e,void 0))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of i)this.g.setRequestHeader(t,e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ge(this),this.u=!0,this.g.send(t),this.u=!1}catch(t){Ue(this,t)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,rt(this,"complete"),rt(this,"abort"),je(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),je(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ve(this):this.bb())},t.bb=function(){Ve(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<We(this)?this.g.status:-1}catch(t){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ut(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Ye.prototype).la=8,t.G=1,t.connect=function(t,e,i,r){kt(0),this.W=t,this.H=e||{},i&&void 0!==r&&(this.H.OSID=i,this.H.OAID=r),this.F=this.X,this.I=di(this,null,this.W),Ze(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Dt(this,this.j,t);let n=this.o;if(this.S&&(n?(n=b(n),w(n,this.S)):n=this.S),null!==this.m||this.O||(s.H=n,n=null),this.P)t:{for(var e=0,i=0;i<this.i.length;i++){var r=this.i[i];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=i;break t}if(4096===e||i===this.i.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ei(this,s,e),ce(i=oe(this.I),"RID",t),ce(i,"CVER",22),this.D&&ce(i,"X-HTTP-Session-Id",this.D),ti(this,i),n&&(this.O?e="headers="+encodeURIComponent(String(De(n)))+"&"+e:this.m&&Re(i,this.m,n)),te(this.h,s),this.Ua&&ce(i,"TYPE","init"),this.P?(ce(i,"$req",e),ce(i,"SID","null"),s.T=!0,zt(s,i,null)):zt(s,i,e),this.G=2}}else 3==this.G&&(t?Je(this,t):0==this.i.length||Qt(this.h)||Je(this))},t.Fa=function(){if(this.u=null,ni(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=It(h(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),$e(this),ni(this))},t.Za=function(){null!=this.C&&(this.C=null,$e(this),ri(this),kt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=pi.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},fi.prototype.g=function(t,e){return new gi(t,e)},d(gi,it),gi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gi.prototype.close=function(){Ke(this.g)},gi.prototype.o=function(t){var e=this.g;if("string"==typeof t){var i={};i.__data__=t,t=i}else this.u&&((i={}).__data__=dt(t),t=i);e.i.push(new Kt(e.Ya++,t)),3==e.G&&Ze(e)},gi.prototype.N=function(){this.g.l=null,delete this.j,Ke(this.g),delete this.g,gi.aa.N.call(this)},d(mi,vt),d(yi,bt),d(vi,pi),vi.prototype.ua=function(){rt(this.g,"a")},vi.prototype.ta=function(t){rt(this.g,new mi(t))},vi.prototype.sa=function(t){rt(this.g,new yi)},vi.prototype.ra=function(){rt(this.g,"b")},fi.prototype.createWebChannel=fi.prototype.g,gi.prototype.send=gi.prototype.o,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,_s=Rs.createWebChannelTransport=function(){return new fi},Ns=Rs.getStatEventTarget=function(){return Et()},Os=Rs.Event=xt,Ls=Rs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,Ms=Rs.ErrorCode=Ot,Nt.COMPLETE="complete",Ps=Rs.EventType=Nt,mt.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",it.prototype.listen=it.prototype.K,Is=Rs.WebChannel=mt,Rs.FetchXmlHttpFactory=Me,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Cs=Rs.XhrIo=Fe}).apply(void 0!==Ds?Ds:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Fs="@firebase/firestore";class Bs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Bs.UNAUTHENTICATED=new Bs(null),Bs.GOOGLE_CREDENTIALS=new Bs("google-credentials-uid"),Bs.FIRST_PARTY=new Bs("first-party-uid"),Bs.MOCK_USER=new Bs("mock-user");let zs="11.0.0";const Us=new z("@firebase/firestore");function Hs(){return Us.logLevel}function Vs(t,...e){if(Us.logLevel<=_.DEBUG){const i=e.map(Ws);Us.debug(`Firestore (${zs}): ${t}`,...i)}}function js(t,...e){if(Us.logLevel<=_.ERROR){const i=e.map(Ws);Us.error(`Firestore (${zs}): ${t}`,...i)}}function Gs(t,...e){if(Us.logLevel<=_.WARN){const i=e.map(Ws);Us.warn(`Firestore (${zs}): ${t}`,...i)}}function Ws(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Xs(t="Unexpected state"){const e=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: `+t;throw js(e),new Error(e)}function qs(t,e){t||Xs()}function Ys(t,e){return t}const Ks={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $s extends v{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Zs{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Js{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Bs.UNAUTHENTICATED)))}shutdown(){}}class tn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class en{constructor(t){this.t=t,this.currentUser=Bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){qs(void 0===this.o);let i=this.i;const r=t=>this.i!==i?(i=this.i,e(t)):Promise.resolve();let s=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qs,t.enqueueRetryable((()=>r(this.currentUser)))};const n=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Vs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),n())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Vs("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qs)}}),0),n()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Vs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(qs("string"==typeof e.accessToken),new Zs(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qs(null===t||"string"==typeof t),new Bs(t)}}class rn{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Bs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sn{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new rn(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Bs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class on{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){qs(void 0===this.o);const i=t=>{null!=t.error&&Vs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const i=t.token!==this.R;return this.R=t.token,Vs("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>i(e)))};const r=t=>{Vs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):Vs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(qs("string"==typeof t.token),this.R=t.token,new nn(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function an(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let e=0;e<t;e++)i[e]=Math.floor(256*Math.random());return i}class ln{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const i=an(40);for(let r=0;r<i.length;++r)e.length<20&&i[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[r]%62))}return e}}function hn(t,e){return t<e?-1:t>e?1:0}function cn(t,e,i){return t.length===e.length&&t.every(((t,r)=>i(t,e[r])))}class dn{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new $s(Ks.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new $s(Ks.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new $s(Ks.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $s(Ks.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return dn.fromMillis(Date.now())}static fromDate(t){return dn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new dn(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?hn(this.nanoseconds,t.nanoseconds):hn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class un{constructor(t){this.timestamp=t}static fromTimestamp(t){return new un(t)}static min(){return new un(new dn(0,0))}static max(){return new un(new dn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pn{constructor(t,e,i){void 0===e?e=0:e>t.length&&Xs(),void 0===i?i=t.length-e:i>t.length-e&&Xs(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===pn.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof pn?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class fn extends pn{construct(t,e,i){return new fn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new $s(Ks.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((t=>t.length>0)))}return new fn(e)}static emptyPath(){return new fn([])}}const gn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends pn{construct(t,e,i){return new mn(t,e,i)}static isValidIdentifier(t){return gn.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mn(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new $s(Ks.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let n=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new $s(Ks.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new $s(Ks.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=e,r+=2}else"`"===e?(n=!n,r++):"."!==e||n?(i+=e,r++):(s(),r++)}if(s(),n)throw new $s(Ks.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new mn(e)}static emptyPath(){return new mn([])}}class yn{constructor(t){this.path=t}static fromPath(t){return new yn(fn.fromString(t))}static fromName(t){return new yn(fn.fromString(t).popFirst(5))}static empty(){return new yn(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===fn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return fn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yn(new fn(t.slice()))}}function vn(t){return new bn(t.readTime,t.key,-1)}class bn{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new bn(un.min(),yn.empty(),-1)}static max(){return new bn(un.max(),yn.empty(),-1)}}function xn(t,e){let i=t.readTime.compareTo(e.readTime);return 0!==i?i:(i=yn.comparator(t.documentKey,e.documentKey),0!==i?i:hn(t.largestBatchId,e.largestBatchId))}class wn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function En(t){if(t.code!==Ks.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;Vs("LocalStore","Unexpectedly lost primary lease")}class Tn{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Xs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Tn(((i,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(i,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(i,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Tn?e:Tn.resolve(e)}catch(t){return Tn.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Tn.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Tn.reject(e)}static resolve(t){return new Tn(((e,i)=>{e(t)}))}static reject(t){return new Tn(((e,i)=>{i(t)}))}static waitFor(t){return new Tn(((e,i)=>{let r=0,s=0,n=!1;t.forEach((t=>{++r,t.next((()=>{++s,n&&s===r&&e()}),(t=>i(t)))})),n=!0,s===r&&e()}))}static or(t){let e=Tn.resolve(!1);for(const i of t)e=e.next((t=>t?Tn.resolve(t):i()));return e}static forEach(t,e){const i=[];return t.forEach(((t,r)=>{i.push(e.call(this,t,r))})),this.waitFor(i)}static mapArray(t,e){return new Tn(((i,r)=>{const s=t.length,n=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;e(t[l]).next((t=>{n[l]=t,++o,o===s&&i(n)}),(t=>r(t)))}}))}static doWhile(t,e){return new Tn(((i,r)=>{const s=()=>{!0===t()?e().next((()=>{s()}),r):i()};s()}))}}function Sn(t){return"IndexedDbTransactionError"===t.name}class An{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function kn(t){return null==t}function Cn(t){return 0===t&&1/t==-1/0}function In(t,e){let i=e;const r=t.length;for(let e=0;e<r;e++){const r=t.charAt(e);switch(r){case"\0":i+="";break;case"":i+="";break;default:i+=r}}return i}function Pn(t){return t+""}An.oe=-1;function Mn(t){let e=0;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e++;return e}function Ln(t,e){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function On(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Nn{constructor(t,e){this.comparator=t,this.root=e||Dn.EMPTY}insert(t,e){return new Nn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(t){return new Nn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _n(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _n(this.root,t,this.comparator,!1)}getReverseIterator(){return new _n(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _n(this.root,t,this.comparator,!0)}}class _n{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Dn{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=null!=i?i:Dn.RED,this.left=null!=r?r:Dn.EMPTY,this.right=null!=s?s:Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Dn(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Dn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xs();if(this.right.isRed())throw Xs();const t=this.left.check();if(t!==this.right.check())throw Xs();return t+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1,Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xs()}get value(){throw Xs()}get color(){throw Xs()}get left(){throw Xs()}get right(){throw Xs()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Dn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(t){this.comparator=t,this.data=new Nn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Fn(this.data.getIterator())}getIteratorFrom(t){return new Fn(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Rn))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=i.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Rn(this.comparator);return e.data=t,e}}class Fn{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bn{constructor(t){this.fields=t,t.sort(mn.comparator)}static empty(){return new Bn([])}unionWith(t){let e=new Rn(mn.comparator);for(const t of this.fields)e=e.add(t);for(const i of t)e=e.add(i);return new Bn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return cn(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class zn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Un{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new zn("Invalid base64 string: "+t):t}}(t);return new Un(e)}static fromUint8Array(t){const e=function(t){let e="";for(let i=0;i<t.length;++i)e+=String.fromCharCode(t[i]);return e}(t);return new Un(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return hn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const Hn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vn(t){if(qs(!!t),"string"==typeof t){let e=0;const i=Hn.exec(t);if(qs(!!i),i[1]){let t=i[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(t.seconds),nanos:jn(t.nanos)}}function jn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Gn(t){return"string"==typeof t?Un.fromBase64String(t):Un.fromUint8Array(t)}function Wn(t){var e,i;return"server_timestamp"===(null===(i=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function Xn(t){const e=t.mapValue.fields.__previous_value__;return Wn(e)?Xn(e):e}function qn(t){const e=Vn(t.mapValue.fields.__local_write_time__.timestampValue);return new dn(e.seconds,e.nanos)}class Yn{constructor(t,e,i,r,s,n,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=n,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Kn{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Kn("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Kn&&t.projectId===this.projectId&&t.database===this.database}}const $n={fields:{__type__:{stringValue:"__max__"}}};function Qn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wn(t)?4:go(t)?9007199254740991:po(t)?10:11:Xs()}function Zn(t,e){if(t===e)return!0;const i=Qn(t);if(i!==Qn(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qn(t).isEqual(qn(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const i=Vn(t.timestampValue),r=Vn(e.timestampValue);return i.seconds===r.seconds&&i.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Gn(t.bytesValue).isEqual(Gn(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return jn(t.geoPointValue.latitude)===jn(e.geoPointValue.latitude)&&jn(t.geoPointValue.longitude)===jn(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return jn(t.integerValue)===jn(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const i=jn(t.doubleValue),r=jn(e.doubleValue);return i===r?Cn(i)===Cn(r):isNaN(i)&&isNaN(r)}return!1}(t,e);case 9:return cn(t.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return function(t,e){const i=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Mn(i)!==Mn(r))return!1;for(const t in i)if(i.hasOwnProperty(t)&&(void 0===r[t]||!Zn(i[t],r[t])))return!1;return!0}(t,e);default:return Xs()}}function Jn(t,e){return void 0!==(t.values||[]).find((t=>Zn(t,e)))}function to(t,e){if(t===e)return 0;const i=Qn(t),r=Qn(e);if(i!==r)return hn(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return hn(t.booleanValue,e.booleanValue);case 2:return function(t,e){const i=jn(t.integerValue||t.doubleValue),r=jn(e.integerValue||e.doubleValue);return i<r?-1:i>r?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1}(t,e);case 3:return eo(t.timestampValue,e.timestampValue);case 4:return eo(qn(t),qn(e));case 5:return hn(t.stringValue,e.stringValue);case 6:return function(t,e){const i=Gn(t),r=Gn(e);return i.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const i=t.split("/"),r=e.split("/");for(let t=0;t<i.length&&t<r.length;t++){const e=hn(i[t],r[t]);if(0!==e)return e}return hn(i.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const i=hn(jn(t.latitude),jn(e.latitude));return 0!==i?i:hn(jn(t.longitude),jn(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return io(t.arrayValue,e.arrayValue);case 10:return function(t,e){var i,r,s,n;const o=t.fields||{},a=e.fields||{},l=null===(i=o.value)||void 0===i?void 0:i.arrayValue,h=null===(r=a.value)||void 0===r?void 0:r.arrayValue,c=hn((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(n=null==h?void 0:h.values)||void 0===n?void 0:n.length)||0);return 0!==c?c:io(l,h)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===$n&&e===$n)return 0;if(t===$n)return 1;if(e===$n)return-1;const i=t.fields||{},r=Object.keys(i),s=e.fields||{},n=Object.keys(s);r.sort(),n.sort();for(let t=0;t<r.length&&t<n.length;++t){const e=hn(r[t],n[t]);if(0!==e)return e;const o=to(i[r[t]],s[n[t]]);if(0!==o)return o}return hn(r.length,n.length)}(t.mapValue,e.mapValue);default:throw Xs()}}function eo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return hn(t,e);const i=Vn(t),r=Vn(e),s=hn(i.seconds,r.seconds);return 0!==s?s:hn(i.nanos,r.nanos)}function io(t,e){const i=t.values||[],r=e.values||[];for(let t=0;t<i.length&&t<r.length;++t){const e=to(i[t],r[t]);if(e)return e}return hn(i.length,r.length)}function ro(t){return so(t)}function so(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Vn(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Gn(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return yn.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",i=!0;for(const r of t.values||[])i?i=!1:e+=",",e+=so(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let i="{",r=!0;for(const s of e)r?r=!1:i+=",",i+=`${s}:${so(t.fields[s])}`;return i+"}"}(t.mapValue):Xs()}function no(t){switch(Qn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xn(t);return e?16+no(e):16;case 5:return 2*t.stringValue.length;case 6:return Gn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce(((t,e)=>t+no(e)),0)}(t.arrayValue);case 10:case 11:return function(t){let e=0;return Ln(t.fields,((t,i)=>{e+=t.length+no(i)})),e}(t.mapValue);default:throw Xs()}}function oo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ao(t){return!!t&&"integerValue"in t}function lo(t){return!!t&&"arrayValue"in t}function ho(t){return!!t&&"nullValue"in t}function co(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uo(t){return!!t&&"mapValue"in t}function po(t){var e,i;return"__vector__"===(null===(i=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ln(t.mapValue.fields,((t,i)=>e.mapValue.fields[t]=fo(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(t.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=fo(t.arrayValue.values[i]);return e}return Object.assign({},t)}function go(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class mo{constructor(t){this.value=t}static empty(){return new mo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!uo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=fo(e)}setAll(t){let e=mn.emptyPath(),i={},r=[];t.forEach(((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,i,r),i={},r=[],e=s.popLast()}t?i[s.lastSegment()]=fo(t):r.push(s.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());uo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Zn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];uo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Ln(e,((e,i)=>t[e]=i));for(const e of i)delete t[e]}clone(){return new mo(fo(this.value))}}function yo(t){const e=[];return Ln(t.fields,((t,i)=>{const r=new mn([t]);if(uo(i)){const t=yo(i.mapValue).fields;if(0===t.length)e.push(r);else for(const i of t)e.push(r.child(i))}else e.push(r)})),new Bn(e)}class vo{constructor(t,e,i,r,s,n,o){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=n,this.documentState=o}static newInvalidDocument(t){return new vo(t,0,un.min(),un.min(),un.min(),mo.empty(),0)}static newFoundDocument(t,e,i,r){return new vo(t,1,e,un.min(),i,r,0)}static newNoDocument(t,e){return new vo(t,2,e,un.min(),un.min(),mo.empty(),0)}static newUnknownDocument(t,e){return new vo(t,3,e,un.min(),un.min(),mo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(un.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof vo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new vo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bo{constructor(t,e){this.position=t,this.inclusive=e}}function xo(t,e,i){let r=0;for(let s=0;s<t.position.length;s++){const n=e[s],o=t.position[s];if(r=n.field.isKeyField()?yn.comparator(yn.fromName(o.referenceValue),i.key):to(o,i.data.field(n.field)),"desc"===n.dir&&(r*=-1),0!==r)break}return r}function wo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let i=0;i<t.position.length;i++)if(!Zn(t.position[i],e.position[i]))return!1;return!0}class Eo{constructor(t,e="asc"){this.field=t,this.dir=e}}function To(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class So{}class Ao extends So{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new Oo(t,e,i):"array-contains"===e?new Ro(t,i):"in"===e?new Fo(t,i):"not-in"===e?new Bo(t,i):"array-contains-any"===e?new zo(t,i):new Ao(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new No(t,i):new _o(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(to(e,this.value)):null!==e&&Qn(this.value)===Qn(e)&&this.matchesComparison(to(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Xs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ko extends So{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new ko(t,e)}matches(t){return Co(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Co(t){return"and"===t.op}function Io(t){return function(t){for(const e of t.filters)if(e instanceof ko)return!1;return!0}(t)&&Co(t)}function Po(t){if(t instanceof Ao)return t.field.canonicalString()+t.op.toString()+ro(t.value);if(Io(t))return t.filters.map((t=>Po(t))).join(",");{const e=t.filters.map((t=>Po(t))).join(",");return`${t.op}(${e})`}}function Mo(t,e){return t instanceof Ao?function(t,e){return e instanceof Ao&&t.op===e.op&&t.field.isEqual(e.field)&&Zn(t.value,e.value)}(t,e):t instanceof ko?function(t,e){return e instanceof ko&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,i,r)=>t&&Mo(i,e.filters[r])),!0)}(t,e):void Xs()}function Lo(t){return t instanceof Ao?function(t){return`${t.field.canonicalString()} ${t.op} ${ro(t.value)}`}(t):t instanceof ko?function(t){return t.op.toString()+" {"+t.getFilters().map(Lo).join(" ,")+"}"}(t):"Filter"}class Oo extends Ao{constructor(t,e,i){super(t,e,i),this.key=yn.fromName(i.referenceValue)}matches(t){const e=yn.comparator(t.key,this.key);return this.matchesComparison(e)}}class No extends Ao{constructor(t,e){super(t,"in",e),this.keys=Do(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class _o extends Ao{constructor(t,e){super(t,"not-in",e),this.keys=Do(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Do(t,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map((t=>yn.fromName(t.referenceValue)))}class Ro extends Ao{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return lo(e)&&Jn(e.arrayValue,this.value)}}class Fo extends Ao{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Jn(this.value.arrayValue,e)}}class Bo extends Ao{constructor(t,e){super(t,"not-in",e)}matches(t){if(Jn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Jn(this.value.arrayValue,e)}}class zo extends Ao{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!lo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Jn(this.value.arrayValue,t)))}}class Uo{constructor(t,e=null,i=[],r=[],s=null,n=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=n,this.endAt=o,this.ue=null}}function Ho(t,e=null,i=[],r=[],s=null,n=null,o=null){return new Uo(t,e,i,r,s,n,o)}function Vo(t){const e=Ys(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Po(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),kn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ro(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ro(t))).join(",")),e.ue=t}return e.ue}function jo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!To(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(!Mo(t.filters[i],e.filters[i]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wo(t.startAt,e.startAt)&&wo(t.endAt,e.endAt)}function Go(t){return yn.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Wo{constructor(t,e=null,i=[],r=[],s=null,n="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=n,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Xo(t){return new Wo(t)}function qo(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Yo(t){return null!==t.collectionGroup}function Ko(t){const e=Ys(t);if(null===e.ce){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new Rn(mn.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.ce.push(new Eo(r,i))})),t.has(mn.keyField().canonicalString())||e.ce.push(new Eo(mn.keyField(),i))}return e.ce}function $o(t){const e=Ys(t);return e.le||(e.le=function(t,e){if("F"===t.limitType)return Ho(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Eo(t.field,e)}));const i=t.endAt?new bo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bo(t.startAt.position,t.startAt.inclusive):null;return Ho(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}}(e,Ko(t))),e.le}function Qo(t,e){const i=t.filters.concat([e]);return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),i,t.limit,t.limitType,t.startAt,t.endAt)}function Zo(t,e,i){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,i,t.startAt,t.endAt)}function Jo(t,e){return jo($o(t),$o(e))&&t.limitType===e.limitType}function ta(t){return`${Vo($o(t))}|lt:${t.limitType}`}function ea(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Lo(t))).join(", ")}]`),kn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ro(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ro(t))).join(",")),`Target(${e})`}($o(t))}; limitType=${t.limitType})`}function ia(t,e){return e.isFoundDocument()&&function(t,e){const i=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):yn.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(t,e)&&function(t,e){for(const i of Ko(t))if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1;return!0}(t,e)&&function(t,e){for(const i of t.filters)if(!i.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,i){const r=xo(t,e,i);return t.inclusive?r<=0:r<0}(t.startAt,Ko(t),e)||t.endAt&&!function(t,e,i){const r=xo(t,e,i);return t.inclusive?r>=0:r>0}(t.endAt,Ko(t),e))}(t,e)}function ra(t){return(e,i)=>{let r=!1;for(const s of Ko(t)){const t=sa(s,e,i);if(0!==t)return t;r=r||s.field.isKeyField()}return 0}}function sa(t,e,i){const r=t.field.isKeyField()?yn.comparator(e.key,i.key):function(t,e,i){const r=e.data.field(t),s=i.data.field(t);return null!==r&&null!==s?to(r,s):Xs()}(t.field,e,i);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xs()}}class na{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[e,r]of i)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ln(this.inner,((e,i)=>{for(const[e,r]of i)t(e,r)}))}isEmpty(){return On(this.inner)}size(){return this.innerSize}}const oa=new Nn(yn.comparator);function aa(){return oa}const la=new Nn(yn.comparator);function ha(...t){let e=la;for(const i of t)e=e.insert(i.key,i);return e}function ca(t){let e=la;return t.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function da(){return pa()}function ua(){return pa()}function pa(){return new na((t=>t.toString()),((t,e)=>t.isEqual(e)))}const fa=new Nn(yn.comparator),ga=new Rn(yn.comparator);function ma(...t){let e=ga;for(const i of t)e=e.add(i);return e}const ya=new Rn(hn);function va(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cn(e)?"-0":e}}function ba(t){return{integerValue:""+t}}function xa(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Cn(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ba(e):va(t,e)}class wa{constructor(){this._=void 0}}function Ea(t,e,i){return t instanceof Aa?function(t,e){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Wn(e)&&(e=Xn(e)),e&&(i.fields.__previous_value__=e),{mapValue:i}}(i,e):t instanceof ka?Ca(t,e):t instanceof Ia?Pa(t,e):function(t,e){const i=Sa(t,e),r=La(i)+La(t.Pe);return ao(i)&&ao(t.Pe)?ba(r):va(t.serializer,r)}(t,e)}function Ta(t,e,i){return t instanceof ka?Ca(t,e):t instanceof Ia?Pa(t,e):i}function Sa(t,e){return t instanceof Ma?function(t){return ao(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Aa extends wa{}class ka extends wa{constructor(t){super(),this.elements=t}}function Ca(t,e){const i=Oa(e);for(const e of t.elements)i.some((t=>Zn(t,e)))||i.push(e);return{arrayValue:{values:i}}}class Ia extends wa{constructor(t){super(),this.elements=t}}function Pa(t,e){let i=Oa(e);for(const e of t.elements)i=i.filter((t=>!Zn(t,e)));return{arrayValue:{values:i}}}class Ma extends wa{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function La(t){return jn(t.integerValue||t.doubleValue)}function Oa(t){return lo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Na{constructor(t,e){this.version=t,this.transformResults=e}}class _a{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new _a}static exists(t){return new _a(void 0,t)}static updateTime(t){return new _a(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Da(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ra{}function Fa(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new qa(t.key,_a.none()):new Va(t.key,t.data,_a.none());{const i=t.data,r=mo.empty();let s=new Rn(mn.comparator);for(let t of e.fields)if(!s.has(t)){let e=i.field(t);null===e&&t.length>1&&(t=t.popLast(),e=i.field(t)),null===e?r.delete(t):r.set(t,e),s=s.add(t)}return new ja(t.key,r,new Bn(s.toArray()),_a.none())}}function Ba(t,e,i){t instanceof Va?function(t,e,i){const r=t.value.clone(),s=Wa(t.fieldTransforms,e,i.transformResults);r.setAll(s),e.convertToFoundDocument(i.version,r).setHasCommittedMutations()}(t,e,i):t instanceof ja?function(t,e,i){if(!Da(t.precondition,e))return void e.convertToUnknownDocument(i.version);const r=Wa(t.fieldTransforms,e,i.transformResults),s=e.data;s.setAll(Ga(t)),s.setAll(r),e.convertToFoundDocument(i.version,s).setHasCommittedMutations()}(t,e,i):function(t,e,i){e.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,i)}function za(t,e,i,r){return t instanceof Va?function(t,e,i,r){if(!Da(t.precondition,e))return i;const s=t.value.clone(),n=Xa(t.fieldTransforms,r,e);return s.setAll(n),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null}(t,e,i,r):t instanceof ja?function(t,e,i,r){if(!Da(t.precondition,e))return i;const s=Xa(t.fieldTransforms,r,e),n=e.data;return n.setAll(Ga(t)),n.setAll(s),e.convertToFoundDocument(e.version,n).setHasLocalMutations(),null===i?null:i.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,i,r):function(t,e,i){return Da(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):i}(t,e,i)}function Ua(t,e){let i=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),s=Sa(r.transform,t||null);null!=s&&(null===i&&(i=mo.empty()),i.set(r.field,s))}return i||null}function Ha(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&cn(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ka&&e instanceof ka||t instanceof Ia&&e instanceof Ia?cn(t.elements,e.elements,Zn):t instanceof Ma&&e instanceof Ma?Zn(t.Pe,e.Pe):t instanceof Aa&&e instanceof Aa}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Va extends Ra{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ja extends Ra{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ga(t){const e=new Map;return t.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=t.data.field(i);e.set(i,r)}})),e}function Wa(t,e,i){const r=new Map;qs(t.length===i.length);for(let s=0;s<i.length;s++){const n=t[s],o=n.transform,a=e.data.field(n.field);r.set(n.field,Ta(o,a,i[s]))}return r}function Xa(t,e,i){const r=new Map;for(const s of t){const t=s.transform,n=i.data.field(s.field);r.set(s.field,Ea(t,n,e))}return r}class qa extends Ra{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ya extends Ra{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ka{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&Ba(r,t,i[e])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=za(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=za(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=ua();return this.mutations.forEach((r=>{const s=t.get(r.key),n=s.overlayedDocument;let o=this.applyToLocalView(n,s.mutatedFields);o=e.has(r.key)?null:o;const a=Fa(n,o);null!==a&&i.set(r.key,a),n.isValidDocument()||n.convertToNoDocument(un.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ma())}isEqual(t){return this.batchId===t.batchId&&cn(this.mutations,t.mutations,((t,e)=>Ha(t,e)))&&cn(this.baseMutations,t.baseMutations,((t,e)=>Ha(t,e)))}}class $a{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){qs(t.mutations.length===i.length);let r=fa;const s=t.mutations;for(let t=0;t<s.length;t++)r=r.insert(s[t].key,i[t].version);return new $a(t,e,i,r)}}class Qa{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Za{constructor(t,e){this.count=t,this.unchangedNames=e}}var Ja,tl;function el(t){if(void 0===t)return js("GRPC error has no .code"),Ks.UNKNOWN;switch(t){case Ja.OK:return Ks.OK;case Ja.CANCELLED:return Ks.CANCELLED;case Ja.UNKNOWN:return Ks.UNKNOWN;case Ja.DEADLINE_EXCEEDED:return Ks.DEADLINE_EXCEEDED;case Ja.RESOURCE_EXHAUSTED:return Ks.RESOURCE_EXHAUSTED;case Ja.INTERNAL:return Ks.INTERNAL;case Ja.UNAVAILABLE:return Ks.UNAVAILABLE;case Ja.UNAUTHENTICATED:return Ks.UNAUTHENTICATED;case Ja.INVALID_ARGUMENT:return Ks.INVALID_ARGUMENT;case Ja.NOT_FOUND:return Ks.NOT_FOUND;case Ja.ALREADY_EXISTS:return Ks.ALREADY_EXISTS;case Ja.PERMISSION_DENIED:return Ks.PERMISSION_DENIED;case Ja.FAILED_PRECONDITION:return Ks.FAILED_PRECONDITION;case Ja.ABORTED:return Ks.ABORTED;case Ja.OUT_OF_RANGE:return Ks.OUT_OF_RANGE;case Ja.UNIMPLEMENTED:return Ks.UNIMPLEMENTED;case Ja.DATA_LOSS:return Ks.DATA_LOSS;default:return Xs()}}(tl=Ja||(Ja={}))[tl.OK=0]="OK",tl[tl.CANCELLED=1]="CANCELLED",tl[tl.UNKNOWN=2]="UNKNOWN",tl[tl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tl[tl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tl[tl.NOT_FOUND=5]="NOT_FOUND",tl[tl.ALREADY_EXISTS=6]="ALREADY_EXISTS",tl[tl.PERMISSION_DENIED=7]="PERMISSION_DENIED",tl[tl.UNAUTHENTICATED=16]="UNAUTHENTICATED",tl[tl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tl[tl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tl[tl.ABORTED=10]="ABORTED",tl[tl.OUT_OF_RANGE=11]="OUT_OF_RANGE",tl[tl.UNIMPLEMENTED=12]="UNIMPLEMENTED",tl[tl.INTERNAL=13]="INTERNAL",tl[tl.UNAVAILABLE=14]="UNAVAILABLE",tl[tl.DATA_LOSS=15]="DATA_LOSS";const il=new ms([4294967295,4294967295],0);function rl(t){const e=(new TextEncoder).encode(t),i=new ys;return i.update(e),new Uint8Array(i.digest())}function sl(t){const e=new DataView(t.buffer),i=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),n=e.getUint32(12,!0);return[new ms([i,r],0),new ms([s,n],0)]}class nl{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ol(`Invalid padding: ${e}`);if(i<0)throw new ol(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new ol(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new ol(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=ms.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(ms.fromNumber(i)));return 1===r.compare(il)&&(r=new ms([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=rl(t),[i,r]=sl(e);for(let t=0;t<this.hashCount;t++){const e=this.Ee(i,r,t);if(!this.de(e))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),n=new nl(s,r,e);return i.forEach((t=>n.insert(t))),n}insert(t){if(0===this.Ie)return;const e=rl(t),[i,r]=sl(e);for(let t=0;t<this.hashCount;t++){const e=this.Ee(i,r,t);this.Ae(e)}}Ae(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class al{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,ll.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new al(un.min(),r,new Nn(hn),aa(),ma())}}class ll{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new ll(i,e,ma(),ma(),ma())}}class hl{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}}class cl{constructor(t,e){this.targetId=t,this.me=e}}class dl{constructor(t,e,i=Un.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class ul{constructor(){this.fe=0,this.ge=gl(),this.pe=Un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=ma(),e=ma(),i=ma();return this.ge.forEach(((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Xs()}})),new ll(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=gl()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,qs(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pl{constructor(t){this.Le=t,this.Be=new Map,this.ke=aa(),this.qe=fl(),this.Qe=new Nn(hn)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,(e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:Xs()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((t,i)=>{this.ze(i)&&e(i)}))}He(t){const e=t.targetId,i=t.me.count,r=this.Je(e);if(r){const s=r.target;if(Go(s))if(0===i){const t=new yn(s.path);this.Ue(e,t,vo.newNoDocument(t,un.min()))}else qs(1===i);else{const r=this.Ye(e);if(r!==i){const i=this.Ze(t),s=i?this.Xe(i,t,r):1;if(0!==s){this.je(e);const t=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,t)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e;let n,o;try{n=Gn(i).toUint8Array()}catch(t){if(t instanceof zn)return Gs("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new nl(n,r,s)}catch(t){return Gs(t instanceof ol?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Ie?null:o}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach((i=>{const s=this.Le.tt(),n=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;t.mightContain(n)||(this.Ue(e,i,null),r++)})),r}rt(t){const e=new Map;this.Be.forEach(((i,r)=>{const s=this.Je(r);if(s){if(i.current&&Go(s.target)){const e=new yn(s.target.path);null!==this.ke.get(e)||this.it(r,e)||this.Ue(r,e,vo.newNoDocument(e,t))}i.be&&(e.set(r,i.ve()),i.Ce())}}));let i=ma();this.qe.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Je(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(i=i.add(t))})),this.ke.forEach(((e,i)=>i.setReadTime(t)));const r=new al(t,e,this.Qe,this.ke,i);return this.ke=aa(),this.qe=fl(),this.Qe=new Nn(hn),r}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new ul,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Rn(hn),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||Vs("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new ul),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.Ue(t,e,null)}))}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function fl(){return new Nn(yn.comparator)}function gl(){return new Nn(yn.comparator)}const ml={asc:"ASCENDING",desc:"DESCENDING"},yl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vl={and:"AND",or:"OR"};class bl{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function xl(t,e){return t.useProto3Json||kn(e)?e:{value:e}}function wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function El(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tl(t,e){return wl(t,e.toTimestamp())}function Sl(t){return qs(!!t),un.fromTimestamp(function(t){const e=Vn(t);return new dn(e.seconds,e.nanos)}(t))}function Al(t,e){return kl(t,e).canonicalString()}function kl(t,e){const i=function(t){return new fn(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?i:i.child(e)}function Cl(t){const e=fn.fromString(t);return qs(Wl(e)),e}function Il(t,e){return Al(t.databaseId,e.path)}function Pl(t,e){const i=Cl(e);if(i.get(1)!==t.databaseId.projectId)throw new $s(Ks.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+t.databaseId.projectId);if(i.get(3)!==t.databaseId.database)throw new $s(Ks.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+t.databaseId.database);return new yn(Ol(i))}function Ml(t,e){return Al(t.databaseId,e)}function Ll(t){return new fn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ol(t){return qs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Nl(t,e,i){return{name:Il(t,e),fields:i.value.mapValue.fields}}function _l(t,e){return{documents:[Ml(t,e.path)]}}function Dl(t,e){const i={structuredQuery:{}},r=e.path;let s;null!==e.collectionGroup?(s=r,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=Ml(t,s);const n=function(t){if(0!==t.length)return jl(ko.create(t,"and"))}(e.filters);n&&(i.structuredQuery.where=n);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Hl(t.field),direction:Bl(t.dir)}}(t)))}(e.orderBy);o&&(i.structuredQuery.orderBy=o);const a=xl(t,e.limit);return null!==a&&(i.structuredQuery.limit=a),e.startAt&&(i.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{_t:i,parent:s}}function Rl(t){let e=function(t){const e=Cl(t);return 4===e.length?fn.emptyPath():Ol(e)}(t.parent);const i=t.structuredQuery,r=i.from?i.from.length:0;let s=null;if(r>0){qs(1===r);const t=i.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let n=[];i.where&&(n=function(t){const e=Fl(t);return e instanceof ko&&Io(e)?e.getFilters():[e]}(i.where));let o=[];i.orderBy&&(o=function(t){return t.map((t=>function(t){return new Eo(Vl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(i.orderBy));let a=null;i.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,kn(e)?null:e}(i.limit));let l=null;i.startAt&&(l=function(t){const e=!!t.before,i=t.values||[];return new bo(i,e)}(i.startAt));let h=null;return i.endAt&&(h=function(t){const e=!t.before,i=t.values||[];return new bo(i,e)}(i.endAt)),function(t,e,i,r,s,n,o,a){return new Wo(t,e,i,r,s,n,o,a)}(e,s,o,n,a,"F",l,h)}function Fl(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Vl(t.unaryFilter.field);return Ao.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=Vl(t.unaryFilter.field);return Ao.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vl(t.unaryFilter.field);return Ao.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vl(t.unaryFilter.field);return Ao.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Xs()}}(t):void 0!==t.fieldFilter?function(t){return Ao.create(Vl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xs()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return ko.create(t.compositeFilter.filters.map((t=>Fl(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Xs()}}(t.compositeFilter.op))}(t):Xs()}function Bl(t){return ml[t]}function zl(t){return yl[t]}function Ul(t){return vl[t]}function Hl(t){return{fieldPath:t.canonicalString()}}function Vl(t){return mn.fromServerFormat(t.fieldPath)}function jl(t){return t instanceof Ao?function(t){if("=="===t.op){if(co(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NAN"}};if(ho(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(co(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NAN"}};if(ho(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(t.field),op:zl(t.op),value:t.value}}}(t):t instanceof ko?function(t){const e=t.getFilters().map((t=>jl(t)));return 1===e.length?e[0]:{compositeFilter:{op:Ul(t.op),filters:e}}}(t):Xs()}function Gl(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Wl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Xl{constructor(t,e,i,r,s=un.min(),n=un.min(),o=Un.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=n,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Xl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class ql{constructor(t){this.ct=t}}function Yl(t){const e=Rl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Zo(e,e.limit,"L"):e}class Kl{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(jn(t.integerValue));else if("doubleValue"in t){const i=jn(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),Cn(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),"string"==typeof i&&(i=Vn(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Gn(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?go(t)?this.dt(e,Number.MAX_SAFE_INTEGER):po(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):Xs()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const i=t.fields||{};this.dt(e,55);for(const t of Object.keys(i))this.Vt(t,e),this.Tt(i[t],e)}wt(t,e){var i,r;const s=t.fields||{};this.dt(e,53);const n="value",o=(null===(r=null===(i=s[n].arrayValue)||void 0===i?void 0:i.values)||void 0===r?void 0:r.length)||0;this.dt(e,15),e.At(jn(o)),this.Vt(n,e),this.Tt(s[n],e)}bt(t,e){const i=t.values||[];this.dt(e,50);for(const t of i)this.Tt(t,e)}yt(t,e){this.dt(e,37),yn.fromName(t).path.forEach((t=>{this.dt(e,60),this.Dt(t,e)}))}dt(t,e){t.At(e)}ft(t){t.At(2)}}Kl.vt=new Kl;class $l{constructor(){this.un=new Ql}addToCollectionParentIndex(t,e){return this.un.add(e),Tn.resolve()}getCollectionParents(t,e){return Tn.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return Tn.resolve()}deleteFieldIndex(t,e){return Tn.resolve()}deleteAllFieldIndexes(t){return Tn.resolve()}createTargetIndexes(t,e){return Tn.resolve()}getDocumentsMatchingTarget(t,e){return Tn.resolve(null)}getIndexType(t,e){return Tn.resolve(0)}getFieldIndexes(t,e){return Tn.resolve([])}getNextCollectionGroupToUpdate(t){return Tn.resolve(null)}getMinOffset(t,e){return Tn.resolve(bn.min())}getMinOffsetFromCollectionGroup(t,e){return Tn.resolve(bn.min())}updateCollectionGroup(t,e,i){return Tn.resolve()}updateIndexEntries(t,e){return Tn.resolve()}}class Ql{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Rn(fn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Rn(fn.comparator)).toArray()}}new Uint8Array(0);const Zl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jl{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Jl(t,Jl.DEFAULT_COLLECTION_PERCENTILE,Jl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Jl.DEFAULT_COLLECTION_PERCENTILE=10,Jl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jl.DEFAULT=new Jl(41943040,Jl.DEFAULT_COLLECTION_PERCENTILE,Jl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jl.DISABLED=new Jl(-1,0,0);class th{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new th(0)}static kn(){return new th(-1)}}function eh([t,e],[i,r]){const s=hn(t,i);return 0===s?hn(e,r):s}class ih{constructor(t){this.Un=t,this.buffer=new Rn(eh),this.Wn=0}Gn(){return++this.Wn}zn(t){const e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();eh(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class rh{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){Vs("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sn(t)?Vs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await En(t)}await this.Hn(3e5)}))}}class sh{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return Tn.resolve(An.oe);const i=new ih(e);return this.Jn.forEachTarget(t,(t=>i.zn(t.sequenceNumber))).next((()=>this.Jn.Zn(t,(t=>i.zn(t))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Vs("LruGarbageCollector","Garbage collection skipped; disabled"),Tn.resolve(Zl)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Vs("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zl):this.Xn(t,e)))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let i,r,s,n,o,a,l;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(Vs("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,n=Date.now(),this.nthSequenceNumber(t,r)))).next((r=>(i=r,o=Date.now(),this.removeTargets(t,i,e)))).next((e=>(s=e,a=Date.now(),this.removeOrphanedDocuments(t,i)))).next((t=>(l=Date.now(),Hs()<=_.DEBUG&&Vs("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${n-h}ms\n\tDetermined least recently used ${r} in `+(o-n)+"ms\n"+`\tRemoved ${s} targets in `+(a-o)+"ms\n"+`\tRemoved ${t} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-h}ms`),Tn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:t}))))}}class nh{constructor(){this.changes=new na((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,vo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?Tn.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class oh{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class ah{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==i&&za(i.mutation,t,Bn.empty(),dn.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,ma()).next((()=>e))))}getLocalViewOfDocuments(t,e,i=ma()){const r=da();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,i).next((t=>{let e=ha();return t.forEach(((t,i)=>{e=e.insert(t,i.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const i=da();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,ma())))}populateOverlays(t,e,i){const r=[];return i.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,i)=>{e.set(t,i)}))}))}computeViews(t,e,i,r){let s=aa();const n=pa(),o=pa();return e.forEach(((t,e)=>{const o=i.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof ja)?s=s.insert(e.key,e):void 0!==o?(n.set(e.key,o.mutation.getFieldMask()),za(o.mutation,e,o.mutation.getFieldMask(),dn.now())):n.set(e.key,Bn.empty())})),this.recalculateAndSaveOverlays(t,s).next((t=>(t.forEach(((t,e)=>n.set(t,e))),e.forEach(((t,e)=>{var i;return o.set(t,new oh(e,null!==(i=n.get(t))&&void 0!==i?i:null))})),o)))}recalculateAndSaveOverlays(t,e){const i=pa();let r=new Nn(((t,e)=>t-e)),s=ma();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const s of t)s.keys().forEach((t=>{const n=e.get(t);if(null===n)return;let o=i.get(t)||Bn.empty();o=s.applyToLocalView(n,o),i.set(t,o);const a=(r.get(s.batchId)||ma()).add(t);r=r.insert(s.batchId,a)}))})).next((()=>{const n=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,h=ua();l.forEach((t=>{if(!s.has(t)){const r=Fa(e.get(t),i.get(t));null!==r&&h.set(t,r),s=s.add(t)}})),n.push(this.documentOverlayCache.saveOverlays(t,a,h))}return Tn.waitFor(n)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,i,r){return function(t){return yn.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Yo(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next((s=>{const n=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):Tn.resolve(da());let o=-1,a=s;return n.next((e=>Tn.forEach(e,((e,i)=>(o<i.largestBatchId&&(o=i.largestBatchId),s.get(e)?Tn.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,s))).next((()=>this.computeViews(t,a,e,ma()))).next((t=>({batchId:o,changes:ca(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new yn(e)).next((t=>{let e=ha();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const s=e.collectionGroup;let n=ha();return this.indexManager.getCollectionParents(t,s).next((o=>Tn.forEach(o,(o=>{const a=function(t,e){return new Wo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(s));return this.getDocumentsMatchingCollectionQuery(t,a,i,r).next((t=>{t.forEach(((t,e)=>{n=n.insert(t,e)}))}))})).next((()=>n))))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((n=>(s=n,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r)))).next((t=>{s.forEach(((e,i)=>{const r=i.getKey();null===t.get(r)&&(t=t.insert(r,vo.newInvalidDocument(r)))}));let i=ha();return t.forEach(((t,r)=>{const n=s.get(t);void 0!==n&&za(n.mutation,r,Bn.empty(),dn.now()),ia(e,r)&&(i=i.insert(t,r))})),i}))}}class lh{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return Tn.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Sl(t.createTime)}}(e)),Tn.resolve()}getNamedQuery(t,e){return Tn.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(t){return{name:t.name,query:Yl(t.bundledQuery),readTime:Sl(t.readTime)}}(e)),Tn.resolve()}}class hh{constructor(){this.overlays=new Nn(yn.comparator),this.Ir=new Map}getOverlay(t,e){return Tn.resolve(this.overlays.get(e))}getOverlays(t,e){const i=da();return Tn.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&i.set(e,t)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((i,r)=>{this.ht(t,e,r)})),Tn.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Ir.get(i);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Ir.delete(i)),Tn.resolve()}getOverlaysForCollection(t,e,i){const r=da(),s=e.length+1,n=new yn(e.child("")),o=this.overlays.getIteratorFrom(n);for(;o.hasNext();){const t=o.getNext().value,n=t.getKey();if(!e.isPrefixOf(n.path))break;n.path.length===s&&t.largestBatchId>i&&r.set(t.getKey(),t)}return Tn.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Nn(((t,e)=>t-e));const n=this.overlays.getIterator();for(;n.hasNext();){const t=n.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>i){let e=s.get(t.largestBatchId);null===e&&(e=da(),s=s.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=da(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return Tn.resolve(o)}ht(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const t=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(i.key,new Qa(e,i));let s=this.Ir.get(e);void 0===s&&(s=ma(),this.Ir.set(e,s)),this.Ir.set(e,s.add(i.key))}}class ch{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(t){return Tn.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Tn.resolve()}}class dh{constructor(){this.Tr=new Rn(uh.Er),this.dr=new Rn(uh.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const i=new uh(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Vr(new uh(t,e))}mr(t,e){t.forEach((t=>this.removeReference(t,e)))}gr(t){const e=new yn(new fn([])),i=new uh(e,t),r=new uh(e,t+1),s=[];return this.dr.forEachInRange([i,r],(t=>{this.Vr(t),s.push(t.key)})),s}pr(){this.Tr.forEach((t=>this.Vr(t)))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new yn(new fn([])),i=new uh(e,t),r=new uh(e,t+1);let s=ma();return this.dr.forEachInRange([i,r],(t=>{s=s.add(t.key)})),s}containsKey(t){const e=new uh(t,0),i=this.Tr.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class uh{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return yn.comparator(t.key,e.key)||hn(t.wr,e.wr)}static Ar(t,e){return hn(t.wr,e.wr)||yn.comparator(t.key,e.key)}}class ph{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Rn(uh.Er)}checkEmpty(t){return Tn.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const n=new Ka(s,e,i,r);this.mutationQueue.push(n);for(const e of r)this.br=this.br.add(new uh(e.key,s)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Tn.resolve(n)}lookupMutationBatch(t,e){return Tn.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.vr(i),s=r<0?0:r;return Tn.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Tn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Tn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new uh(e,0),r=new uh(e,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],(t=>{const e=this.Dr(t.wr);s.push(e)})),Tn.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Rn(hn);return e.forEach((t=>{const e=new uh(t,0),r=new uh(t,Number.POSITIVE_INFINITY);this.br.forEachInRange([e,r],(t=>{i=i.add(t.wr)}))})),Tn.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;yn.isDocumentKey(s)||(s=s.child(""));const n=new uh(new yn(s),0);let o=new Rn(hn);return this.br.forEachWhile((t=>{const e=t.key.path;return!!i.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.wr)),!0)}),n),Tn.resolve(this.Cr(o))}Cr(t){const e=[];return t.forEach((t=>{const i=this.Dr(t);null!==i&&e.push(i)})),e}removeMutationBatch(t,e){qs(0===this.Fr(e.batchId,"removed")),this.mutationQueue.shift();let i=this.br;return Tn.forEach(e.mutations,(r=>{const s=new uh(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.br=i}))}On(t){}containsKey(t,e){const i=new uh(e,0),r=this.br.firstAfterOrEqual(i);return Tn.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Tn.resolve()}Fr(t,e){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class fh{constructor(t){this.Mr=t,this.docs=new Nn(yn.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,n=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:n}),this.size+=n-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Tn.resolve(i?i.document.mutableCopy():vo.newInvalidDocument(e))}getEntries(t,e){let i=aa();return e.forEach((t=>{const e=this.docs.get(t);i=i.insert(t,e?e.document.mutableCopy():vo.newInvalidDocument(t))})),Tn.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=aa();const n=e.path,o=new yn(n.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!n.isPrefixOf(t.path))break;t.path.length>n.length+1||xn(vn(o),i)<=0||(r.has(o.key)||ia(e,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Tn.resolve(s)}getAllFromCollectionGroup(t,e,i,r){Xs()}Or(t,e){return Tn.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new gh(this)}getSize(t){return Tn.resolve(this.size)}}class gh extends nh{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)})),Tn.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}class mh{constructor(t){this.persistence=t,this.Nr=new na((t=>Vo(t)),jo),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dh,this.targetCount=0,this.kr=th.Bn()}forEachTarget(t,e){return this.Nr.forEach(((t,i)=>e(i))),Tn.resolve()}getLastRemoteSnapshotVersion(t){return Tn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Tn.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Tn.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),Tn.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new th(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,Tn.resolve()}updateTargetData(t,e){return this.Kn(e),Tn.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,Tn.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Nr.forEach(((n,o)=>{o.sequenceNumber<=e&&null===i.get(o.targetId)&&(this.Nr.delete(n),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),Tn.waitFor(s).next((()=>r))}getTargetCount(t){return Tn.resolve(this.targetCount)}getTargetData(t,e){const i=this.Nr.get(e)||null;return Tn.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),Tn.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach((e=>{s.push(r.markPotentiallyOrphaned(t,e))})),Tn.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),Tn.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Br.yr(e);return Tn.resolve(i)}containsKey(t,e){return Tn.resolve(this.Br.containsKey(e))}}class yh{constructor(t,e){this.qr={},this.overlays={},this.Qr=new An(0),this.Kr=!1,this.Kr=!0,this.$r=new ch,this.referenceDelegate=t(this),this.Ur=new mh(this),this.indexManager=new $l,this.remoteDocumentCache=function(t){return new fh(t)}((t=>this.referenceDelegate.Wr(t))),this.serializer=new ql(e),this.Gr=new lh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new hh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new ph(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){Vs("MemoryPersistence","Starting transaction:",t);const r=new vh(this.Qr.next());return this.referenceDelegate.zr(),i(r).next((t=>this.referenceDelegate.jr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Hr(t,e){return Tn.or(Object.values(this.qr).map((i=>()=>i.containsKey(t,e))))}}class vh extends wn{constructor(t){super(),this.currentSequenceNumber=t}}class bh{constructor(t){this.persistence=t,this.Jr=new dh,this.Yr=null}static Zr(t){return new bh(t)}get Xr(){if(this.Yr)return this.Yr;throw Xs()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),Tn.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),Tn.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),Tn.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach((t=>this.Xr.add(t.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Xr.add(t.toString())))})).next((()=>i.removeTargetData(t,e)))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tn.forEach(this.Xr,(i=>{const r=yn.fromPath(i);return this.ei(t,r).next((t=>{t||e.removeEntry(r,un.min())}))})).next((()=>(this.Yr=null,e.apply(t))))}updateLimboDocument(t,e){return this.ei(t,e).next((t=>{t?this.Xr.delete(e.toString()):this.Xr.add(e.toString())}))}Wr(t){return 0}ei(t,e){return Tn.or([()=>Tn.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}class xh{constructor(t,e){this.persistence=t,this.ti=new na((t=>function(t){let e="";for(let i=0;i<t.length;i++)e.length>0&&(e=Pn(e)),e=In(t.get(i),e);return Pn(e)}(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=function(t,e){return new sh(t,e)}(this,e)}static Zr(t,e){return new xh(t,e)}zr(){}jr(t){return Tn.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}Yn(t){const e=this.er(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}er(t){let e=0;return this.Zn(t,(t=>{e++})).next((()=>e))}Zn(t,e){return Tn.forEach(this.ti,((i,r)=>this.nr(t,i,r).next((t=>t?Tn.resolve():e(r)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Or(t,(r=>this.nr(t,r,e).next((t=>{t||(i++,s.removeEntry(r,un.min()))})))).next((()=>s.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.ti.set(e,t.currentSequenceNumber),Tn.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.ti.set(i,t.currentSequenceNumber),Tn.resolve()}removeReference(t,e,i){return this.ti.set(i,t.currentSequenceNumber),Tn.resolve()}updateLimboDocument(t,e){return this.ti.set(e,t.currentSequenceNumber),Tn.resolve()}Wr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=no(t.data.value)),e}nr(t,e,i){return Tn.or([()=>this.persistence.Hr(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.ti.get(e);return Tn.resolve(void 0!==t&&t>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class wh{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=r}static Wi(t,e){let i=ma(),r=ma();for(const t of e.docChanges)switch(t.type){case 0:i=i.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new wh(t,e.fromCache,i,r)}}class Eh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Th{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=!function(){var t;const e=null===(t=u())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(r.g.process)}catch(t){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}(y())>0?6:4}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,r){const s={result:null};return this.Yi(t,e).next((t=>{s.result=t})).next((()=>{if(!s.result)return this.Zi(t,e,r,i).next((t=>{s.result=t}))})).next((()=>{if(s.result)return;const i=new Eh;return this.Xi(t,e,i).next((r=>{if(s.result=r,this.zi)return this.es(t,e,i,r.size)}))})).next((()=>s.result))}es(t,e,i,r){return i.documentReadCount<this.ji?(Hs()<=_.DEBUG&&Vs("QueryEngine","SDK will not create cache indexes for query:",ea(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Tn.resolve()):(Hs()<=_.DEBUG&&Vs("QueryEngine","Query:",ea(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Hs()<=_.DEBUG&&Vs("QueryEngine","The SDK decides to create cache indexes for query:",ea(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$o(e))):Tn.resolve())}Yi(t,e){if(qo(e))return Tn.resolve(null);let i=$o(e);return this.indexManager.getIndexType(t,i).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=Zo(e,null,"F"),i=$o(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((r=>{const s=ma(...r);return this.Ji.getDocuments(t,s).next((r=>this.indexManager.getMinOffset(t,i).next((i=>{const n=this.ts(e,r);return this.ns(e,n,s,i.readTime)?this.Yi(t,Zo(e,null,"F")):this.rs(t,n,e,i)}))))})))))}Zi(t,e,i,r){return qo(e)||r.isEqual(un.min())?Tn.resolve(null):this.Ji.getDocuments(t,i).next((s=>{const n=this.ts(e,s);return this.ns(e,n,i,r)?Tn.resolve(null):(Hs()<=_.DEBUG&&Vs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ea(e)),this.rs(t,n,e,function(t,e){const i=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=un.fromTimestamp(1e9===r?new dn(i+1,0):new dn(i,r));return new bn(s,yn.empty(),e)}(r,-1)).next((t=>t)))}))}ts(t,e){let i=new Rn(ra(t));return e.forEach(((e,r)=>{ia(t,r)&&(i=i.add(r))})),i}ns(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(t,e,i){return Hs()<=_.DEBUG&&Vs("QueryEngine","Using full collection scan to execute query:",ea(e)),this.Ji.getDocumentsMatchingQuery(t,e,bn.min(),i)}rs(t,e,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Sh{constructor(t,e,i,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new Nn(hn),this._s=new na((t=>Vo(t)),jo),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ah(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.os)))}}async function Ah(t,e){const i=Ys(t);return await i.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return i.mutationQueue.getAllMutationBatches(t).next((s=>(r=s,i.ls(e),i.mutationQueue.getAllMutationBatches(t)))).next((e=>{const s=[],n=[];let o=ma();for(const t of r){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.localDocuments.getDocuments(t,o).next((t=>({hs:t,removedBatchIds:s,addedBatchIds:n})))}))}))}function kh(t){const e=Ys(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Ch(t,e){const i=Ys(t);return i.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Ih(t,e,i){const r=Ys(t),s=r.os.get(e),n=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",n,(t=>r.persistence.referenceDelegate.removeTarget(t,s)))}catch(t){if(!Sn(t))throw t;Vs("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ph(t,e,i){const r=Ys(t);let s=un.min(),n=ma();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,i){const r=Ys(t),s=r._s.get(i);return void 0!==s?Tn.resolve(r.os.get(s)):r.Ur.getTargetData(e,i)}(r,t,$o(e)).next((e=>{if(e)return s=e.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(t,e.targetId).next((t=>{n=t}))})).next((()=>r.ss.getDocumentsMatchingQuery(t,e,i?s:un.min(),i?n:ma()))).next((t=>(function(t,e,i){let r=t.us.get(e)||un.min();i.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.us.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,Ts:n})))))}class Mh{constructor(){this.activeTargetIds=ya}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Lh{constructor(){this.so=new Mh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Mh,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Oh{_o(t){}shutdown(){}}class Nh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Vs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Vs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _h=null;function Dh(){return null===_h?_h=268435456+Math.round(2147483648*Math.random()):_h++,"0x"+_h.toString(16)}const Rh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fh{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Bh="WebChannelConnection";class zh extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=e+"://"+t.host,this.vo=`projects/${i}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${r}`}get Fo(){return!1}Mo(t,e,i,r,s){const n=Dh(),o=this.xo(t,e.toUriEncodedString());Vs("RestConnection",`Sending RPC '${t}' ${n}:`,o,i);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,s),this.No(t,o,a,i).then((e=>(Vs("RestConnection",`Received RPC '${t}' ${n}: `,e),e)),(e=>{throw Gs("RestConnection",`RPC '${t}' ${n} failed with error: `,e,"url: ",o,"request:",i),e}))}Lo(t,e,i,r,s,n){return this.Mo(t,e,i,r,s)}Oo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+zs,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,i)=>t[i]=e)),i&&i.headers.forEach(((e,i)=>t[i]=e))}xo(t,e){const i=Rh[t];return`${this.Do}/v1/${e}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,r){const s=Dh();return new Promise(((n,o)=>{const a=new Cs;a.setWithCredentials(!0),a.listenOnce(Ps.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ms.NO_ERROR:const e=a.getResponseJson();Vs(Bh,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(e)),n(e);break;case Ms.TIMEOUT:Vs(Bh,`RPC '${t}' ${s} timed out`),o(new $s(Ks.DEADLINE_EXCEEDED,"Request time out"));break;case Ms.HTTP_ERROR:const i=a.getStatus();if(Vs(Bh,`RPC '${t}' ${s} failed with status:`,i,"response text:",a.getResponseText()),i>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ks).indexOf(e)>=0?e:Ks.UNKNOWN}(e.status);o(new $s(t,e.message))}else o(new $s(Ks.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new $s(Ks.UNAVAILABLE,"Connection failed."));break;default:Xs()}}finally{Vs(Bh,`RPC '${t}' ${s} completed.`)}}));const l=JSON.stringify(r);Vs(Bh,`RPC '${t}' ${s} sending request:`,r),a.send(e,"POST",l,i,15)}))}Bo(t,e,i){const r=Dh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=_s(),o=Ns(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,e,i),a.encodeInitMessageHeaders=!0;const h=s.join("");Vs(Bh,`Creating RPC '${t}' stream ${r}: ${h}`,a);const c=n.createWebChannel(h,a);let d=!1,u=!1;const p=new Fh({Io:e=>{u?Vs(Bh,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(d||(Vs(Bh,`Opening RPC '${t}' stream ${r} transport.`),c.open(),d=!0),Vs(Bh,`RPC '${t}' stream ${r} sending:`,e),c.send(e))},To:()=>c.close()}),f=(t,e,i)=>{t.listen(e,(t=>{try{i(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(c,Is.EventType.OPEN,(()=>{u||(Vs(Bh,`RPC '${t}' stream ${r} transport opened.`),p.yo())})),f(c,Is.EventType.CLOSE,(()=>{u||(u=!0,Vs(Bh,`RPC '${t}' stream ${r} transport closed`),p.So())})),f(c,Is.EventType.ERROR,(e=>{u||(u=!0,Gs(Bh,`RPC '${t}' stream ${r} transport errored:`,e),p.So(new $s(Ks.UNAVAILABLE,"The operation could not be completed")))})),f(c,Is.EventType.MESSAGE,(e=>{var i;if(!u){const s=e.data[0];qs(!!s);const n=s,o=n.error||(null===(i=n[0])||void 0===i?void 0:i.error);if(o){Vs(Bh,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let i=function(t){const e=Ja[t];if(void 0!==e)return el(e)}(e),s=o.message;void 0===i&&(i=Ks.INTERNAL,s="Unknown error status: "+e+" with message "+o.message),u=!0,p.So(new $s(i,s)),c.close()}else Vs(Bh,`RPC '${t}' stream ${r} received:`,s),p.bo(s)}})),f(o,Os.STAT_EVENT,(e=>{e.stat===Ls.PROXY?Vs(Bh,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===Ls.NOPROXY&&Vs(Bh,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.wo()}),0),p}}function Uh(){return"undefined"!=typeof document?document:null}function Hh(t){return new bl(t,!0)}class Vh{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&Vs("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),t()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class jh{constructor(t,e,i,r,s,n,o,a){this.ui=t,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=n,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vh(t,e)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==t?this.t_.reset():e&&e.code===Ks.RESOURCE_EXHAUSTED?(js(e.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===Ks.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,i])=>{this.Yo===e&&this.P_(t,i)}),(e=>{t((()=>{const t=new $s(Ks.UNKNOWN,"Fetching auth token failed: "+e.message);return this.I_(t)}))}))}P_(t,e){const i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((t=>{i((()=>this.I_(t)))})),this.stream.onMessage((t=>{i((()=>1==++this.e_?this.E_(t):this.onNext(t)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(t){return Vs("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget((()=>this.Yo===t?e():(Vs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gh extends jh{constructor(t,e,i,r,s,n){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,n),this.serializer=s}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=function(t,e){let i;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Xs()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],n=function(t,e){return t.useProto3Json?(qs(void 0===e||"string"==typeof e),Un.fromBase64String(e||"")):(qs(void 0===e||e instanceof Buffer||e instanceof Uint8Array),Un.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Ks.UNKNOWN:el(t.code);return new $s(e,t.message||"")}(o);i=new dl(r,s,n,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Pl(t,r.document.name),n=Sl(r.document.updateTime),o=r.document.createTime?Sl(r.document.createTime):un.min(),a=new mo({mapValue:{fields:r.document.fields}}),l=vo.newFoundDocument(s,n,o,a),h=r.targetIds||[],c=r.removedTargetIds||[];i=new hl(h,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Pl(t,r.document),n=r.readTime?Sl(r.readTime):un.min(),o=vo.newNoDocument(s,n),a=r.removedTargetIds||[];i=new hl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Pl(t,r.document),n=r.removedTargetIds||[];i=new hl([],n,s,null)}else{if(!("filter"in e))return Xs();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:s}=t,n=new Za(r,s),o=t.targetId;i=new cl(o,n)}}return i}(this.serializer,t),i=function(t){if(!("targetChange"in t))return un.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?un.min():e.readTime?Sl(e.readTime):un.min()}(t);return this.listener.d_(e,i)}A_(t){const e={};e.database=Ll(this.serializer),e.addTarget=function(t,e){let i;const r=e.target;if(i=Go(r)?{documents:_l(t,r)}:{query:Dl(t,r)._t},i.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){i.resumeToken=El(t,e.resumeToken);const r=xl(t,e.expectedCount);null!==r&&(i.expectedCount=r)}else if(e.snapshotVersion.compareTo(un.min())>0){i.readTime=wl(t,e.snapshotVersion.toTimestamp());const r=xl(t,e.expectedCount);null!==r&&(i.expectedCount=r)}return i}(this.serializer,t);const i=function(t,e){const i=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xs()}}(e.purpose);return null==i?null:{"goog-listen-tags":i}}(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){const e={};e.database=Ll(this.serializer),e.removeTarget=t,this.a_(e)}}class Wh extends jh{constructor(t,e,i,r,s,n){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,n),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return qs(!!t.streamToken),this.lastStreamToken=t.streamToken,qs(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){qs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=function(t,e){return t&&t.length>0?(qs(void 0!==e),t.map((t=>function(t,e){let i=t.updateTime?Sl(t.updateTime):Sl(e);return i.isEqual(un.min())&&(i=Sl(e)),new Na(i,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),i=Sl(t.commitTime);return this.listener.g_(i,e)}p_(){const t={};t.database=Ll(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let i;if(e instanceof Va)i={update:Nl(t,e.key,e.value)};else if(e instanceof qa)i={delete:Il(t,e.key)};else if(e instanceof ja)i={update:Nl(t,e.key,e.data),updateMask:Gl(e.fieldMask)};else{if(!(e instanceof Ya))return Xs();i={verify:Il(t,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const i=e.transform;if(i instanceof Aa)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(i instanceof ka)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:i.elements}};if(i instanceof Ia)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:i.elements}};if(i instanceof Ma)return{fieldPath:e.field.canonicalString(),increment:i.Pe};throw Xs()}(0,t)))),e.precondition.isNone||(i.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Tl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Xs()}(t,e.precondition)),i}(this.serializer,t)))};this.a_(e)}}class Xh extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new $s(Ks.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,n])=>this.connection.Mo(t,kl(e,i),r,s,n))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ks.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new $s(Ks.UNKNOWN,t.toString())}))}Lo(t,e,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([n,o])=>this.connection.Lo(t,kl(e,i),r,n,o,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ks.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new $s(Ks.UNKNOWN,t.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class qh{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(js(e),this.D_=!1):Vs("OnlineStateTracker",e)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Yh{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((t=>{i.enqueueAndForget((async()=>{rc(this)&&(Vs("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ys(t);e.L_.add(4),await $h(e),e.q_.set("Unknown"),e.L_.delete(4),await Kh(e)}(this))}))})),this.q_=new qh(i,r)}}async function Kh(t){if(rc(t))for(const e of t.B_)await e(!0)}async function $h(t){for(const e of t.B_)await e(!1)}function Qh(t,e){const i=Ys(t);i.N_.has(e.targetId)||(i.N_.set(e.targetId,e),ic(i)?ec(i):wc(i).r_()&&Jh(i,e))}function Zh(t,e){const i=Ys(t),r=wc(i);i.N_.delete(e),r.r_()&&tc(i,e),0===i.N_.size&&(r.r_()?r.o_():rc(i)&&i.q_.set("Unknown"))}function Jh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(un.min())>0){const i=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}wc(t).A_(e)}function tc(t,e){t.Q_.xe(e),wc(t).R_(e)}function ec(t){t.Q_=new pl({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wc(t).start(),t.q_.v_()}function ic(t){return rc(t)&&!wc(t).n_()&&t.N_.size>0}function rc(t){return 0===Ys(t).L_.size}function sc(t){t.Q_=void 0}async function nc(t){t.q_.set("Online")}async function oc(t){t.N_.forEach(((e,i)=>{Jh(t,e)}))}async function ac(t,e){sc(t),ic(t)?(t.q_.M_(e),ec(t)):t.q_.set("Unknown")}async function lc(t,e,i){if(t.q_.set("Online"),e instanceof dl&&2===e.state&&e.cause)try{await async function(t,e){const i=e.cause;for(const r of e.targetIds)t.N_.has(r)&&(await t.remoteSyncer.rejectListen(r,i),t.N_.delete(r),t.Q_.removeTarget(r))}(t,e)}catch(i){Vs("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hc(t,i)}else if(e instanceof hl?t.Q_.Ke(e):e instanceof cl?t.Q_.He(e):t.Q_.We(e),!i.isEqual(un.min()))try{const e=await kh(t.localStore);i.compareTo(e)>=0&&await function(t,e){const i=t.Q_.rt(e);return i.targetChanges.forEach(((i,r)=>{if(i.resumeToken.approximateByteSize()>0){const s=t.N_.get(r);s&&t.N_.set(r,s.withResumeToken(i.resumeToken,e))}})),i.targetMismatches.forEach(((e,i)=>{const r=t.N_.get(e);if(!r)return;t.N_.set(e,r.withResumeToken(Un.EMPTY_BYTE_STRING,r.snapshotVersion)),tc(t,e);const s=new Xl(r.target,e,i,r.sequenceNumber);Jh(t,s)})),t.remoteSyncer.applyRemoteEvent(i)}(t,i)}catch(e){Vs("RemoteStore","Failed to raise snapshot:",e),await hc(t,e)}}async function hc(t,e,i){if(!Sn(e))throw e;t.L_.add(1),await $h(t),t.q_.set("Offline"),i||(i=()=>kh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Vs("RemoteStore","Retrying IndexedDB access"),await i(),t.L_.delete(1),await Kh(t)}))}function cc(t,e){return e().catch((i=>hc(t,i,e)))}async function dc(t){const e=Ys(t),i=Ec(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uc(e);)try{const t=await Ch(e.localStore,r);if(null===t){0===e.O_.length&&i.o_();break}r=t.batchId,pc(e,t)}catch(t){await hc(e,t)}fc(e)&&gc(e)}function uc(t){return rc(t)&&t.O_.length<10}function pc(t,e){t.O_.push(e);const i=Ec(t);i.r_()&&i.V_&&i.m_(e.mutations)}function fc(t){return rc(t)&&!Ec(t).n_()&&t.O_.length>0}function gc(t){Ec(t).start()}async function mc(t){Ec(t).p_()}async function yc(t){const e=Ec(t);for(const i of t.O_)e.m_(i.mutations)}async function vc(t,e,i){const r=t.O_.shift(),s=$a.from(r,e,i);await cc(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await dc(t)}async function bc(t,e){e&&Ec(t).V_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return Xs();case Ks.CANCELLED:case Ks.UNKNOWN:case Ks.DEADLINE_EXCEEDED:case Ks.RESOURCE_EXHAUSTED:case Ks.INTERNAL:case Ks.UNAVAILABLE:case Ks.UNAUTHENTICATED:return!1;case Ks.INVALID_ARGUMENT:case Ks.NOT_FOUND:case Ks.ALREADY_EXISTS:case Ks.PERMISSION_DENIED:case Ks.FAILED_PRECONDITION:case Ks.ABORTED:case Ks.OUT_OF_RANGE:case Ks.UNIMPLEMENTED:case Ks.DATA_LOSS:return!0}}(t)&&t!==Ks.ABORTED}(e.code)){const i=t.O_.shift();Ec(t).s_(),await cc(t,(()=>t.remoteSyncer.rejectFailedWrite(i.batchId,e))),await dc(t)}}(t,e),fc(t)&&gc(t)}async function xc(t,e){const i=Ys(t);i.asyncQueue.verifyOperationInProgress(),Vs("RemoteStore","RemoteStore received new credentials");const r=rc(i);i.L_.add(3),await $h(i),r&&i.q_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.L_.delete(3),await Kh(i)}function wc(t){return t.K_||(t.K_=function(t,e,i){const r=Ys(t);return r.w_(),new Gh(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Eo:nc.bind(null,t),Ro:oc.bind(null,t),mo:ac.bind(null,t),d_:lc.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),ic(t)?ec(t):t.q_.set("Unknown")):(await t.K_.stop(),sc(t))}))),t.K_}function Ec(t){return t.U_||(t.U_=function(t,e,i){const r=Ys(t);return r.w_(),new Wh(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mc.bind(null,t),mo:bc.bind(null,t),f_:yc.bind(null,t),g_:vc.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await dc(t)):(await t.U_.stop(),t.O_.length>0&&(Vs("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}class Tc{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){const n=Date.now()+i,o=new Tc(t,e,n,r,s);return o.start(i),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $s(Ks.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sc(t,e){if(js("AsyncQueue",`${e}: ${t}`),Sn(t))return new $s(Ks.UNAVAILABLE,`${e}: ${t}`);throw t}class Ac{constructor(t){this.comparator=t?(e,i)=>t(e,i)||yn.comparator(e.key,i.key):(t,e)=>yn.comparator(t.key,e.key),this.keyedMap=ha(),this.sortedSet=new Nn(this.comparator)}static emptySet(t){return new Ac(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ac))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=i.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Ac;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class kc{constructor(){this.W_=new Nn(yn.comparator)}track(t){const e=t.doc.key,i=this.W_.get(e);i?0!==t.type&&3===i.type?this.W_=this.W_.insert(e,t):3===t.type&&1!==i.type?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.W_=this.W_.remove(e):1===t.type&&2===i.type?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):Xs():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Cc{constructor(t,e,i,r,s,n,o,a,l){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=n,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,i,r,s){const n=[];return e.forEach((t=>{n.push({type:0,doc:t})})),new Cc(t,e,Ac.emptySet(e),n,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Jo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==i[t].type||!e[t].doc.isEqual(i[t].doc))return!1;return!0}}class Ic{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((t=>t.J_()))}}class Pc{constructor(){this.queries=Mc(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,e){const i=Ys(t),r=i.queries;i.queries=Mc(),r.forEach(((t,i)=>{for(const t of i.j_)t.onError(e)}))}(this,new $s(Ks.ABORTED,"Firestore shutting down"))}}function Mc(){return new na((t=>ta(t)),Jo)}async function Lc(t,e){const i=Ys(t);let r=3;const s=e.query;let n=i.queries.get(s);n?!n.H_()&&e.J_()&&(r=2):(n=new Ic,r=e.J_()?0:1);try{switch(r){case 0:n.z_=await i.onListen(s,!0);break;case 1:n.z_=await i.onListen(s,!1);break;case 2:await i.onFirstRemoteStoreListen(s)}}catch(t){const i=Sc(t,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(i)}i.queries.set(s,n),n.j_.push(e),e.Z_(i.onlineState),n.z_&&e.X_(n.z_)&&Dc(i)}async function Oc(t,e){const i=Ys(t),r=e.query;let s=3;const n=i.queries.get(r);if(n){const t=n.j_.indexOf(e);t>=0&&(n.j_.splice(t,1),0===n.j_.length?s=e.J_()?0:1:!n.H_()&&e.J_()&&(s=2))}switch(s){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function Nc(t,e){const i=Ys(t);let r=!1;for(const t of e){const e=t.query,s=i.queries.get(e);if(s){for(const e of s.j_)e.X_(t)&&(r=!0);s.z_=t}}r&&Dc(i)}function _c(t,e,i){const r=Ys(t),s=r.queries.get(e);if(s)for(const t of s.j_)t.onError(i);r.queries.delete(e)}function Dc(t){t.Y_.forEach((t=>{t.next()}))}var Rc,Fc;(Fc=Rc||(Rc={})).ea="default",Fc.Cache="cache";class Bc{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const e=[];for(const i of t.docChanges)3!==i.type&&e.push(i);t=new Cc(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache)return!0;if(!this.J_())return!0;const i="Offline"!==e;return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}oa(t){t=Cc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Rc.Cache}}class zc{constructor(t){this.key=t}}class Uc{constructor(t){this.key=t}}class Hc{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ma(),this.mutatedKeys=ma(),this.Aa=ra(t),this.Ra=new Ac(this.Aa)}get Va(){return this.Ta}ma(t,e){const i=e?e.fa:new kc,r=e?e.Ra:this.Ra;let s=e?e.mutatedKeys:this.mutatedKeys,n=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const h=r.get(t),c=ia(this.query,e)?e:null,d=!!h&&this.mutatedKeys.has(h.key),u=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;h&&c?h.data.isEqual(c.data)?d!==u&&(i.track({type:3,doc:c}),p=!0):this.ga(h,c)||(i.track({type:2,doc:c}),p=!0,(a&&this.Aa(c,a)>0||l&&this.Aa(c,l)<0)&&(o=!0)):!h&&c?(i.track({type:0,doc:c}),p=!0):h&&!c&&(i.track({type:1,doc:h}),p=!0,(a||l)&&(o=!0)),p&&(c?(n=n.add(c),s=u?s.add(t):s.delete(t)):(n=n.delete(t),s=s.delete(t)))})),null!==this.query.limit)for(;n.size>this.query.limit;){const t="F"===this.query.limitType?n.last():n.first();n=n.delete(t.key),s=s.delete(t.key),i.track({type:1,doc:t})}return{Ra:n,fa:i,ns:o,mutatedKeys:s}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const n=t.fa.G_();n.sort(((t,e)=>function(t,e){const i=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xs()}};return i(t)-i(e)}(t.type,e.type)||this.Aa(t.doc,e.doc))),this.pa(i),r=null!=r&&r;const o=e&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==n.length||l?{snapshot:new Cc(this.query,t.Ra,s,n,t.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new kc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=ma(),this.Ra.forEach((t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))}));const e=[];return t.forEach((t=>{this.da.has(t)||e.push(new Uc(t))})),this.da.forEach((i=>{t.has(i)||e.push(new zc(i))})),e}ba(t){this.Ta=t.Ts,this.da=ma();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Cc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Vc{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class jc{constructor(t){this.key=t,this.va=!1}}class Gc{constructor(t,e,i,r,s,n){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=n,this.Ca={},this.Fa=new na((t=>ta(t)),Jo),this.Ma=new Map,this.xa=new Set,this.Oa=new Nn(yn.comparator),this.Na=new Map,this.La=new dh,this.Ba={},this.ka=new Map,this.qa=th.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Wc(t,e,i=!0){const r=dd(t);let s;const n=r.Fa.get(e);return n?(r.sharedClientState.addLocalQueryTarget(n.targetId),s=n.view.Da()):s=await qc(r,e,i,!0),s}async function Xc(t,e){const i=dd(t);await qc(i,e,!0,!1)}async function qc(t,e,i,r){const s=await function(t,e){const i=Ys(t);return i.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return i.Ur.getTargetData(t,e).next((s=>s?(r=s,Tn.resolve(r)):i.Ur.allocateTargetId(t).next((s=>(r=new Xl(e,s,"TargetPurposeListen",t.currentSequenceNumber),i.Ur.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=i.os.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(i.os=i.os.insert(t.targetId,t),i._s.set(e,t.targetId)),t}))}(t.localStore,$o(e)),n=s.targetId,o=t.sharedClientState.addLocalQueryTarget(n,i);let a;return r&&(a=await async function(t,e,i,r,s){t.Ka=(e,i,r)=>async function(t,e,i,r){let s=e.view.ma(i);s.ns&&(s=await Ph(t.localStore,e.query,!1).then((({documents:t})=>e.view.ma(t,s))));const n=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(s,t.isPrimaryClient,n,o);return nd(t,e.targetId,a.wa),a.snapshot}(t,e,i,r);const n=await Ph(t.localStore,e,!0),o=new Hc(e,n.Ts),a=o.ma(n.documents),l=ll.createSynthesizedTargetChangeForCurrentChange(i,r&&"Offline"!==t.onlineState,s),h=o.applyChanges(a,t.isPrimaryClient,l);nd(t,i,h.wa);const c=new Vc(e,i,o);return t.Fa.set(e,c),t.Ma.has(i)?t.Ma.get(i).push(e):t.Ma.set(i,[e]),h.snapshot}(t,e,n,"current"===o,s.resumeToken)),t.isPrimaryClient&&i&&Qh(t.remoteStore,s),a}async function Yc(t,e,i){const r=Ys(t),s=r.Fa.get(e),n=r.Ma.get(s.targetId);if(n.length>1)return r.Ma.set(s.targetId,n.filter((t=>!Jo(t,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ih(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),i&&Zh(r.remoteStore,s.targetId),rd(r,s.targetId)})).catch(En)):(rd(r,s.targetId),await Ih(r.localStore,s.targetId,!0))}async function Kc(t,e){const i=Ys(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);i.isPrimaryClient&&1===s.length&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),Zh(i.remoteStore,r.targetId))}async function $c(t,e){const i=Ys(t);try{const t=await function(t,e){const i=Ys(t),r=e.snapshotVersion;let s=i.os;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const n=i.cs.newChangeBuffer({trackRemovals:!0});s=i.os;const o=[];e.targetChanges.forEach(((n,a)=>{const l=s.get(a);if(!l)return;o.push(i.Ur.removeMatchingKeys(t,n.removedDocuments,a).next((()=>i.Ur.addMatchingKeys(t,n.addedDocuments,a))));let h=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?h=h.withResumeToken(Un.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):n.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(n.resumeToken,r)),s=s.insert(a,h),function(t,e,i){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size>0}(l,h,n)&&o.push(i.Ur.updateTargetData(t,h))}));let a=aa(),l=ma();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(i.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,i){let r=ma(),s=ma();return i.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=aa();return i.forEach(((i,n)=>{const o=t.get(i);n.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(i)),n.isNoDocument()&&n.version.isEqual(un.min())?(e.removeEntry(i,n.readTime),r=r.insert(i,n)):!o.isValidDocument()||n.version.compareTo(o.version)>0||0===n.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(n),r=r.insert(i,n)):Vs("LocalStore","Ignoring outdated watch update for ",i,". Current version:",o.version," Watch version:",n.version)})),{Ps:r,Is:s}}))}(t,n,e.documentUpdates).next((t=>{a=t.Ps,l=t.Is}))),!r.isEqual(un.min())){const e=i.Ur.getLastRemoteSnapshotVersion(t).next((e=>i.Ur.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return Tn.waitFor(o).next((()=>n.apply(t))).next((()=>i.localDocuments.getLocalViewOfDocuments(t,a,l))).next((()=>a))})).then((t=>(i.os=s,t)))}(i.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=i.Na.get(e);r&&(qs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.va=!0:t.modifiedDocuments.size>0?qs(r.va):t.removedDocuments.size>0&&(qs(r.va),r.va=!1))})),await ld(i,t,e)}catch(t){await En(t)}}function Qc(t,e,i){const r=Ys(t);if(r.isPrimaryClient&&0===i||!r.isPrimaryClient&&1===i){const t=[];r.Fa.forEach(((i,r)=>{const s=r.view.Z_(e);s.snapshot&&t.push(s.snapshot)})),function(t,e){const i=Ys(t);i.onlineState=e;let r=!1;i.queries.forEach(((t,i)=>{for(const t of i.j_)t.Z_(e)&&(r=!0)})),r&&Dc(i)}(r.eventManager,e),t.length&&r.Ca.d_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Zc(t,e,i){const r=Ys(t);r.sharedClientState.updateQueryState(e,"rejected",i);const s=r.Na.get(e),n=s&&s.key;if(n){let t=new Nn(yn.comparator);t=t.insert(n,vo.newNoDocument(n,un.min()));const i=ma().add(n),s=new al(un.min(),new Map,new Nn(hn),t,i);await $c(r,s),r.Oa=r.Oa.remove(n),r.Na.delete(e),ad(r)}else await Ih(r.localStore,e,!1).then((()=>rd(r,e,i))).catch(En)}async function Jc(t,e){const i=Ys(t),r=e.batch.batchId;try{const t=await function(t,e){const i=Ys(t);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),s=i.cs.newChangeBuffer({trackRemovals:!0});return function(t,e,i,r){const s=i.batch,n=s.keys();let o=Tn.resolve();return n.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const n=i.docVersions.get(t);qs(null!==n),e.version.compareTo(n)<0&&(s.applyToRemoteDocument(e,i),e.isValidDocument()&&(e.setReadTime(i.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,s)))}(i,t,e,s).next((()=>s.apply(t))).next((()=>i.mutationQueue.performConsistencyCheck(t))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=ma();for(let i=0;i<t.mutationResults.length;++i)t.mutationResults[i].transformResults.length>0&&(e=e.add(t.batch.mutations[i].key));return e}(e)))).next((()=>i.localDocuments.getDocuments(t,r)))}))}(i.localStore,e);id(i,r,null),ed(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await ld(i,t)}catch(t){await En(t)}}async function td(t,e,i){const r=Ys(t);try{const t=await function(t,e){const i=Ys(t);return i.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return i.mutationQueue.lookupMutationBatch(t,e).next((e=>(qs(null!==e),r=e.keys(),i.mutationQueue.removeMutationBatch(t,e)))).next((()=>i.mutationQueue.performConsistencyCheck(t))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>i.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);id(r,e,i),ed(r,e),r.sharedClientState.updateMutationState(e,"rejected",i),await ld(r,t)}catch(i){await En(i)}}function ed(t,e){(t.ka.get(e)||[]).forEach((t=>{t.resolve()})),t.ka.delete(e)}function id(t,e,i){const r=Ys(t);let s=r.Ba[r.currentUser.toKey()];if(s){const t=s.get(e);t&&(i?t.reject(i):t.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function rd(t,e,i=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),i&&t.Ca.$a(r,i);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((e=>{t.La.containsKey(e)||sd(t,e)}))}function sd(t,e){t.xa.delete(e.path.canonicalString());const i=t.Oa.get(e);null!==i&&(Zh(t.remoteStore,i),t.Oa=t.Oa.remove(e),t.Na.delete(i),ad(t))}function nd(t,e,i){for(const r of i)r instanceof zc?(t.La.addReference(r.key,e),od(t,r)):r instanceof Uc?(Vs("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||sd(t,r.key)):Xs()}function od(t,e){const i=e.key,r=i.path.canonicalString();t.Oa.get(i)||t.xa.has(r)||(Vs("SyncEngine","New document in limbo: "+i),t.xa.add(r),ad(t))}function ad(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const i=new yn(fn.fromString(e)),r=t.qa.next();t.Na.set(r,new jc(i)),t.Oa=t.Oa.insert(i,r),Qh(t.remoteStore,new Xl($o(Xo(i.path)),r,"TargetPurposeLimboResolution",An.oe))}}async function ld(t,e,i){const r=Ys(t),s=[],n=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((t,a)=>{o.push(r.Ka(a,e,i).then((t=>{var e;if((t||i)&&r.isPrimaryClient){const s=t?!t.fromCache:null===(e=null==i?void 0:i.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(t){s.push(t);const e=wh.Wi(a.targetId,t);n.push(e)}})))})),await Promise.all(o),r.Ca.d_(s),await async function(t,e){const i=Ys(t);try{await i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Tn.forEach(e,(e=>Tn.forEach(e.$i,(r=>i.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>Tn.forEach(e.Ui,(r=>i.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!Sn(t))throw t;Vs("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=i.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);i.os=i.os.insert(e,s)}}}(r.localStore,n))}async function hd(t,e){const i=Ys(t);if(!i.currentUser.isEqual(e)){Vs("SyncEngine","User change. New user:",e.toKey());const t=await Ah(i.localStore,e);i.currentUser=e,function(t){t.ka.forEach((t=>{t.forEach((t=>{t.reject(new $s(Ks.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ka.clear()}(i),i.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await ld(i,t.hs)}}function cd(t,e){const i=Ys(t),r=i.Na.get(e);if(r&&r.va)return ma().add(r.key);{let t=ma();const r=i.Ma.get(e);if(!r)return t;for(const e of r){const r=i.Fa.get(e);t=t.unionWith(r.view.Va)}return t}}function dd(t){const e=Ys(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$c.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zc.bind(null,e),e.Ca.d_=Nc.bind(null,e.eventManager),e.Ca.$a=_c.bind(null,e.eventManager),e}function ud(t){const e=Ys(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=td.bind(null,e),e}class pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Hh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return function(t,e,i,r){return new Sh(t,e,i,r)}(this.persistence,new Th,t.initialUser,this.serializer)}Ga(t){return new yh(bh.Zr,this.serializer)}Wa(t){return new Lh}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pd.provider={build:()=>new pd};class fd extends pd{constructor(t){super(),this.cacheSizeBytes=t}ja(t,e){qs(this.persistence.referenceDelegate instanceof xh);const i=this.persistence.referenceDelegate.garbageCollector;return new rh(i,t.asyncQueue,e)}Ga(t){const e=void 0!==this.cacheSizeBytes?Jl.withCacheSize(this.cacheSizeBytes):Jl.DEFAULT;return new yh((t=>xh.Zr(t,e)),this.serializer)}}class gd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Qc(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=hd.bind(null,this.syncEngine),await async function(t,e){const i=Ys(t);e?(i.L_.delete(2),await Kh(i)):e||(i.L_.add(2),await $h(i),i.q_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Pc}createDatastore(t){const e=Hh(t.databaseInfo.databaseId),i=function(t){return new zh(t)}(t.databaseInfo);return function(t,e,i,r){return new Xh(t,e,i,r)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(t,e,i,r,s){return new Yh(t,e,i,r,s)}(this.localStore,this.datastore,t.asyncQueue,(t=>Qc(this.syncEngine,t,0)),Nh.D()?new Nh:new Oh)}createSyncEngine(t,e){return function(t,e,i,r,s,n,o){const a=new Gc(t,e,i,r,s,n);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=Ys(t);Vs("RemoteStore","RemoteStore shutting down."),e.L_.add(5),await $h(e),e.k_.shutdown(),e.q_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}gd.provider={build:()=>new gd};class md{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):js("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}class yd{constructor(t,e,i,r,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Bs.UNAUTHENTICATED,this.clientId=ln.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,(async t=>{Vs("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(i,(t=>(Vs("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Sc(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function vd(t,e){t.asyncQueue.verifyOperationInProgress(),Vs("FirestoreClient","Initializing OfflineComponentProvider");const i=t.configuration;await e.initialize(i);let r=i.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Ah(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function bd(t,e){t.asyncQueue.verifyOperationInProgress();const i=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Vs("FirestoreClient","Using user provided OfflineComponentProvider");try{await vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(t){return"FirebaseError"===t.name?t.code===Ks.FAILED_PRECONDITION||t.code===Ks.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i))throw i;Gs("Error using user provided cache. Falling back to memory cache: "+i),await vd(t,new pd)}}else Vs("FirestoreClient","Using default OfflineComponentProvider"),await vd(t,new fd(void 0));return t._offlineComponents}(t);Vs("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(i,t.configuration),t.setCredentialChangeListener((t=>xc(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,i)=>xc(e.remoteStore,i))),t._onlineComponents=e}async function xd(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Vs("FirestoreClient","Using user provided OnlineComponentProvider"),await bd(t,t._uninitializedComponentsProvider._online)):(Vs("FirestoreClient","Using default OnlineComponentProvider"),await bd(t,new gd))),t._onlineComponents}async function wd(t){const e=await xd(t),i=e.eventManager;return i.onListen=Wc.bind(null,e.syncEngine),i.onUnlisten=Yc.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Xc.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=Kc.bind(null,e.syncEngine),i}function Ed(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Td=new Map;function Sd(t,e,i){if(!i)throw new $s(Ks.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ad(t){if(!yn.isDocumentKey(t))throw new $s(Ks.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kd(t){if(yn.isDocumentKey(t))throw new $s(Ks.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Xs()}function Id(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $s(Ks.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Cd(t);throw new $s(Ks.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return t}class Pd{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new $s(Ks.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new $s(Ks.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,i,r){if(!0===e&&!0===r)throw new $s(Ks.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ed(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new $s(Ks.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new $s(Ks.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new $s(Ks.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Md{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $s(Ks.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new $s(Ks.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pd(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Js;switch(t.type){case"firstParty":return new sn(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new $s(Ks.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Td.get(t);e&&(Vs("ComponentProvider","Removing Datastore"),Td.delete(t),e.terminate())}(this),Promise.resolve()}}class Ld{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ld(this.firestore,t,this._query)}}class Od{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Od(this.firestore,t,this._key)}}class Nd extends Ld{constructor(t,e,i){super(t,e,Xo(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Od(this.firestore,null,new yn(t))}withConverter(t){return new Nd(this.firestore,t,this._path)}}function _d(t,e,...i){if(t=I(t),Sd("collection","path",e),t instanceof Md){const r=fn.fromString(e,...i);return kd(r),new Nd(t,null,r)}{if(!(t instanceof Od||t instanceof Nd))throw new $s(Ks.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fn.fromString(e,...i));return kd(r),new Nd(t.firestore,null,r)}}function Dd(t,e,...i){if(t=I(t),1===arguments.length&&(e=ln.newId()),Sd("doc","path",e),t instanceof Md){const r=fn.fromString(e,...i);return Ad(r),new Od(t,null,new yn(r))}{if(!(t instanceof Od||t instanceof Nd))throw new $s(Ks.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fn.fromString(e,...i));return Ad(r),new Od(t.firestore,t instanceof Nd?t.converter:null,new yn(r))}}class Rd{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Vh(this,"async_queue_retry"),this.Vu=()=>{const t=Uh();t&&Vs("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=t;const e=Uh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=Uh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise((()=>{}));const e=new Qs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Pu.push(t),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Sn(t))throw t;Vs("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(t){const e=this.mu.then((()=>(this.du=!0,t().catch((t=>{this.Eu=t,this.du=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw js("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.du=!1,t))))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const r=Tc.createAndSchedule(this,t,e,i,(t=>this.yu(t)));return this.Tu.push(r),r}fu(){this.Eu&&Xs()}verifyOperationInProgress(){}async wu(){let t;do{t=this.mu,await t}while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then((()=>{this.Tu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Tu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.wu()}))}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class Fd extends Md{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Rd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Rd(t),this._firestoreClient=void 0,await t}}}function Bd(t,e){const i="string"==typeof t?t:e||"(default)",r=zt("object"==typeof t?t:Wt(),"firestore").getImmediate({identifier:i});if(!r._initialized){const t=(()=>{const t=p("firestore");if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return"["===t[0]?[t.substring(1,e-1),i]:[t.substring(0,e),i]})();t&&function(t,e,i,r={}){var s;const n=(t=Id(t,Md))._getSettings(),o=`${e}:${i}`;if("firestore.googleapis.com"!==n.host&&n.host!==o&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},n),{host:o,ssl:!1})),r.mockUserToken){let e,i;if("string"==typeof r.mockUserToken)e=r.mockUserToken,i=Bs.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const n=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(n)),""].join(".")}(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const n=r.mockUserToken.sub||r.mockUserToken.user_id;if(!n)throw new $s(Ks.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new Bs(n)}t._authCredentials=new tn(new Zs(e,i))}}(r,...t)}return r}function zd(t){if(t._terminated)throw new $s(Ks.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,i,r;const s=t._freezeSettings(),n=function(t,e,i,r){return new Yn(t,e,i,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ed(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||(null===(i=s.localCache)||void 0===i?void 0:i._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yd(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}(t),t._firestoreClient}class Ud{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ud(Un.fromBase64String(t))}catch(t){throw new $s(Ks.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ud(Un.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Hd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new $s(Ks.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Vd{constructor(t){this._methodName=t}}class jd{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new $s(Ks.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new $s(Ks.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return hn(this._lat,t._lat)||hn(this._long,t._long)}}class Gd{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}(this._values,t._values)}}const Wd=/^__.*__$/;class Xd{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new ja(t,this.data,this.fieldMask,e,this.fieldTransforms):new Va(t,this.data,e,this.fieldTransforms)}}class qd{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ja(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Yd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xs()}}class Kd{constructor(t,e,i,r,s,n){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=n||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Kd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.Ou(t),r}Nu(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return hu(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(0===t.length)throw this.Bu("Document fields must not be empty");if(Yd(this.Cu)&&Wd.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class $d{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Hh(t)}Qu(t,e,i,r=!1){return new Kd({Cu:t,methodName:e,qu:i,path:mn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(t){const e=t._freezeSettings(),i=Hh(t._databaseId);return new $d(t._databaseId,!!e.ignoreUndefinedProperties,i)}function Zd(t,e,i,r,s,n={}){const o=t.Qu(n.merge||n.mergeFields?2:0,e,i,s);nu("Data must be an object, but it was:",o,r);const a=ru(r,o);let l,h;if(n.merge)l=new Bn(o.fieldMask),h=o.fieldTransforms;else if(n.mergeFields){const t=[];for(const r of n.mergeFields){const s=ou(e,r,i);if(!o.contains(s))throw new $s(Ks.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);cu(t,s)||t.push(s)}l=new Bn(t),h=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,h=o.fieldTransforms;return new Xd(new mo(a),l,h)}class Jd extends Vd{_toFieldTransform(t){if(2!==t.Cu)throw 1===t.Cu?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Jd}}function tu(t,e,i,r){const s=t.Qu(1,e,i);nu("Data must be an object, but it was:",s,r);const n=[],o=mo.empty();Ln(r,((t,r)=>{const a=lu(e,t,i);r=I(r);const l=s.Nu(a);if(r instanceof Jd)n.push(a);else{const t=iu(r,l);null!=t&&(n.push(a),o.set(a,t))}}));const a=new Bn(n);return new qd(o,a,s.fieldTransforms)}function eu(t,e,i,r,s,n){const o=t.Qu(1,e,i),a=[ou(e,r,i)],l=[s];if(n.length%2!=0)throw new $s(Ks.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<n.length;t+=2)a.push(ou(e,n[t])),l.push(n[t+1]);const h=[],c=mo.empty();for(let t=a.length-1;t>=0;--t)if(!cu(h,a[t])){const e=a[t];let i=l[t];i=I(i);const r=o.Nu(e);if(i instanceof Jd)h.push(e);else{const t=iu(i,r);null!=t&&(h.push(e),c.set(e,t))}}const d=new Bn(h);return new qd(c,d,o.fieldTransforms)}function iu(t,e){if(su(t=I(t)))return nu("Unsupported field value:",e,t),ru(t,e);if(t instanceof Vd)return function(t,e){if(!Yd(e.Cu))throw e.Bu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Bu(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(e);i&&e.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(t,e){const i=[];let r=0;for(const s of t){let t=iu(s,e.Lu(r));null==t&&(t={nullValue:"NULL_VALUE"}),i.push(t),r++}return{arrayValue:{values:i}}}(t,e)}return function(t,e){if(null===(t=I(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xa(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=dn.fromDate(t);return{timestampValue:wl(e.serializer,i)}}if(t instanceof dn){const i=new dn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wl(e.serializer,i)}}if(t instanceof jd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ud)return{bytesValue:El(e.serializer,t._byteString)};if(t instanceof Od){const i=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(i))throw e.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Al(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof Gd)return function(t,e){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw e.Bu("VectorValues must only contain numeric values.");return va(e.serializer,t)}))}}}}}}(t,e);throw e.Bu(`Unsupported field value: ${Cd(t)}`)}(t,e)}function ru(t,e){const i={};return On(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ln(t,((t,r)=>{const s=iu(r,e.Mu(t));null!=s&&(i[t]=s)})),{mapValue:{fields:i}}}function su(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof dn||t instanceof jd||t instanceof Ud||t instanceof Od||t instanceof Vd||t instanceof Gd)}function nu(t,e,i){if(!su(i)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(i)){const r=Cd(i);throw"an object"===r?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ou(t,e,i){if((e=I(e))instanceof Hd)return e._internalPath;if("string"==typeof e)return lu(t,e);throw hu("Field path arguments must be of type string or ",t,!1,void 0,i)}const au=new RegExp("[~\\*/\\[\\]]");function lu(t,e,i){if(e.search(au)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,i);try{return new Hd(...e.split("."))._internalPath}catch(r){throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,i)}}function hu(t,e,i,r,s){const n=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;i&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(n||o)&&(l+=" (found",n&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new $s(Ks.INVALID_ARGUMENT,a+t+l)}function cu(t,e){return t.some((t=>t.isEqual(e)))}class du{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Od(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new uu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(pu("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class uu extends du{data(){return super.data()}}function pu(t,e){return"string"==typeof e?lu(t,e):e instanceof Hd?e._internalPath:e._delegate._internalPath}class fu{}class gu extends fu{}function mu(t,e,...i){let r=[];e instanceof fu&&r.push(e),r=r.concat(i),function(t){const e=t.filter((t=>t instanceof vu)).length,i=t.filter((t=>t instanceof yu)).length;if(e>1||e>0&&i>0)throw new $s(Ks.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const e of r)t=e._apply(t);return t}class yu extends gu{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new yu(t,e,i)}_apply(t){const e=this._parse(t);return Au(t._query,e),new Ld(t.firestore,t.converter,Qo(t._query,e))}_parse(t){const e=Qd(t.firestore),i=function(t,e,i,r,s,n,o){let a;if(s.isKeyField()){if("array-contains"===n||"array-contains-any"===n)throw new $s(Ks.INVALID_ARGUMENT,`Invalid Query. You can't perform '${n}' queries on documentId().`);if("in"===n||"not-in"===n){Su(o,n);const e=[];for(const i of o)e.push(Tu(r,t,i));a={arrayValue:{values:e}}}else a=Tu(r,t,o)}else"in"!==n&&"not-in"!==n&&"array-contains-any"!==n||Su(o,n),a=function(t,e,i,r=!1){return iu(i,t.Qu(r?4:3,e))}(i,"where",o,"in"===n||"not-in"===n);return Ao.create(s,n,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return i}}class vu extends fu{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new vu(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:ko.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let i=t;const r=e.getFlattenedFilters();for(const t of r)Au(i,t),i=Qo(i,t)}(t._query,e),new Ld(t.firestore,t.converter,Qo(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bu extends gu{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new bu(t,e)}_apply(t){const e=function(t,e,i){if(null!==t.startAt)throw new $s(Ks.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new $s(Ks.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eo(e,i)}(t._query,this._field,this._direction);return new Ld(t.firestore,t.converter,function(t,e){const i=t.explicitOrderBy.concat([e]);return new Wo(t.path,t.collectionGroup,i,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function xu(t,e="asc"){const i=e,r=pu("orderBy",t);return bu._create(r,i)}class wu extends gu{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new wu(t,e,i)}_apply(t){return new Ld(t.firestore,t.converter,Zo(t._query,this._limit,this._limitType))}}function Eu(t){return function(t,e){if(e<=0)throw new $s(Ks.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}("limit",t),wu._create("limit",t,"F")}function Tu(t,e,i){if("string"==typeof(i=I(i))){if(""===i)throw new $s(Ks.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yo(e)&&-1!==i.indexOf("/"))throw new $s(Ks.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=e.path.child(fn.fromString(i));if(!yn.isDocumentKey(r))throw new $s(Ks.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oo(t,new yn(r))}if(i instanceof Od)return oo(t,i._key);throw new $s(Ks.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cd(i)}.`)}function Su(t,e){if(!Array.isArray(t)||0===t.length)throw new $s(Ks.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Au(t,e){const i=function(t,e){for(const i of t)for(const t of i.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new $s(Ks.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $s(Ks.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class ku{convertValue(t,e="none"){switch(Qn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Gn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Xs()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Ln(t,((t,r)=>{i[t]=this.convertValue(r,e)})),i}convertVectorValue(t){var e,i,r;const s=null===(r=null===(i=null===(e=t.fields)||void 0===e?void 0:e.value.arrayValue)||void 0===i?void 0:i.values)||void 0===r?void 0:r.map((t=>jn(t.doubleValue)));return new Gd(s)}convertGeoPoint(t){return new jd(jn(t.latitude),jn(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Xn(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(qn(t));default:return null}}convertTimestamp(t){const e=Vn(t);return new dn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=fn.fromString(t);qs(Wl(i));const r=new Kn(i.get(1),i.get(3)),s=new yn(i.popFirst(5));return r.isEqual(e)||js(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function Cu(t,e,i){let r;return r=t?i&&(i.merge||i.mergeFields)?t.toFirestore(e,i):t.toFirestore(e):e,r}class Iu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Pu extends du{constructor(t,e,i,r,s,n){super(t,e,i,r,n),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(pu("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Mu extends Pu{data(t={}){return super.data(t)}}class Lu{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Iu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Mu(this._firestore,this._userDataWriter,i.key,i,new Iu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new $s(Ks.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((i=>{const r=new Mu(t._firestore,t._userDataWriter,i.doc.key,i.doc,new Iu(t._snapshot.mutatedKeys.has(i.doc.key),t._snapshot.fromCache),t.query.converter);return i.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let i=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Mu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Iu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let s=-1,n=-1;return 0!==e.type&&(s=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(i=i.add(e.doc),n=i.indexOf(e.doc.key)),{type:Ou(e.type),doc:r,oldIndex:s,newIndex:n}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ou(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xs()}}function Nu(t){t=Id(t,Od);const e=Id(t.firestore,Fd);return function(t,e,i={}){const r=new Qs;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,i,r,s){const n=new md({next:a=>{n.Za(),e.enqueueAndForget((()=>Oc(t,o)));const l=a.docs.has(i);!l&&a.fromCache?s.reject(new $s(Ks.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?s.reject(new $s(Ks.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:t=>s.reject(t)}),o=new Bc(Xo(i.path),n,{includeMetadataChanges:!0,_a:!0});return Lc(t,o)}(await wd(t),t.asyncQueue,e,i,r))),r.promise}(zd(e),t._key).then((i=>function(t,e,i){const r=i.docs.get(e._key),s=new _u(t);return new Pu(t,s,e._key,r,new Iu(i.hasPendingWrites,i.fromCache),e.converter)}(e,t,i)))}class _u extends ku{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ud(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Od(this.firestore,null,e)}}function Du(t){t=Id(t,Ld);const e=Id(t.firestore,Fd),i=zd(e),r=new _u(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new $s(Ks.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,i={}){const r=new Qs;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,i,r,s){const n=new md({next:i=>{n.Za(),e.enqueueAndForget((()=>Oc(t,o))),i.fromCache&&"server"===r.source?s.reject(new $s(Ks.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(i)},error:t=>s.reject(t)}),o=new Bc(i,n,{includeMetadataChanges:!0,_a:!0});return Lc(t,o)}(await wd(t),t.asyncQueue,e,i,r))),r.promise}(i,t._query).then((i=>new Lu(e,r,t,i)))}function Ru(t,e,i){t=Id(t,Od);const r=Id(t.firestore,Fd),s=Cu(t.converter,e,i);return zu(r,[Zd(Qd(r),"setDoc",t._key,s,null!==t.converter,i).toMutation(t._key,_a.none())])}function Fu(t,e,i,...r){t=Id(t,Od);const s=Id(t.firestore,Fd),n=Qd(s);let o;return o="string"==typeof(e=I(e))||e instanceof Hd?eu(n,"updateDoc",t._key,e,i,r):tu(n,"updateDoc",t._key,e),zu(s,[o.toMutation(t._key,_a.exists(!0))])}function Bu(t,e){const i=Id(t.firestore,Fd),r=Dd(t),s=Cu(t.converter,e);return zu(i,[Zd(Qd(t.firestore),"addDoc",r._key,s,null!==t.converter,{}).toMutation(r._key,_a.exists(!1))]).then((()=>r))}function zu(t,e){return function(t,e){const i=new Qs;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,i){const r=ud(t);try{const t=await function(t,e){const i=Ys(t),r=dn.now(),s=e.reduce(((t,e)=>t.add(e.key)),ma());let n,o;return i.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=aa(),l=ma();return i.cs.getEntries(t,s).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>i.localDocuments.getOverlayedDocuments(t,a))).next((s=>{n=s;const o=[];for(const t of e){const e=Ua(t,n.get(t.key).overlayedDocument);null!=e&&o.push(new ja(t.key,e,yo(e.value.mapValue),_a.exists(!0)))}return i.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(n,l);return i.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ca(n)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,i){let r=t.Ba[t.currentUser.toKey()];r||(r=new Nn(hn)),r=r.insert(e,i),t.Ba[t.currentUser.toKey()]=r}(r,t.batchId,i),await ld(r,t.changes),await dc(r.remoteStore)}catch(t){const e=Sc(t,"Failed to persist write");i.reject(e)}}(await function(t){return xd(t).then((t=>t.syncEngine))}(t),e,i))),i.promise}(zd(t),e)}class Uu{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Qd(t)}set(t,e,i){this._verifyNotCommitted();const r=Hu(t,this._firestore),s=Cu(r.converter,e,i),n=Zd(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(n.toMutation(r._key,_a.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Hu(t,this._firestore);let n;return n="string"==typeof(e=I(e))||e instanceof Hd?eu(this._dataReader,"WriteBatch.update",s._key,e,i,r):tu(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(n.toMutation(s._key,_a.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Hu(t,this._firestore);return this._mutations=this._mutations.concat(new qa(e._key,_a.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $s(Ks.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hu(t,e){if((t=I(t)).firestore!==e)throw new $s(Ks.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Vu(){return new Jd("deleteField")}function ju(t){return zd(t=Id(t,Fd)),new Uu(t,(e=>zu(t,e)))}function Gu(t){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(t)}function Wu(t,e,i){return(e=function(t){var e=function(t){if("object"!=Gu(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=Gu(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gu(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}new WeakMap,function(t,e=!0){!function(t){zs=t}(jt),Bt(new P("firestore",((t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),n=new Fd(new en(t.getProvider("auth-internal")),new on(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $s(Ks.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kn(t.options.projectId,e)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),n._setSettings(r),n}),"PUBLIC").setMultipleInstances(!0)),Xt(Fs,"4.7.4",t),Xt(Fs,"4.7.4","esm2017")}();var Xu=Object.freeze({ATTITUDE:"attitude",INTERPERSONAL_RELATIONSHIP:"interpersonal_relationship",EMOTIONAL_REGULATION:"emotional_regulation"}),qu=(Object.freeze(Wu(Wu(Wu({},Xu.ATTITUDE,"Attitude"),Xu.INTERPERSONAL_RELATIONSHIP,"InterpersonalRelationship"),Xu.EMOTIONAL_REGULATION,"EmotionalRegulation")),Object.freeze({ORGANIZATIONAL_MANAGEMENT:"organizational_management",DECISION_MAKING:"decision_making",COMMUNICATION:"communication",COACH_ATHLETE_RELATIONSHIP:"coach_athlete_relationship",LEADERSHIP:"leadership",RESILIENCE:"resilience",STRESS:"stress",POSITIVE_MENTAL_HEALTH:"positive_mental_health",SELF_CONFIDENCE_AND_SELF_EFFICACY:"self_confidence_and_self_efficacy"})),Yu=Object.freeze(Wu(Wu(Wu(Wu(Wu(Wu(Wu(Wu(Wu({},qu.ORGANIZATIONAL_MANAGEMENT,"Gestão organizacional"),qu.DECISION_MAKING,"Tomada de decisão"),qu.COMMUNICATION,"Comunicação"),qu.COACH_ATHLETE_RELATIONSHIP,"Relação treinador-aluno"),qu.LEADERSHIP,"Liderança"),qu.RESILIENCE,"Resiliência"),qu.STRESS,"Estresse"),qu.POSITIVE_MENTAL_HEALTH,"Saúde mental positiva"),qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,"Autoconfiança e autoeficácia"));function Ku(t){return Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(t)}function $u(t,e,i){return(e=function(t){var e=function(t){if("object"!=Ku(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=Ku(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ku(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.freeze(Wu(Wu(Wu({},Xu.ATTITUDE,[{category:qu.DECISION_MAKING,text:"Durante as competições, consigo equilibrar as emoções ao tomar decisões importantes.",invert:!1},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Encontro dificuldades para lidar com demandas dos familiares dos atletas.",invert:!0},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Mantenho uma comunicação ativa e positiva com dirigentes e equipe administrativa. ",invert:!1},{category:qu.DECISION_MAKING,text:"Tomo decisões confiando no feedback direto dos atletas e da equipe técnica. ",invert:!1},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Falta confiança em minha capacidade de mediar conflitos com equipe administrativa ou familiares. ",invert:!0},{category:qu.DECISION_MAKING,text:"Planejo minhas decisões do dia a dia com base em objetivos de longo prazo. ",invert:!1},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Busco resolver problemas com os árbitros de forma profissional e sem perder o controle. ",invert:!1},{category:qu.DECISION_MAKING,text:"Sinto dificuldade em tomar decisões sob pressão de resultados. ",invert:!0},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"É importante construir um bom diálogo com os árbitros para reduzir conflitos.",invert:!1},{category:qu.DECISION_MAKING,text:"Tomo decisões rapidamente em situações de pressão durante os jogos. ",invert:!1},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Relações interpessoais fora da quadra são desgastantes para meu trabalho.  ",invert:!0},{category:qu.DECISION_MAKING,text:"Minhas decisões consideram sempre o impacto no desenvolvimento dos atletas. ",invert:!1},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"O entendimento entre familiares, atletas e treinador é essencial para alcançar os objetivos do time. ",invert:!1},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Sempre evito conflitos desnecessários com gestores e equipes administrativas. ",invert:!1},{category:qu.DECISION_MAKING,text:"Muitas vezes sinto insegurança ao decidir durante situações críticas. ",invert:!0},{category:qu.DECISION_MAKING,text:"As decisões no treino são baseadas em uma análise cuidadosa do desempenho anterior.",invert:!1},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Mantenho um relacionamento respeitoso com os familiares dos atletas. ",invert:!1},{category:qu.DECISION_MAKING,text:"Levo em consideração a opinião de familiares dos atletas e equipes administrativas para tomar minha decisão no planejamento de treino.  ",invert:!0},{category:qu.ORGANIZATIONAL_MANAGEMENT,text:"Mantenho uma postura colaborativa com gestores para organizar competições.  ",invert:!1},{category:qu.DECISION_MAKING,text:"As decisões durante os jogos são frequentemente influenciadas pela experiência prévia. ",invert:!1}]),Xu.INTERPERSONAL_RELATIONSHIP,[{category:qu.COMMUNICATION,text:"Dou orientações claras e objetivas sobre técnicas e táticas durante os treinos e competições.",invert:!1},{category:qu.COACH_ATHLETE_RELATIONSHIP,text:"Demonstro sensibilidade em relação às necessidades pessoais dos atletas.",invert:!1},{category:qu.LEADERSHIP,text:"Não levo em consideração as ideias ou sugestões dos atletas durante os treinos.",invert:!0},{category:qu.LEADERSHIP,text:"Adapto os treinos ao nível de habilidade dos atletas.",invert:!1},{category:qu.COACH_ATHLETE_RELATIONSHIP,text:"Promovo um ambiente em que os atletas se sentem à vontade para expressar ideias e preocupações.",invert:!1},{category:qu.COACH_ATHLETE_RELATIONSHIP,text:"Não dou atenção ao bem-estar emocional dos atletas.",invert:!0},{category:qu.LEADERSHIP,text:"Recompenso o esforço e desempenho positivo dos atletas.",invert:!1},{category:qu.LEADERSHIP,text:"Estabeleço metas claras para a equipe e explico como podemos alcançá-las juntos.",invert:!1},{category:qu.COACH_ATHLETE_RELATIONSHIP,text:"Desconsidero os sentimentos e insatisfações dos atletas. ",invert:!0},{category:qu.LEADERSHIP,text:"Ajusto meu estilo de treinamento de acordo com a necessidade de cada atleta ou situação de competição.",invert:!1},{category:qu.COACH_ATHLETE_RELATIONSHIP,text:" Adoto uma postura amigável e motivadora nos treinos e competições.",invert:!1},{category:qu.COMMUNICATION,text:"Utilizo feedback verbal e não verbal para incentivar os atletas.",invert:!1},{category:qu.COMMUNICATION,text:"Tenho dificuldade em comunicar as prioridades do treinamento aos atletas. ",invert:!0},{category:qu.COACH_ATHLETE_RELATIONSHIP,text:"Construo uma relação de confiança com meus atletas, individualmente e em grupo.",invert:!1},{category:qu.LEADERSHIP,text:"Sou flexível para adaptar os planos de treino quando surgem situações inesperadas.",invert:!1},{category:qu.LEADERSHIP,text:"Parabenizo publicamente os atletas por boas atuações e contribuições ao time.",invert:!1},{category:qu.COMMUNICATION,text:"Dou orientações claras sobre como corrigir erros técnicos ou táticos.",invert:!1},{category:qu.COACH_ATHLETE_RELATIONSHIP,text:"Estou atento ao bem-estar físico e emocional dos atletas.",invert:!1},{category:qu.LEADERSHIP,text:"Tenho dificuldade em engajar os atletas no planejamento das estratégias.",invert:!1},{category:qu.LEADERSHIP,text:"Estimulo os atletas a participarem do planejamento e definição de estratégias para competições.",invert:!1}]),Xu.EMOTIONAL_REGULATION,[{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu confio na minha capacidade de manter a calma e agir de maneira estratégica quando a situação exige.",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu sou capaz de me recuperar rapidamente de falhas ou erros no campo de jogo. ",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu sempre encontro uma maneira de resolver problemas inesperados, independentemente das circunstâncias.",invert:!1},{category:qu.STRESS,text:"Eu sou bom em encontrar soluções práticas para lidar com a pressão durante o jogo.",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu sou eficaz em resolver qualquer problema que surge, mesmo que complexo.",invert:!1},{category:qu.RESILIENCE,text:"Eu permaneço confiante nas minhas capacidades, mesmo em tempos difíceis. ",invert:!1},{category:qu.RESILIENCE,text:"Quando enfrento um grande desafio no esporte, sinto que tenho o controle emocional. ",invert:!1},{category:qu.RESILIENCE,text:"Quando a pressão é alta, sinto que perco o controle emocional. ",invert:!0},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu acredito nas minhas habilidades para gerenciar situações inesperadas durante as competições.",invert:!1},{category:qu.STRESS,text:"Sinto que meu estresse tem impacto na minha tomada de decisões. ",invert:!0},{category:qu.POSITIVE_MENTAL_HEALTH,text:"No meu dia a dia de trabalho, frequentemente sinto uma sensação de pertencimento à minha equipe. ",invert:!1},{category:qu.STRESS,text:"Quando as coisas não saem conforme planejado, eu fico nervoso e fico sem saber como agir. ",invert:!0},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu sou confiante na minha capacidade de tomar boas decisões durante os jogos.",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu sempre consigo resolver os problemas difíceis se eu tentar bastante.",invert:!1},{category:qu.STRESS,text:"Quando estou estressado durante a competição, consigo controlar minha respiração e ações. ",invert:!1},{category:qu.RESILIENCE,text:"Eu consigo me recuperar rapidamente de um erro durante uma competição. ",invert:!1},{category:qu.POSITIVE_MENTAL_HEALTH,text:"Eu me sinto feliz e satisfeito(a) com o que estou realizando na minha carreira de treinador. ",invert:!1},{category:qu.RESILIENCE,text:"Eu sou capaz de superar qualquer obstáculo que apareça no meu caminho. ",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Quando estou diante de um desafio, sei como dar o meu melhor para superá-lo.",invert:!1},{category:qu.POSITIVE_MENTAL_HEALTH,text:"Eu sinto que a minha saúde emocional é adequadamente mantida ao longo do tempo. ",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Tenho a certeza de que consigo atingir os objetivos que estabeleci para mim e para minha equipe.",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu sou capaz de lidar eficazmente com crises durante a competição.",invert:!1},{category:qu.RESILIENCE,text:"Eu permaneço calmo(a) e organizado(a) sob pressão.",invert:!1},{category:qu.POSITIVE_MENTAL_HEALTH,text:"Sinto que estou tendo um impacto positivo na vida dos meus atletas. ",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Quando eu enfrento uma situação difícil, estou seguro(a) de que tomarei a melhor decisão.",invert:!1},{category:qu.STRESS,text:"Eu me sinto constantemente sobrecarregado pelas demandas da competição. ",invert:!0},{category:qu.RESILIENCE,text:"Eu confio no meu desempenho durante os treinos.",invert:!1},{category:qu.RESILIENCE,text:"Eu sou resiliente diante das adversidades no esporte.",invert:!1},{category:qu.SELF_CONFIDENCE_AND_SELF_EFFICACY,text:"Eu tenho a habilidade de lidar bem com situações de estresse.",invert:!1},{category:qu.POSITIVE_MENTAL_HEALTH,text:"Muitas vezes me pego tendo pensamentos negativos sobre minha carreira de treinador. ",invert:!0}])),Object.freeze(Wu(Wu({},Xu.INTERPERSONAL_RELATIONSHIP,"/questionnaires/".concat(Xu.ATTITUDE,"/")),Xu.EMOTIONAL_REGULATION,"/questionnaires/".concat(Xu.INTERPERSONAL_RELATIONSHIP,"/"))),Object.freeze(Wu(Wu(Wu({},Xu.ATTITUDE,"/questionnaires/".concat(Xu.INTERPERSONAL_RELATIONSHIP,"/")),Xu.INTERPERSONAL_RELATIONSHIP,"/questionnaires/".concat(Xu.EMOTIONAL_REGULATION,"/")),Xu.EMOTIONAL_REGULATION,"/coach/"));var Qu=Object.freeze({USERS:"users",ANSWER:"answer",ATTITUDE:"attitude",INTERPERSONAL_RELATIONSHIP:"interpersonal_relationship",EMOTIONAL_REGULATION:"emotional_regulation",TEMP_ATTITUDE:"temp_attitude",TEMP_INTERPERSONAL_RELATIONSHIP:"temp_interpersonal_relationship",TEMP_EMOTIONAL_REGULATION:"temp_emotional_regulation"}),Zu=Object.freeze($u($u($u({},Xu.ATTITUDE,Qu.ATTITUDE),Xu.INTERPERSONAL_RELATIONSHIP,Qu.INTERPERSONAL_RELATIONSHIP),Xu.EMOTIONAL_REGULATION,Qu.EMOTIONAL_REGULATION)),Ju=Object.freeze($u($u($u({},Qu.ATTITUDE,Xu.ATTITUDE),Qu.INTERPERSONAL_RELATIONSHIP,Xu.INTERPERSONAL_RELATIONSHIP),Qu.EMOTIONAL_REGULATION,Xu.EMOTIONAL_REGULATION)),tp=Object.freeze($u($u($u({},Xu.ATTITUDE,Qu.TEMP_ATTITUDE),Xu.INTERPERSONAL_RELATIONSHIP,Qu.TEMP_INTERPERSONAL_RELATIONSHIP),Xu.EMOTIONAL_REGULATION,Qu.TEMP_EMOTIONAL_REGULATION)),ep=Object.freeze($u($u($u({},Qu.TEMP_ATTITUDE,Qu.ATTITUDE),Qu.TEMP_INTERPERSONAL_RELATIONSHIP,Qu.INTERPERSONAL_RELATIONSHIP),Qu.TEMP_EMOTIONAL_REGULATION,Qu.EMOTIONAL_REGULATION));function ip(t){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(t)}function rp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function sp(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function np(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?sp(Object(i),!0).forEach((function(e){op(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):sp(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function op(t,e,i){return(e=function(t){var e=function(t){if("object"!=ip(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=ip(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ip(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ap(){ap=function(){return e};var t,e={},i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var n=e&&e.prototype instanceof y?e:y,o=Object.create(n.prototype),a=new M(r||[]);return s(o,"_invoke",{value:k(t,i,a)}),o}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var u="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function y(){}function v(){}function b(){}var x={};h(x,o,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(L([])));E&&E!==i&&r.call(E,o)&&(x=E);var T=b.prototype=y.prototype=Object.create(x);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function i(s,n,o,a){var l=d(t[s],t,n);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==ip(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(c).then((function(t){h.value=t,o(h)}),(function(t){return i("throw",t,o,a)}))}a(l.arg)}var n;s(this,"_invoke",{value:function(t,r){function s(){return new e((function(e,s){i(t,r,e,s)}))}return n=n?n.then(s,s):s()}})}function k(e,i,r){var s=u;return function(n,o){if(s===f)throw Error("Generator is already running");if(s===g){if("throw"===n)throw o;return{value:t,done:!0}}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var l=C(a,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===u)throw s=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=f;var h=d(e,i,r);if("normal"===h.type){if(s=r.done?g:p,h.arg===m)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(s=g,r.method="throw",r.arg=h.arg)}}}function C(e,i){var r=i.method,s=e.iterator[r];if(s===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var n=d(s,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,m;var o=n.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function L(e){if(e||""===e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,n=function i(){for(;++s<e.length;)if(r.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return n.next=n}}throw new TypeError(ip(e)+" is not iterable")}return v.prototype=b,s(T,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:v,configurable:!0}),v.displayName=h(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(A.prototype),h(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,i,r,s,n){void 0===n&&(n=Promise);var o=new A(c(t,i,r,s),n);return e.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(T),h(T,l,"Generator"),h(T,o,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(r,s){return a.type="throw",a.arg=e,i.next=r,s&&(i.method="next",i.arg=t),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),h=r.call(o,"finallyLoc");if(l&&h){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;P(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:L(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function lp(t,e,i,r,s,n,o){try{var a=t[n](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(r,s)}function hp(t){return function(){var e=this,i=arguments;return new Promise((function(r,s){var n=t.apply(e,i);function o(t){lp(n,r,s,o,a,"next",t)}function a(t){lp(n,r,s,o,a,"throw",t)}o(void 0)}))}}var cp=Bd(ds),dp=function(){var t=hp(ap().mark((function t(){var e,i,r,s;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,zp.auth.getCurrentUser();case 3:return e=t.sent,i=e.uid,r=_d(cp,Qu.USERS,i,Qu.ANSWER),t.next=8,Du(r);case 8:return s=t.sent,t.abrupt("return",s.docs.length);case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:return t.abrupt("return",0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),up=function(){var t=hp(ap().mark((function t(e){var i,r,s,n,o,a;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Zu[e],t.prev=1,t.next=4,zp.auth.getCurrentUser();case 4:return r=t.sent,s=r.uid,n=Dd(cp,Qu.USERS,s,Qu.ANSWER,i),t.next=9,Nu(n);case 9:if(!(o=t.sent).exists()){t.next=13;break}return a=o.data(),t.abrupt("return",a.data);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.error(t.t0);case 18:return t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),pp=function(){var t=hp(ap().mark((function t(e,i){var r,s,n;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=tp[e],t.prev=1,t.next=4,zp.auth.getCurrentUser();case 4:return s=t.sent,n=s.uid,t.next=8,Ru(Dd(cp,Qu.USERS,n),op({},r,i),{merge:!0});case 8:return t.abrupt("return",!0);case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,i){return t.apply(this,arguments)}}(),fp=function(){var t=hp(ap().mark((function t(e,i){var r,s,n,o,a,l,h,c,d;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Zu[e],t.prev=1,t.next=4,zp.auth.getCurrentUser();case 4:return s=t.sent,n=s.uid,o=Dd(cp,Qu.USERS,n),t.next=9,Nu(o);case 9:if(!(a=t.sent).exists()){t.next=28;break}return t.next=13,a.data();case 13:return l=t.sent,h=Object.keys(l).reduce((function(t,e){var i=ep[e];return i?np(np({},t),{},op({},i,l[e])):t}),op({},r,i)),Object.keys(h).forEach(function(){var t=hp(ap().mark((function t(e){return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Bu(_d(cp,Qu.USERS,n,e),h[e]);case 2:yp(Ju[e],h[e]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=18,Fu(o,op(op(op({},Qu.TEMP_ATTITUDE,Vu()),Qu.TEMP_INTERPERSONAL_RELATIONSHIP,Vu()),Qu.TEMP_EMOTIONAL_REGULATION,Vu()));case 18:return c=ju(cp),d=_d(cp,Qu.USERS,n,Qu.ANSWER),t.next=22,Du(d);case 22:return t.sent.docs.forEach((function(t){c.delete(t.ref)})),t.next=26,c.commit();case 26:return zp.user.setUserData("hasAnswerForAllForms",!0),t.abrupt("return",!0);case 28:t.next=33;break;case 30:t.prev=30,t.t0=t.catch(1),console.error(t.t0);case 33:return t.abrupt("return",!1);case 34:case"end":return t.stop()}}),t,null,[[1,30]])})));return function(e,i){return t.apply(this,arguments)}}(),gp=function(){var t=hp(ap().mark((function t(e,i){var r,s,n;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Zu[e],t.prev=1,t.next=4,zp.auth.getCurrentUser();case 4:return s=t.sent,n=s.uid,t.next=8,Bu(_d(cp,Qu.USERS,n,r),i);case 8:return t.abrupt("return",!0);case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,i){return t.apply(this,arguments)}}(),mp=function(){var t=hp(ap().mark((function t(e,i){var r,s,n;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Zu[e],t.prev=1,t.next=4,zp.auth.getCurrentUser();case 4:return s=t.sent,n=s.uid,t.next=8,Ru(Dd(cp,Qu.USERS,n,Qu.ANSWER,r),{data:i});case 8:return t.abrupt("return",!0);case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,i){return t.apply(this,arguments)}}(),yp=function(){var t=hp(ap().mark((function t(e,i){var r;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Zu[e],t.prev=1,t.next=4,Bu(_d(cp,r),i);case 4:return t.abrupt("return",!0);case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,i){return t.apply(this,arguments)}}(),vp=function(){var t=hp(ap().mark((function t(e){var i,r,s;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=_d(cp,e),t.next=4,Du(i);case 4:return r=t.sent,s=r.docs.reduce((function(t,e){var i=e.data(),r=Object.keys(i).reduce((function(e,r){var s,n,o;if(![].concat((o=Object.values(qu),function(t){if(Array.isArray(t))return rp(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return rp(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?rp(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["general"]).includes(r))return e;var a=((null===(s=t[r])||void 0===s?void 0:s.sum)||0)+i[r],l=((null===(n=t[r])||void 0===n?void 0:n.count)||0)+1;return np(np({},e),{},op({},r,{sum:a,count:l,avg:a/l}))}),{});return np(np({},t),r)}),{}),t.abrupt("return",s);case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),bp=function(){var t=hp(ap().mark((function t(e){var i,r,s,n,o;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,zp.auth.getCurrentUser();case 3:return i=t.sent,r=i.uid,s=_d(cp,Qu.USERS,r,e),n=mu(s,xu("created_at","desc"),Eu(1)),t.next=9,Du(n);case 9:if((o=t.sent).empty){t.next=12;break}return t.abrupt("return",o.docs[0]);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0);case 17:return t.abrupt("return",null);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),xp=function(t){alert("Error: ".concat(t))};function wp(t){return wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(t)}var Ep=["password"];function Tp(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Sp(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Tp(Object(i),!0).forEach((function(e){Ap(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Tp(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ap(t,e,i){return(e=function(t){var e=function(t){if("object"!=wp(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=wp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wp(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function kp(){kp=function(){return e};var t,e={},i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var n=e&&e.prototype instanceof y?e:y,o=Object.create(n.prototype),a=new M(r||[]);return s(o,"_invoke",{value:k(t,i,a)}),o}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var u="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function y(){}function v(){}function b(){}var x={};h(x,o,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(L([])));E&&E!==i&&r.call(E,o)&&(x=E);var T=b.prototype=y.prototype=Object.create(x);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function i(s,n,o,a){var l=d(t[s],t,n);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==wp(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(c).then((function(t){h.value=t,o(h)}),(function(t){return i("throw",t,o,a)}))}a(l.arg)}var n;s(this,"_invoke",{value:function(t,r){function s(){return new e((function(e,s){i(t,r,e,s)}))}return n=n?n.then(s,s):s()}})}function k(e,i,r){var s=u;return function(n,o){if(s===f)throw Error("Generator is already running");if(s===g){if("throw"===n)throw o;return{value:t,done:!0}}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var l=C(a,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===u)throw s=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=f;var h=d(e,i,r);if("normal"===h.type){if(s=r.done?g:p,h.arg===m)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(s=g,r.method="throw",r.arg=h.arg)}}}function C(e,i){var r=i.method,s=e.iterator[r];if(s===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var n=d(s,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,m;var o=n.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function L(e){if(e||""===e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,n=function i(){for(;++s<e.length;)if(r.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return n.next=n}}throw new TypeError(wp(e)+" is not iterable")}return v.prototype=b,s(T,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:v,configurable:!0}),v.displayName=h(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(A.prototype),h(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,i,r,s,n){void 0===n&&(n=Promise);var o=new A(c(t,i,r,s),n);return e.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(T),h(T,l,"Generator"),h(T,o,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(r,s){return a.type="throw",a.arg=e,i.next=r,s&&(i.method="next",i.arg=t),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),h=r.call(o,"finallyLoc");if(l&&h){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;P(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:L(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function Cp(t,e){if(null==t)return{};var i,r,s=function(t,e){if(null==t)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;i[r]=t[r]}return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)i=n[r],e.includes(i)||{}.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function Ip(t,e,i,r,s,n,o){try{var a=t[n](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(r,s)}function Pp(t){return function(){var e=this,i=arguments;return new Promise((function(r,s){var n=t.apply(e,i);function o(t){Ip(n,r,s,o,a,"next",t)}function a(t){Ip(n,r,s,o,a,"throw",t)}o(void 0)}))}}var Mp=Bd(ds),Lp="user",Op=function(){var t=Pp(kp().mark((function t(i){var r,s,n;return kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.password,s=Cp(i,Ep),t.prev=1,t.next=4,zp.auth.signUp(s.email,r);case 4:return n=t.sent,t.next=7,Ru(Dd(Mp,"users",n.uid),s);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),xp(e);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),Np=function(){var t=Pp(kp().mark((function t(e){var i,r,s;return kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=_d(Mp,Qu.USERS,e,Qu.ATTITUDE),t.next=3,Du(i);case 3:if(!t.sent.empty){t.next=6;break}return t.abrupt("return",!1);case 6:return r=_d(Mp,Qu.USERS,e,Qu.EMOTIONAL_REGULATION),t.next=9,Du(r);case 9:if(!t.sent.empty){t.next=12;break}return t.abrupt("return",!1);case 12:return s=_d(Mp,Qu.USERS,e,Qu.INTERPERSONAL_RELATIONSHIP),t.next=15,Du(s);case 15:if(!t.sent.empty){t.next=18;break}return t.abrupt("return",!1);case 18:return t.abrupt("return",!0);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_p=function(){var t=Pp(kp().mark((function t(e){var i,r,s;return kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=Dd(Mp,"users",e),t.next=4,Nu(i);case 4:if(!(r=t.sent).exists()){t.next=24;break}return t.next=8,r.data();case 8:return s=t.sent,t.t0=sessionStorage,t.t1=Lp,t.t2=JSON,t.t3=Sp,t.t4=Sp({},s),t.t5={},t.next=17,Np(e);case 17:t.t6=t.sent,t.t7={hasAnswerForAllForms:t.t6},t.t8=(0,t.t3)(t.t4,t.t5,t.t7),t.t9=t.t2.stringify.call(t.t2,t.t8),t.t0.setItem.call(t.t0,t.t1,t.t9),t.next=25;break;case 24:throw new Error("User data not found. Contact administrator");case 25:t.next=30;break;case 27:t.prev=27,t.t10=t.catch(0),xp(t.t10);case 30:case"end":return t.stop()}}),t,null,[[0,27]])})));return function(e){return t.apply(this,arguments)}}(),Dp=function(){var t=Pp(kp().mark((function t(){return kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:sessionStorage.removeItem(Lp);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Rp=function(){return!!sessionStorage.getItem("user")},Fp=function(t){var e=JSON.parse(sessionStorage.getItem(Lp));return e?e[t]:null},Bp=function(t,e){var i=JSON.parse(sessionStorage.getItem(Lp));i&&(i[t]=e,sessionStorage.setItem(Lp,JSON.stringify(i)))},zp={auth:t,form:i,user:s};function Up(t){return Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(t)}zp.auth.checkAuthState();var Hp=["general"],Vp=["general"];function jp(t){return function(t){if(Array.isArray(t))return Gp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Gp(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Gp(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function Wp(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Xp(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Wp(Object(i),!0).forEach((function(e){qp(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Wp(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function qp(t,e,i){return(e=function(t){var e=function(t){if("object"!=Up(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=Up(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Up(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Yp(t,e){if(null==t)return{};var i,r,s=function(t,e){if(null==t)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;i[r]=t[r]}return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)i=n[r],e.includes(i)||{}.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function Kp(){Kp=function(){return e};var t,e={},i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var n=e&&e.prototype instanceof y?e:y,o=Object.create(n.prototype),a=new M(r||[]);return s(o,"_invoke",{value:k(t,i,a)}),o}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var u="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function y(){}function v(){}function b(){}var x={};h(x,o,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(L([])));E&&E!==i&&r.call(E,o)&&(x=E);var T=b.prototype=y.prototype=Object.create(x);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function i(s,n,o,a){var l=d(t[s],t,n);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==Up(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(c).then((function(t){h.value=t,o(h)}),(function(t){return i("throw",t,o,a)}))}a(l.arg)}var n;s(this,"_invoke",{value:function(t,r){function s(){return new e((function(e,s){i(t,r,e,s)}))}return n=n?n.then(s,s):s()}})}function k(e,i,r){var s=u;return function(n,o){if(s===f)throw Error("Generator is already running");if(s===g){if("throw"===n)throw o;return{value:t,done:!0}}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var l=C(a,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===u)throw s=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=f;var h=d(e,i,r);if("normal"===h.type){if(s=r.done?g:p,h.arg===m)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(s=g,r.method="throw",r.arg=h.arg)}}}function C(e,i){var r=i.method,s=e.iterator[r];if(s===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var n=d(s,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,m;var o=n.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function L(e){if(e||""===e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,n=function i(){for(;++s<e.length;)if(r.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return n.next=n}}throw new TypeError(Up(e)+" is not iterable")}return v.prototype=b,s(T,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:v,configurable:!0}),v.displayName=h(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(A.prototype),h(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,i,r,s,n){void 0===n&&(n=Promise);var o=new A(c(t,i,r,s),n);return e.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(T),h(T,l,"Generator"),h(T,o,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(r,s){return a.type="throw",a.arg=e,i.next=r,s&&(i.method="next",i.arg=t),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),h=r.call(o,"finallyLoc");if(l&&h){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;P(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:L(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function $p(t,e,i,r,s,n,o){try{var a=t[n](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(r,s)}function Qp(t){return function(){var e=this,i=arguments;return new Promise((function(r,s){var n=t.apply(e,i);function o(t){$p(n,r,s,o,a,"next",t)}function a(t){$p(n,r,s,o,a,"throw",t)}o(void 0)}))}}document.querySelector("#btn-all-forms").addEventListener("click",Qp(Kp().mark((function t(){var e,i;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zp.form.getUserCurrentFormStep();case 2:e=t.sent,i="",t.t0=e,t.next=1===t.t0?7:2===t.t0?9:11;break;case 7:return i=Xu.INTERPERSONAL_RELATIONSHIP,t.abrupt("break",13);case 9:return i=Xu.EMOTIONAL_REGULATION,t.abrupt("break",13);case 11:return i=Xu.ATTITUDE,t.abrupt("break",13);case 13:window.location="".concat("/neurotreino","/questionnaires/").concat(i,"/");case 14:case"end":return t.stop()}}),t)}))));var Zp=function(){var t=Qp(Kp().mark((function t(e){var i,r,s,n,o,a,l,h,c;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zp.form.getUserLatestResult(e);case 2:return i=t.sent,r=i.empty?null:i.data(),s=r.general,n=Yp(r,Hp),t.next=6,zp.form.getGeneralFormCategoriesAverage(e);case 6:return o=t.sent,a=o.general,l=Yp(o,Vp),h=Object.keys(l).reduce((function(t,e){return Xp(Xp({},t),{},{keys:[].concat(jp(t.keys),[e]),names:[].concat(jp(t.names),[Yu[e]]),avgs:[].concat(jp(t.avgs),[l[e].avg])})}),{keys:[],names:[],avgs:[]}),c=h.keys.reduce((function(t,e){var i,r,s,o=null===(i=l[e])||void 0===i?void 0:i.avg,a=null!=o;return[{name:"Média Geral",data:[].concat(jp((null===(r=t[0])||void 0===r?void 0:r.data)||[]),[o||0])},{name:"Sua Nota",data:[].concat(jp((null===(s=t[1])||void 0===s?void 0:s.data)||[]),[a?n[e]:0])}]}),[]),t.abrupt("return",{categories:h.names,series:c,formAvg:{general:a.avg,user:s}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Jp=function(t,e){var i=e.title,r=e.categories,s=e.series;o.chart(t,{chart:{polar:!0},accessibility:{description:"Gráfico com a comparação dos seus resultado com a média das pessoas"},title:{text:i,x:0},pane:{size:"80%"},xAxis:{categories:r,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.2f}</b><br/>'},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},series:s.map((function(t){return Xp(Xp({},t),{},{pointPlacement:"on"})})),responsive:{rules:[{condition:{maxWidth:400},chartOptions:{title:{x:0},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},pane:{size:"70%"}}}]}})},tf=function(t,e){var i=e.title,r=e.categories,s=e.series;n.chart(t,{chart:{type:"bar"},accessibility:{description:"Gráfico com a comparação dos seus resultado com a média das pessoas"},title:{text:i},xAxis:{categories:r,title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"Resultados",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.2f}</b><br/>'},plotOptions:{bar:{borderRadius:"50%",dataLabels:{enabled:!0},groupPadding:.1},series:{dataLabels:{enabled:!0,formatter:function(){return n.numberFormat(this.y,2)}}}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},credits:{enabled:!1},series:s})},ef=function(){var t=Qp(Kp().mark((function t(){var e,i,r,s;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp(Xu.ATTITUDE);case 2:return e=t.sent,i=e.categories,r=e.series,s=e.formAvg,tf("attitude-chart-container",{title:"Atitude",categories:i,series:r}),t.abrupt("return",Xp({title:"Atitude"},s));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),rf=function(){var t=Qp(Kp().mark((function t(){var e,i,r,s;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp(Xu.INTERPERSONAL_RELATIONSHIP);case 2:return e=t.sent,i=e.categories,r=e.series,s=e.formAvg,Jp("interpersonal-relationship-chart-container",{title:"Relação Interpessoal",categories:i,series:r}),t.abrupt("return",Xp({title:"Relação Interpessoal"},s));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),sf=function(){var t=Qp(Kp().mark((function t(){var e,i,r,s;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp(Xu.EMOTIONAL_REGULATION);case 2:return e=t.sent,i=e.categories,r=e.series,s=e.formAvg,Jp("emotional-regulation-chart-container",{title:"Regulação Emocional",categories:i,series:r}),t.abrupt("return",Xp({title:"Regulação Emocional"},s));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nf=function(){var t=Qp(Kp().mark((function t(){var e,i,r,s;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=zp.user.getUserData("hasAnswerForAllForms"),document.querySelector("#coach-name").innerText=zp.user.getUserData("name"),i){t.next=5;break}return document.querySelector("#first-access").classList.remove("display-none"),t.abrupt("return");case 5:return document.querySelector("#interface").classList.remove("display-none"),null===(e=document.getElementById("logout-btn"))||void 0===e||e.addEventListener("click",Qp(Kp().mark((function t(){return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zp.auth.signOut();case 2:window.location="".concat("/neurotreino","/");case 3:case"end":return t.stop()}}),t)})))),t.next=9,Promise.all([ef(),rf(),sf()]);case 9:r=t.sent,s=r.reduce((function(t,e){var i,r;return{categories:[].concat(jp(t.categories),[e.title]),series:[{name:"Média Geral",data:[].concat(jp((null===(i=t.series[0])||void 0===i?void 0:i.data)||[]),[e.general])},{name:"Sua Nota",data:[].concat(jp((null===(r=t.series[1])||void 0===r?void 0:r.data)||[]),[e.user])}]}}),{categories:[],series:[]}),Jp("general-chart-container",{title:"Geral",categories:s.categories,series:s.series});case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();zp.auth.addAuthStateListener(function(){var t=Qp(Kp().mark((function t(e){var i;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&(i=setInterval((function(){zp.user.hasUserData()&&(clearInterval(i),nf())}),100));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})()})();